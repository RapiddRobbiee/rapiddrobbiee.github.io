(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function qm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Tw(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var o=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return i[r]}})}),n}var Fh={exports:{}},uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function ww(){if(Zy)return uu;Zy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:u}}return uu.Fragment=e,uu.jsx=n,uu.jsxs=n,uu}var Jy;function Aw(){return Jy||(Jy=1,Fh.exports=ww()),Fh.exports}var S=Aw(),Hh={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function Iw(){if(ev)return et;ev=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function N(B){return B===null||typeof B!="object"?null:(B=A&&B[A]||B["@@iterator"],typeof B=="function"?B:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,Q={};function $(B,fe,Se){this.props=B,this.context=fe,this.refs=Q,this.updater=Se||M}$.prototype.isReactComponent={},$.prototype.setState=function(B,fe){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,fe,"setState")},$.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function re(){}re.prototype=$.prototype;function pe(B,fe,Se){this.props=B,this.context=fe,this.refs=Q,this.updater=Se||M}var _e=pe.prototype=new re;_e.constructor=pe,X(_e,$.prototype),_e.isPureReactComponent=!0;var ie=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},ce=Object.prototype.hasOwnProperty;function I(B,fe,Se,me,ye,ge){return Se=ge.ref,{$$typeof:i,type:B,key:fe,ref:Se!==void 0?Se:null,props:ge}}function k(B,fe){return I(B.type,fe,void 0,void 0,void 0,B.props)}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}function C(B){var fe={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Se){return fe[Se]})}var L=/\/+/g;function q(B,fe){return typeof B=="object"&&B!==null&&B.key!=null?C(""+B.key):fe.toString(36)}function P(){}function Ke(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(P,P):(B.status="pending",B.then(function(fe){B.status==="pending"&&(B.status="fulfilled",B.value=fe)},function(fe){B.status==="pending"&&(B.status="rejected",B.reason=fe)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function yt(B,fe,Se,me,ye){var ge=typeof B;(ge==="undefined"||ge==="boolean")&&(B=null);var te=!1;if(B===null)te=!0;else switch(ge){case"bigint":case"string":case"number":te=!0;break;case"object":switch(B.$$typeof){case i:case e:te=!0;break;case E:return te=B._init,yt(te(B._payload),fe,Se,me,ye)}}if(te)return ye=ye(B),te=me===""?"."+q(B,0):me,ie(ye)?(Se="",te!=null&&(Se=te.replace(L,"$&/")+"/"),yt(ye,fe,Se,"",function(Je){return Je})):ye!=null&&(O(ye)&&(ye=k(ye,Se+(ye.key==null||B&&B.key===ye.key?"":(""+ye.key).replace(L,"$&/")+"/")+te)),fe.push(ye)),1;te=0;var we=me===""?".":me+":";if(ie(B))for(var xe=0;xe<B.length;xe++)me=B[xe],ge=we+q(me,xe),te+=yt(me,fe,Se,ge,ye);else if(xe=N(B),typeof xe=="function")for(B=xe.call(B),xe=0;!(me=B.next()).done;)me=me.value,ge=we+q(me,xe++),te+=yt(me,fe,Se,ge,ye);else if(ge==="object"){if(typeof B.then=="function")return yt(Ke(B),fe,Se,me,ye);throw fe=String(B),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return te}function ae(B,fe,Se){if(B==null)return B;var me=[],ye=0;return yt(B,me,"","",function(ge){return fe.call(Se,ge,ye++)}),me}function Te(B){if(B._status===-1){var fe=B._result;fe=fe(),fe.then(function(Se){(B._status===0||B._status===-1)&&(B._status=1,B._result=Se)},function(Se){(B._status===0||B._status===-1)&&(B._status=2,B._result=Se)}),B._status===-1&&(B._status=0,B._result=fe)}if(B._status===1)return B._result.default;throw B._result}var Ne=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function nt(){}return et.Children={map:ae,forEach:function(B,fe,Se){ae(B,function(){fe.apply(this,arguments)},Se)},count:function(B){var fe=0;return ae(B,function(){fe++}),fe},toArray:function(B){return ae(B,function(fe){return fe})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},et.Component=$,et.Fragment=n,et.Profiler=o,et.PureComponent=pe,et.StrictMode=r,et.Suspense=y,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,et.__COMPILER_RUNTIME={__proto__:null,c:function(B){return F.H.useMemoCache(B)}},et.cache=function(B){return function(){return B.apply(null,arguments)}},et.cloneElement=function(B,fe,Se){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var me=X({},B.props),ye=B.key,ge=void 0;if(fe!=null)for(te in fe.ref!==void 0&&(ge=void 0),fe.key!==void 0&&(ye=""+fe.key),fe)!ce.call(fe,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&fe.ref===void 0||(me[te]=fe[te]);var te=arguments.length-2;if(te===1)me.children=Se;else if(1<te){for(var we=Array(te),xe=0;xe<te;xe++)we[xe]=arguments[xe+2];me.children=we}return I(B.type,ye,void 0,void 0,ge,me)},et.createContext=function(B){return B={$$typeof:f,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},et.createElement=function(B,fe,Se){var me,ye={},ge=null;if(fe!=null)for(me in fe.key!==void 0&&(ge=""+fe.key),fe)ce.call(fe,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(ye[me]=fe[me]);var te=arguments.length-2;if(te===1)ye.children=Se;else if(1<te){for(var we=Array(te),xe=0;xe<te;xe++)we[xe]=arguments[xe+2];ye.children=we}if(B&&B.defaultProps)for(me in te=B.defaultProps,te)ye[me]===void 0&&(ye[me]=te[me]);return I(B,ge,void 0,void 0,null,ye)},et.createRef=function(){return{current:null}},et.forwardRef=function(B){return{$$typeof:g,render:B}},et.isValidElement=O,et.lazy=function(B){return{$$typeof:E,_payload:{_status:-1,_result:B},_init:Te}},et.memo=function(B,fe){return{$$typeof:p,type:B,compare:fe===void 0?null:fe}},et.startTransition=function(B){var fe=F.T,Se={};F.T=Se;try{var me=B(),ye=F.S;ye!==null&&ye(Se,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(nt,Ne)}catch(ge){Ne(ge)}finally{F.T=fe}},et.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},et.use=function(B){return F.H.use(B)},et.useActionState=function(B,fe,Se){return F.H.useActionState(B,fe,Se)},et.useCallback=function(B,fe){return F.H.useCallback(B,fe)},et.useContext=function(B){return F.H.useContext(B)},et.useDebugValue=function(){},et.useDeferredValue=function(B,fe){return F.H.useDeferredValue(B,fe)},et.useEffect=function(B,fe,Se){var me=F.H;if(typeof Se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return me.useEffect(B,fe)},et.useId=function(){return F.H.useId()},et.useImperativeHandle=function(B,fe,Se){return F.H.useImperativeHandle(B,fe,Se)},et.useInsertionEffect=function(B,fe){return F.H.useInsertionEffect(B,fe)},et.useLayoutEffect=function(B,fe){return F.H.useLayoutEffect(B,fe)},et.useMemo=function(B,fe){return F.H.useMemo(B,fe)},et.useOptimistic=function(B,fe){return F.H.useOptimistic(B,fe)},et.useReducer=function(B,fe,Se){return F.H.useReducer(B,fe,Se)},et.useRef=function(B){return F.H.useRef(B)},et.useState=function(B){return F.H.useState(B)},et.useSyncExternalStore=function(B,fe,Se){return F.H.useSyncExternalStore(B,fe,Se)},et.useTransition=function(){return F.H.useTransition()},et.version="19.1.0",et}var tv;function zm(){return tv||(tv=1,Hh.exports=Iw()),Hh.exports}var Oe=zm();const Cw=qm(Oe);var Gh={exports:{}},cu={},Kh={exports:{}},$h={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function xw(){return nv||(nv=1,function(i){function e(ae,Te){var Ne=ae.length;ae.push(Te);e:for(;0<Ne;){var nt=Ne-1>>>1,B=ae[nt];if(0<o(B,Te))ae[nt]=Te,ae[Ne]=B,Ne=nt;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var Te=ae[0],Ne=ae.pop();if(Ne!==Te){ae[0]=Ne;e:for(var nt=0,B=ae.length,fe=B>>>1;nt<fe;){var Se=2*(nt+1)-1,me=ae[Se],ye=Se+1,ge=ae[ye];if(0>o(me,Ne))ye<B&&0>o(ge,me)?(ae[nt]=ge,ae[ye]=Ne,nt=ye):(ae[nt]=me,ae[Se]=Ne,nt=Se);else if(ye<B&&0>o(ge,Ne))ae[nt]=ge,ae[ye]=Ne,nt=ye;else break e}}return Te}function o(ae,Te){var Ne=ae.sortIndex-Te.sortIndex;return Ne!==0?Ne:ae.id-Te.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var y=[],p=[],E=1,A=null,N=3,M=!1,X=!1,Q=!1,$=!1,re=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;function ie(ae){for(var Te=n(p);Te!==null;){if(Te.callback===null)r(p);else if(Te.startTime<=ae)r(p),Te.sortIndex=Te.expirationTime,e(y,Te);else break;Te=n(p)}}function F(ae){if(Q=!1,ie(ae),!X)if(n(y)!==null)X=!0,ce||(ce=!0,q());else{var Te=n(p);Te!==null&&yt(F,Te.startTime-ae)}}var ce=!1,I=-1,k=5,O=-1;function C(){return $?!0:!(i.unstable_now()-O<k)}function L(){if($=!1,ce){var ae=i.unstable_now();O=ae;var Te=!0;try{e:{X=!1,Q&&(Q=!1,pe(I),I=-1),M=!0;var Ne=N;try{t:{for(ie(ae),A=n(y);A!==null&&!(A.expirationTime>ae&&C());){var nt=A.callback;if(typeof nt=="function"){A.callback=null,N=A.priorityLevel;var B=nt(A.expirationTime<=ae);if(ae=i.unstable_now(),typeof B=="function"){A.callback=B,ie(ae),Te=!0;break t}A===n(y)&&r(y),ie(ae)}else r(y);A=n(y)}if(A!==null)Te=!0;else{var fe=n(p);fe!==null&&yt(F,fe.startTime-ae),Te=!1}}break e}finally{A=null,N=Ne,M=!1}Te=void 0}}finally{Te?q():ce=!1}}}var q;if(typeof _e=="function")q=function(){_e(L)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ke=P.port2;P.port1.onmessage=L,q=function(){Ke.postMessage(null)}}else q=function(){re(L,0)};function yt(ae,Te){I=re(function(){ae(i.unstable_now())},Te)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ae){ae.callback=null},i.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ae?Math.floor(1e3/ae):5},i.unstable_getCurrentPriorityLevel=function(){return N},i.unstable_next=function(ae){switch(N){case 1:case 2:case 3:var Te=3;break;default:Te=N}var Ne=N;N=Te;try{return ae()}finally{N=Ne}},i.unstable_requestPaint=function(){$=!0},i.unstable_runWithPriority=function(ae,Te){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var Ne=N;N=ae;try{return Te()}finally{N=Ne}},i.unstable_scheduleCallback=function(ae,Te,Ne){var nt=i.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?nt+Ne:nt):Ne=nt,ae){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Ne+B,ae={id:E++,callback:Te,priorityLevel:ae,startTime:Ne,expirationTime:B,sortIndex:-1},Ne>nt?(ae.sortIndex=Ne,e(p,ae),n(y)===null&&ae===n(p)&&(Q?(pe(I),I=-1):Q=!0,yt(F,Ne-nt))):(ae.sortIndex=B,e(y,ae),X||M||(X=!0,ce||(ce=!0,q()))),ae},i.unstable_shouldYield=C,i.unstable_wrapCallback=function(ae){var Te=N;return function(){var Ne=N;N=Te;try{return ae.apply(this,arguments)}finally{N=Ne}}}}($h)),$h}var iv;function Rw(){return iv||(iv=1,Kh.exports=xw()),Kh.exports}var Yh={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function kw(){if(av)return Gn;av=1;var i=zm();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,p,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:y,containerInfo:p,implementation:E}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Gn.createPortal=function(y,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(y,p,null,E)},Gn.flushSync=function(y){var p=f.T,E=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=p,r.p=E,r.d.f()}},Gn.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(y,p))},Gn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},Gn.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var E=p.as,A=g(E,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,M=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:A,integrity:N,fetchPriority:M}):E==="script"&&r.d.X(y,{crossOrigin:A,integrity:N,fetchPriority:M,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Gn.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=g(p.as,p.crossOrigin);r.d.M(y,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(y)},Gn.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,A=g(E,p.crossOrigin);r.d.L(y,E,{crossOrigin:A,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Gn.preloadModule=function(y,p){if(typeof y=="string")if(p){var E=g(p.as,p.crossOrigin);r.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(y)},Gn.requestFormReset=function(y){r.d.r(y)},Gn.unstable_batchedUpdates=function(y,p){return y(p)},Gn.useFormState=function(y,p,E){return f.H.useFormState(y,p,E)},Gn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Gn.version="19.1.0",Gn}var rv;function Nw(){if(rv)return Yh.exports;rv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Yh.exports=kw(),Yh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sv;function Dw(){if(sv)return cu;sv=1;var i=Rw(),e=zm(),n=Nw();function r(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function f(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function y(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(r(188));return a!==t?null:t}for(var s=t,l=a;;){var d=s.return;if(d===null)break;var m=d.alternate;if(m===null){if(l=d.return,l!==null){s=l;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===s)return g(d),t;if(m===l)return g(d),a;m=m.sibling}throw Error(r(188))}if(s.return!==l.return)s=d,l=m;else{for(var w=!1,x=d.child;x;){if(x===s){w=!0,s=d,l=m;break}if(x===l){w=!0,l=d,s=m;break}x=x.sibling}if(!w){for(x=m.child;x;){if(x===s){w=!0,s=m,l=d;break}if(x===l){w=!0,l=m,s=d;break}x=x.sibling}if(!w)throw Error(r(189))}}if(s.alternate!==l)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:a}function p(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=p(t),a!==null)return a;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),pe=Symbol.for("react.consumer"),_e=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=L&&t[L]||t["@@iterator"],typeof t=="function"?t:null)}var P=Symbol.for("react.client.reference");function Ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===P?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case $:return"Profiler";case Q:return"StrictMode";case F:return"Suspense";case ce:return"SuspenseList";case O:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case M:return"Portal";case _e:return(t.displayName||"Context")+".Provider";case pe:return(t._context.displayName||"Context")+".Consumer";case ie:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return a=t.displayName||null,a!==null?a:Ke(t.type)||"Memo";case k:a=t._payload,t=t._init;try{return Ke(t(a))}catch{}}return null}var yt=Array.isArray,ae=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},nt=[],B=-1;function fe(t){return{current:t}}function Se(t){0>B||(t.current=nt[B],nt[B]=null,B--)}function me(t,a){B++,nt[B]=t.current,t.current=a}var ye=fe(null),ge=fe(null),te=fe(null),we=fe(null);function xe(t,a){switch(me(te,a),me(ge,t),me(ye,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Iy(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Iy(a),t=Cy(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Se(ye),me(ye,t)}function Je(){Se(ye),Se(ge),Se(te)}function Ze(t){t.memoizedState!==null&&me(we,t);var a=ye.current,s=Cy(a,t.type);a!==s&&(me(ge,t),me(ye,s))}function pt(t){ge.current===t&&(Se(ye),Se(ge)),we.current===t&&(Se(we),au._currentValue=Ne)}var We=Object.prototype.hasOwnProperty,Ce=i.unstable_scheduleCallback,rt=i.unstable_cancelCallback,Di=i.unstable_shouldYield,on=i.unstable_requestPaint,Gt=i.unstable_now,Oi=i.unstable_getCurrentPriorityLevel,vt=i.unstable_ImmediatePriority,jn=i.unstable_UserBlockingPriority,qe=i.unstable_NormalPriority,st=i.unstable_LowPriority,Vt=i.unstable_IdlePriority,si=i.log,co=i.unstable_setDisableYieldValue,jt=null,ft=null;function Cn(t){if(typeof si=="function"&&co(t),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(jt,t)}catch{}}var Kt=Math.clz32?Math.clz32:ha,Xi=Math.log,fo=Math.LN2;function ha(t){return t>>>=0,t===0?32:31-(Xi(t)/fo|0)|0}var ma=256,za=4194304;function _i(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function yr(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var d=0,m=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var x=l&134217727;return x!==0?(l=x&~m,l!==0?d=_i(l):(w&=x,w!==0?d=_i(w):s||(s=x&~t,s!==0&&(d=_i(s))))):(x=l&~m,x!==0?d=_i(x):w!==0?d=_i(w):s||(s=l&~t,s!==0&&(d=_i(s)))),d===0?0:a!==0&&a!==d&&(a&m)===0&&(m=d&-d,s=a&-a,m>=s||m===32&&(s&4194048)!==0)?a:d}function pa(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Qe(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vr(){var t=ma;return ma<<=1,(ma&4194048)===0&&(ma=256),t}function Fa(){var t=za;return za<<=1,(za&62914560)===0&&(za=4194304),t}function Pi(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function Zn(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ss(t,a,s,l,d,m){var w=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var x=t.entanglements,j=t.expirationTimes,Y=t.hiddenUpdates;for(s=w&~s;0<s;){var se=31-Kt(s),de=1<<se;x[se]=0,j[se]=-1;var W=Y[se];if(W!==null)for(Y[se]=null,se=0;se<W.length;se++){var J=W[se];J!==null&&(J.lane&=-536870913)}s&=~de}l!==0&&hn(t,l,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(w&~a))}function hn(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Kt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function br(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-Kt(s),d=1<<l;d&a|t[l]&a&&(t[l]|=a),s&=~d}}function Ee(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ga(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function $t(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:Ky(t.type))}function _a(t,a){var s=Te.p;try{return Te.p=t,a()}finally{Te.p=s}}var Ct=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Ct,xt="__reactProps$"+Ct,Jn="__reactContainer$"+Ct,vn="__reactEvents$"+Ct,ho="__reactListeners$"+Ct,ei="__reactHandles$"+Ct,Ts="__reactResources$"+Ct,ya="__reactMarker$"+Ct;function va(t){delete t[Xt],delete t[xt],delete t[vn],delete t[ho],delete t[ei]}function Ut(t){var a=t[Xt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[Jn]||s[Xt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=Ny(t);t!==null;){if(s=t[Xt])return s;t=Ny(t)}return a}t=s,s=t.parentNode}return null}function yi(t){if(t=t[Xt]||t[Jn]){var a=t.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return t}return null}function Mi(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(r(33))}function mn(t){var a=t[Ts];return a||(a=t[Ts]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function zt(t){t[ya]=!0}var ba=new Set,xn={};function Un(t,a){vi(t,a),vi(t+"Capture",a)}function vi(t,a){for(xn[t]=a,t=0;t<a.length;t++)ba.add(a[t])}var ws=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),As={},Ea={};function Sa(t){return We.call(Ea,t)?!0:We.call(As,t)?!1:ws.test(t)?Ea[t]=!0:(As[t]=!0,!1)}function Wi(t,a,s){if(Sa(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function ti(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function ln(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}var oi,Er;function Li(t){if(oi===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);oi=a&&a[1]||"",Er=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oi+t+Er}var Ha=!1;function Ga(t,a){if(!t||Ha)return"";Ha=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(J){var W=J}Reflect.construct(t,[],de)}else{try{de.call()}catch(J){W=J}t.call(de.prototype)}}else{try{throw Error()}catch(J){W=J}(de=t())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(J){if(J&&W&&typeof J.stack=="string")return[J.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),w=m[0],x=m[1];if(w&&x){var j=w.split(`
`),Y=x.split(`
`);for(d=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;if(l===j.length||d===Y.length)for(l=j.length-1,d=Y.length-1;1<=l&&0<=d&&j[l]!==Y[d];)d--;for(;1<=l&&0<=d;l--,d--)if(j[l]!==Y[d]){if(l!==1||d!==1)do if(l--,d--,0>d||j[l]!==Y[d]){var se=`
`+j[l].replace(" at new "," at ");return t.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",t.displayName)),se}while(1<=l&&0<=d);break}}}finally{Ha=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Li(s):""}function Is(t){switch(t.tag){case 26:case 27:case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 15:return Ga(t.type,!1);case 11:return Ga(t.type.render,!1);case 1:return Ga(t.type,!0);case 31:return Li("Activity");default:return""}}function Ka(t){try{var a="";do a+=Is(t),t=t.return;while(t);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zi(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function mo(t){var a=Zi(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),l=""+t[a];if(!t.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,m=s.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return d.call(this)},set:function(w){l=""+w,m.call(this,w)}}),Object.defineProperty(t,a,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function gt(t){t._valueTracker||(t._valueTracker=mo(t))}function Ji(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=Zi(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function ea(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ta=/[\n"\\]/g;function Bt(t){return t.replace(ta,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function En(t,a,s,l,d,m,w,x){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),a!=null?w==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+bn(a)):t.value!==""+bn(a)&&(t.value=""+bn(a)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),a!=null?li(t,w,bn(a)):s!=null?li(t,w,bn(s)):l!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.name=""+bn(x):t.removeAttribute("name")}function Vi(t,a,s,l,d,m,w,x){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),a!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||a!=null))return;s=s!=null?""+bn(s):"",a=a!=null?""+bn(a):s,x||a===t.value||(t.value=a),t.defaultValue=a}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=x?t.checked:!!l,t.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w)}function li(t,a,s){a==="number"&&ea(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function na(t,a,s,l){if(t=t.options,a){a={};for(var d=0;d<s.length;d++)a["$"+s[d]]=!0;for(s=0;s<t.length;s++)d=a.hasOwnProperty("$"+t[s].value),t[s].selected!==d&&(t[s].selected=d),d&&l&&(t[s].defaultSelected=!0)}else{for(s=""+bn(s),a=null,d=0;d<t.length;d++){if(t[d].value===s){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}a!==null||t[d].disabled||(a=t[d])}a!==null&&(a.selected=!0)}}function St(t,a,s){if(a!=null&&(a=""+bn(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+bn(s):""}function Ta(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(r(92));if(yt(l)){if(1<l.length)throw Error(r(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=bn(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function Bn(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var wa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sr(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||wa.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function $a(t,a,s){if(a!=null&&typeof a!="object")throw Error(r(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in a)l=a[d],a.hasOwnProperty(d)&&s[d]!==l&&Sr(t,d,l)}else for(var m in a)a.hasOwnProperty(m)&&Sr(t,m,a[m])}function Cs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ui(t){return wr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var bi=null;function Wt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qn=null,ci=null;function Ar(t){var a=yi(t);if(a&&(t=a.stateNode)){var s=t[xt]||null;e:switch(t=a.stateNode,a.type){case"input":if(En(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Bt(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var d=l[xt]||null;if(!d)throw Error(r(90));En(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&Ji(l)}break e;case"textarea":St(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&na(t,!!s.multiple,a,!1)}}}var ji=!1;function De(t,a,s){if(ji)return t(a,s);ji=!0;try{var l=t(a);return l}finally{if(ji=!1,(qn!==null||ci!==null)&&(wc(),qn&&(a=qn,t=ci,ci=qn=null,Ar(a),t)))for(a=0;a<t.length;a++)Ar(t[a])}}function Aa(t,a){var s=t.stateNode;if(s===null)return null;var l=s[xt]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,a,typeof s));return s}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rn=!1;if(zn)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{Rn=!1}var Fn=null,di=null,Sn=null;function Ca(){if(Sn)return Sn;var t,a=di,s=a.length,l,d="value"in Fn?Fn.value:Fn.textContent,m=d.length;for(t=0;t<s&&a[t]===d[t];t++);var w=s-t;for(l=1;l<=w&&a[s-l]===d[m-l];l++);return Sn=d.slice(t,1<l?1-l:void 0)}function Ei(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function h(){return!0}function _(){return!1}function b(t){function a(s,l,d,m,w){this._reactName=s,this._targetInst=d,this.type=l,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(s=t[x],this[x]=s?s(m):m[x]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?h:_,this.isPropagationStopped=_,this}return E(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=h)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=h)},persist:function(){},isPersistent:h}),a}var R={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U=b(R),Z=E({},R,{view:0,detail:0}),le=b(Z),Le,tt,Ve,Rt=E({},Z,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ve&&(Ve&&t.type==="mousemove"?(Le=t.screenX-Ve.screenX,tt=t.screenY-Ve.screenY):tt=Le=0,Ve=t),Le)},movementY:function(t){return"movementY"in t?t.movementY:tt}}),bt=b(Rt),xs=E({},Rt,{dataTransfer:0}),Sl=b(xs),xa=E({},Z,{relatedTarget:0}),Ir=b(xa),Cr=E({},R,{animationName:0,elapsedTime:0,pseudoElement:0}),xr=b(Cr),po=E({},R,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rr=b(po),Tl=E({},R,{data:0}),Rs=b(Tl),Ya={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},go={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=_o[t])?!!a[t]:!1}function Qa(){return kr}var yo=E({},Z,{key:function(t){if(t.key){var a=Ya[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Ei(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?go[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qa,charCode:function(t){return t.type==="keypress"?Ei(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ei(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nr=b(yo),vo=E({},Rt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ks=b(vo),ia=E({},Z,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qa}),bo=b(ia),Ns=E({},R,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eo=b(Ns),So=E({},Rt,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dr=b(So),kn=E({},R,{newState:0,oldState:0}),To=b(kn),wo=[9,13,27,32],Si=zn&&"CompositionEvent"in window,c=null;zn&&"documentMode"in document&&(c=document.documentMode);var v=zn&&"TextEvent"in window&&!c,T=zn&&(!Si||c&&8<c&&11>=c),D=" ",G=!1;function ee(t,a){switch(t){case"keyup":return wo.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ne=!1;function Ie(t,a){switch(t){case"compositionend":return V(a);case"keypress":return a.which!==32?null:(G=!0,D);case"textInput":return t=a.data,t===D&&G?null:t;default:return null}}function Ae(t,a){if(ne)return t==="compositionend"||!Si&&ee(t,a)?(t=Ca(),Sn=di=Fn=null,ne=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return T&&a.locale!=="ko"?null:a.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $e(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Pe[t.type]:a==="textarea"}function tn(t,a,s,l){qn?ci?ci.push(l):ci=[l]:qn=l,a=kc(a,"onChange"),0<a.length&&(s=new U("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var Tt=null,Ft=null;function Nn(t){Ey(t,0)}function Or(t){var a=Mi(t);if(Ji(a))return t}function Ra(t,a){if(t==="change")return a}var Gu=!1;if(zn){var Zd;if(zn){var Jd="oninput"in document;if(!Jd){var Hp=document.createElement("div");Hp.setAttribute("oninput","return;"),Jd=typeof Hp.oninput=="function"}Zd=Jd}else Zd=!1;Gu=Zd&&(!document.documentMode||9<document.documentMode)}function Gp(){Tt&&(Tt.detachEvent("onpropertychange",Kp),Ft=Tt=null)}function Kp(t){if(t.propertyName==="value"&&Or(Ft)){var a=[];tn(a,Ft,t,Wt(t)),De(Nn,a)}}function JS(t,a,s){t==="focusin"?(Gp(),Tt=a,Ft=s,Tt.attachEvent("onpropertychange",Kp)):t==="focusout"&&Gp()}function eT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Or(Ft)}function tT(t,a){if(t==="click")return Or(a)}function nT(t,a){if(t==="input"||t==="change")return Or(a)}function iT(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Ti=typeof Object.is=="function"?Object.is:iT;function wl(t,a){if(Ti(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var d=s[l];if(!We.call(a,d)||!Ti(t[d],a[d]))return!1}return!0}function $p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yp(t,a){var s=$p(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$p(s)}}function Qp(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Qp(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Xp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=ea(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=ea(t.document)}return a}function ef(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var aT=zn&&"documentMode"in document&&11>=document.documentMode,Ao=null,tf=null,Al=null,nf=!1;function Wp(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;nf||Ao==null||Ao!==ea(l)||(l=Ao,"selectionStart"in l&&ef(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Al&&wl(Al,l)||(Al=l,l=kc(tf,"onSelect"),0<l.length&&(a=new U("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=Ao)))}function Ds(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var Io={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionrun:Ds("Transition","TransitionRun"),transitionstart:Ds("Transition","TransitionStart"),transitioncancel:Ds("Transition","TransitionCancel"),transitionend:Ds("Transition","TransitionEnd")},af={},Zp={};zn&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Os(t){if(af[t])return af[t];if(!Io[t])return t;var a=Io[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in Zp)return af[t]=a[s];return t}var Jp=Os("animationend"),eg=Os("animationiteration"),tg=Os("animationstart"),rT=Os("transitionrun"),sT=Os("transitionstart"),oT=Os("transitioncancel"),ng=Os("transitionend"),ig=new Map,rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rf.push("scrollEnd");function aa(t,a){ig.set(t,a),Un(a,[t])}var ag=new WeakMap;function Ui(t,a){if(typeof t=="object"&&t!==null){var s=ag.get(t);return s!==void 0?s:(a={value:t,source:a,stack:Ka(a)},ag.set(t,a),a)}return{value:t,source:a,stack:Ka(a)}}var Bi=[],Co=0,sf=0;function Ku(){for(var t=Co,a=sf=Co=0;a<t;){var s=Bi[a];Bi[a++]=null;var l=Bi[a];Bi[a++]=null;var d=Bi[a];Bi[a++]=null;var m=Bi[a];if(Bi[a++]=null,l!==null&&d!==null){var w=l.pending;w===null?d.next=d:(d.next=w.next,w.next=d),l.pending=d}m!==0&&rg(s,d,m)}}function $u(t,a,s,l){Bi[Co++]=t,Bi[Co++]=a,Bi[Co++]=s,Bi[Co++]=l,sf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function of(t,a,s,l){return $u(t,a,s,l),Yu(t)}function xo(t,a){return $u(t,null,null,a),Yu(t)}function rg(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var d=!1,m=t.return;m!==null;)m.childLanes|=s,l=m.alternate,l!==null&&(l.childLanes|=s),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&a!==null&&(d=31-Kt(s),t=m.hiddenUpdates,l=t[d],l===null?t[d]=[a]:l.push(a),a.lane=s|536870912),m):null}function Yu(t){if(50<Xl)throw Xl=0,hh=null,Error(r(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Ro={};function lT(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(t,a,s,l){return new lT(t,a,s,l)}function lf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xa(t,a){var s=t.alternate;return s===null?(s=wi(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function sg(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Qu(t,a,s,l,d,m){var w=0;if(l=t,typeof t=="function")lf(t)&&(w=1);else if(typeof t=="string")w=cw(t,s,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case O:return t=wi(31,s,a,d),t.elementType=O,t.lanes=m,t;case X:return Ps(s.children,d,m,a);case Q:w=8,d|=24;break;case $:return t=wi(12,s,a,d|2),t.elementType=$,t.lanes=m,t;case F:return t=wi(13,s,a,d),t.elementType=F,t.lanes=m,t;case ce:return t=wi(19,s,a,d),t.elementType=ce,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case re:case _e:w=10;break e;case pe:w=9;break e;case ie:w=11;break e;case I:w=14;break e;case k:w=16,l=null;break e}w=29,s=Error(r(130,t===null?"null":typeof t,"")),l=null}return a=wi(w,s,a,d),a.elementType=t,a.type=l,a.lanes=m,a}function Ps(t,a,s,l){return t=wi(7,t,l,a),t.lanes=s,t}function uf(t,a,s){return t=wi(6,t,null,a),t.lanes=s,t}function cf(t,a,s){return a=wi(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var ko=[],No=0,Xu=null,Wu=0,qi=[],zi=0,Ms=null,Wa=1,Za="";function Ls(t,a){ko[No++]=Wu,ko[No++]=Xu,Xu=t,Wu=a}function og(t,a,s){qi[zi++]=Wa,qi[zi++]=Za,qi[zi++]=Ms,Ms=t;var l=Wa;t=Za;var d=32-Kt(l)-1;l&=~(1<<d),s+=1;var m=32-Kt(a)+d;if(30<m){var w=d-d%5;m=(l&(1<<w)-1).toString(32),l>>=w,d-=w,Wa=1<<32-Kt(a)+d|s<<d|l,Za=m+t}else Wa=1<<m|s<<d|l,Za=t}function df(t){t.return!==null&&(Ls(t,1),og(t,1,0))}function ff(t){for(;t===Xu;)Xu=ko[--No],ko[No]=null,Wu=ko[--No],ko[No]=null;for(;t===Ms;)Ms=qi[--zi],qi[zi]=null,Za=qi[--zi],qi[zi]=null,Wa=qi[--zi],qi[zi]=null}var ni=null,Zt=null,Et=!1,Vs=null,ka=!1,hf=Error(r(519));function js(t){var a=Error(r(418,""));throw xl(Ui(a,t)),hf}function lg(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[Xt]=t,a[xt]=l,s){case"dialog":ut("cancel",a),ut("close",a);break;case"iframe":case"object":case"embed":ut("load",a);break;case"video":case"audio":for(s=0;s<Zl.length;s++)ut(Zl[s],a);break;case"source":ut("error",a);break;case"img":case"image":case"link":ut("error",a),ut("load",a);break;case"details":ut("toggle",a);break;case"input":ut("invalid",a),Vi(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),gt(a);break;case"select":ut("invalid",a);break;case"textarea":ut("invalid",a),Ta(a,l.value,l.defaultValue,l.children),gt(a)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||Ay(a.textContent,s)?(l.popover!=null&&(ut("beforetoggle",a),ut("toggle",a)),l.onScroll!=null&&ut("scroll",a),l.onScrollEnd!=null&&ut("scrollend",a),l.onClick!=null&&(a.onclick=Nc),a=!0):a=!1,a||js(t)}function ug(t){for(ni=t.return;ni;)switch(ni.tag){case 5:case 13:ka=!1;return;case 27:case 3:ka=!0;return;default:ni=ni.return}}function Il(t){if(t!==ni)return!1;if(!Et)return ug(t),Et=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Rh(t.type,t.memoizedProps)),s=!s),s&&Zt&&js(t),ug(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(a===0){Zt=sa(t.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++;t=t.nextSibling}Zt=null}}else a===27?(a=Zt,Qr(t.type)?(t=Oh,Oh=null,Zt=t):Zt=a):Zt=ni?sa(t.stateNode.nextSibling):null;return!0}function Cl(){Zt=ni=null,Et=!1}function cg(){var t=Vs;return t!==null&&(mi===null?mi=t:mi.push.apply(mi,t),Vs=null),t}function xl(t){Vs===null?Vs=[t]:Vs.push(t)}var mf=fe(null),Us=null,Ja=null;function Pr(t,a,s){me(mf,a._currentValue),a._currentValue=s}function er(t){t._currentValue=mf.current,Se(mf)}function pf(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function gf(t,a,s,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var w=d.child;m=m.firstContext;e:for(;m!==null;){var x=m;m=d;for(var j=0;j<a.length;j++)if(x.context===a[j]){m.lanes|=s,x=m.alternate,x!==null&&(x.lanes|=s),pf(m.return,s,t),l||(w=null);break e}m=x.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(r(341));w.lanes|=s,m=w.alternate,m!==null&&(m.lanes|=s),pf(w,s,t),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===t){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function Rl(t,a,s,l){t=null;for(var d=a,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var x=d.type;Ti(d.pendingProps.value,w.value)||(t!==null?t.push(x):t=[x])}}else if(d===we.current){if(w=d.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(au):t=[au])}d=d.return}t!==null&&gf(a,t,s,l),a.flags|=262144}function Zu(t){for(t=t.firstContext;t!==null;){if(!Ti(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Bs(t){Us=t,Ja=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Hn(t){return dg(Us,t)}function Ju(t,a){return Us===null&&Bs(t),dg(t,a)}function dg(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Ja===null){if(t===null)throw Error(r(308));Ja=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Ja=Ja.next=a;return s}var uT=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},cT=i.unstable_scheduleCallback,dT=i.unstable_NormalPriority,pn={$$typeof:_e,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _f(){return{controller:new uT,data:new Map,refCount:0}}function kl(t){t.refCount--,t.refCount===0&&cT(dT,function(){t.controller.abort()})}var Nl=null,yf=0,Do=0,Oo=null;function fT(t,a){if(Nl===null){var s=Nl=[];yf=0,Do=bh(),Oo={status:"pending",value:void 0,then:function(l){s.push(l)}}}return yf++,a.then(fg,fg),a}function fg(){if(--yf===0&&Nl!==null){Oo!==null&&(Oo.status="fulfilled");var t=Nl;Nl=null,Do=0,Oo=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function hT(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var d=0;d<s.length;d++)(0,s[d])(a)},function(d){for(l.status="rejected",l.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),l}var hg=ae.S;ae.S=function(t,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&fT(t,a),hg!==null&&hg(t,a)};var qs=fe(null);function vf(){var t=qs.current;return t!==null?t:Lt.pooledCache}function ec(t,a){a===null?me(qs,qs.current):me(qs,a.pool)}function mg(){var t=vf();return t===null?null:{parent:pn._currentValue,pool:t}}var Dl=Error(r(460)),pg=Error(r(474)),tc=Error(r(542)),bf={then:function(){}};function gg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nc(){}function _g(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(nc,nc),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,vg(t),t;default:if(typeof a.status=="string")a.then(nc,nc);else{if(t=Lt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=l}},function(l){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,vg(t),t}throw Ol=a,Dl}}var Ol=null;function yg(){if(Ol===null)throw Error(r(459));var t=Ol;return Ol=null,t}function vg(t){if(t===Dl||t===tc)throw Error(r(483))}var Mr=!1;function Ef(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Lr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(At&2)!==0){var d=l.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),l.pending=a,a=Yu(t),rg(t,null,s),a}return $u(t,l,a,s),Yu(t)}function Pl(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,br(t,s)}}function Tf(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var d=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var w={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?d=m=w:m=m.next=w,s=s.next}while(s!==null);m===null?d=m=a:m=m.next=a}else d=m=a;s={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var wf=!1;function Ml(){if(wf){var t=Oo;if(t!==null)throw t}}function Ll(t,a,s,l){wf=!1;var d=t.updateQueue;Mr=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var j=x,Y=j.next;j.next=null,w===null?m=Y:w.next=Y,w=j;var se=t.alternate;se!==null&&(se=se.updateQueue,x=se.lastBaseUpdate,x!==w&&(x===null?se.firstBaseUpdate=Y:x.next=Y,se.lastBaseUpdate=j))}if(m!==null){var de=d.baseState;w=0,se=Y=j=null,x=m;do{var W=x.lane&-536870913,J=W!==x.lane;if(J?(ht&W)===W:(l&W)===W){W!==0&&W===Do&&(wf=!0),se!==null&&(se=se.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var He=t,je=x;W=a;var Dt=s;switch(je.tag){case 1:if(He=je.payload,typeof He=="function"){de=He.call(Dt,de,W);break e}de=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=je.payload,W=typeof He=="function"?He.call(Dt,de,W):He,W==null)break e;de=E({},de,W);break e;case 2:Mr=!0}}W=x.callback,W!==null&&(t.flags|=64,J&&(t.flags|=8192),J=d.callbacks,J===null?d.callbacks=[W]:J.push(W))}else J={lane:W,tag:x.tag,payload:x.payload,callback:x.callback,next:null},se===null?(Y=se=J,j=de):se=se.next=J,w|=W;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;J=x,x=J.next,J.next=null,d.lastBaseUpdate=J,d.shared.pending=null}}while(!0);se===null&&(j=de),d.baseState=j,d.firstBaseUpdate=Y,d.lastBaseUpdate=se,m===null&&(d.shared.lanes=0),Gr|=w,t.lanes=w,t.memoizedState=de}}function bg(t,a){if(typeof t!="function")throw Error(r(191,t));t.call(a)}function Eg(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)bg(s[t],a)}var Po=fe(null),ic=fe(0);function Sg(t,a){t=or,me(ic,t),me(Po,a),or=t|a.baseLanes}function Af(){me(ic,or),me(Po,Po.current)}function If(){or=ic.current,Se(Po),Se(ic)}var jr=0,it=null,kt=null,un=null,ac=!1,Mo=!1,zs=!1,rc=0,Vl=0,Lo=null,mT=0;function nn(){throw Error(r(321))}function Cf(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!Ti(t[s],a[s]))return!1;return!0}function xf(t,a,s,l,d,m){return jr=m,it=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ae.H=t===null||t.memoizedState===null?r_:s_,zs=!1,m=s(l,d),zs=!1,Mo&&(m=wg(a,s,l,d)),Tg(t),m}function Tg(t){ae.H=dc;var a=kt!==null&&kt.next!==null;if(jr=0,un=kt=it=null,ac=!1,Vl=0,Lo=null,a)throw Error(r(300));t===null||Tn||(t=t.dependencies,t!==null&&Zu(t)&&(Tn=!0))}function wg(t,a,s,l){it=t;var d=0;do{if(Mo&&(Lo=null),Vl=0,Mo=!1,25<=d)throw Error(r(301));if(d+=1,un=kt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ae.H=ET,m=a(s,l)}while(Mo);return m}function pT(){var t=ae.H,a=t.useState()[0];return a=typeof a.then=="function"?jl(a):a,t=t.useState()[0],(kt!==null?kt.memoizedState:null)!==t&&(it.flags|=1024),a}function Rf(){var t=rc!==0;return rc=0,t}function kf(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function Nf(t){if(ac){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}ac=!1}jr=0,un=kt=it=null,Mo=!1,Vl=rc=0,Lo=null}function fi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?it.memoizedState=un=t:un=un.next=t,un}function cn(){if(kt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var a=un===null?it.memoizedState:un.next;if(a!==null)un=a,kt=t;else{if(t===null)throw it.alternate===null?Error(r(467)):Error(r(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},un===null?it.memoizedState=un=t:un=un.next=t}return un}function Df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(t){var a=Vl;return Vl+=1,Lo===null&&(Lo=[]),t=_g(Lo,t,a),a=it,(un===null?a.memoizedState:un.next)===null&&(a=a.alternate,ae.H=a===null||a.memoizedState===null?r_:s_),t}function sc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return jl(t);if(t.$$typeof===_e)return Hn(t)}throw Error(r(438,String(t)))}function Of(t){var a=null,s=it.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=it.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Df(),it.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=C;return a.index++,s}function tr(t,a){return typeof a=="function"?a(t):a}function oc(t){var a=cn();return Pf(a,kt,t)}function Pf(t,a,s){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var d=t.baseQueue,m=l.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}a.baseQueue=d=m,l.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{a=d.next;var x=w=null,j=null,Y=a,se=!1;do{var de=Y.lane&-536870913;if(de!==Y.lane?(ht&de)===de:(jr&de)===de){var W=Y.revertLane;if(W===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),de===Do&&(se=!0);else if((jr&W)===W){Y=Y.next,W===Do&&(se=!0);continue}else de={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(x=j=de,w=m):j=j.next=de,it.lanes|=W,Gr|=W;de=Y.action,zs&&s(m,de),m=Y.hasEagerState?Y.eagerState:s(m,de)}else W={lane:de,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},j===null?(x=j=W,w=m):j=j.next=W,it.lanes|=de,Gr|=de;Y=Y.next}while(Y!==null&&Y!==a);if(j===null?w=m:j.next=x,!Ti(m,t.memoizedState)&&(Tn=!0,se&&(s=Oo,s!==null)))throw s;t.memoizedState=m,t.baseState=w,t.baseQueue=j,l.lastRenderedState=m}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Mf(t){var a=cn(),s=a.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var l=s.dispatch,d=s.pending,m=a.memoizedState;if(d!==null){s.pending=null;var w=d=d.next;do m=t(m,w.action),w=w.next;while(w!==d);Ti(m,a.memoizedState)||(Tn=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),s.lastRenderedState=m}return[m,l]}function Ag(t,a,s){var l=it,d=cn(),m=Et;if(m){if(s===void 0)throw Error(r(407));s=s()}else s=a();var w=!Ti((kt||d).memoizedState,s);w&&(d.memoizedState=s,Tn=!0),d=d.queue;var x=xg.bind(null,l,d,t);if(Ul(2048,8,x,[t]),d.getSnapshot!==a||w||un!==null&&un.memoizedState.tag&1){if(l.flags|=2048,Vo(9,lc(),Cg.bind(null,l,d,s,a),null),Lt===null)throw Error(r(349));m||(jr&124)!==0||Ig(l,a,s)}return s}function Ig(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=it.updateQueue,a===null?(a=Df(),it.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function Cg(t,a,s,l){a.value=s,a.getSnapshot=l,Rg(a)&&kg(t)}function xg(t,a,s){return s(function(){Rg(a)&&kg(t)})}function Rg(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!Ti(t,s)}catch{return!0}}function kg(t){var a=xo(t,2);a!==null&&Ri(a,t,2)}function Lf(t){var a=fi();if(typeof t=="function"){var s=t;if(t=s(),zs){Cn(!0);try{s()}finally{Cn(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:t},a}function Ng(t,a,s,l){return t.baseState=s,Pf(t,kt,typeof l=="function"?l:tr)}function gT(t,a,s,l,d){if(cc(t))throw Error(r(485));if(t=a.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};ae.T!==null?s(!0):m.isTransition=!1,l(m),s=a.pending,s===null?(m.next=a.pending=m,Dg(a,m)):(m.next=s.next,a.pending=s.next=m)}}function Dg(t,a){var s=a.action,l=a.payload,d=t.state;if(a.isTransition){var m=ae.T,w={};ae.T=w;try{var x=s(d,l),j=ae.S;j!==null&&j(w,x),Og(t,a,x)}catch(Y){Vf(t,a,Y)}finally{ae.T=m}}else try{m=s(d,l),Og(t,a,m)}catch(Y){Vf(t,a,Y)}}function Og(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Pg(t,a,l)},function(l){return Vf(t,a,l)}):Pg(t,a,s)}function Pg(t,a,s){a.status="fulfilled",a.value=s,Mg(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,Dg(t,s)))}function Vf(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,Mg(a),a=a.next;while(a!==l)}t.action=null}function Mg(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Lg(t,a){return a}function Vg(t,a){if(Et){var s=Lt.formState;if(s!==null){e:{var l=it;if(Et){if(Zt){t:{for(var d=Zt,m=ka;d.nodeType!==8;){if(!m){d=null;break t}if(d=sa(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){Zt=sa(d.nextSibling),l=d.data==="F!";break e}}js(l)}l=!1}l&&(a=s[0])}}return s=fi(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lg,lastRenderedState:a},s.queue=l,s=n_.bind(null,it,l),l.dispatch=s,l=Lf(!1),m=zf.bind(null,it,!1,l.queue),l=fi(),d={state:a,dispatch:null,action:t,pending:null},l.queue=d,s=gT.bind(null,it,d,m,s),d.dispatch=s,l.memoizedState=t,[a,s,!1]}function jg(t){var a=cn();return Ug(a,kt,t)}function Ug(t,a,s){if(a=Pf(t,a,Lg)[0],t=oc(tr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=jl(a)}catch(w){throw w===Dl?tc:w}else l=a;a=cn();var d=a.queue,m=d.dispatch;return s!==a.memoizedState&&(it.flags|=2048,Vo(9,lc(),_T.bind(null,d,s),null)),[l,m,t]}function _T(t,a){t.action=a}function Bg(t){var a=cn(),s=kt;if(s!==null)return Ug(a,s,t);cn(),a=a.memoizedState,s=cn();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function Vo(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=it.updateQueue,a===null&&(a=Df(),it.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function lc(){return{destroy:void 0,resource:void 0}}function qg(){return cn().memoizedState}function uc(t,a,s,l){var d=fi();l=l===void 0?null:l,it.flags|=t,d.memoizedState=Vo(1|a,lc(),s,l)}function Ul(t,a,s,l){var d=cn();l=l===void 0?null:l;var m=d.memoizedState.inst;kt!==null&&l!==null&&Cf(l,kt.memoizedState.deps)?d.memoizedState=Vo(a,m,s,l):(it.flags|=t,d.memoizedState=Vo(1|a,m,s,l))}function zg(t,a){uc(8390656,8,t,a)}function Fg(t,a){Ul(2048,8,t,a)}function Hg(t,a){return Ul(4,2,t,a)}function Gg(t,a){return Ul(4,4,t,a)}function Kg(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function $g(t,a,s){s=s!=null?s.concat([t]):null,Ul(4,4,Kg.bind(null,a,t),s)}function jf(){}function Yg(t,a){var s=cn();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&Cf(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function Qg(t,a){var s=cn();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&Cf(a,l[1]))return l[0];if(l=t(),zs){Cn(!0);try{t()}finally{Cn(!1)}}return s.memoizedState=[l,a],l}function Uf(t,a,s){return s===void 0||(jr&1073741824)!==0?t.memoizedState=a:(t.memoizedState=s,t=Z_(),it.lanes|=t,Gr|=t,s)}function Xg(t,a,s,l){return Ti(s,a)?s:Po.current!==null?(t=Uf(t,s,l),Ti(t,a)||(Tn=!0),t):(jr&42)===0?(Tn=!0,t.memoizedState=s):(t=Z_(),it.lanes|=t,Gr|=t,a)}function Wg(t,a,s,l,d){var m=Te.p;Te.p=m!==0&&8>m?m:8;var w=ae.T,x={};ae.T=x,zf(t,!1,a,s);try{var j=d(),Y=ae.S;if(Y!==null&&Y(x,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var se=hT(j,l);Bl(t,a,se,xi(t))}else Bl(t,a,l,xi(t))}catch(de){Bl(t,a,{then:function(){},status:"rejected",reason:de},xi())}finally{Te.p=m,ae.T=w}}function yT(){}function Bf(t,a,s,l){if(t.tag!==5)throw Error(r(476));var d=Zg(t).queue;Wg(t,d,a,Ne,s===null?yT:function(){return Jg(t),s(l)})}function Zg(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:Ne},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Jg(t){var a=Zg(t).next.queue;Bl(t,a,{},xi())}function qf(){return Hn(au)}function e_(){return cn().memoizedState}function t_(){return cn().memoizedState}function vT(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=xi();t=Lr(s);var l=Vr(a,t,s);l!==null&&(Ri(l,a,s),Pl(l,a,s)),a={cache:_f()},t.payload=a;return}a=a.return}}function bT(t,a,s){var l=xi();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},cc(t)?i_(a,s):(s=of(t,a,s,l),s!==null&&(Ri(s,t,l),a_(s,a,l)))}function n_(t,a,s){var l=xi();Bl(t,a,s,l)}function Bl(t,a,s,l){var d={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(cc(t))i_(a,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var w=a.lastRenderedState,x=m(w,s);if(d.hasEagerState=!0,d.eagerState=x,Ti(x,w))return $u(t,a,d,0),Lt===null&&Ku(),!1}catch{}finally{}if(s=of(t,a,d,l),s!==null)return Ri(s,t,l),a_(s,a,l),!0}return!1}function zf(t,a,s,l){if(l={lane:2,revertLane:bh(),action:l,hasEagerState:!1,eagerState:null,next:null},cc(t)){if(a)throw Error(r(479))}else a=of(t,s,l,2),a!==null&&Ri(a,t,2)}function cc(t){var a=t.alternate;return t===it||a!==null&&a===it}function i_(t,a){Mo=ac=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function a_(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,br(t,s)}}var dc={readContext:Hn,use:sc,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn},r_={readContext:Hn,use:sc,useCallback:function(t,a){return fi().memoizedState=[t,a===void 0?null:a],t},useContext:Hn,useEffect:zg,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,uc(4194308,4,Kg.bind(null,a,t),s)},useLayoutEffect:function(t,a){return uc(4194308,4,t,a)},useInsertionEffect:function(t,a){uc(4,2,t,a)},useMemo:function(t,a){var s=fi();a=a===void 0?null:a;var l=t();if(zs){Cn(!0);try{t()}finally{Cn(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=fi();if(s!==void 0){var d=s(a);if(zs){Cn(!0);try{s(a)}finally{Cn(!1)}}}else d=a;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=bT.bind(null,it,t),[l.memoizedState,t]},useRef:function(t){var a=fi();return t={current:t},a.memoizedState=t},useState:function(t){t=Lf(t);var a=t.queue,s=n_.bind(null,it,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:jf,useDeferredValue:function(t,a){var s=fi();return Uf(s,t,a)},useTransition:function(){var t=Lf(!1);return t=Wg.bind(null,it,t.queue,!0,!1),fi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=it,d=fi();if(Et){if(s===void 0)throw Error(r(407));s=s()}else{if(s=a(),Lt===null)throw Error(r(349));(ht&124)!==0||Ig(l,a,s)}d.memoizedState=s;var m={value:s,getSnapshot:a};return d.queue=m,zg(xg.bind(null,l,m,t),[t]),l.flags|=2048,Vo(9,lc(),Cg.bind(null,l,m,s,a),null),s},useId:function(){var t=fi(),a=Lt.identifierPrefix;if(Et){var s=Za,l=Wa;s=(l&~(1<<32-Kt(l)-1)).toString(32)+s,a=""+a+"R"+s,s=rc++,0<s&&(a+="H"+s.toString(32)),a+=""}else s=mT++,a=""+a+"r"+s.toString(32)+"";return t.memoizedState=a},useHostTransitionStatus:qf,useFormState:Vg,useActionState:Vg,useOptimistic:function(t){var a=fi();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=zf.bind(null,it,!0,s),s.dispatch=a,[t,a]},useMemoCache:Of,useCacheRefresh:function(){return fi().memoizedState=vT.bind(null,it)}},s_={readContext:Hn,use:sc,useCallback:Yg,useContext:Hn,useEffect:Fg,useImperativeHandle:$g,useInsertionEffect:Hg,useLayoutEffect:Gg,useMemo:Qg,useReducer:oc,useRef:qg,useState:function(){return oc(tr)},useDebugValue:jf,useDeferredValue:function(t,a){var s=cn();return Xg(s,kt.memoizedState,t,a)},useTransition:function(){var t=oc(tr)[0],a=cn().memoizedState;return[typeof t=="boolean"?t:jl(t),a]},useSyncExternalStore:Ag,useId:e_,useHostTransitionStatus:qf,useFormState:jg,useActionState:jg,useOptimistic:function(t,a){var s=cn();return Ng(s,kt,t,a)},useMemoCache:Of,useCacheRefresh:t_},ET={readContext:Hn,use:sc,useCallback:Yg,useContext:Hn,useEffect:Fg,useImperativeHandle:$g,useInsertionEffect:Hg,useLayoutEffect:Gg,useMemo:Qg,useReducer:Mf,useRef:qg,useState:function(){return Mf(tr)},useDebugValue:jf,useDeferredValue:function(t,a){var s=cn();return kt===null?Uf(s,t,a):Xg(s,kt.memoizedState,t,a)},useTransition:function(){var t=Mf(tr)[0],a=cn().memoizedState;return[typeof t=="boolean"?t:jl(t),a]},useSyncExternalStore:Ag,useId:e_,useHostTransitionStatus:qf,useFormState:Bg,useActionState:Bg,useOptimistic:function(t,a){var s=cn();return kt!==null?Ng(s,kt,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Of,useCacheRefresh:t_},jo=null,ql=0;function fc(t){var a=ql;return ql+=1,jo===null&&(jo=[]),_g(jo,t,a)}function zl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function hc(t,a){throw a.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(a),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function o_(t){var a=t._init;return a(t._payload)}function l_(t){function a(H,z){if(t){var K=H.deletions;K===null?(H.deletions=[z],H.flags|=16):K.push(z)}}function s(H,z){if(!t)return null;for(;z!==null;)a(H,z),z=z.sibling;return null}function l(H){for(var z=new Map;H!==null;)H.key!==null?z.set(H.key,H):z.set(H.index,H),H=H.sibling;return z}function d(H,z){return H=Xa(H,z),H.index=0,H.sibling=null,H}function m(H,z,K){return H.index=K,t?(K=H.alternate,K!==null?(K=K.index,K<z?(H.flags|=67108866,z):K):(H.flags|=67108866,z)):(H.flags|=1048576,z)}function w(H){return t&&H.alternate===null&&(H.flags|=67108866),H}function x(H,z,K,ue){return z===null||z.tag!==6?(z=uf(K,H.mode,ue),z.return=H,z):(z=d(z,K),z.return=H,z)}function j(H,z,K,ue){var ke=K.type;return ke===X?se(H,z,K.props.children,ue,K.key):z!==null&&(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===k&&o_(ke)===z.type)?(z=d(z,K.props),zl(z,K),z.return=H,z):(z=Qu(K.type,K.key,K.props,null,H.mode,ue),zl(z,K),z.return=H,z)}function Y(H,z,K,ue){return z===null||z.tag!==4||z.stateNode.containerInfo!==K.containerInfo||z.stateNode.implementation!==K.implementation?(z=cf(K,H.mode,ue),z.return=H,z):(z=d(z,K.children||[]),z.return=H,z)}function se(H,z,K,ue,ke){return z===null||z.tag!==7?(z=Ps(K,H.mode,ue,ke),z.return=H,z):(z=d(z,K),z.return=H,z)}function de(H,z,K){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=uf(""+z,H.mode,K),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case N:return K=Qu(z.type,z.key,z.props,null,H.mode,K),zl(K,z),K.return=H,K;case M:return z=cf(z,H.mode,K),z.return=H,z;case k:var ue=z._init;return z=ue(z._payload),de(H,z,K)}if(yt(z)||q(z))return z=Ps(z,H.mode,K,null),z.return=H,z;if(typeof z.then=="function")return de(H,fc(z),K);if(z.$$typeof===_e)return de(H,Ju(H,z),K);hc(H,z)}return null}function W(H,z,K,ue){var ke=z!==null?z.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ke!==null?null:x(H,z,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case N:return K.key===ke?j(H,z,K,ue):null;case M:return K.key===ke?Y(H,z,K,ue):null;case k:return ke=K._init,K=ke(K._payload),W(H,z,K,ue)}if(yt(K)||q(K))return ke!==null?null:se(H,z,K,ue,null);if(typeof K.then=="function")return W(H,z,fc(K),ue);if(K.$$typeof===_e)return W(H,z,Ju(H,K),ue);hc(H,K)}return null}function J(H,z,K,ue,ke){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return H=H.get(K)||null,x(z,H,""+ue,ke);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case N:return H=H.get(ue.key===null?K:ue.key)||null,j(z,H,ue,ke);case M:return H=H.get(ue.key===null?K:ue.key)||null,Y(z,H,ue,ke);case k:var ot=ue._init;return ue=ot(ue._payload),J(H,z,K,ue,ke)}if(yt(ue)||q(ue))return H=H.get(K)||null,se(z,H,ue,ke,null);if(typeof ue.then=="function")return J(H,z,K,fc(ue),ke);if(ue.$$typeof===_e)return J(H,z,K,Ju(z,ue),ke);hc(z,ue)}return null}function He(H,z,K,ue){for(var ke=null,ot=null,Me=z,ze=z=0,An=null;Me!==null&&ze<K.length;ze++){Me.index>ze?(An=Me,Me=null):An=Me.sibling;var _t=W(H,Me,K[ze],ue);if(_t===null){Me===null&&(Me=An);break}t&&Me&&_t.alternate===null&&a(H,Me),z=m(_t,z,ze),ot===null?ke=_t:ot.sibling=_t,ot=_t,Me=An}if(ze===K.length)return s(H,Me),Et&&Ls(H,ze),ke;if(Me===null){for(;ze<K.length;ze++)Me=de(H,K[ze],ue),Me!==null&&(z=m(Me,z,ze),ot===null?ke=Me:ot.sibling=Me,ot=Me);return Et&&Ls(H,ze),ke}for(Me=l(Me);ze<K.length;ze++)An=J(Me,H,ze,K[ze],ue),An!==null&&(t&&An.alternate!==null&&Me.delete(An.key===null?ze:An.key),z=m(An,z,ze),ot===null?ke=An:ot.sibling=An,ot=An);return t&&Me.forEach(function(es){return a(H,es)}),Et&&Ls(H,ze),ke}function je(H,z,K,ue){if(K==null)throw Error(r(151));for(var ke=null,ot=null,Me=z,ze=z=0,An=null,_t=K.next();Me!==null&&!_t.done;ze++,_t=K.next()){Me.index>ze?(An=Me,Me=null):An=Me.sibling;var es=W(H,Me,_t.value,ue);if(es===null){Me===null&&(Me=An);break}t&&Me&&es.alternate===null&&a(H,Me),z=m(es,z,ze),ot===null?ke=es:ot.sibling=es,ot=es,Me=An}if(_t.done)return s(H,Me),Et&&Ls(H,ze),ke;if(Me===null){for(;!_t.done;ze++,_t=K.next())_t=de(H,_t.value,ue),_t!==null&&(z=m(_t,z,ze),ot===null?ke=_t:ot.sibling=_t,ot=_t);return Et&&Ls(H,ze),ke}for(Me=l(Me);!_t.done;ze++,_t=K.next())_t=J(Me,H,ze,_t.value,ue),_t!==null&&(t&&_t.alternate!==null&&Me.delete(_t.key===null?ze:_t.key),z=m(_t,z,ze),ot===null?ke=_t:ot.sibling=_t,ot=_t);return t&&Me.forEach(function(Sw){return a(H,Sw)}),Et&&Ls(H,ze),ke}function Dt(H,z,K,ue){if(typeof K=="object"&&K!==null&&K.type===X&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case N:e:{for(var ke=K.key;z!==null;){if(z.key===ke){if(ke=K.type,ke===X){if(z.tag===7){s(H,z.sibling),ue=d(z,K.props.children),ue.return=H,H=ue;break e}}else if(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===k&&o_(ke)===z.type){s(H,z.sibling),ue=d(z,K.props),zl(ue,K),ue.return=H,H=ue;break e}s(H,z);break}else a(H,z);z=z.sibling}K.type===X?(ue=Ps(K.props.children,H.mode,ue,K.key),ue.return=H,H=ue):(ue=Qu(K.type,K.key,K.props,null,H.mode,ue),zl(ue,K),ue.return=H,H=ue)}return w(H);case M:e:{for(ke=K.key;z!==null;){if(z.key===ke)if(z.tag===4&&z.stateNode.containerInfo===K.containerInfo&&z.stateNode.implementation===K.implementation){s(H,z.sibling),ue=d(z,K.children||[]),ue.return=H,H=ue;break e}else{s(H,z);break}else a(H,z);z=z.sibling}ue=cf(K,H.mode,ue),ue.return=H,H=ue}return w(H);case k:return ke=K._init,K=ke(K._payload),Dt(H,z,K,ue)}if(yt(K))return He(H,z,K,ue);if(q(K)){if(ke=q(K),typeof ke!="function")throw Error(r(150));return K=ke.call(K),je(H,z,K,ue)}if(typeof K.then=="function")return Dt(H,z,fc(K),ue);if(K.$$typeof===_e)return Dt(H,z,Ju(H,K),ue);hc(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,z!==null&&z.tag===6?(s(H,z.sibling),ue=d(z,K),ue.return=H,H=ue):(s(H,z),ue=uf(K,H.mode,ue),ue.return=H,H=ue),w(H)):s(H,z)}return function(H,z,K,ue){try{ql=0;var ke=Dt(H,z,K,ue);return jo=null,ke}catch(Me){if(Me===Dl||Me===tc)throw Me;var ot=wi(29,Me,null,H.mode);return ot.lanes=ue,ot.return=H,ot}finally{}}}var Uo=l_(!0),u_=l_(!1),Fi=fe(null),Na=null;function Ur(t){var a=t.alternate;me(gn,gn.current&1),me(Fi,t),Na===null&&(a===null||Po.current!==null||a.memoizedState!==null)&&(Na=t)}function c_(t){if(t.tag===22){if(me(gn,gn.current),me(Fi,t),Na===null){var a=t.alternate;a!==null&&a.memoizedState!==null&&(Na=t)}}else Br()}function Br(){me(gn,gn.current),me(Fi,Fi.current)}function nr(t){Se(Fi),Na===t&&(Na=null),Se(gn)}var gn=fe(0);function mc(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Dh(s)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Ff(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:E({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Hf={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=xi(),d=Lr(l);d.payload=a,s!=null&&(d.callback=s),a=Vr(t,d,l),a!==null&&(Ri(a,t,l),Pl(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=xi(),d=Lr(l);d.tag=1,d.payload=a,s!=null&&(d.callback=s),a=Vr(t,d,l),a!==null&&(Ri(a,t,l),Pl(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=xi(),l=Lr(s);l.tag=2,a!=null&&(l.callback=a),a=Vr(t,l,s),a!==null&&(Ri(a,t,s),Pl(a,t,s))}};function d_(t,a,s,l,d,m,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,w):a.prototype&&a.prototype.isPureReactComponent?!wl(s,l)||!wl(d,m):!0}function f_(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&Hf.enqueueReplaceState(a,a.state,null)}function Fs(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=E({},s));for(var d in t)s[d]===void 0&&(s[d]=t[d])}return s}var pc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function h_(t){pc(t)}function m_(t){console.error(t)}function p_(t){pc(t)}function gc(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function g_(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Gf(t,a,s){return s=Lr(s),s.tag=3,s.payload={element:null},s.callback=function(){gc(t,a)},s}function __(t){return t=Lr(t),t.tag=3,t}function y_(t,a,s,l){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var m=l.value;t.payload=function(){return d(m)},t.callback=function(){g_(a,s,l)}}var w=s.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){g_(a,s,l),typeof d!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function ST(t,a,s,l,d){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&Rl(a,s,d,!0),s=Fi.current,s!==null){switch(s.tag){case 13:return Na===null?ph():s.alternate===null&&Jt===0&&(Jt=3),s.flags&=-257,s.flags|=65536,s.lanes=d,l===bf?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),_h(t,l,d)),!1;case 22:return s.flags|=65536,l===bf?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),_h(t,l,d)),!1}throw Error(r(435,s.tag))}return _h(t,l,d),ph(),!1}if(Et)return a=Fi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,l!==hf&&(t=Error(r(422),{cause:l}),xl(Ui(t,s)))):(l!==hf&&(a=Error(r(423),{cause:l}),xl(Ui(a,s))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Ui(l,s),d=Gf(t.stateNode,l,d),Tf(t,d),Jt!==4&&(Jt=2)),!1;var m=Error(r(520),{cause:l});if(m=Ui(m,s),Ql===null?Ql=[m]:Ql.push(m),Jt!==4&&(Jt=2),a===null)return!0;l=Ui(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=d&-d,s.lanes|=t,t=Gf(s.stateNode,l,t),Tf(s,t),!1;case 1:if(a=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Kr===null||!Kr.has(m))))return s.flags|=65536,d&=-d,s.lanes|=d,d=__(d),y_(d,t,s,l),Tf(s,d),!1}s=s.return}while(s!==null);return!1}var v_=Error(r(461)),Tn=!1;function Dn(t,a,s,l){a.child=t===null?u_(a,null,s,l):Uo(a,t.child,s,l)}function b_(t,a,s,l,d){s=s.render;var m=a.ref;if("ref"in l){var w={};for(var x in l)x!=="ref"&&(w[x]=l[x])}else w=l;return Bs(a),l=xf(t,a,s,w,m,d),x=Rf(),t!==null&&!Tn?(kf(t,a,d),ir(t,a,d)):(Et&&x&&df(a),a.flags|=1,Dn(t,a,l,d),a.child)}function E_(t,a,s,l,d){if(t===null){var m=s.type;return typeof m=="function"&&!lf(m)&&m.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=m,S_(t,a,m,l,d)):(t=Qu(s.type,null,l,a,a.mode,d),t.ref=a.ref,t.return=a,a.child=t)}if(m=t.child,!Jf(t,d)){var w=m.memoizedProps;if(s=s.compare,s=s!==null?s:wl,s(w,l)&&t.ref===a.ref)return ir(t,a,d)}return a.flags|=1,t=Xa(m,l),t.ref=a.ref,t.return=a,a.child=t}function S_(t,a,s,l,d){if(t!==null){var m=t.memoizedProps;if(wl(m,l)&&t.ref===a.ref)if(Tn=!1,a.pendingProps=l=m,Jf(t,d))(t.flags&131072)!==0&&(Tn=!0);else return a.lanes=t.lanes,ir(t,a,d)}return Kf(t,a,s,l,d)}function T_(t,a,s){var l=a.pendingProps,d=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((a.flags&128)!==0){if(l=m!==null?m.baseLanes|s:s,t!==null){for(d=a.child=t.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;a.childLanes=m&~l}else a.childLanes=0,a.child=null;return w_(t,a,l,s)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&ec(a,m!==null?m.cachePool:null),m!==null?Sg(a,m):Af(),c_(a);else return a.lanes=a.childLanes=536870912,w_(t,a,m!==null?m.baseLanes|s:s,s)}else m!==null?(ec(a,m.cachePool),Sg(a,m),Br(),a.memoizedState=null):(t!==null&&ec(a,null),Af(),Br());return Dn(t,a,d,s),a.child}function w_(t,a,s,l){var d=vf();return d=d===null?null:{parent:pn._currentValue,pool:d},a.memoizedState={baseLanes:s,cachePool:d},t!==null&&ec(a,null),Af(),c_(a),t!==null&&Rl(t,a,l,!0),null}function _c(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function Kf(t,a,s,l,d){return Bs(a),s=xf(t,a,s,l,void 0,d),l=Rf(),t!==null&&!Tn?(kf(t,a,d),ir(t,a,d)):(Et&&l&&df(a),a.flags|=1,Dn(t,a,s,d),a.child)}function A_(t,a,s,l,d,m){return Bs(a),a.updateQueue=null,s=wg(a,l,s,d),Tg(t),l=Rf(),t!==null&&!Tn?(kf(t,a,m),ir(t,a,m)):(Et&&l&&df(a),a.flags|=1,Dn(t,a,s,m),a.child)}function I_(t,a,s,l,d){if(Bs(a),a.stateNode===null){var m=Ro,w=s.contextType;typeof w=="object"&&w!==null&&(m=Hn(w)),m=new s(l,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Hf,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=l,m.state=a.memoizedState,m.refs={},Ef(a),w=s.contextType,m.context=typeof w=="object"&&w!==null?Hn(w):Ro,m.state=a.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(Ff(a,s,w,l),m.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&Hf.enqueueReplaceState(m,m.state,null),Ll(a,l,m,d),Ml(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){m=a.stateNode;var x=a.memoizedProps,j=Fs(s,x);m.props=j;var Y=m.context,se=s.contextType;w=Ro,typeof se=="object"&&se!==null&&(w=Hn(se));var de=s.getDerivedStateFromProps;se=typeof de=="function"||typeof m.getSnapshotBeforeUpdate=="function",x=a.pendingProps!==x,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x||Y!==w)&&f_(a,m,l,w),Mr=!1;var W=a.memoizedState;m.state=W,Ll(a,l,m,d),Ml(),Y=a.memoizedState,x||W!==Y||Mr?(typeof de=="function"&&(Ff(a,s,de,l),Y=a.memoizedState),(j=Mr||d_(a,s,j,l,W,Y,w))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=Y),m.props=l,m.state=Y,m.context=w,l=j):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{m=a.stateNode,Sf(t,a),w=a.memoizedProps,se=Fs(s,w),m.props=se,de=a.pendingProps,W=m.context,Y=s.contextType,j=Ro,typeof Y=="object"&&Y!==null&&(j=Hn(Y)),x=s.getDerivedStateFromProps,(Y=typeof x=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==de||W!==j)&&f_(a,m,l,j),Mr=!1,W=a.memoizedState,m.state=W,Ll(a,l,m,d),Ml();var J=a.memoizedState;w!==de||W!==J||Mr||t!==null&&t.dependencies!==null&&Zu(t.dependencies)?(typeof x=="function"&&(Ff(a,s,x,l),J=a.memoizedState),(se=Mr||d_(a,s,se,l,W,J,j)||t!==null&&t.dependencies!==null&&Zu(t.dependencies))?(Y||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,J,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,J,j)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=J),m.props=l,m.state=J,m.context=j,l=se):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(a.flags|=1024),l=!1)}return m=l,_c(t,a),l=(a.flags&128)!==0,m||l?(m=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,t!==null&&l?(a.child=Uo(a,t.child,null,d),a.child=Uo(a,null,s,d)):Dn(t,a,s,d),a.memoizedState=m.state,t=a.child):t=ir(t,a,d),t}function C_(t,a,s,l){return Cl(),a.flags|=256,Dn(t,a,s,l),a.child}var $f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(t){return{baseLanes:t,cachePool:mg()}}function Qf(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=Hi),t}function x_(t,a,s){var l=a.pendingProps,d=!1,m=(a.flags&128)!==0,w;if((w=m)||(w=t!==null&&t.memoizedState===null?!1:(gn.current&2)!==0),w&&(d=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,t===null){if(Et){if(d?Ur(a):Br(),Et){var x=Zt,j;if(j=x){e:{for(j=x,x=ka;j.nodeType!==8;){if(!x){x=null;break e}if(j=sa(j.nextSibling),j===null){x=null;break e}}x=j}x!==null?(a.memoizedState={dehydrated:x,treeContext:Ms!==null?{id:Wa,overflow:Za}:null,retryLane:536870912,hydrationErrors:null},j=wi(18,null,null,0),j.stateNode=x,j.return=a,a.child=j,ni=a,Zt=null,j=!0):j=!1}j||js(a)}if(x=a.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return Dh(x)?a.lanes=32:a.lanes=536870912,null;nr(a)}return x=l.children,l=l.fallback,d?(Br(),d=a.mode,x=yc({mode:"hidden",children:x},d),l=Ps(l,d,s,null),x.return=a,l.return=a,x.sibling=l,a.child=x,d=a.child,d.memoizedState=Yf(s),d.childLanes=Qf(t,w,s),a.memoizedState=$f,l):(Ur(a),Xf(a,x))}if(j=t.memoizedState,j!==null&&(x=j.dehydrated,x!==null)){if(m)a.flags&256?(Ur(a),a.flags&=-257,a=Wf(t,a,s)):a.memoizedState!==null?(Br(),a.child=t.child,a.flags|=128,a=null):(Br(),d=l.fallback,x=a.mode,l=yc({mode:"visible",children:l.children},x),d=Ps(d,x,s,null),d.flags|=2,l.return=a,d.return=a,l.sibling=d,a.child=l,Uo(a,t.child,null,s),l=a.child,l.memoizedState=Yf(s),l.childLanes=Qf(t,w,s),a.memoizedState=$f,a=d);else if(Ur(a),Dh(x)){if(w=x.nextSibling&&x.nextSibling.dataset,w)var Y=w.dgst;w=Y,l=Error(r(419)),l.stack="",l.digest=w,xl({value:l,source:null,stack:null}),a=Wf(t,a,s)}else if(Tn||Rl(t,a,s,!1),w=(s&t.childLanes)!==0,Tn||w){if(w=Lt,w!==null&&(l=s&-s,l=(l&42)!==0?1:Ee(l),l=(l&(w.suspendedLanes|s))!==0?0:l,l!==0&&l!==j.retryLane))throw j.retryLane=l,xo(t,l),Ri(w,t,l),v_;x.data==="$?"||ph(),a=Wf(t,a,s)}else x.data==="$?"?(a.flags|=192,a.child=t.child,a=null):(t=j.treeContext,Zt=sa(x.nextSibling),ni=a,Et=!0,Vs=null,ka=!1,t!==null&&(qi[zi++]=Wa,qi[zi++]=Za,qi[zi++]=Ms,Wa=t.id,Za=t.overflow,Ms=a),a=Xf(a,l.children),a.flags|=4096);return a}return d?(Br(),d=l.fallback,x=a.mode,j=t.child,Y=j.sibling,l=Xa(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,Y!==null?d=Xa(Y,d):(d=Ps(d,x,s,null),d.flags|=2),d.return=a,l.return=a,l.sibling=d,a.child=l,l=d,d=a.child,x=t.child.memoizedState,x===null?x=Yf(s):(j=x.cachePool,j!==null?(Y=pn._currentValue,j=j.parent!==Y?{parent:Y,pool:Y}:j):j=mg(),x={baseLanes:x.baseLanes|s,cachePool:j}),d.memoizedState=x,d.childLanes=Qf(t,w,s),a.memoizedState=$f,l):(Ur(a),s=t.child,t=s.sibling,s=Xa(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(w=a.deletions,w===null?(a.deletions=[t],a.flags|=16):w.push(t)),a.child=s,a.memoizedState=null,s)}function Xf(t,a){return a=yc({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function yc(t,a){return t=wi(22,t,null,a),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Wf(t,a,s){return Uo(a,t.child,null,s),t=Xf(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function R_(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),pf(t.return,a,s)}function Zf(t,a,s,l,d){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:d}:(m.isBackwards=a,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=s,m.tailMode=d)}function k_(t,a,s){var l=a.pendingProps,d=l.revealOrder,m=l.tail;if(Dn(t,a,l.children,s),l=gn.current,(l&2)!==0)l=l&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&R_(t,s,a);else if(t.tag===19)R_(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(me(gn,l),d){case"forwards":for(s=a.child,d=null;s!==null;)t=s.alternate,t!==null&&mc(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=a.child,a.child=null):(d=s.sibling,s.sibling=null),Zf(a,!1,d,s,m);break;case"backwards":for(s=null,d=a.child,a.child=null;d!==null;){if(t=d.alternate,t!==null&&mc(t)===null){a.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}Zf(a,!0,s,null,m);break;case"together":Zf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ir(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),Gr|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(Rl(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(r(153));if(a.child!==null){for(t=a.child,s=Xa(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=Xa(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function Jf(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Zu(t)))}function TT(t,a,s){switch(a.tag){case 3:xe(a,a.stateNode.containerInfo),Pr(a,pn,t.memoizedState.cache),Cl();break;case 27:case 5:Ze(a);break;case 4:xe(a,a.stateNode.containerInfo);break;case 10:Pr(a,a.type,a.memoizedProps.value);break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(Ur(a),a.flags|=128,null):(s&a.child.childLanes)!==0?x_(t,a,s):(Ur(a),t=ir(t,a,s),t!==null?t.sibling:null);Ur(a);break;case 19:var d=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(Rl(t,a,s,!1),l=(s&a.childLanes)!==0),d){if(l)return k_(t,a,s);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),me(gn,gn.current),l)break;return null;case 22:case 23:return a.lanes=0,T_(t,a,s);case 24:Pr(a,pn,t.memoizedState.cache)}return ir(t,a,s)}function N_(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)Tn=!0;else{if(!Jf(t,s)&&(a.flags&128)===0)return Tn=!1,TT(t,a,s);Tn=(t.flags&131072)!==0}else Tn=!1,Et&&(a.flags&1048576)!==0&&og(a,Wu,a.index);switch(a.lanes=0,a.tag){case 16:e:{t=a.pendingProps;var l=a.elementType,d=l._init;if(l=d(l._payload),a.type=l,typeof l=="function")lf(l)?(t=Fs(l,t),a.tag=1,a=I_(null,a,l,t,s)):(a.tag=0,a=Kf(null,a,l,t,s));else{if(l!=null){if(d=l.$$typeof,d===ie){a.tag=11,a=b_(null,a,l,t,s);break e}else if(d===I){a.tag=14,a=E_(null,a,l,t,s);break e}}throw a=Ke(l)||l,Error(r(306,a,""))}}return a;case 0:return Kf(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,d=Fs(l,a.pendingProps),I_(t,a,l,d,s);case 3:e:{if(xe(a,a.stateNode.containerInfo),t===null)throw Error(r(387));l=a.pendingProps;var m=a.memoizedState;d=m.element,Sf(t,a),Ll(a,l,null,s);var w=a.memoizedState;if(l=w.cache,Pr(a,pn,l),l!==m.cache&&gf(a,[pn],s,!0),Ml(),l=w.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=C_(t,a,l,s);break e}else if(l!==d){d=Ui(Error(r(424)),a),xl(d),a=C_(t,a,l,s);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Zt=sa(t.firstChild),ni=a,Et=!0,Vs=null,ka=!0,s=u_(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Cl(),l===d){a=ir(t,a,s);break e}Dn(t,a,l,s)}a=a.child}return a;case 26:return _c(t,a),t===null?(s=My(a.type,null,a.pendingProps,null))?a.memoizedState=s:Et||(s=a.type,t=a.pendingProps,l=Dc(te.current).createElement(s),l[Xt]=a,l[xt]=t,Pn(l,s,t),zt(l),a.stateNode=l):a.memoizedState=My(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ze(a),t===null&&Et&&(l=a.stateNode=Dy(a.type,a.pendingProps,te.current),ni=a,ka=!0,d=Zt,Qr(a.type)?(Oh=d,Zt=sa(l.firstChild)):Zt=d),Dn(t,a,a.pendingProps.children,s),_c(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Et&&((d=l=Zt)&&(l=WT(l,a.type,a.pendingProps,ka),l!==null?(a.stateNode=l,ni=a,Zt=sa(l.firstChild),ka=!1,d=!0):d=!1),d||js(a)),Ze(a),d=a.type,m=a.pendingProps,w=t!==null?t.memoizedProps:null,l=m.children,Rh(d,m)?l=null:w!==null&&Rh(d,w)&&(a.flags|=32),a.memoizedState!==null&&(d=xf(t,a,pT,null,null,s),au._currentValue=d),_c(t,a),Dn(t,a,l,s),a.child;case 6:return t===null&&Et&&((t=s=Zt)&&(s=ZT(s,a.pendingProps,ka),s!==null?(a.stateNode=s,ni=a,Zt=null,t=!0):t=!1),t||js(a)),null;case 13:return x_(t,a,s);case 4:return xe(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Uo(a,null,l,s):Dn(t,a,l,s),a.child;case 11:return b_(t,a,a.type,a.pendingProps,s);case 7:return Dn(t,a,a.pendingProps,s),a.child;case 8:return Dn(t,a,a.pendingProps.children,s),a.child;case 12:return Dn(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,Pr(a,a.type,l.value),Dn(t,a,l.children,s),a.child;case 9:return d=a.type._context,l=a.pendingProps.children,Bs(a),d=Hn(d),l=l(d),a.flags|=1,Dn(t,a,l,s),a.child;case 14:return E_(t,a,a.type,a.pendingProps,s);case 15:return S_(t,a,a.type,a.pendingProps,s);case 19:return k_(t,a,s);case 31:return l=a.pendingProps,s=a.mode,l={mode:l.mode,children:l.children},t===null?(s=yc(l,s),s.ref=a.ref,a.child=s,s.return=a,a=s):(s=Xa(t.child,l),s.ref=a.ref,a.child=s,s.return=a,a=s),a;case 22:return T_(t,a,s);case 24:return Bs(a),l=Hn(pn),t===null?(d=vf(),d===null&&(d=Lt,m=_f(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=s),d=m),a.memoizedState={parent:l,cache:d},Ef(a),Pr(a,pn,d)):((t.lanes&s)!==0&&(Sf(t,a),Ll(a,null,null,s),Ml()),d=t.memoizedState,m=a.memoizedState,d.parent!==l?(d={parent:l,cache:l},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),Pr(a,pn,l)):(l=m.cache,Pr(a,pn,l),l!==d.cache&&gf(a,[pn],s,!0))),Dn(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function ar(t){t.flags|=4}function D_(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!By(a)){if(a=Fi.current,a!==null&&((ht&4194048)===ht?Na!==null:(ht&62914560)!==ht&&(ht&536870912)===0||a!==Na))throw Ol=bf,pg;t.flags|=8192}}function vc(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Fa():536870912,t.lanes|=a,Fo|=a)}function Fl(t,a){if(!Et)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Yt(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function wT(t,a,s){var l=a.pendingProps;switch(ff(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(a),null;case 1:return Yt(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),er(pn),Je(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Il(a)?ar(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,cg())),Yt(a),null;case 26:return s=a.memoizedState,t===null?(ar(a),s!==null?(Yt(a),D_(a,s)):(Yt(a),a.flags&=-16777217)):s?s!==t.memoizedState?(ar(a),Yt(a),D_(a,s)):(Yt(a),a.flags&=-16777217):(t.memoizedProps!==l&&ar(a),Yt(a),a.flags&=-16777217),null;case 27:pt(a),s=te.current;var d=a.type;if(t!==null&&a.stateNode!=null)t.memoizedProps!==l&&ar(a);else{if(!l){if(a.stateNode===null)throw Error(r(166));return Yt(a),null}t=ye.current,Il(a)?lg(a):(t=Dy(d,l,s),a.stateNode=t,ar(a))}return Yt(a),null;case 5:if(pt(a),s=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&ar(a);else{if(!l){if(a.stateNode===null)throw Error(r(166));return Yt(a),null}if(t=ye.current,Il(a))lg(a);else{switch(d=Dc(te.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?d.createElement(s,{is:l.is}):d.createElement(s)}}t[Xt]=a,t[xt]=l;e:for(d=a.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break e;for(;d.sibling===null;){if(d.return===null||d.return===a)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}a.stateNode=t;e:switch(Pn(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ar(a)}}return Yt(a),a.flags&=-16777217,null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&ar(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(r(166));if(t=te.current,Il(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,d=ni,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[Xt]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Ay(t.nodeValue,s)),t||js(a)}else t=Dc(t).createTextNode(l),t[Xt]=a,a.stateNode=t}return Yt(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Il(a),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Xt]=a}else Cl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Yt(a),d=!1}else d=cg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(nr(a),a):(nr(a),null)}if(nr(a),(a.flags&128)!==0)return a.lanes=s,a;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=a.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048)}return s!==t&&s&&(a.child.flags|=8192),vc(a,a.updateQueue),Yt(a),null;case 4:return Je(),t===null&&wh(a.stateNode.containerInfo),Yt(a),null;case 10:return er(a.type),Yt(a),null;case 19:if(Se(gn),d=a.memoizedState,d===null)return Yt(a),null;if(l=(a.flags&128)!==0,m=d.rendering,m===null)if(l)Fl(d,!1);else{if(Jt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(m=mc(t),m!==null){for(a.flags|=128,Fl(d,!1),t=m.updateQueue,a.updateQueue=t,vc(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)sg(s,t),s=s.sibling;return me(gn,gn.current&1|2),a.child}t=t.sibling}d.tail!==null&&Gt()>Sc&&(a.flags|=128,l=!0,Fl(d,!1),a.lanes=4194304)}else{if(!l)if(t=mc(m),t!==null){if(a.flags|=128,l=!0,t=t.updateQueue,a.updateQueue=t,vc(a,t),Fl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!Et)return Yt(a),null}else 2*Gt()-d.renderingStartTime>Sc&&s!==536870912&&(a.flags|=128,l=!0,Fl(d,!1),a.lanes=4194304);d.isBackwards?(m.sibling=a.child,a.child=m):(t=d.last,t!==null?t.sibling=m:a.child=m,d.last=m)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Gt(),a.sibling=null,t=gn.current,me(gn,l?t&1|2:t&1),a):(Yt(a),null);case 22:case 23:return nr(a),If(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(Yt(a),a.subtreeFlags&6&&(a.flags|=8192)):Yt(a),s=a.updateQueue,s!==null&&vc(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&Se(qs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),er(pn),Yt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function AT(t,a){switch(ff(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return er(pn),Je(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return pt(a),null;case 13:if(nr(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Cl()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return Se(gn),null;case 4:return Je(),null;case 10:return er(a.type),null;case 22:case 23:return nr(a),If(),t!==null&&Se(qs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return er(pn),null;case 25:return null;default:return null}}function O_(t,a){switch(ff(a),a.tag){case 3:er(pn),Je();break;case 26:case 27:case 5:pt(a);break;case 4:Je();break;case 13:nr(a);break;case 19:Se(gn);break;case 10:er(a.type);break;case 22:case 23:nr(a),If(),t!==null&&Se(qs);break;case 24:er(pn)}}function Hl(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var d=l.next;s=d;do{if((s.tag&t)===t){l=void 0;var m=s.create,w=s.inst;l=m(),w.destroy=l}s=s.next}while(s!==d)}}catch(x){Ot(a,a.return,x)}}function qr(t,a,s){try{var l=a.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&t)===t){var w=l.inst,x=w.destroy;if(x!==void 0){w.destroy=void 0,d=a;var j=s,Y=x;try{Y()}catch(se){Ot(d,j,se)}}}l=l.next}while(l!==m)}}catch(se){Ot(a,a.return,se)}}function P_(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{Eg(a,s)}catch(l){Ot(t,t.return,l)}}}function M_(t,a,s){s.props=Fs(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Ot(t,a,l)}}function Gl(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(d){Ot(t,a,d)}}function Da(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(d){Ot(t,a,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){Ot(t,a,d)}else s.current=null}function L_(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(d){Ot(t,t.return,d)}}function eh(t,a,s){try{var l=t.stateNode;KT(l,t.type,s,a),l[xt]=a}catch(d){Ot(t,t.return,d)}}function V_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qr(t.type)||t.tag===4}function th(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||V_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nh(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Nc));else if(l!==4&&(l===27&&Qr(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(nh(t,a,s),t=t.sibling;t!==null;)nh(t,a,s),t=t.sibling}function bc(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&Qr(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(bc(t,a,s),t=t.sibling;t!==null;)bc(t,a,s),t=t.sibling}function j_(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);Pn(a,l,s),a[Xt]=t,a[xt]=s}catch(m){Ot(t,t.return,m)}}var rr=!1,an=!1,ih=!1,U_=typeof WeakSet=="function"?WeakSet:Set,wn=null;function IT(t,a){if(t=t.containerInfo,Ch=jc,t=Xp(t),ef(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var d=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var w=0,x=-1,j=-1,Y=0,se=0,de=t,W=null;t:for(;;){for(var J;de!==s||d!==0&&de.nodeType!==3||(x=w+d),de!==m||l!==0&&de.nodeType!==3||(j=w+l),de.nodeType===3&&(w+=de.nodeValue.length),(J=de.firstChild)!==null;)W=de,de=J;for(;;){if(de===t)break t;if(W===s&&++Y===d&&(x=w),W===m&&++se===l&&(j=w),(J=de.nextSibling)!==null)break;de=W,W=de.parentNode}de=J}s=x===-1||j===-1?null:{start:x,end:j}}else s=null}s=s||{start:0,end:0}}else s=null;for(xh={focusedElem:t,selectionRange:s},jc=!1,wn=a;wn!==null;)if(a=wn,t=a.child,(a.subtreeFlags&1024)!==0&&t!==null)t.return=a,wn=t;else for(;wn!==null;){switch(a=wn,m=a.alternate,t=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,s=a,d=m.memoizedProps,m=m.memoizedState,l=s.stateNode;try{var He=Fs(s.type,d,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(He,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(je){Ot(s,s.return,je)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)Nh(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Nh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=a.sibling,t!==null){t.return=a.return,wn=t;break}wn=a.return}}function B_(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:zr(t,s),l&4&&Hl(5,s);break;case 1:if(zr(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(w){Ot(s,s.return,w)}else{var d=Fs(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(d,a,t.__reactInternalSnapshotBeforeUpdate)}catch(w){Ot(s,s.return,w)}}l&64&&P_(s),l&512&&Gl(s,s.return);break;case 3:if(zr(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{Eg(t,a)}catch(w){Ot(s,s.return,w)}}break;case 27:a===null&&l&4&&j_(s);case 26:case 5:zr(t,s),a===null&&l&4&&L_(s),l&512&&Gl(s,s.return);break;case 12:zr(t,s);break;case 13:zr(t,s),l&4&&F_(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=MT.bind(null,s),JT(t,s))));break;case 22:if(l=s.memoizedState!==null||rr,!l){a=a!==null&&a.memoizedState!==null||an,d=rr;var m=an;rr=l,(an=a)&&!m?Fr(t,s,(s.subtreeFlags&8772)!==0):zr(t,s),rr=d,an=m}break;case 30:break;default:zr(t,s)}}function q_(t){var a=t.alternate;a!==null&&(t.alternate=null,q_(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&va(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ht=null,hi=!1;function sr(t,a,s){for(s=s.child;s!==null;)z_(t,a,s),s=s.sibling}function z_(t,a,s){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(jt,s)}catch{}switch(s.tag){case 26:an||Da(s,a),sr(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:an||Da(s,a);var l=Ht,d=hi;Qr(s.type)&&(Ht=s.stateNode,hi=!1),sr(t,a,s),eu(s.stateNode),Ht=l,hi=d;break;case 5:an||Da(s,a);case 6:if(l=Ht,d=hi,Ht=null,sr(t,a,s),Ht=l,hi=d,Ht!==null)if(hi)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(s.stateNode)}catch(m){Ot(s,a,m)}else try{Ht.removeChild(s.stateNode)}catch(m){Ot(s,a,m)}break;case 18:Ht!==null&&(hi?(t=Ht,ky(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),lu(t)):ky(Ht,s.stateNode));break;case 4:l=Ht,d=hi,Ht=s.stateNode.containerInfo,hi=!0,sr(t,a,s),Ht=l,hi=d;break;case 0:case 11:case 14:case 15:an||qr(2,s,a),an||qr(4,s,a),sr(t,a,s);break;case 1:an||(Da(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&M_(s,a,l)),sr(t,a,s);break;case 21:sr(t,a,s);break;case 22:an=(l=an)||s.memoizedState!==null,sr(t,a,s),an=l;break;default:sr(t,a,s)}}function F_(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{lu(t)}catch(s){Ot(a,a.return,s)}}function CT(t){switch(t.tag){case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new U_),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new U_),a;default:throw Error(r(435,t.tag))}}function ah(t,a){var s=CT(t);a.forEach(function(l){var d=LT.bind(null,t,l);s.has(l)||(s.add(l),l.then(d,d))})}function Ai(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var d=s[l],m=t,w=a,x=w;e:for(;x!==null;){switch(x.tag){case 27:if(Qr(x.type)){Ht=x.stateNode,hi=!1;break e}break;case 5:Ht=x.stateNode,hi=!1;break e;case 3:case 4:Ht=x.stateNode.containerInfo,hi=!0;break e}x=x.return}if(Ht===null)throw Error(r(160));z_(m,w,d),Ht=null,hi=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)H_(a,t),a=a.sibling}var ra=null;function H_(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ai(a,t),Ii(t),l&4&&(qr(3,t,t.return),Hl(3,t),qr(5,t,t.return));break;case 1:Ai(a,t),Ii(t),l&512&&(an||s===null||Da(s,s.return)),l&64&&rr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var d=ra;if(Ai(a,t),Ii(t),l&512&&(an||s===null||Da(s,s.return)),l&4){var m=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":m=d.getElementsByTagName("title")[0],(!m||m[ya]||m[Xt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(l),d.head.insertBefore(m,d.querySelector("head > title"))),Pn(m,l,s),m[Xt]=t,zt(m),l=m;break e;case"link":var w=jy("link","href",d).get(l+(s.href||""));if(w){for(var x=0;x<w.length;x++)if(m=w[x],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){w.splice(x,1);break t}}m=d.createElement(l),Pn(m,l,s),d.head.appendChild(m);break;case"meta":if(w=jy("meta","content",d).get(l+(s.content||""))){for(x=0;x<w.length;x++)if(m=w[x],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){w.splice(x,1);break t}}m=d.createElement(l),Pn(m,l,s),d.head.appendChild(m);break;default:throw Error(r(468,l))}m[Xt]=t,zt(m),l=m}t.stateNode=l}else Uy(d,t.type,t.stateNode);else t.stateNode=Vy(d,l,t.memoizedProps);else m!==l?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,l===null?Uy(d,t.type,t.stateNode):Vy(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&eh(t,t.memoizedProps,s.memoizedProps)}break;case 27:Ai(a,t),Ii(t),l&512&&(an||s===null||Da(s,s.return)),s!==null&&l&4&&eh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Ai(a,t),Ii(t),l&512&&(an||s===null||Da(s,s.return)),t.flags&32){d=t.stateNode;try{Bn(d,"")}catch(J){Ot(t,t.return,J)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,eh(t,d,s!==null?s.memoizedProps:d)),l&1024&&(ih=!0);break;case 6:if(Ai(a,t),Ii(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(J){Ot(t,t.return,J)}}break;case 3:if(Mc=null,d=ra,ra=Oc(a.containerInfo),Ai(a,t),ra=d,Ii(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{lu(a.containerInfo)}catch(J){Ot(t,t.return,J)}ih&&(ih=!1,G_(t));break;case 4:l=ra,ra=Oc(t.stateNode.containerInfo),Ai(a,t),Ii(t),ra=l;break;case 12:Ai(a,t),Ii(t);break;case 13:Ai(a,t),Ii(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(ch=Gt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ah(t,l)));break;case 22:d=t.memoizedState!==null;var j=s!==null&&s.memoizedState!==null,Y=rr,se=an;if(rr=Y||d,an=se||j,Ai(a,t),an=se,rr=Y,Ii(t),l&8192)e:for(a=t.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(s===null||j||rr||an||Hs(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){j=s=a;try{if(m=j.stateNode,d)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{x=j.stateNode;var de=j.memoizedProps.style,W=de!=null&&de.hasOwnProperty("display")?de.display:null;x.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(J){Ot(j,j.return,J)}}}else if(a.tag===6){if(s===null){j=a;try{j.stateNode.nodeValue=d?"":j.memoizedProps}catch(J){Ot(j,j.return,J)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,ah(t,s))));break;case 19:Ai(a,t),Ii(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ah(t,l)));break;case 30:break;case 21:break;default:Ai(a,t),Ii(t)}}function Ii(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if(V_(l)){s=l;break}l=l.return}if(s==null)throw Error(r(160));switch(s.tag){case 27:var d=s.stateNode,m=th(t);bc(t,m,d);break;case 5:var w=s.stateNode;s.flags&32&&(Bn(w,""),s.flags&=-33);var x=th(t);bc(t,x,w);break;case 3:case 4:var j=s.stateNode.containerInfo,Y=th(t);nh(t,Y,j);break;default:throw Error(r(161))}}catch(se){Ot(t,t.return,se)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function G_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;G_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function zr(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)B_(t,a.alternate,a),a=a.sibling}function Hs(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:qr(4,a,a.return),Hs(a);break;case 1:Da(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&M_(a,a.return,s),Hs(a);break;case 27:eu(a.stateNode);case 26:case 5:Da(a,a.return),Hs(a);break;case 22:a.memoizedState===null&&Hs(a);break;case 30:Hs(a);break;default:Hs(a)}t=t.sibling}}function Fr(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,d=t,m=a,w=m.flags;switch(m.tag){case 0:case 11:case 15:Fr(d,m,s),Hl(4,m);break;case 1:if(Fr(d,m,s),l=m,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Y){Ot(l,l.return,Y)}if(l=m,d=l.updateQueue,d!==null){var x=l.stateNode;try{var j=d.shared.hiddenCallbacks;if(j!==null)for(d.shared.hiddenCallbacks=null,d=0;d<j.length;d++)bg(j[d],x)}catch(Y){Ot(l,l.return,Y)}}s&&w&64&&P_(m),Gl(m,m.return);break;case 27:j_(m);case 26:case 5:Fr(d,m,s),s&&l===null&&w&4&&L_(m),Gl(m,m.return);break;case 12:Fr(d,m,s);break;case 13:Fr(d,m,s),s&&w&4&&F_(d,m);break;case 22:m.memoizedState===null&&Fr(d,m,s),Gl(m,m.return);break;case 30:break;default:Fr(d,m,s)}a=a.sibling}}function rh(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&kl(s))}function sh(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&kl(t))}function Oa(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)K_(t,a,s,l),a=a.sibling}function K_(t,a,s,l){var d=a.flags;switch(a.tag){case 0:case 11:case 15:Oa(t,a,s,l),d&2048&&Hl(9,a);break;case 1:Oa(t,a,s,l);break;case 3:Oa(t,a,s,l),d&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&kl(t)));break;case 12:if(d&2048){Oa(t,a,s,l),t=a.stateNode;try{var m=a.memoizedProps,w=m.id,x=m.onPostCommit;typeof x=="function"&&x(w,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){Ot(a,a.return,j)}}else Oa(t,a,s,l);break;case 13:Oa(t,a,s,l);break;case 23:break;case 22:m=a.stateNode,w=a.alternate,a.memoizedState!==null?m._visibility&2?Oa(t,a,s,l):Kl(t,a):m._visibility&2?Oa(t,a,s,l):(m._visibility|=2,Bo(t,a,s,l,(a.subtreeFlags&10256)!==0)),d&2048&&rh(w,a);break;case 24:Oa(t,a,s,l),d&2048&&sh(a.alternate,a);break;default:Oa(t,a,s,l)}}function Bo(t,a,s,l,d){for(d=d&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var m=t,w=a,x=s,j=l,Y=w.flags;switch(w.tag){case 0:case 11:case 15:Bo(m,w,x,j,d),Hl(8,w);break;case 23:break;case 22:var se=w.stateNode;w.memoizedState!==null?se._visibility&2?Bo(m,w,x,j,d):Kl(m,w):(se._visibility|=2,Bo(m,w,x,j,d)),d&&Y&2048&&rh(w.alternate,w);break;case 24:Bo(m,w,x,j,d),d&&Y&2048&&sh(w.alternate,w);break;default:Bo(m,w,x,j,d)}a=a.sibling}}function Kl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,d=l.flags;switch(l.tag){case 22:Kl(s,l),d&2048&&rh(l.alternate,l);break;case 24:Kl(s,l),d&2048&&sh(l.alternate,l);break;default:Kl(s,l)}a=a.sibling}}var $l=8192;function qo(t){if(t.subtreeFlags&$l)for(t=t.child;t!==null;)$_(t),t=t.sibling}function $_(t){switch(t.tag){case 26:qo(t),t.flags&$l&&t.memoizedState!==null&&fw(ra,t.memoizedState,t.memoizedProps);break;case 5:qo(t);break;case 3:case 4:var a=ra;ra=Oc(t.stateNode.containerInfo),qo(t),ra=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=$l,$l=16777216,qo(t),$l=a):qo(t));break;default:qo(t)}}function Y_(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Yl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];wn=l,X_(l,t)}Y_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Q_(t),t=t.sibling}function Q_(t){switch(t.tag){case 0:case 11:case 15:Yl(t),t.flags&2048&&qr(9,t,t.return);break;case 3:Yl(t);break;case 12:Yl(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Ec(t)):Yl(t);break;default:Yl(t)}}function Ec(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];wn=l,X_(l,t)}Y_(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:qr(8,a,a.return),Ec(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Ec(a));break;default:Ec(a)}t=t.sibling}}function X_(t,a){for(;wn!==null;){var s=wn;switch(s.tag){case 0:case 11:case 15:qr(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:kl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,wn=l;else e:for(s=t;wn!==null;){l=wn;var d=l.sibling,m=l.return;if(q_(l),l===s){wn=null;break e}if(d!==null){d.return=m,wn=d;break e}wn=m}}}var xT={getCacheForType:function(t){var a=Hn(pn),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s}},RT=typeof WeakMap=="function"?WeakMap:Map,At=0,Lt=null,lt=null,ht=0,It=0,Ci=null,Hr=!1,zo=!1,oh=!1,or=0,Jt=0,Gr=0,Gs=0,lh=0,Hi=0,Fo=0,Ql=null,mi=null,uh=!1,ch=0,Sc=1/0,Tc=null,Kr=null,On=0,$r=null,Ho=null,Go=0,dh=0,fh=null,W_=null,Xl=0,hh=null;function xi(){if((At&2)!==0&&ht!==0)return ht&-ht;if(ae.T!==null){var t=Do;return t!==0?t:bh()}return $t()}function Z_(){Hi===0&&(Hi=(ht&536870912)===0||Et?vr():536870912);var t=Fi.current;return t!==null&&(t.flags|=32),Hi}function Ri(t,a,s){(t===Lt&&(It===2||It===9)||t.cancelPendingCommit!==null)&&(Ko(t,0),Yr(t,ht,Hi,!1)),Zn(t,s),((At&2)===0||t!==Lt)&&(t===Lt&&((At&2)===0&&(Gs|=s),Jt===4&&Yr(t,ht,Hi,!1)),Pa(t))}function J_(t,a,s){if((At&6)!==0)throw Error(r(327));var l=!s&&(a&124)===0&&(a&t.expiredLanes)===0||pa(t,a),d=l?DT(t,a):gh(t,a,!0),m=l;do{if(d===0){zo&&!l&&Yr(t,a,0,!1);break}else{if(s=t.current.alternate,m&&!kT(s)){d=gh(t,a,!1),m=!1;continue}if(d===2){if(m=a,t.errorRecoveryDisabledLanes&m)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var x=t;d=Ql;var j=x.current.memoizedState.isDehydrated;if(j&&(Ko(x,w).flags|=256),w=gh(x,w,!1),w!==2){if(oh&&!j){x.errorRecoveryDisabledLanes|=m,Gs|=m,d=4;break e}m=mi,mi=d,m!==null&&(mi===null?mi=m:mi.push.apply(mi,m))}d=w}if(m=!1,d!==2)continue}}if(d===1){Ko(t,0),Yr(t,a,0,!0);break}e:{switch(l=t,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Yr(l,a,Hi,!Hr);break e;case 2:mi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(d=ch+300-Gt(),10<d)){if(Yr(l,a,Hi,!Hr),yr(l,0,!0)!==0)break e;l.timeoutHandle=xy(ey.bind(null,l,s,mi,Tc,uh,a,Hi,Gs,Fo,Hr,m,2,-0,0),d);break e}ey(l,s,mi,Tc,uh,a,Hi,Gs,Fo,Hr,m,0,-0,0)}}break}while(!0);Pa(t)}function ey(t,a,s,l,d,m,w,x,j,Y,se,de,W,J){if(t.timeoutHandle=-1,de=a.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(iu={stylesheets:null,count:0,unsuspend:dw},$_(a),de=hw(),de!==null)){t.cancelPendingCommit=de(oy.bind(null,t,a,m,s,l,d,w,x,j,se,1,W,J)),Yr(t,m,w,!Y);return}oy(t,a,m,s,l,d,w,x,j)}function kT(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var d=s[l],m=d.getSnapshot;d=d.value;try{if(!Ti(m(),d))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Yr(t,a,s,l){a&=~lh,a&=~Gs,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var d=a;0<d;){var m=31-Kt(d),w=1<<m;l[m]=-1,d&=~w}s!==0&&hn(t,s,a)}function wc(){return(At&6)===0?(Wl(0),!1):!0}function mh(){if(lt!==null){if(It===0)var t=lt.return;else t=lt,Ja=Us=null,Nf(t),jo=null,ql=0,t=lt;for(;t!==null;)O_(t.alternate,t),t=t.return;lt=null}}function Ko(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,YT(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),mh(),Lt=t,lt=s=Xa(t.current,null),ht=a,It=0,Ci=null,Hr=!1,zo=pa(t,a),oh=!1,Fo=Hi=lh=Gs=Gr=Jt=0,mi=Ql=null,uh=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var d=31-Kt(l),m=1<<d;a|=t[d],l&=~m}return or=a,Ku(),s}function ty(t,a){it=null,ae.H=dc,a===Dl||a===tc?(a=yg(),It=3):a===pg?(a=yg(),It=4):It=a===v_?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ci=a,lt===null&&(Jt=1,gc(t,Ui(a,t.current)))}function ny(){var t=ae.H;return ae.H=dc,t===null?dc:t}function iy(){var t=ae.A;return ae.A=xT,t}function ph(){Jt=4,Hr||(ht&4194048)!==ht&&Fi.current!==null||(zo=!0),(Gr&134217727)===0&&(Gs&134217727)===0||Lt===null||Yr(Lt,ht,Hi,!1)}function gh(t,a,s){var l=At;At|=2;var d=ny(),m=iy();(Lt!==t||ht!==a)&&(Tc=null,Ko(t,a)),a=!1;var w=Jt;e:do try{if(It!==0&&lt!==null){var x=lt,j=Ci;switch(It){case 8:mh(),w=6;break e;case 3:case 2:case 9:case 6:Fi.current===null&&(a=!0);var Y=It;if(It=0,Ci=null,$o(t,x,j,Y),s&&zo){w=0;break e}break;default:Y=It,It=0,Ci=null,$o(t,x,j,Y)}}NT(),w=Jt;break}catch(se){ty(t,se)}while(!0);return a&&t.shellSuspendCounter++,Ja=Us=null,At=l,ae.H=d,ae.A=m,lt===null&&(Lt=null,ht=0,Ku()),w}function NT(){for(;lt!==null;)ay(lt)}function DT(t,a){var s=At;At|=2;var l=ny(),d=iy();Lt!==t||ht!==a?(Tc=null,Sc=Gt()+500,Ko(t,a)):zo=pa(t,a);e:do try{if(It!==0&&lt!==null){a=lt;var m=Ci;t:switch(It){case 1:It=0,Ci=null,$o(t,a,m,1);break;case 2:case 9:if(gg(m)){It=0,Ci=null,ry(a);break}a=function(){It!==2&&It!==9||Lt!==t||(It=7),Pa(t)},m.then(a,a);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:gg(m)?(It=0,Ci=null,ry(a)):(It=0,Ci=null,$o(t,a,m,7));break;case 5:var w=null;switch(lt.tag){case 26:w=lt.memoizedState;case 5:case 27:var x=lt;if(!w||By(w)){It=0,Ci=null;var j=x.sibling;if(j!==null)lt=j;else{var Y=x.return;Y!==null?(lt=Y,Ac(Y)):lt=null}break t}}It=0,Ci=null,$o(t,a,m,5);break;case 6:It=0,Ci=null,$o(t,a,m,6);break;case 8:mh(),Jt=6;break e;default:throw Error(r(462))}}OT();break}catch(se){ty(t,se)}while(!0);return Ja=Us=null,ae.H=l,ae.A=d,At=s,lt!==null?0:(Lt=null,ht=0,Ku(),Jt)}function OT(){for(;lt!==null&&!Di();)ay(lt)}function ay(t){var a=N_(t.alternate,t,or);t.memoizedProps=t.pendingProps,a===null?Ac(t):lt=a}function ry(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=A_(s,a,a.pendingProps,a.type,void 0,ht);break;case 11:a=A_(s,a,a.pendingProps,a.type.render,a.ref,ht);break;case 5:Nf(a);default:O_(s,a),a=lt=sg(a,or),a=N_(s,a,or)}t.memoizedProps=t.pendingProps,a===null?Ac(t):lt=a}function $o(t,a,s,l){Ja=Us=null,Nf(a),jo=null,ql=0;var d=a.return;try{if(ST(t,d,a,s,ht)){Jt=1,gc(t,Ui(s,t.current)),lt=null;return}}catch(m){if(d!==null)throw lt=d,m;Jt=1,gc(t,Ui(s,t.current)),lt=null;return}a.flags&32768?(Et||l===1?t=!0:zo||(ht&536870912)!==0?t=!1:(Hr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Fi.current,l!==null&&l.tag===13&&(l.flags|=16384))),sy(a,t)):Ac(a)}function Ac(t){var a=t;do{if((a.flags&32768)!==0){sy(a,Hr);return}t=a.return;var s=wT(a.alternate,a,or);if(s!==null){lt=s;return}if(a=a.sibling,a!==null){lt=a;return}lt=a=t}while(a!==null);Jt===0&&(Jt=5)}function sy(t,a){do{var s=AT(t.alternate,t);if(s!==null){s.flags&=32767,lt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){lt=t;return}lt=t=s}while(t!==null);Jt=6,lt=null}function oy(t,a,s,l,d,m,w,x,j){t.cancelPendingCommit=null;do Ic();while(On!==0);if((At&6)!==0)throw Error(r(327));if(a!==null){if(a===t.current)throw Error(r(177));if(m=a.lanes|a.childLanes,m|=sf,Ss(t,s,m,w,x,j),t===Lt&&(lt=Lt=null,ht=0),Ho=a,$r=t,Go=s,dh=m,fh=d,W_=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,VT(qe,function(){return fy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=ae.T,ae.T=null,d=Te.p,Te.p=2,w=At,At|=4;try{IT(t,a,s)}finally{At=w,Te.p=d,ae.T=l}}On=1,ly(),uy(),cy()}}function ly(){if(On===1){On=0;var t=$r,a=Ho,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=ae.T,ae.T=null;var l=Te.p;Te.p=2;var d=At;At|=4;try{H_(a,t);var m=xh,w=Xp(t.containerInfo),x=m.focusedElem,j=m.selectionRange;if(w!==x&&x&&x.ownerDocument&&Qp(x.ownerDocument.documentElement,x)){if(j!==null&&ef(x)){var Y=j.start,se=j.end;if(se===void 0&&(se=Y),"selectionStart"in x)x.selectionStart=Y,x.selectionEnd=Math.min(se,x.value.length);else{var de=x.ownerDocument||document,W=de&&de.defaultView||window;if(W.getSelection){var J=W.getSelection(),He=x.textContent.length,je=Math.min(j.start,He),Dt=j.end===void 0?je:Math.min(j.end,He);!J.extend&&je>Dt&&(w=Dt,Dt=je,je=w);var H=Yp(x,je),z=Yp(x,Dt);if(H&&z&&(J.rangeCount!==1||J.anchorNode!==H.node||J.anchorOffset!==H.offset||J.focusNode!==z.node||J.focusOffset!==z.offset)){var K=de.createRange();K.setStart(H.node,H.offset),J.removeAllRanges(),je>Dt?(J.addRange(K),J.extend(z.node,z.offset)):(K.setEnd(z.node,z.offset),J.addRange(K))}}}}for(de=[],J=x;J=J.parentNode;)J.nodeType===1&&de.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<de.length;x++){var ue=de[x];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}jc=!!Ch,xh=Ch=null}finally{At=d,Te.p=l,ae.T=s}}t.current=a,On=2}}function uy(){if(On===2){On=0;var t=$r,a=Ho,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=ae.T,ae.T=null;var l=Te.p;Te.p=2;var d=At;At|=4;try{B_(t,a.alternate,a)}finally{At=d,Te.p=l,ae.T=s}}On=3}}function cy(){if(On===4||On===3){On=0,on();var t=$r,a=Ho,s=Go,l=W_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?On=5:(On=0,Ho=$r=null,dy(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Kr=null),ga(s),a=a.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(jt,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=ae.T,d=Te.p,Te.p=2,ae.T=null;try{for(var m=t.onRecoverableError,w=0;w<l.length;w++){var x=l[w];m(x.value,{componentStack:x.stack})}}finally{ae.T=a,Te.p=d}}(Go&3)!==0&&Ic(),Pa(t),d=t.pendingLanes,(s&4194090)!==0&&(d&42)!==0?t===hh?Xl++:(Xl=0,hh=t):Xl=0,Wl(0)}}function dy(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,kl(a)))}function Ic(t){return ly(),uy(),cy(),fy()}function fy(){if(On!==5)return!1;var t=$r,a=dh;dh=0;var s=ga(Go),l=ae.T,d=Te.p;try{Te.p=32>s?32:s,ae.T=null,s=fh,fh=null;var m=$r,w=Go;if(On=0,Ho=$r=null,Go=0,(At&6)!==0)throw Error(r(331));var x=At;if(At|=4,Q_(m.current),K_(m,m.current,w,s),At=x,Wl(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(jt,m)}catch{}return!0}finally{Te.p=d,ae.T=l,dy(t,a)}}function hy(t,a,s){a=Ui(s,a),a=Gf(t.stateNode,a,2),t=Vr(t,a,2),t!==null&&(Zn(t,2),Pa(t))}function Ot(t,a,s){if(t.tag===3)hy(t,t,s);else for(;a!==null;){if(a.tag===3){hy(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Kr===null||!Kr.has(l))){t=Ui(s,t),s=__(2),l=Vr(a,s,2),l!==null&&(y_(s,l,a,t),Zn(l,2),Pa(l));break}}a=a.return}}function _h(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new RT;var d=new Set;l.set(a,d)}else d=l.get(a),d===void 0&&(d=new Set,l.set(a,d));d.has(s)||(oh=!0,d.add(s),t=PT.bind(null,t,a,s),a.then(t,t))}function PT(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Lt===t&&(ht&s)===s&&(Jt===4||Jt===3&&(ht&62914560)===ht&&300>Gt()-ch?(At&2)===0&&Ko(t,0):lh|=s,Fo===ht&&(Fo=0)),Pa(t)}function my(t,a){a===0&&(a=Fa()),t=xo(t,a),t!==null&&(Zn(t,a),Pa(t))}function MT(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),my(t,s)}function LT(t,a){var s=0;switch(t.tag){case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(a),my(t,s)}function VT(t,a){return Ce(t,a)}var Cc=null,Yo=null,yh=!1,xc=!1,vh=!1,Ks=0;function Pa(t){t!==Yo&&t.next===null&&(Yo===null?Cc=Yo=t:Yo=Yo.next=t),xc=!0,yh||(yh=!0,UT())}function Wl(t,a){if(!vh&&xc){vh=!0;do for(var s=!1,l=Cc;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var m=0;else{var w=l.suspendedLanes,x=l.pingedLanes;m=(1<<31-Kt(42|t)+1)-1,m&=d&~(w&~x),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,yy(l,m))}else m=ht,m=yr(l,l===Lt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||pa(l,m)||(s=!0,yy(l,m));l=l.next}while(s);vh=!1}}function jT(){py()}function py(){xc=yh=!1;var t=0;Ks!==0&&($T()&&(t=Ks),Ks=0);for(var a=Gt(),s=null,l=Cc;l!==null;){var d=l.next,m=gy(l,a);m===0?(l.next=null,s===null?Cc=d:s.next=d,d===null&&(Yo=s)):(s=l,(t!==0||(m&3)!==0)&&(xc=!0)),l=d}Wl(t)}function gy(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var w=31-Kt(m),x=1<<w,j=d[w];j===-1?((x&s)===0||(x&l)!==0)&&(d[w]=Qe(x,a)):j<=a&&(t.expiredLanes|=x),m&=~x}if(a=Lt,s=ht,s=yr(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(It===2||It===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&rt(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||pa(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&rt(l),ga(s)){case 2:case 8:s=jn;break;case 32:s=qe;break;case 268435456:s=Vt;break;default:s=qe}return l=_y.bind(null,t),s=Ce(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&rt(l),t.callbackPriority=2,t.callbackNode=null,2}function _y(t,a){if(On!==0&&On!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Ic()&&t.callbackNode!==s)return null;var l=ht;return l=yr(t,t===Lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(J_(t,l,a),gy(t,Gt()),t.callbackNode!=null&&t.callbackNode===s?_y.bind(null,t):null)}function yy(t,a){if(Ic())return null;J_(t,a,!0)}function UT(){QT(function(){(At&6)!==0?Ce(vt,jT):py()})}function bh(){return Ks===0&&(Ks=vr()),Ks}function vy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ui(""+t)}function by(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function BT(t,a,s,l,d){if(a==="submit"&&s&&s.stateNode===d){var m=vy((d[xt]||null).action),w=l.submitter;w&&(a=(a=w[xt]||null)?vy(a.formAction):w.getAttribute("formAction"),a!==null&&(m=a,w=null));var x=new U("action","action",null,l,d);t.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ks!==0){var j=w?by(d,w):new FormData(d);Bf(s,{pending:!0,data:j,method:d.method,action:m},null,j)}}else typeof m=="function"&&(x.preventDefault(),j=w?by(d,w):new FormData(d),Bf(s,{pending:!0,data:j,method:d.method,action:m},m,j))},currentTarget:d}]})}}for(var Eh=0;Eh<rf.length;Eh++){var Sh=rf[Eh],qT=Sh.toLowerCase(),zT=Sh[0].toUpperCase()+Sh.slice(1);aa(qT,"on"+zT)}aa(Jp,"onAnimationEnd"),aa(eg,"onAnimationIteration"),aa(tg,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(rT,"onTransitionRun"),aa(sT,"onTransitionStart"),aa(oT,"onTransitionCancel"),aa(ng,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),Un("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Un("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Un("onBeforeInput",["compositionend","keypress","textInput","paste"]),Un("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Un("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function Ey(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],d=l.event;l=l.listeners;e:{var m=void 0;if(a)for(var w=l.length-1;0<=w;w--){var x=l[w],j=x.instance,Y=x.currentTarget;if(x=x.listener,j!==m&&d.isPropagationStopped())break e;m=x,d.currentTarget=Y;try{m(d)}catch(se){pc(se)}d.currentTarget=null,m=j}else for(w=0;w<l.length;w++){if(x=l[w],j=x.instance,Y=x.currentTarget,x=x.listener,j!==m&&d.isPropagationStopped())break e;m=x,d.currentTarget=Y;try{m(d)}catch(se){pc(se)}d.currentTarget=null,m=j}}}}function ut(t,a){var s=a[vn];s===void 0&&(s=a[vn]=new Set);var l=t+"__bubble";s.has(l)||(Sy(a,t,2,!1),s.add(l))}function Th(t,a,s){var l=0;a&&(l|=4),Sy(s,t,l,a)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function wh(t){if(!t[Rc]){t[Rc]=!0,ba.forEach(function(s){s!=="selectionchange"&&(FT.has(s)||Th(s,!1,t),Th(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Rc]||(a[Rc]=!0,Th("selectionchange",!1,a))}}function Sy(t,a,s,l){switch(Ky(a)){case 2:var d=gw;break;case 8:d=_w;break;default:d=jh}s=d.bind(null,a,s,t),d=void 0,!Rn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(a,s,{capture:!0,passive:d}):t.addEventListener(a,s,!0):d!==void 0?t.addEventListener(a,s,{passive:d}):t.addEventListener(a,s,!1)}function Ah(t,a,s,l,d){var m=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var x=l.stateNode.containerInfo;if(x===d)break;if(w===4)for(w=l.return;w!==null;){var j=w.tag;if((j===3||j===4)&&w.stateNode.containerInfo===d)return;w=w.return}for(;x!==null;){if(w=Ut(x),w===null)return;if(j=w.tag,j===5||j===6||j===26||j===27){l=m=w;continue e}x=x.parentNode}}l=l.return}De(function(){var Y=m,se=Wt(s),de=[];e:{var W=ig.get(t);if(W!==void 0){var J=U,He=t;switch(t){case"keypress":if(Ei(s)===0)break e;case"keydown":case"keyup":J=Nr;break;case"focusin":He="focus",J=Ir;break;case"focusout":He="blur",J=Ir;break;case"beforeblur":case"afterblur":J=Ir;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=bt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Sl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=bo;break;case Jp:case eg:case tg:J=xr;break;case ng:J=Eo;break;case"scroll":case"scrollend":J=le;break;case"wheel":J=Dr;break;case"copy":case"cut":case"paste":J=Rr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=ks;break;case"toggle":case"beforetoggle":J=To}var je=(a&4)!==0,Dt=!je&&(t==="scroll"||t==="scrollend"),H=je?W!==null?W+"Capture":null:W;je=[];for(var z=Y,K;z!==null;){var ue=z;if(K=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||K===null||H===null||(ue=Aa(z,H),ue!=null&&je.push(Jl(z,ue,K))),Dt)break;z=z.return}0<je.length&&(W=new J(W,He,null,s,se),de.push({event:W,listeners:je}))}}if((a&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",J=t==="mouseout"||t==="pointerout",W&&s!==bi&&(He=s.relatedTarget||s.fromElement)&&(Ut(He)||He[Jn]))break e;if((J||W)&&(W=se.window===se?se:(W=se.ownerDocument)?W.defaultView||W.parentWindow:window,J?(He=s.relatedTarget||s.toElement,J=Y,He=He?Ut(He):null,He!==null&&(Dt=u(He),je=He.tag,He!==Dt||je!==5&&je!==27&&je!==6)&&(He=null)):(J=null,He=Y),J!==He)){if(je=bt,ue="onMouseLeave",H="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(je=ks,ue="onPointerLeave",H="onPointerEnter",z="pointer"),Dt=J==null?W:Mi(J),K=He==null?W:Mi(He),W=new je(ue,z+"leave",J,s,se),W.target=Dt,W.relatedTarget=K,ue=null,Ut(se)===Y&&(je=new je(H,z+"enter",He,s,se),je.target=K,je.relatedTarget=Dt,ue=je),Dt=ue,J&&He)t:{for(je=J,H=He,z=0,K=je;K;K=Qo(K))z++;for(K=0,ue=H;ue;ue=Qo(ue))K++;for(;0<z-K;)je=Qo(je),z--;for(;0<K-z;)H=Qo(H),K--;for(;z--;){if(je===H||H!==null&&je===H.alternate)break t;je=Qo(je),H=Qo(H)}je=null}else je=null;J!==null&&Ty(de,W,J,je,!1),He!==null&&Dt!==null&&Ty(de,Dt,He,je,!0)}}e:{if(W=Y?Mi(Y):window,J=W.nodeName&&W.nodeName.toLowerCase(),J==="select"||J==="input"&&W.type==="file")var ke=Ra;else if($e(W))if(Gu)ke=nT;else{ke=eT;var ot=JS}else J=W.nodeName,!J||J.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&Cs(Y.elementType)&&(ke=Ra):ke=tT;if(ke&&(ke=ke(t,Y))){tn(de,ke,s,se);break e}ot&&ot(t,W,Y),t==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&li(W,"number",W.value)}switch(ot=Y?Mi(Y):window,t){case"focusin":($e(ot)||ot.contentEditable==="true")&&(Ao=ot,tf=Y,Al=null);break;case"focusout":Al=tf=Ao=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,Wp(de,s,se);break;case"selectionchange":if(aT)break;case"keydown":case"keyup":Wp(de,s,se)}var Me;if(Si)e:{switch(t){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ne?ee(t,s)&&(ze="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ze="onCompositionStart");ze&&(T&&s.locale!=="ko"&&(ne||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ne&&(Me=Ca()):(Fn=se,di="value"in Fn?Fn.value:Fn.textContent,ne=!0)),ot=kc(Y,ze),0<ot.length&&(ze=new Rs(ze,t,null,s,se),de.push({event:ze,listeners:ot}),Me?ze.data=Me:(Me=V(s),Me!==null&&(ze.data=Me)))),(Me=v?Ie(t,s):Ae(t,s))&&(ze=kc(Y,"onBeforeInput"),0<ze.length&&(ot=new Rs("onBeforeInput","beforeinput",null,s,se),de.push({event:ot,listeners:ze}),ot.data=Me)),BT(de,t,Y,s,se)}Ey(de,a)})}function Jl(t,a,s){return{instance:t,listener:a,currentTarget:s}}function kc(t,a){for(var s=a+"Capture",l=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=Aa(t,s),d!=null&&l.unshift(Jl(t,d,m)),d=Aa(t,a),d!=null&&l.push(Jl(t,d,m))),t.tag===3)return l;t=t.return}return[]}function Qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ty(t,a,s,l,d){for(var m=a._reactName,w=[];s!==null&&s!==l;){var x=s,j=x.alternate,Y=x.stateNode;if(x=x.tag,j!==null&&j===l)break;x!==5&&x!==26&&x!==27||Y===null||(j=Y,d?(Y=Aa(s,m),Y!=null&&w.unshift(Jl(s,Y,j))):d||(Y=Aa(s,m),Y!=null&&w.push(Jl(s,Y,j)))),s=s.return}w.length!==0&&t.push({event:a,listeners:w})}var HT=/\r\n?/g,GT=/\u0000|\uFFFD/g;function wy(t){return(typeof t=="string"?t:""+t).replace(HT,`
`).replace(GT,"")}function Ay(t,a){return a=wy(a),wy(t)===a}function Nc(){}function Nt(t,a,s,l,d,m){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Bn(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Bn(t,""+l);break;case"className":ti(t,"class",l);break;case"tabIndex":ti(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(t,s,l);break;case"style":$a(t,l,m);break;case"data":if(a!=="object"){ti(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ui(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(a!=="input"&&Nt(t,a,"name",d.name,d,null),Nt(t,a,"formEncType",d.formEncType,d,null),Nt(t,a,"formMethod",d.formMethod,d,null),Nt(t,a,"formTarget",d.formTarget,d,null)):(Nt(t,a,"encType",d.encType,d,null),Nt(t,a,"method",d.method,d,null),Nt(t,a,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=ui(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Nc);break;case"onScroll":l!=null&&ut("scroll",t);break;case"onScrollEnd":l!=null&&ut("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(s=l.__html,s!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=ui(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":ut("beforetoggle",t),ut("toggle",t),Wi(t,"popover",l);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Wi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Tr.get(s)||s,Wi(t,s,l))}}function Ih(t,a,s,l,d,m){switch(s){case"style":$a(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(s=l.__html,s!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"children":typeof l=="string"?Bn(t,l):(typeof l=="number"||typeof l=="bigint")&&Bn(t,""+l);break;case"onScroll":l!=null&&ut("scroll",t);break;case"onScrollEnd":l!=null&&ut("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Nc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xn.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),a=s.slice(2,d?s.length-7:void 0),m=t[xt]||null,m=m!=null?m[s]:null,typeof m=="function"&&t.removeEventListener(a,m,d),typeof l=="function")){typeof m!="function"&&m!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,d);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Wi(t,s,l)}}}function Pn(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",t),ut("load",t);var l=!1,d=!1,m;for(m in s)if(s.hasOwnProperty(m)){var w=s[m];if(w!=null)switch(m){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(t,a,m,w,s,null)}}d&&Nt(t,a,"srcSet",s.srcSet,s,null),l&&Nt(t,a,"src",s.src,s,null);return;case"input":ut("invalid",t);var x=m=w=d=null,j=null,Y=null;for(l in s)if(s.hasOwnProperty(l)){var se=s[l];if(se!=null)switch(l){case"name":d=se;break;case"type":w=se;break;case"checked":j=se;break;case"defaultChecked":Y=se;break;case"value":m=se;break;case"defaultValue":x=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,a));break;default:Nt(t,a,l,se,s,null)}}Vi(t,m,x,j,Y,w,d,!1),gt(t);return;case"select":ut("invalid",t),l=w=m=null;for(d in s)if(s.hasOwnProperty(d)&&(x=s[d],x!=null))switch(d){case"value":m=x;break;case"defaultValue":w=x;break;case"multiple":l=x;default:Nt(t,a,d,x,s,null)}a=m,s=w,t.multiple=!!l,a!=null?na(t,!!l,a,!1):s!=null&&na(t,!!l,s,!0);return;case"textarea":ut("invalid",t),m=d=l=null;for(w in s)if(s.hasOwnProperty(w)&&(x=s[w],x!=null))switch(w){case"value":l=x;break;case"defaultValue":d=x;break;case"children":m=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:Nt(t,a,w,x,s,null)}Ta(t,l,d,m),gt(t);return;case"option":for(j in s)if(s.hasOwnProperty(j)&&(l=s[j],l!=null))switch(j){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Nt(t,a,j,l,s,null)}return;case"dialog":ut("beforetoggle",t),ut("toggle",t),ut("cancel",t),ut("close",t);break;case"iframe":case"object":ut("load",t);break;case"video":case"audio":for(l=0;l<Zl.length;l++)ut(Zl[l],t);break;case"image":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"embed":case"source":case"link":ut("error",t),ut("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in s)if(s.hasOwnProperty(Y)&&(l=s[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Nt(t,a,Y,l,s,null)}return;default:if(Cs(a)){for(se in s)s.hasOwnProperty(se)&&(l=s[se],l!==void 0&&Ih(t,a,se,l,s,void 0));return}}for(x in s)s.hasOwnProperty(x)&&(l=s[x],l!=null&&Nt(t,a,x,l,s,null))}function KT(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,w=null,x=null,j=null,Y=null,se=null;for(J in s){var de=s[J];if(s.hasOwnProperty(J)&&de!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":j=de;default:l.hasOwnProperty(J)||Nt(t,a,J,null,l,de)}}for(var W in l){var J=l[W];if(de=s[W],l.hasOwnProperty(W)&&(J!=null||de!=null))switch(W){case"type":m=J;break;case"name":d=J;break;case"checked":Y=J;break;case"defaultChecked":se=J;break;case"value":w=J;break;case"defaultValue":x=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,a));break;default:J!==de&&Nt(t,a,W,J,l,de)}}En(t,w,x,j,Y,se,m,d);return;case"select":J=w=x=W=null;for(m in s)if(j=s[m],s.hasOwnProperty(m)&&j!=null)switch(m){case"value":break;case"multiple":J=j;default:l.hasOwnProperty(m)||Nt(t,a,m,null,l,j)}for(d in l)if(m=l[d],j=s[d],l.hasOwnProperty(d)&&(m!=null||j!=null))switch(d){case"value":W=m;break;case"defaultValue":x=m;break;case"multiple":w=m;default:m!==j&&Nt(t,a,d,m,l,j)}a=x,s=w,l=J,W!=null?na(t,!!s,W,!1):!!l!=!!s&&(a!=null?na(t,!!s,a,!0):na(t,!!s,s?[]:"",!1));return;case"textarea":J=W=null;for(x in s)if(d=s[x],s.hasOwnProperty(x)&&d!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Nt(t,a,x,null,l,d)}for(w in l)if(d=l[w],m=s[w],l.hasOwnProperty(w)&&(d!=null||m!=null))switch(w){case"value":W=d;break;case"defaultValue":J=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&Nt(t,a,w,d,l,m)}St(t,W,J);return;case"option":for(var He in s)if(W=s[He],s.hasOwnProperty(He)&&W!=null&&!l.hasOwnProperty(He))switch(He){case"selected":t.selected=!1;break;default:Nt(t,a,He,null,l,W)}for(j in l)if(W=l[j],J=s[j],l.hasOwnProperty(j)&&W!==J&&(W!=null||J!=null))switch(j){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Nt(t,a,j,W,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in s)W=s[je],s.hasOwnProperty(je)&&W!=null&&!l.hasOwnProperty(je)&&Nt(t,a,je,null,l,W);for(Y in l)if(W=l[Y],J=s[Y],l.hasOwnProperty(Y)&&W!==J&&(W!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,a));break;default:Nt(t,a,Y,W,l,J)}return;default:if(Cs(a)){for(var Dt in s)W=s[Dt],s.hasOwnProperty(Dt)&&W!==void 0&&!l.hasOwnProperty(Dt)&&Ih(t,a,Dt,void 0,l,W);for(se in l)W=l[se],J=s[se],!l.hasOwnProperty(se)||W===J||W===void 0&&J===void 0||Ih(t,a,se,W,l,J);return}}for(var H in s)W=s[H],s.hasOwnProperty(H)&&W!=null&&!l.hasOwnProperty(H)&&Nt(t,a,H,null,l,W);for(de in l)W=l[de],J=s[de],!l.hasOwnProperty(de)||W===J||W==null&&J==null||Nt(t,a,de,W,l,J)}var Ch=null,xh=null;function Dc(t){return t.nodeType===9?t:t.ownerDocument}function Iy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cy(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Rh(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var kh=null;function $T(){var t=window.event;return t&&t.type==="popstate"?t===kh?!1:(kh=t,!0):(kh=null,!1)}var xy=typeof setTimeout=="function"?setTimeout:void 0,YT=typeof clearTimeout=="function"?clearTimeout:void 0,Ry=typeof Promise=="function"?Promise:void 0,QT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ry<"u"?function(t){return Ry.resolve(null).then(t).catch(XT)}:xy;function XT(t){setTimeout(function(){throw t})}function Qr(t){return t==="head"}function ky(t,a){var s=a,l=0,d=0;do{var m=s.nextSibling;if(t.removeChild(s),m&&m.nodeType===8)if(s=m.data,s==="/$"){if(0<l&&8>l){s=l;var w=t.ownerDocument;if(s&1&&eu(w.documentElement),s&2&&eu(w.body),s&4)for(s=w.head,eu(s),w=s.firstChild;w;){var x=w.nextSibling,j=w.nodeName;w[ya]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&w.rel.toLowerCase()==="stylesheet"||s.removeChild(w),w=x}}if(d===0){t.removeChild(m),lu(a);return}d--}else s==="$"||s==="$?"||s==="$!"?d++:l=s.charCodeAt(0)-48;else l=0;s=m}while(s);lu(a)}function Nh(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Nh(s),va(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function WT(t,a,s,l){for(;t.nodeType===1;){var d=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ya])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=sa(t.nextSibling),t===null)break}return null}function ZT(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=sa(t.nextSibling),t===null))return null;return t}function Dh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function JT(t,a){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function sa(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return t}var Oh=null;function Ny(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return t;a--}else s==="/$"&&a++}t=t.previousSibling}return null}function Dy(t,a,s){switch(a=Dc(s),t){case"html":if(t=a.documentElement,!t)throw Error(r(452));return t;case"head":if(t=a.head,!t)throw Error(r(453));return t;case"body":if(t=a.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function eu(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);va(t)}var Gi=new Map,Oy=new Set;function Oc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var lr=Te.d;Te.d={f:ew,r:tw,D:nw,C:iw,L:aw,m:rw,X:ow,S:sw,M:lw};function ew(){var t=lr.f(),a=wc();return t||a}function tw(t){var a=yi(t);a!==null&&a.tag===5&&a.type==="form"?Jg(a):lr.r(t)}var Xo=typeof document>"u"?null:document;function Py(t,a,s){var l=Xo;if(l&&typeof a=="string"&&a){var d=Bt(a);d='link[rel="'+t+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),Oy.has(d)||(Oy.add(d),t={rel:t,crossOrigin:s,href:a},l.querySelector(d)===null&&(a=l.createElement("link"),Pn(a,"link",t),zt(a),l.head.appendChild(a)))}}function nw(t){lr.D(t),Py("dns-prefetch",t,null)}function iw(t,a){lr.C(t,a),Py("preconnect",t,a)}function aw(t,a,s){lr.L(t,a,s);var l=Xo;if(l&&t&&a){var d='link[rel="preload"][as="'+Bt(a)+'"]';a==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+Bt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+Bt(s.imageSizes)+'"]')):d+='[href="'+Bt(t)+'"]';var m=d;switch(a){case"style":m=Wo(t);break;case"script":m=Zo(t)}Gi.has(m)||(t=E({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),Gi.set(m,t),l.querySelector(d)!==null||a==="style"&&l.querySelector(tu(m))||a==="script"&&l.querySelector(nu(m))||(a=l.createElement("link"),Pn(a,"link",t),zt(a),l.head.appendChild(a)))}}function rw(t,a){lr.m(t,a);var s=Xo;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Bt(l)+'"][href="'+Bt(t)+'"]',m=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Zo(t)}if(!Gi.has(m)&&(t=E({rel:"modulepreload",href:t},a),Gi.set(m,t),s.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(nu(m)))return}l=s.createElement("link"),Pn(l,"link",t),zt(l),s.head.appendChild(l)}}}function sw(t,a,s){lr.S(t,a,s);var l=Xo;if(l&&t){var d=mn(l).hoistableStyles,m=Wo(t);a=a||"default";var w=d.get(m);if(!w){var x={loading:0,preload:null};if(w=l.querySelector(tu(m)))x.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":a},s),(s=Gi.get(m))&&Ph(t,s);var j=w=l.createElement("link");zt(j),Pn(j,"link",t),j._p=new Promise(function(Y,se){j.onload=Y,j.onerror=se}),j.addEventListener("load",function(){x.loading|=1}),j.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Pc(w,a,l)}w={type:"stylesheet",instance:w,count:1,state:x},d.set(m,w)}}}function ow(t,a){lr.X(t,a);var s=Xo;if(s&&t){var l=mn(s).hoistableScripts,d=Zo(t),m=l.get(d);m||(m=s.querySelector(nu(d)),m||(t=E({src:t,async:!0},a),(a=Gi.get(d))&&Mh(t,a),m=s.createElement("script"),zt(m),Pn(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function lw(t,a){lr.M(t,a);var s=Xo;if(s&&t){var l=mn(s).hoistableScripts,d=Zo(t),m=l.get(d);m||(m=s.querySelector(nu(d)),m||(t=E({src:t,async:!0,type:"module"},a),(a=Gi.get(d))&&Mh(t,a),m=s.createElement("script"),zt(m),Pn(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(d,m))}}function My(t,a,s,l){var d=(d=te.current)?Oc(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=Wo(s.href),s=mn(d).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Wo(s.href);var m=mn(d).hoistableStyles,w=m.get(t);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,w),(m=d.querySelector(tu(t)))&&!m._p&&(w.instance=m,w.state.loading=5),Gi.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Gi.set(t,s),m||uw(d,t,s,w.state))),a&&l===null)throw Error(r(528,""));return w}if(a&&l!==null)throw Error(r(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Zo(s),s=mn(d).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Wo(t){return'href="'+Bt(t)+'"'}function tu(t){return'link[rel="stylesheet"]['+t+"]"}function Ly(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function uw(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Pn(a,"link",s),zt(a),t.head.appendChild(a))}function Zo(t){return'[src="'+Bt(t)+'"]'}function nu(t){return"script[async]"+t}function Vy(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+Bt(s.href)+'"]');if(l)return a.instance=l,zt(l),l;var d=E({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),zt(l),Pn(l,"style",d),Pc(l,s.precedence,t),a.instance=l;case"stylesheet":d=Wo(s.href);var m=t.querySelector(tu(d));if(m)return a.state.loading|=4,a.instance=m,zt(m),m;l=Ly(s),(d=Gi.get(d))&&Ph(l,d),m=(t.ownerDocument||t).createElement("link"),zt(m);var w=m;return w._p=new Promise(function(x,j){w.onload=x,w.onerror=j}),Pn(m,"link",l),a.state.loading|=4,Pc(m,s.precedence,t),a.instance=m;case"script":return m=Zo(s.src),(d=t.querySelector(nu(m)))?(a.instance=d,zt(d),d):(l=s,(d=Gi.get(m))&&(l=E({},s),Mh(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),zt(d),Pn(d,"link",l),t.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,Pc(l,s.precedence,t));return a.instance}function Pc(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,m=d,w=0;w<l.length;w++){var x=l[w];if(x.dataset.precedence===a)m=x;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function Ph(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Mh(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Mc=null;function jy(t,a,s){if(Mc===null){var l=new Map,d=Mc=new Map;d.set(s,l)}else d=Mc,l=d.get(s),l||(l=new Map,d.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),d=0;d<s.length;d++){var m=s[d];if(!(m[ya]||m[Xt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(a)||"";w=t+w;var x=l.get(w);x?x.push(m):l.set(w,[m])}}return l}function Uy(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function cw(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function By(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var iu=null;function dw(){}function fw(t,a,s){if(iu===null)throw Error(r(475));var l=iu;if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Wo(s.href),m=t.querySelector(tu(d));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Lc.bind(l),t.then(l,l)),a.state.loading|=4,a.instance=m,zt(m);return}m=t.ownerDocument||t,s=Ly(s),(d=Gi.get(d))&&Ph(s,d),m=m.createElement("link"),zt(m);var w=m;w._p=new Promise(function(x,j){w.onload=x,w.onerror=j}),Pn(m,"link",s),a.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(l.count++,a=Lc.bind(l),t.addEventListener("load",a),t.addEventListener("error",a))}}function hw(){if(iu===null)throw Error(r(475));var t=iu;return t.stylesheets&&t.count===0&&Lh(t,t.stylesheets),0<t.count?function(a){var s=setTimeout(function(){if(t.stylesheets&&Lh(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Lc(){if(this.count--,this.count===0){if(this.stylesheets)Lh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Vc=null;function Lh(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Vc=new Map,a.forEach(mw,t),Vc=null,Lc.call(t))}function mw(t,a){if(!(a.state.loading&4)){var s=Vc.get(t);if(s)var l=s.get(null);else{s=new Map,Vc.set(t,s);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var w=d[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(s.set(w.dataset.precedence,w),l=w)}l&&s.set(null,l)}d=a.instance,w=d.getAttribute("data-precedence"),m=s.get(w)||l,m===l&&s.set(null,d),s.set(w,d),this.count++,l=Lc.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),a.state.loading|=4}}var au={$$typeof:_e,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function pw(t,a,s,l,d,m,w,x){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.hiddenUpdates=Pi(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function qy(t,a,s,l,d,m,w,x,j,Y,se,de){return t=new pw(t,a,s,w,x,j,Y,de),a=1,m===!0&&(a|=24),m=wi(3,null,null,a),t.current=m,m.stateNode=t,a=_f(),a.refCount++,t.pooledCache=a,a.refCount++,m.memoizedState={element:l,isDehydrated:s,cache:a},Ef(m),t}function zy(t){return t?(t=Ro,t):Ro}function Fy(t,a,s,l,d,m){d=zy(d),l.context===null?l.context=d:l.pendingContext=d,l=Lr(a),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=Vr(t,l,a),s!==null&&(Ri(s,t,a),Pl(s,t,a))}function Hy(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function Vh(t,a){Hy(t,a),(t=t.alternate)&&Hy(t,a)}function Gy(t){if(t.tag===13){var a=xo(t,67108864);a!==null&&Ri(a,t,67108864),Vh(t,67108864)}}var jc=!0;function gw(t,a,s,l){var d=ae.T;ae.T=null;var m=Te.p;try{Te.p=2,jh(t,a,s,l)}finally{Te.p=m,ae.T=d}}function _w(t,a,s,l){var d=ae.T;ae.T=null;var m=Te.p;try{Te.p=8,jh(t,a,s,l)}finally{Te.p=m,ae.T=d}}function jh(t,a,s,l){if(jc){var d=Uh(l);if(d===null)Ah(t,a,l,Uc,s),$y(t,l);else if(vw(d,t,a,s,l))l.stopPropagation();else if($y(t,l),a&4&&-1<yw.indexOf(t)){for(;d!==null;){var m=yi(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=_i(m.pendingLanes);if(w!==0){var x=m;for(x.pendingLanes|=2,x.entangledLanes|=2;w;){var j=1<<31-Kt(w);x.entanglements[1]|=j,w&=~j}Pa(m),(At&6)===0&&(Sc=Gt()+500,Wl(0))}}break;case 13:x=xo(m,2),x!==null&&Ri(x,m,2),wc(),Vh(m,2)}if(m=Uh(l),m===null&&Ah(t,a,l,Uc,s),m===d)break;d=m}d!==null&&l.stopPropagation()}else Ah(t,a,l,null,s)}}function Uh(t){return t=Wt(t),Bh(t)}var Uc=null;function Bh(t){if(Uc=null,t=Ut(t),t!==null){var a=u(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=f(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Uc=t,null}function Ky(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oi()){case vt:return 2;case jn:return 8;case qe:case st:return 32;case Vt:return 268435456;default:return 32}default:return 32}}var qh=!1,Xr=null,Wr=null,Zr=null,ru=new Map,su=new Map,Jr=[],yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $y(t,a){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":ru.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(a.pointerId)}}function ou(t,a,s,l,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:m,targetContainers:[d]},a!==null&&(a=yi(a),a!==null&&Gy(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),t)}function vw(t,a,s,l,d){switch(a){case"focusin":return Xr=ou(Xr,t,a,s,l,d),!0;case"dragenter":return Wr=ou(Wr,t,a,s,l,d),!0;case"mouseover":return Zr=ou(Zr,t,a,s,l,d),!0;case"pointerover":var m=d.pointerId;return ru.set(m,ou(ru.get(m)||null,t,a,s,l,d)),!0;case"gotpointercapture":return m=d.pointerId,su.set(m,ou(su.get(m)||null,t,a,s,l,d)),!0}return!1}function Yy(t){var a=Ut(t.target);if(a!==null){var s=u(a);if(s!==null){if(a=s.tag,a===13){if(a=f(s),a!==null){t.blockedOn=a,_a(t.priority,function(){if(s.tag===13){var l=xi();l=Ee(l);var d=xo(s,l);d!==null&&Ri(d,s,l),Vh(s,l)}});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bc(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=Uh(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);bi=l,s.target.dispatchEvent(l),bi=null}else return a=yi(s),a!==null&&Gy(a),t.blockedOn=s,!1;a.shift()}return!0}function Qy(t,a,s){Bc(t)&&s.delete(a)}function bw(){qh=!1,Xr!==null&&Bc(Xr)&&(Xr=null),Wr!==null&&Bc(Wr)&&(Wr=null),Zr!==null&&Bc(Zr)&&(Zr=null),ru.forEach(Qy),su.forEach(Qy)}function qc(t,a){t.blockedOn===a&&(t.blockedOn=null,qh||(qh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,bw)))}var zc=null;function Xy(t){zc!==t&&(zc=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){zc===t&&(zc=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],d=t[a+2];if(typeof l!="function"){if(Bh(l||s)===null)continue;break}var m=yi(s);m!==null&&(t.splice(a,3),a-=3,Bf(m,{pending:!0,data:d,method:s.method,action:l},l,d))}}))}function lu(t){function a(j){return qc(j,t)}Xr!==null&&qc(Xr,t),Wr!==null&&qc(Wr,t),Zr!==null&&qc(Zr,t),ru.forEach(a),su.forEach(a);for(var s=0;s<Jr.length;s++){var l=Jr[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Jr.length&&(s=Jr[0],s.blockedOn===null);)Yy(s),s.blockedOn===null&&Jr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var d=s[l],m=s[l+1],w=d[xt]||null;if(typeof m=="function")w||Xy(s);else if(w){var x=null;if(m&&m.hasAttribute("formAction")){if(d=m,w=m[xt]||null)x=w.formAction;else if(Bh(d)!==null)continue}else x=w.action;typeof x=="function"?s[l+1]=x:(s.splice(l,3),l-=3),Xy(s)}}}function zh(t){this._internalRoot=t}Fc.prototype.render=zh.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(r(409));var s=a.current,l=xi();Fy(s,l,t,a,null,null)},Fc.prototype.unmount=zh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Fy(t.current,2,null,t,null,null),wc(),a[Jn]=null}};function Fc(t){this._internalRoot=t}Fc.prototype.unstable_scheduleHydration=function(t){if(t){var a=$t();t={blockedOn:null,target:t,priority:a};for(var s=0;s<Jr.length&&a!==0&&a<Jr[s].priority;s++);Jr.splice(s,0,t),s===0&&Yy(t)}};var Wy=e.version;if(Wy!=="19.1.0")throw Error(r(527,Wy,"19.1.0"));Te.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(a),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var Ew={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{jt=Hc.inject(Ew),ft=Hc}catch{}}return cu.createRoot=function(t,a){if(!o(t))throw Error(r(299));var s=!1,l="",d=h_,m=m_,w=p_,x=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks)),a=qy(t,1,!1,null,null,s,l,d,m,w,x,null),t[Jn]=a.current,wh(t),new zh(a)},cu.hydrateRoot=function(t,a,s){if(!o(t))throw Error(r(299));var l=!1,d="",m=h_,w=m_,x=p_,j=null,Y=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(j=s.unstable_transitionCallbacks),s.formState!==void 0&&(Y=s.formState)),a=qy(t,1,!0,a,s??null,l,d,m,w,x,j,Y),a.context=zy(null),s=a.current,l=xi(),l=Ee(l),d=Lr(l),d.callback=null,Vr(s,d,l),s=l,a.current.lanes=s,Zn(a,s),Pa(a),t[Jn]=a.current,wh(t),new Fc(a)},cu.version="19.1.0",cu}var ov;function Ow(){if(ov)return Gh.exports;ov=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Gh.exports=Dw(),Gh.exports}var Pw=Ow();const Mw=qm(Pw),Lw=()=>{};var lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Vw=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],g=i[n++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const u=i[n++],f=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},W0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,g=f?i[o+1]:0,y=o+2<i.length,p=y?i[o+2]:0,E=u>>2,A=(u&3)<<4|g>>4;let N=(g&15)<<2|p>>6,M=p&63;y||(M=64,f||(N=64)),r.push(n[E],n[A],n[N],n[M])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(X0(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Vw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],g=o<i.length?n[i.charAt(o)]:0;++o;const p=o<i.length?n[i.charAt(o)]:64;++o;const A=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||g==null||p==null||A==null)throw new jw;const N=u<<2|g>>4;if(r.push(N),p!==64){const M=g<<4&240|p>>2;if(r.push(M),A!==64){const X=p<<6&192|A;r.push(X)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class jw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uw=function(i){const e=X0(i);return W0.encodeByteArray(e,!0)},ud=function(i){return Uw(i).replace(/\./g,"")},Z0=function(i){try{return W0.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=()=>Bw().__FIREBASE_DEFAULTS__,zw=()=>{if(typeof process>"u"||typeof lv>"u")return;const i=lv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Fw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Z0(i[1]);return e&&JSON.parse(e)},Od=()=>{try{return Lw()||qw()||zw()||Fw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},J0=i=>{var e,n;return(n=(e=Od())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},Hw=i=>{const e=J0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},eb=()=>{var i;return(i=Od())===null||i===void 0?void 0:i.config},tb=i=>{var e;return(e=Od())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(i){return i.endsWith(".cloudworkstations.dev")}async function nb(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[ud(JSON.stringify(n)),ud(JSON.stringify(f)),""].join(".")}const yu={};function $w(){const i={prod:[],emulator:[]};for(const e of Object.keys(yu))yu[e]?i.emulator.push(e):i.prod.push(e);return i}function Yw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let uv=!1;function ib(i,e){if(typeof window>"u"||typeof document>"u"||!Mu(window.location.host)||yu[i]===e||yu[i]||uv)return;yu[i]=e;function n(N){return`__firebase__banner__${N}`}const r="__firebase__banner",u=$w().prod.length>0;function f(){const N=document.getElementById(r);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function y(N,M){N.setAttribute("width","24"),N.setAttribute("id",M),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function p(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{uv=!0,f()},N}function E(N,M){N.setAttribute("id",M),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function A(){const N=Yw(r),M=n("text"),X=document.getElementById(M)||document.createElement("span"),Q=n("learnmore"),$=document.getElementById(Q)||document.createElement("a"),re=n("preprendIcon"),pe=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const _e=N.element;g(_e),E($,Q);const ie=p();y(pe,re),_e.append(pe,X,$,ie),document.body.appendChild(_e)}u?(X.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function Xw(){var i;const e=(i=Od())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ww(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ab(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Zw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jw(){const i=Xn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function e1(){return!Xw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rb(){try{return typeof indexedDB=="object"}catch{return!1}}function sb(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}function t1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="FirebaseError";class fa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=n1,Object.setPrototypeOf(this,fa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ao.prototype.create)}}class ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?i1(u,r):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new fa(o,g,r)}}function i1(i,e){return i.replace(a1,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const a1=/\{\$([^}]+)}/g;function r1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fs(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=i[o],f=e[o];if(cv(u)&&cv(f)){if(!fs(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function cv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hu(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function mu(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function s1(i,e){const n=new o1(i,e);return n.subscribe.bind(n)}class o1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");l1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Qh),o.error===void 0&&(o.error=Qh),o.complete===void 0&&(o.complete=Qh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l1(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Qh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=1e3,c1=2,d1=4*60*60*1e3,f1=.5;function dv(i,e=u1,n=c1){const r=e*Math.pow(n,i),o=Math.round(f1*r*(Math.random()-.5)*2);return Math.min(d1,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(i){return i&&i._delegate?i._delegate:i}class da{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Gw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(p1(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&f.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function m1(i){return i===$s?void 0:i}function p1(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new h1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ct||(ct={}));const _1={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},y1=ct.INFO,v1={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},b1=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=v1[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pd{constructor(e){this.name=e,this._logLevel=y1,this._logHandler=b1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const E1=(i,e)=>e.some(n=>i instanceof n);let fv,hv;function S1(){return fv||(fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function T1(){return hv||(hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ob=new WeakMap,hm=new WeakMap,lb=new WeakMap,Xh=new WeakMap,Fm=new WeakMap;function w1(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(os(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&ob.set(n,i)}).catch(()=>{}),Fm.set(e,i),e}function A1(i){if(hm.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});hm.set(i,e)}let mm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return hm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||lb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function I1(i){mm=i(mm)}function C1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(Wh(this),e,...n);return lb.set(r,e.sort?e.sort():[e]),os(r)}:T1().includes(i)?function(...e){return i.apply(Wh(this),e),os(ob.get(this))}:function(...e){return os(i.apply(Wh(this),e))}}function x1(i){return typeof i=="function"?C1(i):(i instanceof IDBTransaction&&A1(i),E1(i,S1())?new Proxy(i,mm):i)}function os(i){if(i instanceof IDBRequest)return w1(i);if(Xh.has(i))return Xh.get(i);const e=x1(i);return e!==i&&(Xh.set(i,e),Fm.set(e,i)),e}const Wh=i=>Fm.get(i);function ub(i,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),g=os(f);return r&&f.addEventListener("upgradeneeded",y=>{r(os(f.result),y.oldVersion,y.newVersion,os(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const R1=["get","getKey","getAll","getAllKeys","count"],k1=["put","add","delete","clear"],Zh=new Map;function mv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Zh.get(e))return Zh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=k1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||R1.includes(n)))return;const u=async function(f,...g){const y=this.transaction(f,o?"readwrite":"readonly");let p=y.store;return r&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),o&&y.done]))[0]};return Zh.set(e,u),u}I1(i=>({...i,get:(e,n,r)=>mv(e,n)||i.get(e,n,r),has:(e,n)=>!!mv(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(D1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function D1(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pm="@firebase/app",pv="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Pd("@firebase/app"),O1="@firebase/app-compat",P1="@firebase/analytics-compat",M1="@firebase/analytics",L1="@firebase/app-check-compat",V1="@firebase/app-check",j1="@firebase/auth",U1="@firebase/auth-compat",B1="@firebase/database",q1="@firebase/data-connect",z1="@firebase/database-compat",F1="@firebase/functions",H1="@firebase/functions-compat",G1="@firebase/installations",K1="@firebase/installations-compat",$1="@firebase/messaging",Y1="@firebase/messaging-compat",Q1="@firebase/performance",X1="@firebase/performance-compat",W1="@firebase/remote-config",Z1="@firebase/remote-config-compat",J1="@firebase/storage",eA="@firebase/storage-compat",tA="@firebase/firestore",nA="@firebase/ai",iA="@firebase/firestore-compat",aA="firebase",rA="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="[DEFAULT]",sA={[pm]:"fire-core",[O1]:"fire-core-compat",[M1]:"fire-analytics",[P1]:"fire-analytics-compat",[V1]:"fire-app-check",[L1]:"fire-app-check-compat",[j1]:"fire-auth",[U1]:"fire-auth-compat",[B1]:"fire-rtdb",[q1]:"fire-data-connect",[z1]:"fire-rtdb-compat",[F1]:"fire-fn",[H1]:"fire-fn-compat",[G1]:"fire-iid",[K1]:"fire-iid-compat",[$1]:"fire-fcm",[Y1]:"fire-fcm-compat",[Q1]:"fire-perf",[X1]:"fire-perf-compat",[W1]:"fire-rc",[Z1]:"fire-rc-compat",[J1]:"fire-gcs",[eA]:"fire-gcs-compat",[tA]:"fire-fst",[iA]:"fire-fst-compat",[nA]:"fire-vertex","fire-js":"fire-js",[aA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new Map,oA=new Map,_m=new Map;function gv(i,e){try{i.container.addComponent(e)}catch(n){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ua(i){const e=i.name;if(_m.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;_m.set(e,i);for(const n of cd.values())gv(n,i);for(const n of oA.values())gv(n,i);return!0}function ro(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ki(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new ao("app","Firebase",lA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=rA;function cb(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gm,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw ls.create("bad-app-name",{appName:String(o)});if(n||(n=eb()),!n)throw ls.create("no-options");const u=cd.get(o);if(u){if(fs(n,u.options)&&fs(r,u.config))return u;throw ls.create("duplicate-app",{appName:o})}const f=new g1(o);for(const y of _m.values())f.addComponent(y);const g=new uA(n,r,f);return cd.set(o,g),g}function Hm(i=gm){const e=cd.get(i);if(!e&&i===gm&&eb())return cb();if(!e)throw ls.create("no-app",{appName:i});return e}function $i(i,e,n){var r;let o=(r=sA[i])!==null&&r!==void 0?r:i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const g=[`Unable to register library "${o}" with version "${e}":`];u&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(g.join(" "));return}Ua(new da(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firebase-heartbeat-database",dA=1,wu="firebase-heartbeat-store";let Jh=null;function db(){return Jh||(Jh=ub(cA,dA,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(wu)}catch(n){console.warn(n)}}}}).catch(i=>{throw ls.create("idb-open",{originalErrorMessage:i.message})})),Jh}async function fA(i){try{const n=(await db()).transaction(wu),r=await n.objectStore(wu).get(fb(i));return await n.done,r}catch(e){if(e instanceof fa)mr.warn(e.message);else{const n=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(n.message)}}}async function _v(i,e){try{const r=(await db()).transaction(wu,"readwrite");await r.objectStore(wu).put(e,fb(i)),await r.done}catch(n){if(n instanceof fa)mr.warn(n.message);else{const r=ls.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mr.warn(r.message)}}}function fb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=1024,mA=30;class pA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _A(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=yv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>mA){const f=yA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yv(),{heartbeatsToSend:r,unsentEntries:o}=gA(this._heartbeatsCache.heartbeats),u=ud(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return mr.warn(n),""}}}function yv(){return new Date().toISOString().substring(0,10)}function gA(i,e=hA){const n=[];let r=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),vv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),vv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _A{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rb()?sb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return _v(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return _v(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function vv(i){return ud(JSON.stringify({version:2,heartbeats:i})).length}function yA(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(i){Ua(new da("platform-logger",e=>new N1(e),"PRIVATE")),Ua(new da("heartbeat",e=>new pA(e),"PRIVATE")),$i(pm,pv,i),$i(pm,pv,"esm2017"),$i("fire-js","")}vA("");var bA="firebase",EA="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i(bA,EA,"app");function Gm(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(n[r[o]]=i[r[o]]);return n}function hb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SA=hb,mb=new ao("auth","Firebase",hb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd=new Pd("@firebase/auth");function TA(i,...e){dd.logLevel<=ct.WARN&&dd.warn(`Auth (${gl}): ${i}`,...e)}function Jc(i,...e){dd.logLevel<=ct.ERROR&&dd.error(`Auth (${gl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(i,...e){throw $m(i,...e)}function ca(i,...e){return $m(i,...e)}function Km(i,e,n){const r=Object.assign(Object.assign({},SA()),{[e]:n});return new ao("auth","Firebase",r).create(e,{appName:i.name})}function fr(i){return Km(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wA(i,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qi(i,"argument-error"),Km(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $m(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return mb.create(i,...e)}function Fe(i,e,...n){if(!i)throw $m(e,...n)}function cr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Jc(e),new Error(e)}function pr(i,e){i||cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function AA(){return bv()==="http:"||bv()==="https:"}function bv(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AA()||ab()||"connection"in navigator)?navigator.onLine:!0}function CA(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.shortDelay=e,this.longDelay=n,pr(n>e,"Short delay should be less than long delay!"),this.isMobile=Qw()||Zw()}get(){return IA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(i,e){pr(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kA=new Vu(3e4,6e4);function vs(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function bs(i,e,n,r,o={}){return gb(i,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const g=Lu(Object.assign({key:i.config.apiKey},f)).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const p=Object.assign({method:e,headers:y},u);return Ww()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&Mu(i.emulatorConfig.host)&&(p.credentials="include"),pb.fetch()(await _b(i,i.config.apiHost,n,g),p)})}async function gb(i,e,n){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},xA),e);try{const o=new DA(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Gc(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[y,p]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gc(i,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw Gc(i,"email-already-in-use",f);if(y==="USER_DISABLED")throw Gc(i,"user-disabled",f);const E=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Km(i,E,p);Qi(i,E)}}catch(o){if(o instanceof fa)throw o;Qi(i,"network-request-failed",{message:String(o)})}}async function ju(i,e,n,r,o={}){const u=await bs(i,e,n,r,o);return"mfaPendingCredential"in u&&Qi(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function _b(i,e,n,r){const o=`${e}${n}?${r}`,u=i,f=u.config.emulator?Ym(i.config,o):`${i.config.apiScheme}://${o}`;return RA.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function NA(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ca(this.auth,"network-request-failed")),kA.get())})}}function Gc(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=ca(i,e,r);return o.customData._tokenResponse=n,o}function Ev(i){return i!==void 0&&i.enterprise!==void 0}class OA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PA(i,e){return bs(i,"GET","/v2/recaptchaConfig",vs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(i,e){return bs(i,"POST","/v1/accounts:delete",e)}async function fd(i,e){return bs(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LA(i,e=!1){const n=Wn(i),r=await n.getIdToken(e),o=Qm(r);Fe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:vu(em(o.auth_time)),issuedAtTime:vu(em(o.iat)),expirationTime:vu(em(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function em(i){return Number(i)*1e3}function Qm(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return Jc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Z0(n);return o?JSON.parse(o):(Jc("Failed to decode base64 JWT payload"),null)}catch(o){return Jc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Sv(i){const e=Qm(i);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fa&&VA(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function VA({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hd(i){var e;const n=i.auth,r=await i.getIdToken(),o=await Au(i,fd(n,{idToken:r}));Fe(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?yb(u.providerUserInfo):[],g=BA(i.providerData,f),y=i.isAnonymous,p=!(i.email&&u.passwordHash)&&!(g!=null&&g.length),E=y?p:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:g,metadata:new vm(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,A)}async function UA(i){const e=Wn(i);await hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BA(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function yb(i){return i.map(e=>{var{providerId:n}=e,r=Gm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(i,e){const n=await gb(i,{},async()=>{const r=Lu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await _b(i,o,"/v1/token",`key=${u}`),g=await i._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",pb.fetch()(f,{method:"POST",headers:g,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zA(i,e){return bs(i,"POST","/v2/accounts:revokeToken",vs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=Sv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await qA(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new al;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Fe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Fe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new al,this.toJSON())}_performRefresh(){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(i,e){Fe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class la{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,u=Gm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new vm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Au(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LA(this,e)}reload(){return UA(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new la(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ki(this.auth.app))return Promise.reject(fr(this.auth));const e=await this.getIdToken();return await Au(this,MA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,u,f,g,y,p,E;const A=(r=n.displayName)!==null&&r!==void 0?r:void 0,N=(o=n.email)!==null&&o!==void 0?o:void 0,M=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,X=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Q=(g=n.tenantId)!==null&&g!==void 0?g:void 0,$=(y=n._redirectEventId)!==null&&y!==void 0?y:void 0,re=(p=n.createdAt)!==null&&p!==void 0?p:void 0,pe=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:_e,emailVerified:ie,isAnonymous:F,providerData:ce,stsTokenManager:I}=n;Fe(_e&&I,e,"internal-error");const k=al.fromJSON(this.name,I);Fe(typeof _e=="string",e,"internal-error"),ts(A,e.name),ts(N,e.name),Fe(typeof ie=="boolean",e,"internal-error"),Fe(typeof F=="boolean",e,"internal-error"),ts(M,e.name),ts(X,e.name),ts(Q,e.name),ts($,e.name),ts(re,e.name),ts(pe,e.name);const O=new la({uid:_e,auth:e,email:N,emailVerified:ie,displayName:A,isAnonymous:F,photoURL:X,phoneNumber:M,tenantId:Q,stsTokenManager:k,createdAt:re,lastLoginAt:pe});return ce&&Array.isArray(ce)&&(O.providerData=ce.map(C=>Object.assign({},C))),$&&(O._redirectEventId=$),O}static async _fromIdTokenResponse(e,n,r=!1){const o=new al;o.updateFromServerResponse(n);const u=new la({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await hd(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Fe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?yb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new al;g.updateFromIdToken(r);const y=new la({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new vm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=new Map;function dr(i){pr(i instanceof Function,"Expected a class definition");let e=Tv.get(i);return e?(pr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Tv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vb.type="NONE";const wv=vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(i,e,n){return`firebase:${i}:${e}:${n}`}class rl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=ed(this.userKey,o.apiKey,u),this.fullPersistenceKey=ed("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fd(this.auth,{idToken:e}).catch(()=>{});return n?la._fromGetAccountInfoResponse(this.auth,n,e):null}return la._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new rl(dr(wv),e,r);const o=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||dr(wv);const f=ed(r,e.config.apiKey,e.name);let g=null;for(const p of n)try{const E=await p._get(f);if(E){let A;if(typeof E=="string"){const N=await fd(e,{idToken:E}).catch(()=>{});if(!N)break;A=await la._fromGetAccountInfoResponse(e,N,E)}else A=la._fromJSON(e,E);p!==u&&(g=A),u=p;break}}catch{}const y=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new rl(u,e,r):(u=y[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new rl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ab(e))return"Blackberry";if(Ib(e))return"Webos";if(Eb(e))return"Safari";if((e.includes("chrome/")||Sb(e))&&!e.includes("edge/"))return"Chrome";if(wb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bb(i=Xn()){return/firefox\//i.test(i)}function Eb(i=Xn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sb(i=Xn()){return/crios\//i.test(i)}function Tb(i=Xn()){return/iemobile/i.test(i)}function wb(i=Xn()){return/android/i.test(i)}function Ab(i=Xn()){return/blackberry/i.test(i)}function Ib(i=Xn()){return/webos/i.test(i)}function Xm(i=Xn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function FA(i=Xn()){var e;return Xm(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HA(){return Jw()&&document.documentMode===10}function Cb(i=Xn()){return Xm(i)||wb(i)||Ib(i)||Ab(i)||/windows phone/i.test(i)||Tb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(i,e=[]){let n;switch(i){case"Browser":n=Av(Xn());break;case"Worker":n=`${Av(Xn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,g)=>{try{const y=e(u);f(y)}catch(y){g(y)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(i,e={}){return bs(i,"GET","/v2/passwordPolicy",vs(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=6;class YA{constructor(e){var n,r,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:$A,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,u,f,g;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(n=y.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),y.isValid&&(y.isValid=(r=y.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(u=y.containsUppercaseLetter)!==null&&u!==void 0?u:!0),y.isValid&&(y.isValid=(f=y.containsNumericCharacter)!==null&&f!==void 0?f:!0),y.isValid&&(y.isValid=(g=y.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),y}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iv(this),this.idTokenSubscription=new Iv(this),this.beforeStateQueue=new GA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await rl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fd(this,{idToken:e}),r=await la._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ki(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=o==null?void 0:o._redirectEventId,y=await this.tryRedirectSignIn(e);(!f||f===g)&&(y!=null&&y.user)&&(o=y.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ki(this.app))return Promise.reject(fr(this));const n=e?Wn(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ki(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ki(this.app)?Promise.reject(fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KA(this),n=new YA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dr(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await rl.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,o);return()=>{f=!0,y()}}else{const y=e.addObserver(n);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(ki(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Es(i){return Wn(i)}class Iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=s1(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XA(i){Md=i}function Rb(i){return Md.loadJS(i)}function WA(){return Md.recaptchaEnterpriseScript}function ZA(){return Md.gapiScript}function JA(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class eI{constructor(){this.enterprise=new tI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nI="recaptcha-enterprise",kb="NO_RECAPTCHA";class iI{constructor(e){this.type=nI,this.auth=Es(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{PA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new OA(y);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,f(p.siteKey)}}).catch(y=>{g(y)})})}function o(u,f,g){const y=window.grecaptcha;Ev(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(p=>{f(p)}).catch(()=>{f(kb)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eI().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(g=>{if(!n&&Ev(window.grecaptcha))o(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=WA();y.length!==0&&(y+=g),Rb(y).then(()=>{o(g,u,f)}).catch(p=>{f(p)})}}).catch(g=>{f(g)})})}}async function Cv(i,e,n,r=!1,o=!1){const u=new iI(i);let f;if(o)f=kb;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const g=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function bm(i,e,n,r,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Cv(i,e,n,n==="getOobCode");return r(i,f)}else return r(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await Cv(i,e,n,n==="getOobCode");return r(i,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(i,e){const n=ro(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(fs(u,e??{}))return o;Qi(o,"already-initialized")}return n.initialize({options:e})}function rI(i,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sI(i,e,n){const r=Es(i);Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Nb(e),{host:f,port:g}=oI(e),y=g===null?"":`:${g}`,p={url:`${u}//${f}${y}/`},E=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Fe(fs(p,r.config.emulator)&&fs(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,Mu(f)?(nb(`${u}//${f}${y}`),ib("Auth",!0)):lI()}function Nb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function oI(i){const e=Nb(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:xv(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:xv(f)}}}function xv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function lI(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function uI(i,e){return bs(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(i,e){return ju(i,"POST","/v1/accounts:signInWithPassword",vs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(i,e){return ju(i,"POST","/v1/accounts:signInWithEmailLink",vs(i,e))}async function fI(i,e){return ju(i,"POST","/v1/accounts:signInWithEmailLink",vs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends Wm{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Iu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Iu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bm(e,n,"signInWithPassword",cI);case"emailLink":return dI(e,{email:this._email,oobCode:this._password});default:Qi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bm(e,r,"signUpPassword",uI);case"emailLink":return fI(e,{idToken:n,email:this._email,oobCode:this._password});default:Qi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(i,e){return ju(i,"POST","/v1/accounts:signInWithIdp",vs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="http://localhost";class Zs extends Wm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,u=Gm(n,["providerId","signInMethod"]);if(!r||!o)return null;const f=new Zs(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return sl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sl(e,n)}buildRequest(){const e={requestUri:hI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pI(i){const e=hu(mu(i)).link,n=e?hu(mu(e)).deep_link_id:null,r=hu(mu(i)).deep_link_id;return(r?hu(mu(r)).link:null)||r||n||e||i}class Zm{constructor(e){var n,r,o,u,f,g;const y=hu(mu(e)),p=(n=y.apiKey)!==null&&n!==void 0?n:null,E=(r=y.oobCode)!==null&&r!==void 0?r:null,A=mI((o=y.mode)!==null&&o!==void 0?o:null);Fe(p&&E&&A,"argument-error"),this.apiKey=p,this.operation=A,this.code=E,this.continueUrl=(u=y.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=y.lang)!==null&&f!==void 0?f:null,this.tenantId=(g=y.tenantId)!==null&&g!==void 0?g:null}static parseLink(e){const n=pI(e);try{return new Zm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.providerId=_l.PROVIDER_ID}static credential(e,n){return Iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zm.parseLink(n);return Fe(r,"argument-error"),Iu._fromEmailAndCode(e,r.code,r.tenantId)}}_l.PROVIDER_ID="password";_l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends Jm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Uu{constructor(){super("facebook.com")}static credential(e){return Zs._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zs._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Uu{constructor(){super("github.com")}static credential(e){return Zs._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Uu{constructor(){super("twitter.com")}static credential(e,n){return Zs._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rs.credential(n,r)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(i,e){return ju(i,"POST","/v1/accounts:signUp",vs(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await la._fromIdTokenResponse(e,r,o),f=Rv(r);return new Js({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=Rv(r);return new Js({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function Rv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends fa{constructor(e,n,r,o){var u;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,md.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new md(e,n,r,o)}}function Db(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?md._fromErrorAndOperation(i,u,e,r):u})}async function _I(i,e,n=!1){const r=await Au(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Js._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(i,e,n=!1){const{auth:r}=i;if(ki(r.app))return Promise.reject(fr(r));const o="reauthenticate";try{const u=await Au(i,Db(r,o,e,i),n);Fe(u.idToken,r,"internal-error");const f=Qm(u.idToken);Fe(f,r,"internal-error");const{sub:g}=f;return Fe(i.uid===g,r,"user-mismatch"),Js._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Qi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(i,e,n=!1){if(ki(i.app))return Promise.reject(fr(i));const r="signIn",o=await Db(i,r,e),u=await Js._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(u.user),u}async function vI(i,e){return Ob(Es(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(i){const e=Es(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bI(i,e,n){if(ki(i.app))return Promise.reject(fr(i));const r=Es(i),f=await bm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gI).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&Pb(i),y}),g=await Js._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(g.user),g}function EI(i,e,n){return ki(i.app)?Promise.reject(fr(i)):vI(Wn(i),_l.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Pb(i),r})}function SI(i,e,n,r){return Wn(i).onIdTokenChanged(e,n,r)}function TI(i,e,n){return Wn(i).beforeAuthStateChanged(e,n)}function wI(i,e,n,r){return Wn(i).onAuthStateChanged(e,n,r)}function AI(i){return Wn(i).signOut()}const pd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pd,"1"),this.storage.removeItem(pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=1e3,CI=10;class Lb extends Mb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,y)=>{this.notifyListeners(f,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);HA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,CI):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},II)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lb.type="LOCAL";const xI=Lb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb extends Mb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vb.type="SESSION";const jb=Vb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Ld(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(f).map(async p=>p(n.origin,u)),y=await RI(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,y)=>{const p=ep("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(A){const N=A;if(N.data.eventId===p)switch(N.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(N.data.response);break;default:clearTimeout(E),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(){return window}function NI(i){La().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){return typeof La().WorkerGlobalScope<"u"&&typeof La().importScripts=="function"}async function DI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OI(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function PI(){return Ub()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="firebaseLocalStorageDb",MI=1,gd="firebaseLocalStorage",qb="fbase_key";class Bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vd(i,e){return i.transaction([gd],e?"readwrite":"readonly").objectStore(gd)}function LI(){const i=indexedDB.deleteDatabase(Bb);return new Bu(i).toPromise()}function Em(){const i=indexedDB.open(Bb,MI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(gd,{keyPath:qb})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(gd)?e(r):(r.close(),await LI(),e(await Em()))})})}async function kv(i,e,n){const r=Vd(i,!0).put({[qb]:e,value:n});return new Bu(r).toPromise()}async function VI(i,e){const n=Vd(i,!1).get(e),r=await new Bu(n).toPromise();return r===void 0?null:r.value}function Nv(i,e){const n=Vd(i,!0).delete(e);return new Bu(n).toPromise()}const jI=800,UI=3;class zb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ub()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ld._getInstance(PI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DI(),!this.activeServiceWorker)return;this.sender=new kI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Em();return await kv(e,pd,"1"),await Nv(e,pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>VI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Vd(o,!1).getAll();return new Bu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zb.type="LOCAL";const BI=zb;new Vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(i,e){return e?dr(e):(Fe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends Wm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qI(i){return Ob(i.auth,new tp(i),i.bypassAuthState)}function zI(i){const{auth:e,user:n}=i;return Fe(n,e,"internal-error"),yI(n,new tp(i),i.bypassAuthState)}async function FI(i){const{auth:e,user:n}=i;return Fe(n,e,"internal-error"),_I(n,new tp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qI;case"linkViaPopup":case"linkViaRedirect":return FI;case"reauthViaPopup":case"reauthViaRedirect":return zI;default:Qi(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new Vu(2e3,1e4);async function GI(i,e,n){if(ki(i.app))return Promise.reject(ca(i,"operation-not-supported-in-this-environment"));const r=Es(i);wA(i,e,Jm);const o=Fb(r,n);return new Ys(r,"signInViaPopup",e,o).executeNotNull()}class Ys extends Hb{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Ys.currentPopupAction&&Ys.currentPopupAction.cancel(),Ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ca(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ca(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ca(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HI.get())};e()}}Ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="pendingRedirect",td=new Map;class $I extends Hb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=td.get(this.auth._key());if(!e){try{const r=await YI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}td.set(this.auth._key(),e)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YI(i,e){const n=WI(e),r=XI(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function QI(i,e){td.set(i._key(),e)}function XI(i){return dr(i._redirectPersistence)}function WI(i){return ed(KI,i.config.apiKey,i.name)}async function ZI(i,e,n=!1){if(ki(i.app))return Promise.reject(fr(i));const r=Es(i),o=Fb(r,e),f=await new $I(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=10*60*1e3;class eC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Gb(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ca(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Gb({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(i,e={}){return bs(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aC=/^https?/;async function rC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await nC(i);for(const n of e)try{if(sC(n))return}catch{}Qi(i,"unauthorized-domain")}function sC(i){const e=ym(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!aC.test(n))return!1;if(iC.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new Vu(3e4,6e4);function Ov(){const i=La().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function lC(i){return new Promise((e,n)=>{var r,o,u;function f(){Ov(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ov(),n(ca(i,"network-request-failed"))},timeout:oC.get()})}if(!((o=(r=La().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=La().gapi)===null||u===void 0)&&u.load)f();else{const g=JA("iframefcb");return La()[g]=()=>{gapi.load?f():n(ca(i,"network-request-failed"))},Rb(`${ZA()}?onload=${g}`).catch(y=>n(y))}}).catch(e=>{throw nd=null,e})}let nd=null;function uC(i){return nd=nd||lC(i),nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=new Vu(5e3,15e3),dC="__/auth/iframe",fC="emulator/auth/iframe",hC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pC(i){const e=i.config;Fe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Ym(e,fC):`https://${i.config.authDomain}/${dC}`,r={apiKey:e.apiKey,appName:i.name,v:gl},o=mC.get(i.config.apiHost);o&&(r.eid=o);const u=i._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Lu(r).slice(1)}`}async function gC(i){const e=await uC(i),n=La().gapi;return Fe(n,i,"internal-error"),e.open({where:document.body,url:pC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hC,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=ca(i,"network-request-failed"),g=La().setTimeout(()=>{u(f)},cC.get());function y(){La().clearTimeout(g),o(r)}r.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yC=500,vC=600,bC="_blank",EC="http://localhost";class Pv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SC(i,e,n,r=yC,o=vC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const y=Object.assign(Object.assign({},_C),{width:r.toString(),height:o.toString(),top:u,left:f}),p=Xn().toLowerCase();n&&(g=Sb(p)?bC:n),bb(p)&&(e=e||EC,y.scrollbars="yes");const E=Object.entries(y).reduce((N,[M,X])=>`${N}${M}=${X},`,"");if(FA(p)&&g!=="_self")return TC(e||"",g),new Pv(null);const A=window.open(e||"",g,E);Fe(A,i,"popup-blocked");try{A.focus()}catch{}return new Pv(A)}function TC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="__/auth/handler",AC="emulator/auth/handler",IC=encodeURIComponent("fac");async function Mv(i,e,n,r,o,u){Fe(i.config.authDomain,i,"auth-domain-config-required"),Fe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:gl,eventId:o};if(e instanceof Jm){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",r1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,A]of Object.entries({}))f[E]=A}if(e instanceof Uu){const E=e.getScopes().filter(A=>A!=="");E.length>0&&(f.scopes=E.join(","))}i.tenantId&&(f.tid=i.tenantId);const g=f;for(const E of Object.keys(g))g[E]===void 0&&delete g[E];const y=await i._getAppCheckToken(),p=y?`#${IC}=${encodeURIComponent(y)}`:"";return`${CC(i)}?${Lu(g).slice(1)}${p}`}function CC({config:i}){return i.emulator?Ym(i,AC):`https://${i.authDomain}/${wC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class xC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jb,this._completeRedirectFn=ZI,this._overrideRedirectResult=QI}async _openPopup(e,n,r,o){var u;pr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await Mv(e,n,r,ym(),o);return SC(e,f,ep())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await Mv(e,n,r,ym(),o);return NI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(pr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gC(e),r=new eC(e);return n.register("authEvent",o=>(Fe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[tm];f!==void 0&&n(!!f),Qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Cb()||Eb()||Xm()}}const RC=xC;var Lv="@firebase/auth",Vv="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DC(i){Ua(new da("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;Fe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:g,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xb(i)},p=new QA(r,o,u,y);return rI(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ua(new da("auth-internal",e=>{const n=Es(e.getProvider("auth").getImmediate());return(r=>new kC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(Lv,Vv,NC(i)),$i(Lv,Vv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=5*60,PC=tb("authIdTokenMaxAge")||OC;let jv=null;const MC=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PC)return;const o=n==null?void 0:n.token;jv!==o&&(jv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function LC(i=Hm()){const e=ro(i,"auth");if(e.isInitialized())return e.getImmediate();const n=aI(i,{popupRedirectResolver:RC,persistence:[BI,xI,jb]}),r=tb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=MC(u.toString());TI(n,f,()=>f(n.currentUser)),SI(n,g=>f(g))}}const o=J0("auth");return o&&sI(n,`http://${o}`),n}function VC(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}XA({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const u=ca("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",VC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DC("Browser");const Kb="@firebase/installations",np="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=1e4,Yb=`w:${np}`,Qb="FIS_v2",jC="https://firebaseinstallations.googleapis.com/v1",UC=60*60*1e3,BC="installations",qC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},eo=new ao(BC,qC,zC);function Xb(i){return i instanceof fa&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb({projectId:i}){return`${jC}/projects/${i}/installations`}function Zb(i){return{token:i.token,requestStatus:2,expiresIn:HC(i.expiresIn),creationTime:Date.now()}}async function Jb(i,e){const r=(await e.json()).error;return eo.create("request-failed",{requestName:i,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function eE({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function FC(i,{refreshToken:e}){const n=eE(i);return n.append("Authorization",GC(e)),n}async function tE(i){const e=await i();return e.status>=500&&e.status<600?i():e}function HC(i){return Number(i.replace("s","000"))}function GC(i){return`${Qb} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC({appConfig:i,heartbeatServiceProvider:e},{fid:n}){const r=Wb(i),o=eE(i),u=e.getImmediate({optional:!0});if(u){const p=await u.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}const f={fid:n,authVersion:Qb,appId:i.appId,sdkVersion:Yb},g={method:"POST",headers:o,body:JSON.stringify(f)},y=await tE(()=>fetch(r,g));if(y.ok){const p=await y.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:Zb(p.authToken)}}else throw await Jb("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=/^[cdef][\w-]{21}$/,Sm="";function QC(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const n=XC(i);return YC.test(n)?n:Sm}catch{return Sm}}function XC(i){return $C(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function aE(i,e){const n=jd(i);rE(n,e),WC(n,e)}function rE(i,e){const n=iE.get(i);if(n)for(const r of n)r(e)}function WC(i,e){const n=ZC();n&&n.postMessage({key:i,fid:e}),JC()}let Qs=null;function ZC(){return!Qs&&"BroadcastChannel"in self&&(Qs=new BroadcastChannel("[Firebase] FID Change"),Qs.onmessage=i=>{rE(i.data.key,i.data.fid)}),Qs}function JC(){iE.size===0&&Qs&&(Qs.close(),Qs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="firebase-installations-database",tx=1,to="firebase-installations-store";let nm=null;function ip(){return nm||(nm=ub(ex,tx,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(to)}}})),nm}async function _d(i,e){const n=jd(i),o=(await ip()).transaction(to,"readwrite"),u=o.objectStore(to),f=await u.get(n);return await u.put(e,n),await o.done,(!f||f.fid!==e.fid)&&aE(i,e.fid),e}async function sE(i){const e=jd(i),r=(await ip()).transaction(to,"readwrite");await r.objectStore(to).delete(e),await r.done}async function Ud(i,e){const n=jd(i),o=(await ip()).transaction(to,"readwrite"),u=o.objectStore(to),f=await u.get(n),g=e(f);return g===void 0?await u.delete(n):await u.put(g,n),await o.done,g&&(!f||f.fid!==g.fid)&&aE(i,g.fid),g}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(i){let e;const n=await Ud(i.appConfig,r=>{const o=nx(r),u=ix(i,o);return e=u.registrationPromise,u.installationEntry});return n.fid===Sm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function nx(i){const e=i||{fid:QC(),registrationStatus:0};return oE(e)}function ix(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(eo.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=ax(i,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:rx(i)}:{installationEntry:e}}async function ax(i,e){try{const n=await KC(i,e);return _d(i.appConfig,n)}catch(n){throw Xb(n)&&n.customData.serverCode===409?await sE(i.appConfig):await _d(i.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function rx(i){let e=await Uv(i.appConfig);for(;e.registrationStatus===1;)await nE(100),e=await Uv(i.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ap(i);return r||n}return e}function Uv(i){return Ud(i,e=>{if(!e)throw eo.create("installation-not-found");return oE(e)})}function oE(i){return sx(i)?{fid:i.fid,registrationStatus:0}:i}function sx(i){return i.registrationStatus===1&&i.registrationTime+$b<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox({appConfig:i,heartbeatServiceProvider:e},n){const r=lx(i,n),o=FC(i,n),u=e.getImmediate({optional:!0});if(u){const p=await u.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}const f={installation:{sdkVersion:Yb,appId:i.appId}},g={method:"POST",headers:o,body:JSON.stringify(f)},y=await tE(()=>fetch(r,g));if(y.ok){const p=await y.json();return Zb(p)}else throw await Jb("Generate Auth Token",y)}function lx(i,{fid:e}){return`${Wb(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rp(i,e=!1){let n;const r=await Ud(i.appConfig,u=>{if(!lE(u))throw eo.create("not-registered");const f=u.authToken;if(!e&&dx(f))return u;if(f.requestStatus===1)return n=ux(i,e),u;{if(!navigator.onLine)throw eo.create("app-offline");const g=hx(u);return n=cx(i,g),g}});return n?await n:r.authToken}async function ux(i,e){let n=await Bv(i.appConfig);for(;n.authToken.requestStatus===1;)await nE(100),n=await Bv(i.appConfig);const r=n.authToken;return r.requestStatus===0?rp(i,e):r}function Bv(i){return Ud(i,e=>{if(!lE(e))throw eo.create("not-registered");const n=e.authToken;return mx(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function cx(i,e){try{const n=await ox(i,e),r=Object.assign(Object.assign({},e),{authToken:n});return await _d(i.appConfig,r),n}catch(n){if(Xb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sE(i.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await _d(i.appConfig,r)}throw n}}function lE(i){return i!==void 0&&i.registrationStatus===2}function dx(i){return i.requestStatus===2&&!fx(i)}function fx(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+UC}function hx(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function mx(i){return i.requestStatus===1&&i.requestTime+$b<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(i){const e=i,{installationEntry:n,registrationPromise:r}=await ap(e);return r?r.catch(console.error):rp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(i,e=!1){const n=i;return await _x(n),(await rp(n,e)).token}async function _x(i){const{registrationPromise:e}=await ap(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(i){if(!i||!i.options)throw im("App Configuration");if(!i.name)throw im("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!i.options[n])throw im(n);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function im(i){return eo.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="installations",vx="installations-internal",bx=i=>{const e=i.getProvider("app").getImmediate(),n=yx(e),r=ro(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Ex=i=>{const e=i.getProvider("app").getImmediate(),n=ro(e,uE).getImmediate();return{getId:()=>px(n),getToken:o=>gx(n,o)}};function Sx(){Ua(new da(uE,bx,"PUBLIC")),Ua(new da(vx,Ex,"PRIVATE"))}Sx();$i(Kb,np);$i(Kb,np,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="analytics",Tx="firebase_id",wx="origin",Ax=60*1e3,Ix="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai=new Pd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ni=new ao("analytics","Analytics",Cx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(i){if(!i.startsWith(sp)){const e=Ni.create("invalid-gtag-resource",{gtagURL:i});return ai.warn(e.message),""}return i}function cE(i){return Promise.all(i.map(e=>e.catch(n=>n)))}function Rx(i,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(i,e)),n}function kx(i,e){const n=Rx("firebase-js-sdk-policy",{createScriptURL:xx}),r=document.createElement("script"),o=`${sp}?l=${i}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function Nx(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function Dx(i,e,n,r,o,u){const f=r[o];try{if(f)await e[f];else{const y=(await cE(n)).find(p=>p.measurementId===o);y&&await e[y.appId]}}catch(g){ai.error(g)}i("config",o,u)}async function Ox(i,e,n,r,o){try{let u=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const g=await cE(n);for(const y of f){const p=g.find(A=>A.measurementId===y),E=p&&e[p.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),i("event",r,o||{})}catch(u){ai.error(u)}}function Px(i,e,n,r){async function o(u,...f){try{if(u==="event"){const[g,y]=f;await Ox(i,e,n,g,y)}else if(u==="config"){const[g,y]=f;await Dx(i,e,n,r,g,y)}else if(u==="consent"){const[g,y]=f;i("consent",g,y)}else if(u==="get"){const[g,y,p]=f;i("get",g,y,p)}else if(u==="set"){const[g]=f;i("set",g)}else i(u,...f)}catch(g){ai.error(g)}}return o}function Mx(i,e,n,r,o){let u=function(...f){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=Px(u,i,e,n),{gtagCore:u,wrappedGtag:window[o]}}function Lx(i){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(sp)&&n.src.includes(i))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=30,jx=1e3;class Ux{constructor(e={},n=jx){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const dE=new Ux;function Bx(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function qx(i){var e;const{appId:n,apiKey:r}=i,o={method:"GET",headers:Bx(r)},u=Ix.replace("{app-id}",n),f=await fetch(u,o);if(f.status!==200&&f.status!==304){let g="";try{const y=await f.json();!((e=y.error)===null||e===void 0)&&e.message&&(g=y.error.message)}catch{}throw Ni.create("config-fetch-failed",{httpStatus:f.status,responseMessage:g})}return f.json()}async function zx(i,e=dE,n){const{appId:r,apiKey:o,measurementId:u}=i.options;if(!r)throw Ni.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:r};throw Ni.create("no-api-key")}const f=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new Gx;return setTimeout(async()=>{g.abort()},Ax),fE({appId:r,apiKey:o,measurementId:u},f,g,e)}async function fE(i,{throttleEndTimeMillis:e,backoffCount:n},r,o=dE){var u;const{appId:f,measurementId:g}=i;try{await Fx(r,e)}catch(y){if(g)return ai.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:f,measurementId:g};throw y}try{const y=await qx(i);return o.deleteThrottleMetadata(f),y}catch(y){const p=y;if(!Hx(p)){if(o.deleteThrottleMetadata(f),g)return ai.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${g} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:f,measurementId:g};throw y}const E=Number((u=p==null?void 0:p.customData)===null||u===void 0?void 0:u.httpStatus)===503?dv(n,o.intervalMillis,Vx):dv(n,o.intervalMillis),A={throttleEndTimeMillis:Date.now()+E,backoffCount:n+1};return o.setThrottleMetadata(f,A),ai.debug(`Calling attemptFetch again in ${E} millis`),fE(i,A,r,o)}}function Fx(i,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(n,o);i.addEventListener(()=>{clearTimeout(u),r(Ni.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Hx(i){if(!(i instanceof fa)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class Gx{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Kx(i,e,n,r,o){if(o&&o.global){i("event",n,r);return}else{const u=await e,f=Object.assign(Object.assign({},r),{send_to:u});i("event",n,f)}}async function $x(i,e,n,r){{const o=await e;i("config",o,{update:!0,user_id:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(){if(rb())try{await sb()}catch(i){return ai.warn(Ni.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return ai.warn(Ni.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Qx(i,e,n,r,o,u,f){var g;const y=zx(i);y.then(M=>{n[M.measurementId]=M.appId,i.options.measurementId&&M.measurementId!==i.options.measurementId&&ai.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${M.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(M=>ai.error(M)),e.push(y);const p=Yx().then(M=>{if(M)return r.getId()}),[E,A]=await Promise.all([y,p]);Lx(u)||kx(u,E.measurementId),o("js",new Date);const N=(g=f==null?void 0:f.config)!==null&&g!==void 0?g:{};return N[wx]="firebase",N.update=!0,A!=null&&(N[Tx]=A),o("config",E.measurementId,N),E.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.app=e}_delete(){return delete ol[this.app.options.appId],Promise.resolve()}}let ol={},qv=[];const zv={};let am="dataLayer",Wx="gtag",Fv,op,Hv=!1;function Zx(){const i=[];if(ab()&&i.push("This is a browser extension environment."),t1()||i.push("Cookies are not available."),i.length>0){const e=i.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=Ni.create("invalid-analytics-context",{errorInfo:e});ai.warn(n.message)}}function Jx(i,e,n){Zx();const r=i.options.appId;if(!r)throw Ni.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)ai.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ni.create("no-api-key");if(ol[r]!=null)throw Ni.create("already-exists",{id:r});if(!Hv){Nx(am);const{wrappedGtag:u,gtagCore:f}=Mx(ol,qv,zv,am,Wx);op=u,Fv=f,Hv=!0}return ol[r]=Qx(i,qv,zv,e,Fv,am,n),new Xx(i)}function e2(i=Hm()){i=Wn(i);const e=ro(i,yd);return e.isInitialized()?e.getImmediate():t2(i)}function t2(i,e={}){const n=ro(i,yd);if(n.isInitialized()){const o=n.getImmediate();if(fs(e,n.getOptions()))return o;throw Ni.create("already-initialized")}return n.initialize({options:e})}function n2(i,e,n){i=Wn(i),$x(op,ol[i.app.options.appId],e).catch(r=>ai.error(r))}function hE(i,e,n,r){i=Wn(i),Kx(op,ol[i.app.options.appId],e,n,r).catch(o=>ai.error(o))}const Gv="@firebase/analytics",Kv="0.10.16";function i2(){Ua(new da(yd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return Jx(r,o,n)},"PUBLIC")),Ua(new da("analytics-internal",i,"PRIVATE")),$i(Gv,Kv),$i(Gv,Kv,"esm2017");function i(e){try{const n=e.getProvider(yd).getImmediate();return{logEvent:(r,o,u)=>hE(n,r,o,u)}}catch(n){throw Ni.create("interop-component-reg-failed",{reason:n})}}}i2();let Ws;const a2=()=>{if(us)try{Ws=e2(us),console.log("Firebase Analytics initialized successfully.")}catch(i){console.error("Firebase Analytics initialization error:",i),Ws=void 0}else us||console.warn("Firebase App not initialized when attempting to initialize Analytics. Analytics will be disabled."),Ws=void 0},$n=(i,e)=>{Ws&&hE(Ws,i,e)},$v=i=>{Ws&&n2(Ws,i)},Yv={apiKey:"AIzaSyDXB3bjk1McDcet8e4O7Dq24e650Gt857U",authDomain:"dokkanpatchmakerauth.firebaseapp.com",projectId:"dokkanpatchmakerauth",storageBucket:"dokkanpatchmakerauth.firebasestorage.app",messagingSenderId:"266207236647",appId:"1:266207236647:web:d84a1117c169c75c90b402",measurementId:"G-B1XV7BR6NP"};let us,gi,vd;const mE=()=>{if(!Yv.apiKey){console.warn("Firebase API key is missing. Firebase features are disabled. Please ensure VITE_FIREBASE_API_KEY and other VITE_FIREBASE_* environment variables are set in your .env.local file.");return}try{us=cb(Yv),gi=LC(us),vd=new ur,a2(),console.log("Firebase initialized successfully (including Auth and potentially Analytics).")}catch(i){console.error("Firebase initialization error:",i),us=void 0,gi=void 0,vd=void 0}return gi},r2=i=>!gi&&(console.warn("Firebase auth not initialized when onAuthChange called. Attempting late initialization."),mE(),!gi)?(console.error("Critical: Firebase auth could not be initialized for onAuthChange."),$v(null),i(null),()=>{}):wI(gi,e=>{$v(e?e.uid:null),i(e)}),s2=(i,e)=>gi?bI(gi,i,e).then(n=>n.user):Promise.reject(new Error("Firebase not initialized")),o2=(i,e)=>gi?EI(gi,i,e).then(n=>n.user):Promise.reject(new Error("Firebase not initialized")),l2=()=>!gi||!vd?Promise.reject(new Error("Firebase or Google Provider not initialized")):GI(gi,vd).then(i=>i.user),u2=()=>gi?AI(gi):Promise.reject(new Error("Firebase not initialized"));var Qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,pE;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,k){function O(){}O.prototype=k.prototype,I.D=k.prototype,I.prototype=new O,I.prototype.constructor=I,I.C=function(C,L,q){for(var P=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)P[Ke-2]=arguments[Ke];return k.prototype[L].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,k,O){O||(O=0);var C=Array(16);if(typeof k=="string")for(var L=0;16>L;++L)C[L]=k.charCodeAt(O++)|k.charCodeAt(O++)<<8|k.charCodeAt(O++)<<16|k.charCodeAt(O++)<<24;else for(L=0;16>L;++L)C[L]=k[O++]|k[O++]<<8|k[O++]<<16|k[O++]<<24;k=I.g[0],O=I.g[1],L=I.g[2];var q=I.g[3],P=k+(q^O&(L^q))+C[0]+3614090360&4294967295;k=O+(P<<7&4294967295|P>>>25),P=q+(L^k&(O^L))+C[1]+3905402710&4294967295,q=k+(P<<12&4294967295|P>>>20),P=L+(O^q&(k^O))+C[2]+606105819&4294967295,L=q+(P<<17&4294967295|P>>>15),P=O+(k^L&(q^k))+C[3]+3250441966&4294967295,O=L+(P<<22&4294967295|P>>>10),P=k+(q^O&(L^q))+C[4]+4118548399&4294967295,k=O+(P<<7&4294967295|P>>>25),P=q+(L^k&(O^L))+C[5]+1200080426&4294967295,q=k+(P<<12&4294967295|P>>>20),P=L+(O^q&(k^O))+C[6]+2821735955&4294967295,L=q+(P<<17&4294967295|P>>>15),P=O+(k^L&(q^k))+C[7]+4249261313&4294967295,O=L+(P<<22&4294967295|P>>>10),P=k+(q^O&(L^q))+C[8]+1770035416&4294967295,k=O+(P<<7&4294967295|P>>>25),P=q+(L^k&(O^L))+C[9]+2336552879&4294967295,q=k+(P<<12&4294967295|P>>>20),P=L+(O^q&(k^O))+C[10]+4294925233&4294967295,L=q+(P<<17&4294967295|P>>>15),P=O+(k^L&(q^k))+C[11]+2304563134&4294967295,O=L+(P<<22&4294967295|P>>>10),P=k+(q^O&(L^q))+C[12]+1804603682&4294967295,k=O+(P<<7&4294967295|P>>>25),P=q+(L^k&(O^L))+C[13]+4254626195&4294967295,q=k+(P<<12&4294967295|P>>>20),P=L+(O^q&(k^O))+C[14]+2792965006&4294967295,L=q+(P<<17&4294967295|P>>>15),P=O+(k^L&(q^k))+C[15]+1236535329&4294967295,O=L+(P<<22&4294967295|P>>>10),P=k+(L^q&(O^L))+C[1]+4129170786&4294967295,k=O+(P<<5&4294967295|P>>>27),P=q+(O^L&(k^O))+C[6]+3225465664&4294967295,q=k+(P<<9&4294967295|P>>>23),P=L+(k^O&(q^k))+C[11]+643717713&4294967295,L=q+(P<<14&4294967295|P>>>18),P=O+(q^k&(L^q))+C[0]+3921069994&4294967295,O=L+(P<<20&4294967295|P>>>12),P=k+(L^q&(O^L))+C[5]+3593408605&4294967295,k=O+(P<<5&4294967295|P>>>27),P=q+(O^L&(k^O))+C[10]+38016083&4294967295,q=k+(P<<9&4294967295|P>>>23),P=L+(k^O&(q^k))+C[15]+3634488961&4294967295,L=q+(P<<14&4294967295|P>>>18),P=O+(q^k&(L^q))+C[4]+3889429448&4294967295,O=L+(P<<20&4294967295|P>>>12),P=k+(L^q&(O^L))+C[9]+568446438&4294967295,k=O+(P<<5&4294967295|P>>>27),P=q+(O^L&(k^O))+C[14]+3275163606&4294967295,q=k+(P<<9&4294967295|P>>>23),P=L+(k^O&(q^k))+C[3]+4107603335&4294967295,L=q+(P<<14&4294967295|P>>>18),P=O+(q^k&(L^q))+C[8]+1163531501&4294967295,O=L+(P<<20&4294967295|P>>>12),P=k+(L^q&(O^L))+C[13]+2850285829&4294967295,k=O+(P<<5&4294967295|P>>>27),P=q+(O^L&(k^O))+C[2]+4243563512&4294967295,q=k+(P<<9&4294967295|P>>>23),P=L+(k^O&(q^k))+C[7]+1735328473&4294967295,L=q+(P<<14&4294967295|P>>>18),P=O+(q^k&(L^q))+C[12]+2368359562&4294967295,O=L+(P<<20&4294967295|P>>>12),P=k+(O^L^q)+C[5]+4294588738&4294967295,k=O+(P<<4&4294967295|P>>>28),P=q+(k^O^L)+C[8]+2272392833&4294967295,q=k+(P<<11&4294967295|P>>>21),P=L+(q^k^O)+C[11]+1839030562&4294967295,L=q+(P<<16&4294967295|P>>>16),P=O+(L^q^k)+C[14]+4259657740&4294967295,O=L+(P<<23&4294967295|P>>>9),P=k+(O^L^q)+C[1]+2763975236&4294967295,k=O+(P<<4&4294967295|P>>>28),P=q+(k^O^L)+C[4]+1272893353&4294967295,q=k+(P<<11&4294967295|P>>>21),P=L+(q^k^O)+C[7]+4139469664&4294967295,L=q+(P<<16&4294967295|P>>>16),P=O+(L^q^k)+C[10]+3200236656&4294967295,O=L+(P<<23&4294967295|P>>>9),P=k+(O^L^q)+C[13]+681279174&4294967295,k=O+(P<<4&4294967295|P>>>28),P=q+(k^O^L)+C[0]+3936430074&4294967295,q=k+(P<<11&4294967295|P>>>21),P=L+(q^k^O)+C[3]+3572445317&4294967295,L=q+(P<<16&4294967295|P>>>16),P=O+(L^q^k)+C[6]+76029189&4294967295,O=L+(P<<23&4294967295|P>>>9),P=k+(O^L^q)+C[9]+3654602809&4294967295,k=O+(P<<4&4294967295|P>>>28),P=q+(k^O^L)+C[12]+3873151461&4294967295,q=k+(P<<11&4294967295|P>>>21),P=L+(q^k^O)+C[15]+530742520&4294967295,L=q+(P<<16&4294967295|P>>>16),P=O+(L^q^k)+C[2]+3299628645&4294967295,O=L+(P<<23&4294967295|P>>>9),P=k+(L^(O|~q))+C[0]+4096336452&4294967295,k=O+(P<<6&4294967295|P>>>26),P=q+(O^(k|~L))+C[7]+1126891415&4294967295,q=k+(P<<10&4294967295|P>>>22),P=L+(k^(q|~O))+C[14]+2878612391&4294967295,L=q+(P<<15&4294967295|P>>>17),P=O+(q^(L|~k))+C[5]+4237533241&4294967295,O=L+(P<<21&4294967295|P>>>11),P=k+(L^(O|~q))+C[12]+1700485571&4294967295,k=O+(P<<6&4294967295|P>>>26),P=q+(O^(k|~L))+C[3]+2399980690&4294967295,q=k+(P<<10&4294967295|P>>>22),P=L+(k^(q|~O))+C[10]+4293915773&4294967295,L=q+(P<<15&4294967295|P>>>17),P=O+(q^(L|~k))+C[1]+2240044497&4294967295,O=L+(P<<21&4294967295|P>>>11),P=k+(L^(O|~q))+C[8]+1873313359&4294967295,k=O+(P<<6&4294967295|P>>>26),P=q+(O^(k|~L))+C[15]+4264355552&4294967295,q=k+(P<<10&4294967295|P>>>22),P=L+(k^(q|~O))+C[6]+2734768916&4294967295,L=q+(P<<15&4294967295|P>>>17),P=O+(q^(L|~k))+C[13]+1309151649&4294967295,O=L+(P<<21&4294967295|P>>>11),P=k+(L^(O|~q))+C[4]+4149444226&4294967295,k=O+(P<<6&4294967295|P>>>26),P=q+(O^(k|~L))+C[11]+3174756917&4294967295,q=k+(P<<10&4294967295|P>>>22),P=L+(k^(q|~O))+C[2]+718787259&4294967295,L=q+(P<<15&4294967295|P>>>17),P=O+(q^(L|~k))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+k&4294967295,I.g[1]=I.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+L&4294967295,I.g[3]=I.g[3]+q&4294967295}r.prototype.u=function(I,k){k===void 0&&(k=I.length);for(var O=k-this.blockSize,C=this.B,L=this.h,q=0;q<k;){if(L==0)for(;q<=O;)o(this,I,q),q+=this.blockSize;if(typeof I=="string"){for(;q<k;)if(C[L++]=I.charCodeAt(q++),L==this.blockSize){o(this,C),L=0;break}}else for(;q<k;)if(C[L++]=I[q++],L==this.blockSize){o(this,C),L=0;break}}this.h=L,this.o+=k},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var k=1;k<I.length-8;++k)I[k]=0;var O=8*this.o;for(k=I.length-8;k<I.length;++k)I[k]=O&255,O/=256;for(this.u(I),I=Array(16),k=O=0;4>k;++k)for(var C=0;32>C;C+=8)I[O++]=this.g[k]>>>C&255;return I};function u(I,k){var O=g;return Object.prototype.hasOwnProperty.call(O,I)?O[I]:O[I]=k(I)}function f(I,k){this.h=k;for(var O=[],C=!0,L=I.length-1;0<=L;L--){var q=I[L]|0;C&&q==k||(O[L]=q,C=!1)}this.g=O}var g={};function y(I){return-128<=I&&128>I?u(I,function(k){return new f([k|0],0>k?-1:0)}):new f([I|0],0>I?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return A;if(0>I)return $(p(-I));for(var k=[],O=1,C=0;I>=O;C++)k[C]=I/O|0,O*=4294967296;return new f(k,0)}function E(I,k){if(I.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(I.charAt(0)=="-")return $(E(I.substring(1),k));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=p(Math.pow(k,8)),C=A,L=0;L<I.length;L+=8){var q=Math.min(8,I.length-L),P=parseInt(I.substring(L,L+q),k);8>q?(q=p(Math.pow(k,q)),C=C.j(q).add(p(P))):(C=C.j(O),C=C.add(p(P)))}return C}var A=y(0),N=y(1),M=y(16777216);i=f.prototype,i.m=function(){if(Q(this))return-$(this).m();for(var I=0,k=1,O=0;O<this.g.length;O++){var C=this.i(O);I+=(0<=C?C:4294967296+C)*k,k*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(X(this))return"0";if(Q(this))return"-"+$(this).toString(I);for(var k=p(Math.pow(I,6)),O=this,C="";;){var L=ie(O,k).g;O=re(O,L.j(k));var q=((0<O.g.length?O.g[0]:O.h)>>>0).toString(I);if(O=L,X(O))return q+C;for(;6>q.length;)q="0"+q;C=q+C}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function X(I){if(I.h!=0)return!1;for(var k=0;k<I.g.length;k++)if(I.g[k]!=0)return!1;return!0}function Q(I){return I.h==-1}i.l=function(I){return I=re(this,I),Q(I)?-1:X(I)?0:1};function $(I){for(var k=I.g.length,O=[],C=0;C<k;C++)O[C]=~I.g[C];return new f(O,~I.h).add(N)}i.abs=function(){return Q(this)?$(this):this},i.add=function(I){for(var k=Math.max(this.g.length,I.g.length),O=[],C=0,L=0;L<=k;L++){var q=C+(this.i(L)&65535)+(I.i(L)&65535),P=(q>>>16)+(this.i(L)>>>16)+(I.i(L)>>>16);C=P>>>16,q&=65535,P&=65535,O[L]=P<<16|q}return new f(O,O[O.length-1]&-2147483648?-1:0)};function re(I,k){return I.add($(k))}i.j=function(I){if(X(this)||X(I))return A;if(Q(this))return Q(I)?$(this).j($(I)):$($(this).j(I));if(Q(I))return $(this.j($(I)));if(0>this.l(M)&&0>I.l(M))return p(this.m()*I.m());for(var k=this.g.length+I.g.length,O=[],C=0;C<2*k;C++)O[C]=0;for(C=0;C<this.g.length;C++)for(var L=0;L<I.g.length;L++){var q=this.i(C)>>>16,P=this.i(C)&65535,Ke=I.i(L)>>>16,yt=I.i(L)&65535;O[2*C+2*L]+=P*yt,pe(O,2*C+2*L),O[2*C+2*L+1]+=q*yt,pe(O,2*C+2*L+1),O[2*C+2*L+1]+=P*Ke,pe(O,2*C+2*L+1),O[2*C+2*L+2]+=q*Ke,pe(O,2*C+2*L+2)}for(C=0;C<k;C++)O[C]=O[2*C+1]<<16|O[2*C];for(C=k;C<2*k;C++)O[C]=0;return new f(O,0)};function pe(I,k){for(;(I[k]&65535)!=I[k];)I[k+1]+=I[k]>>>16,I[k]&=65535,k++}function _e(I,k){this.g=I,this.h=k}function ie(I,k){if(X(k))throw Error("division by zero");if(X(I))return new _e(A,A);if(Q(I))return k=ie($(I),k),new _e($(k.g),$(k.h));if(Q(k))return k=ie(I,$(k)),new _e($(k.g),k.h);if(30<I.g.length){if(Q(I)||Q(k))throw Error("slowDivide_ only works with positive integers.");for(var O=N,C=k;0>=C.l(I);)O=F(O),C=F(C);var L=ce(O,1),q=ce(C,1);for(C=ce(C,2),O=ce(O,2);!X(C);){var P=q.add(C);0>=P.l(I)&&(L=L.add(O),q=P),C=ce(C,1),O=ce(O,1)}return k=re(I,L.j(k)),new _e(L,k)}for(L=A;0<=I.l(k);){for(O=Math.max(1,Math.floor(I.m()/k.m())),C=Math.ceil(Math.log(O)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),q=p(O),P=q.j(k);Q(P)||0<P.l(I);)O-=C,q=p(O),P=q.j(k);X(q)&&(q=N),L=L.add(q),I=re(I,P)}return new _e(L,I)}i.A=function(I){return ie(this,I).h},i.and=function(I){for(var k=Math.max(this.g.length,I.g.length),O=[],C=0;C<k;C++)O[C]=this.i(C)&I.i(C);return new f(O,this.h&I.h)},i.or=function(I){for(var k=Math.max(this.g.length,I.g.length),O=[],C=0;C<k;C++)O[C]=this.i(C)|I.i(C);return new f(O,this.h|I.h)},i.xor=function(I){for(var k=Math.max(this.g.length,I.g.length),O=[],C=0;C<k;C++)O[C]=this.i(C)^I.i(C);return new f(O,this.h^I.h)};function F(I){for(var k=I.g.length+1,O=[],C=0;C<k;C++)O[C]=I.i(C)<<1|I.i(C-1)>>>31;return new f(O,I.h)}function ce(I,k){var O=k>>5;k%=32;for(var C=I.g.length-O,L=[],q=0;q<C;q++)L[q]=0<k?I.i(q+O)>>>k|I.i(q+O+1)<<32-k:I.i(q+O);return new f(L,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=E,cs=f}).apply(typeof Qv<"u"?Qv:typeof self<"u"?self:typeof window<"u"?window:{});var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gE,pu,_E,id,Tm,yE,vE,bE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,T){return c==Array.prototype||c==Object.prototype||(c[v]=T.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kc=="object"&&Kc];for(var v=0;v<c.length;++v){var T=c[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function o(c,v){if(v)e:{var T=r;c=c.split(".");for(var D=0;D<c.length-1;D++){var G=c[D];if(!(G in T))break e;T=T[G]}c=c[c.length-1],D=T[c],v=v(D),v!=D&&v!=null&&e(T,c,{configurable:!0,writable:!0,value:v})}}function u(c,v){c instanceof String&&(c+="");var T=0,D=!1,G={next:function(){if(!D&&T<c.length){var ee=T++;return{value:v(ee,c[ee]),done:!1}}return D=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}o("Array.prototype.values",function(c){return c||function(){return u(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function y(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function p(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function E(c,v,T){return c.call.apply(c.bind,arguments)}function A(c,v,T){if(!c)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,D),c.apply(v,G)}}return function(){return c.apply(v,arguments)}}function N(c,v,T){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,N.apply(null,arguments)}function M(c,v){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),c.apply(this,D)}}function X(c,v){function T(){}T.prototype=v.prototype,c.aa=v.prototype,c.prototype=new T,c.prototype.constructor=c,c.Qb=function(D,G,ee){for(var V=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)V[ne-2]=arguments[ne];return v.prototype[G].apply(D,V)}}function Q(c){const v=c.length;if(0<v){const T=Array(v);for(let D=0;D<v;D++)T[D]=c[D];return T}return[]}function $(c,v){for(let T=1;T<arguments.length;T++){const D=arguments[T];if(y(D)){const G=c.length||0,ee=D.length||0;c.length=G+ee;for(let V=0;V<ee;V++)c[G+V]=D[V]}else c.push(D)}}class re{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function pe(c){return/^[\s\xa0]*$/.test(c)}function _e(){var c=g.navigator;return c&&(c=c.userAgent)?c:""}function ie(c){return ie[" "](c),c}ie[" "]=function(){};var F=_e().indexOf("Gecko")!=-1&&!(_e().toLowerCase().indexOf("webkit")!=-1&&_e().indexOf("Edge")==-1)&&!(_e().indexOf("Trident")!=-1||_e().indexOf("MSIE")!=-1)&&_e().indexOf("Edge")==-1;function ce(c,v,T){for(const D in c)v.call(T,c[D],D,c)}function I(c,v){for(const T in c)v.call(void 0,c[T],T,c)}function k(c){const v={};for(const T in c)v[T]=c[T];return v}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,v){let T,D;for(let G=1;G<arguments.length;G++){D=arguments[G];for(T in D)c[T]=D[T];for(let ee=0;ee<O.length;ee++)T=O[ee],Object.prototype.hasOwnProperty.call(D,T)&&(c[T]=D[T])}}function L(c){var v=1;c=c.split(":");const T=[];for(;0<v&&c.length;)T.push(c.shift()),v--;return c.length&&T.push(c.join(":")),T}function q(c){g.setTimeout(()=>{throw c},0)}function P(){var c=nt;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Ke{constructor(){this.h=this.g=null}add(v,T){const D=yt.get();D.set(v,T),this.h?this.h.next=D:this.g=D,this.h=D}}var yt=new re(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,Ne=!1,nt=new Ke,B=()=>{const c=g.Promise.resolve(void 0);Te=()=>{c.then(fe)}};var fe=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(T){q(T)}var v=yt;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}Ne=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const T=()=>{};g.addEventListener("test",T,v),g.removeEventListener("test",T,v)}catch{}return c}();function ge(c,v){if(me.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var T=this.type=c.type,D=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(F){e:{try{ie(v.nodeName);var G=!0;break e}catch{}G=!1}G||(v=null)}}else T=="mouseover"?v=c.fromElement:T=="mouseout"&&(v=c.toElement);this.relatedTarget=v,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:te[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ge.aa.h.call(this)}}X(ge,me);var te={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Je(c,v,T,D,G){this.listener=c,this.proxy=null,this.src=v,this.type=T,this.capture=!!D,this.ha=G,this.key=++xe,this.da=this.fa=!1}function Ze(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pt(c){this.src=c,this.g={},this.h=0}pt.prototype.add=function(c,v,T,D,G){var ee=c.toString();c=this.g[ee],c||(c=this.g[ee]=[],this.h++);var V=Ce(c,v,D,G);return-1<V?(v=c[V],T||(v.fa=!1)):(v=new Je(v,this.src,ee,!!D,G),v.fa=T,c.push(v)),v};function We(c,v){var T=v.type;if(T in c.g){var D=c.g[T],G=Array.prototype.indexOf.call(D,v,void 0),ee;(ee=0<=G)&&Array.prototype.splice.call(D,G,1),ee&&(Ze(v),c.g[T].length==0&&(delete c.g[T],c.h--))}}function Ce(c,v,T,D){for(var G=0;G<c.length;++G){var ee=c[G];if(!ee.da&&ee.listener==v&&ee.capture==!!T&&ee.ha==D)return G}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),Di={};function on(c,v,T,D,G){if(Array.isArray(v)){for(var ee=0;ee<v.length;ee++)on(c,v[ee],T,D,G);return null}return T=co(T),c&&c[we]?c.K(v,T,p(D)?!!D.capture:!1,G):Gt(c,v,T,!1,D,G)}function Gt(c,v,T,D,G,ee){if(!v)throw Error("Invalid event type");var V=p(G)?!!G.capture:!!G,ne=Vt(c);if(ne||(c[rt]=ne=new pt(c)),T=ne.add(v,T,D,V,ee),T.proxy)return T;if(D=Oi(),T.proxy=D,D.src=c,D.listener=T,c.addEventListener)ye||(G=V),G===void 0&&(G=!1),c.addEventListener(v.toString(),D,G);else if(c.attachEvent)c.attachEvent(qe(v.toString()),D);else if(c.addListener&&c.removeListener)c.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Oi(){function c(T){return v.call(c.src,c.listener,T)}const v=st;return c}function vt(c,v,T,D,G){if(Array.isArray(v))for(var ee=0;ee<v.length;ee++)vt(c,v[ee],T,D,G);else D=p(D)?!!D.capture:!!D,T=co(T),c&&c[we]?(c=c.i,v=String(v).toString(),v in c.g&&(ee=c.g[v],T=Ce(ee,T,D,G),-1<T&&(Ze(ee[T]),Array.prototype.splice.call(ee,T,1),ee.length==0&&(delete c.g[v],c.h--)))):c&&(c=Vt(c))&&(v=c.g[v.toString()],c=-1,v&&(c=Ce(v,T,D,G)),(T=-1<c?v[c]:null)&&jn(T))}function jn(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[we])We(v.i,c);else{var T=c.type,D=c.proxy;v.removeEventListener?v.removeEventListener(T,D,c.capture):v.detachEvent?v.detachEvent(qe(T),D):v.addListener&&v.removeListener&&v.removeListener(D),(T=Vt(v))?(We(T,c),T.h==0&&(T.src=null,v[rt]=null)):Ze(c)}}}function qe(c){return c in Di?Di[c]:Di[c]="on"+c}function st(c,v){if(c.da)c=!0;else{v=new ge(v,this);var T=c.listener,D=c.ha||c.src;c.fa&&jn(c),c=T.call(D,v)}return c}function Vt(c){return c=c[rt],c instanceof pt?c:null}var si="__closure_events_fn_"+(1e9*Math.random()>>>0);function co(c){return typeof c=="function"?c:(c[si]||(c[si]=function(v){return c.handleEvent(v)}),c[si])}function jt(){Se.call(this),this.i=new pt(this),this.M=this,this.F=null}X(jt,Se),jt.prototype[we]=!0,jt.prototype.removeEventListener=function(c,v,T,D){vt(this,c,v,T,D)};function ft(c,v){var T,D=c.F;if(D)for(T=[];D;D=D.F)T.push(D);if(c=c.M,D=v.type||v,typeof v=="string")v=new me(v,c);else if(v instanceof me)v.target=v.target||c;else{var G=v;v=new me(D,c),C(v,G)}if(G=!0,T)for(var ee=T.length-1;0<=ee;ee--){var V=v.g=T[ee];G=Cn(V,D,!0,v)&&G}if(V=v.g=c,G=Cn(V,D,!0,v)&&G,G=Cn(V,D,!1,v)&&G,T)for(ee=0;ee<T.length;ee++)V=v.g=T[ee],G=Cn(V,D,!1,v)&&G}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var T=c.g[v],D=0;D<T.length;D++)Ze(T[D]);delete c.g[v],c.h--}}this.F=null},jt.prototype.K=function(c,v,T,D){return this.i.add(String(c),v,!1,T,D)},jt.prototype.L=function(c,v,T,D){return this.i.add(String(c),v,!0,T,D)};function Cn(c,v,T,D){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var G=!0,ee=0;ee<v.length;++ee){var V=v[ee];if(V&&!V.da&&V.capture==T){var ne=V.listener,Ie=V.ha||V.src;V.fa&&We(c.i,V),G=ne.call(Ie,D)!==!1&&G}}return G&&!D.defaultPrevented}function Kt(c,v,T){if(typeof c=="function")T&&(c=N(c,T));else if(c&&typeof c.handleEvent=="function")c=N(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:g.setTimeout(c,v||0)}function Xi(c){c.g=Kt(()=>{c.g=null,c.i&&(c.i=!1,Xi(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class fo extends Se{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Xi(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ha(c){Se.call(this),this.h=c,this.g={}}X(ha,Se);var ma=[];function za(c){ce(c.g,function(v,T){this.g.hasOwnProperty(T)&&jn(v)},c),c.g={}}ha.prototype.N=function(){ha.aa.N.call(this),za(this)},ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _i=g.JSON.stringify,yr=g.JSON.parse,pa=class{stringify(c){return g.JSON.stringify(c,void 0)}parse(c){return g.JSON.parse(c,void 0)}};function Qe(){}Qe.prototype.h=null;function vr(c){return c.h||(c.h=c.i())}function Fa(){}var Pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){me.call(this,"d")}X(Zn,me);function Ss(){me.call(this,"c")}X(Ss,me);var hn={},br=null;function Ee(){return br=br||new jt}hn.La="serverreachability";function ga(c){me.call(this,hn.La,c)}X(ga,me);function $t(c){const v=Ee();ft(v,new ga(v))}hn.STAT_EVENT="statevent";function _a(c,v){me.call(this,hn.STAT_EVENT,c),this.stat=v}X(_a,me);function Ct(c){const v=Ee();ft(v,new _a(v,c))}hn.Ma="timingevent";function Xt(c,v){me.call(this,hn.Ma,c),this.size=v}X(Xt,me);function xt(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){c()},v)}function Jn(){this.g=!0}Jn.prototype.xa=function(){this.g=!1};function vn(c,v,T,D,G,ee){c.info(function(){if(c.g)if(ee)for(var V="",ne=ee.split("&"),Ie=0;Ie<ne.length;Ie++){var Ae=ne[Ie].split("=");if(1<Ae.length){var Pe=Ae[0];Ae=Ae[1];var $e=Pe.split("_");V=2<=$e.length&&$e[1]=="type"?V+(Pe+"="+Ae+"&"):V+(Pe+"=redacted&")}}else V=null;else V=ee;return"XMLHTTP REQ ("+D+") [attempt "+G+"]: "+v+`
`+T+`
`+V})}function ho(c,v,T,D,G,ee,V){c.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+G+"]: "+v+`
`+T+`
`+ee+" "+V})}function ei(c,v,T,D){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+ya(c,T)+(D?" "+D:"")})}function Ts(c,v){c.info(function(){return"TIMEOUT: "+v})}Jn.prototype.info=function(){};function ya(c,v){if(!c.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(c=0;c<T.length;c++)if(Array.isArray(T[c])){var D=T[c];if(!(2>D.length)){var G=D[1];if(Array.isArray(G)&&!(1>G.length)){var ee=G[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var V=1;V<G.length;V++)G[V]=""}}}}return _i(T)}catch{return v}}var va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ut={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yi;function Mi(){}X(Mi,Qe),Mi.prototype.g=function(){return new XMLHttpRequest},Mi.prototype.i=function(){return{}},yi=new Mi;function mn(c,v,T,D){this.j=c,this.i=v,this.l=T,this.R=D||1,this.U=new ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zt}function zt(){this.i=null,this.g="",this.h=!1}var ba={},xn={};function Un(c,v,T){c.L=1,c.v=Ta(En(v)),c.m=T,c.P=!0,vi(c,null)}function vi(c,v){c.F=Date.now(),Ea(c),c.A=En(c.v);var T=c.A,D=c.R;Array.isArray(D)||(D=[String(D)]),Ar(T.i,"t",D),c.C=0,T=c.j.J,c.h=new zt,c.g=Eo(c.j,T?v:null,!c.m),0<c.O&&(c.M=new fo(N(c.Y,c,c.g),c.O)),v=c.U,T=c.g,D=c.ca;var G="readystatechange";Array.isArray(G)||(G&&(ma[0]=G.toString()),G=ma);for(var ee=0;ee<G.length;ee++){var V=on(T,G[ee],D||v.handleEvent,!1,v.h||v);if(!V)break;v.g[V.key]=V}v=c.H?k(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),$t(),vn(c.i,c.u,c.A,c.l,c.R,c.m)}mn.prototype.ca=function(c){c=c.target;const v=this.M;v&&bt(c)==3?v.j():this.Y(c)},mn.prototype.Y=function(c){try{if(c==this.g)e:{const $e=bt(this.g);var v=this.g.Ba();const tn=this.g.Z();if(!(3>$e)&&($e!=3||this.g&&(this.h.h||this.g.oa()||xs(this.g)))){this.J||$e!=4||v==7||(v==8||0>=tn?$t(3):$t(2)),Wi(this);var T=this.g.Z();this.X=T;t:if(ws(this)){var D=xs(this.g);c="";var G=D.length,ee=bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),ti(this);var V="";break t}this.h.i=new g.TextDecoder}for(v=0;v<G;v++)this.h.h=!0,c+=this.h.i.decode(D[v],{stream:!(ee&&v==G-1)});D.length=0,this.h.g+=c,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=T==200,ho(this.i,this.u,this.A,this.l,this.R,$e,T),this.o){if(this.T&&!this.K){t:{if(this.g){var ne,Ie=this.g;if((ne=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(ne)){var Ae=ne;break t}}Ae=null}if(T=Ae)ei(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oi(this,T);else{this.o=!1,this.s=3,Ct(12),ln(this),ti(this);break e}}if(this.P){T=!0;let Tt;for(;!this.J&&this.C<V.length;)if(Tt=As(this,V),Tt==xn){$e==4&&(this.s=4,Ct(14),T=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==ba){this.s=4,Ct(15),ei(this.i,this.l,V,"[Invalid Chunk]"),T=!1;break}else ei(this.i,this.l,Tt,null),oi(this,Tt);if(ws(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||V.length!=0||this.h.h||(this.s=1,Ct(16),T=!1),this.o=this.o&&T,!T)ei(this.i,this.l,V,"[Invalid Chunked Response]"),ln(this),ti(this);else if(0<V.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Qa(Pe),Pe.M=!0,Ct(11))}}else ei(this.i,this.l,V,null),oi(this,V);$e==4&&ln(this),this.o&&!this.J&&($e==4?vo(this.j,this):(this.o=!1,Ea(this)))}else Sl(this.g),T==400&&0<V.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),ln(this),ti(this)}}}catch{}finally{}};function ws(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function As(c,v){var T=c.C,D=v.indexOf(`
`,T);return D==-1?xn:(T=Number(v.substring(T,D)),isNaN(T)?ba:(D+=1,D+T>v.length?xn:(v=v.slice(D,D+T),c.C=D+T,v)))}mn.prototype.cancel=function(){this.J=!0,ln(this)};function Ea(c){c.S=Date.now()+c.I,Sa(c,c.I)}function Sa(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=xt(N(c.ba,c),v)}function Wi(c){c.B&&(g.clearTimeout(c.B),c.B=null)}mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Ts(this.i,this.A),this.L!=2&&($t(),Ct(17)),ln(this),this.s=2,ti(this)):Sa(this,this.S-c)};function ti(c){c.j.G==0||c.J||vo(c.j,c)}function ln(c){Wi(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,za(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function oi(c,v){try{var T=c.j;if(T.G!=0&&(T.g==c||Is(T.h,c))){if(!c.K&&Is(T.h,c)&&T.G==3){try{var D=T.Da.g.parse(v)}catch{D=null}if(Array.isArray(D)&&D.length==3){var G=D;if(G[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<c.F)Nr(T),xr(T);else break e;kr(T),Ct(18)}}else T.za=G[1],0<T.za-T.T&&37500>G[2]&&T.F&&T.v==0&&!T.C&&(T.C=xt(N(T.Za,T),6e3));if(1>=Ga(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ia(T,11)}else if((c.K||T.g==c)&&Nr(T),!pe(v))for(G=T.Da.g.parse(v),v=0;v<G.length;v++){let Ae=G[v];if(T.T=Ae[0],Ae=Ae[1],T.G==2)if(Ae[0]=="c"){T.K=Ae[1],T.ia=Ae[2];const Pe=Ae[3];Pe!=null&&(T.la=Pe,T.j.info("VER="+T.la));const $e=Ae[4];$e!=null&&(T.Aa=$e,T.j.info("SVER="+T.Aa));const tn=Ae[5];tn!=null&&typeof tn=="number"&&0<tn&&(D=1.5*tn,T.L=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Tt=c.g;if(Tt){const Ft=Tt.g?Tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ft){var ee=D.h;ee.g||Ft.indexOf("spdy")==-1&&Ft.indexOf("quic")==-1&&Ft.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Ka(ee,ee.h),ee.h=null))}if(D.D){const Nn=Tt.g?Tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Nn&&(D.ya=Nn,St(D.I,D.D,Nn))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-c.F,T.j.info("Handshake RTT: "+T.R+"ms")),D=T;var V=c;if(D.qa=Ns(D,D.J?D.ia:null,D.W),V.K){bn(D.h,V);var ne=V,Ie=D.L;Ie&&(ne.I=Ie),ne.B&&(Wi(ne),Ea(ne)),D.g=V}else _o(D);0<T.i.length&&Rr(T)}else Ae[0]!="stop"&&Ae[0]!="close"||ia(T,7);else T.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?ia(T,7):Cr(T):Ae[0]!="noop"&&T.l&&T.l.ta(Ae),T.v=0)}}$t(4)}catch{}}var Er=class{constructor(c,v){this.g=c,this.map=v}};function Li(c){this.l=c||10,g.PerformanceNavigationTiming?(c=g.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ha(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ga(c){return c.h?1:c.g?c.g.size:0}function Is(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function Ka(c,v){c.g?c.g.add(v):c.h=v}function bn(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}Li.prototype.cancel=function(){if(this.i=Zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zi(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const T of c.g.values())v=v.concat(T.D);return v}return Q(c.i)}function mo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var v=[],T=c.length,D=0;D<T;D++)v.push(c[D]);return v}v=[],T=0;for(D in c)v[T++]=c[D];return v}function gt(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var v=[];c=c.length;for(var T=0;T<c;T++)v.push(T);return v}v=[],T=0;for(const D in c)v[T++]=D;return v}}}function Ji(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var T=gt(c),D=mo(c),G=D.length,ee=0;ee<G;ee++)v.call(void 0,D[ee],T&&T[ee],c)}var ea=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ta(c,v){if(c){c=c.split("&");for(var T=0;T<c.length;T++){var D=c[T].indexOf("="),G=null;if(0<=D){var ee=c[T].substring(0,D);G=c[T].substring(D+1)}else ee=c[T];v(ee,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Bt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Bt){this.h=c.h,Vi(this,c.j),this.o=c.o,this.g=c.g,li(this,c.s),this.l=c.l;var v=c.i,T=new bi;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),na(this,T),this.m=c.m}else c&&(v=String(c).match(ea))?(this.h=!1,Vi(this,v[1]||"",!0),this.o=Bn(v[2]||""),this.g=Bn(v[3]||"",!0),li(this,v[4]),this.l=Bn(v[5]||"",!0),na(this,v[6]||"",!0),this.m=Bn(v[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}Bt.prototype.toString=function(){var c=[],v=this.j;v&&c.push(wa(v,$a,!0),":");var T=this.g;return(T||v=="file")&&(c.push("//"),(v=this.o)&&c.push(wa(v,$a,!0),"@"),c.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&c.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&c.push("/"),c.push(wa(T,T.charAt(0)=="/"?Tr:Cs,!0))),(T=this.i.toString())&&c.push("?",T),(T=this.m)&&c.push("#",wa(T,ui)),c.join("")};function En(c){return new Bt(c)}function Vi(c,v,T){c.j=T?Bn(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function li(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function na(c,v,T){v instanceof bi?(c.i=v,De(c.i,c.h)):(T||(v=wa(v,wr)),c.i=new bi(v,c.h))}function St(c,v,T){c.i.set(v,T)}function Ta(c){return St(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Bn(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function wa(c,v,T){return typeof c=="string"?(c=encodeURI(c).replace(v,Sr),T&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Sr(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $a=/[#\/\?@]/g,Cs=/[#\?:]/g,Tr=/[#\?]/g,wr=/[#\?@]/g,ui=/#/g;function bi(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Wt(c){c.g||(c.g=new Map,c.h=0,c.i&&ta(c.i,function(v,T){c.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}i=bi.prototype,i.add=function(c,v){Wt(this),this.i=null,c=ji(this,c);var T=this.g.get(c);return T||this.g.set(c,T=[]),T.push(v),this.h+=1,this};function qn(c,v){Wt(c),v=ji(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function ci(c,v){return Wt(c),v=ji(c,v),c.g.has(v)}i.forEach=function(c,v){Wt(this),this.g.forEach(function(T,D){T.forEach(function(G){c.call(v,G,D,this)},this)},this)},i.na=function(){Wt(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let D=0;D<v.length;D++){const G=c[D];for(let ee=0;ee<G.length;ee++)T.push(v[D])}return T},i.V=function(c){Wt(this);let v=[];if(typeof c=="string")ci(this,c)&&(v=v.concat(this.g.get(ji(this,c))));else{c=Array.from(this.g.values());for(let T=0;T<c.length;T++)v=v.concat(c[T])}return v},i.set=function(c,v){return Wt(this),this.i=null,c=ji(this,c),ci(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},i.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function Ar(c,v,T){qn(c,v),0<T.length&&(c.i=null,c.g.set(ji(c,v),Q(T)),c.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var D=v[T];const ee=encodeURIComponent(String(D)),V=this.V(D);for(D=0;D<V.length;D++){var G=ee;V[D]!==""&&(G+="="+encodeURIComponent(String(V[D]))),c.push(G)}}return this.i=c.join("&")};function ji(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function De(c,v){v&&!c.j&&(Wt(c),c.i=null,c.g.forEach(function(T,D){var G=D.toLowerCase();D!=G&&(qn(this,D),Ar(this,G,T))},c)),c.j=v}function Aa(c,v){const T=new Jn;if(g.Image){const D=new Image;D.onload=M(Rn,T,"TestLoadImage: loaded",!0,v,D),D.onerror=M(Rn,T,"TestLoadImage: error",!1,v,D),D.onabort=M(Rn,T,"TestLoadImage: abort",!1,v,D),D.ontimeout=M(Rn,T,"TestLoadImage: timeout",!1,v,D),g.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=c}else v(!1)}function zn(c,v){const T=new Jn,D=new AbortController,G=setTimeout(()=>{D.abort(),Rn(T,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:D.signal}).then(ee=>{clearTimeout(G),ee.ok?Rn(T,"TestPingServer: ok",!0,v):Rn(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),Rn(T,"TestPingServer: error",!1,v)})}function Rn(c,v,T,D,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),D(T)}catch{}}function Ia(){this.g=new pa}function Fn(c,v,T){const D=T||"";try{Ji(c,function(G,ee){let V=G;p(G)&&(V=_i(G)),v.push(D+ee+"="+encodeURIComponent(V))})}catch(G){throw v.push(D+"type="+encodeURIComponent("_badmap")),G}}function di(c){this.l=c.Ub||null,this.j=c.eb||!1}X(di,Qe),di.prototype.g=function(){return new Sn(this.l,this.j)},di.prototype.i=function(c){return function(){return c}}({});function Sn(c,v){jt.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}X(Sn,jt),i=Sn.prototype,i.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,h(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||g).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ei(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,h(this)),this.g&&(this.readyState=3,h(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ca(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ca(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Ei(this):h(this),this.readyState==3&&Ca(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Ei(this))},i.Qa=function(c){this.g&&(this.response=c,Ei(this))},i.ga=function(){this.g&&Ei(this)};function Ei(c){c.readyState=4,c.l=null,c.j=null,c.v=null,h(c)}i.setRequestHeader=function(c,v){this.u.append(c,v)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,c.push(T[0]+": "+T[1]),T=v.next();return c.join(`\r
`)};function h(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _(c){let v="";return ce(c,function(T,D){v+=D,v+=":",v+=T,v+=`\r
`}),v}function b(c,v,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=_(T),typeof c=="string"?T!=null&&encodeURIComponent(String(T)):St(c,v,T))}function R(c){jt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}X(R,jt);var U=/^https?$/i,Z=["POST","PUT"];i=R.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,v,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yi.g(),this.v=this.o?vr(this.o):vr(yi),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(ee){le(this,ee);return}if(c=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var G in D)T.set(G,D[G]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ee of D.keys())T.set(ee,D.get(ee));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),G=g.FormData&&c instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Z,v,void 0))||D||G||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,V]of T)this.g.setRequestHeader(ee,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rt(this),this.u=!0,this.g.send(c),this.u=!1}catch(ee){le(this,ee)}};function le(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,Le(c),Ve(c)}function Le(c){c.A||(c.A=!0,ft(c,"complete"),ft(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ft(this,"complete"),ft(this,"abort"),Ve(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ve(this,!0)),R.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?tt(this):this.bb())},i.bb=function(){tt(this)};function tt(c){if(c.h&&typeof f<"u"&&(!c.v[1]||bt(c)!=4||c.Z()!=2)){if(c.u&&bt(c)==4)Kt(c.Ea,0,c);else if(ft(c,"readystatechange"),bt(c)==4){c.h=!1;try{const V=c.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var D;if(D=V===0){var G=String(c.D).match(ea)[1]||null;!G&&g.self&&g.self.location&&(G=g.self.location.protocol.slice(0,-1)),D=!U.test(G?G.toLowerCase():"")}T=D}if(T)ft(c,"complete"),ft(c,"success");else{c.m=6;try{var ee=2<bt(c)?c.g.statusText:""}catch{ee=""}c.l=ee+" ["+c.Z()+"]",Le(c)}}finally{Ve(c)}}}}function Ve(c,v){if(c.g){Rt(c);const T=c.g,D=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||ft(c,"ready");try{T.onreadystatechange=D}catch{}}}function Rt(c){c.I&&(g.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function bt(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<bt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),yr(v)}};function xs(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Sl(c){const v={};c=(c.g&&2<=bt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<c.length;D++){if(pe(c[D]))continue;var T=L(c[D]);const G=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=v[G]||[];v[G]=ee,ee.push(T)}I(v,function(D){return D.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(c,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[c]||v}function Ir(c){this.Aa=0,this.i=[],this.j=new Jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xa("baseRetryDelayMs",5e3,c),this.cb=xa("retryDelaySeedMs",1e4,c),this.Wa=xa("forwardChannelMaxRetries",2,c),this.wa=xa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Li(c&&c.concurrentRequestLimit),this.Da=new Ia,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ir.prototype,i.la=8,i.G=1,i.connect=function(c,v,T,D){Ct(0),this.W=c,this.H=v||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.I=Ns(this,null,this.W),Rr(this)};function Cr(c){if(po(c),c.G==3){var v=c.U++,T=En(c.I);if(St(T,"SID",c.K),St(T,"RID",v),St(T,"TYPE","terminate"),Ya(c,T),v=new mn(c,c.j,v),v.L=2,v.v=Ta(En(T)),T=!1,g.navigator&&g.navigator.sendBeacon)try{T=g.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&g.Image&&(new Image().src=v.v,T=!0),T||(v.g=Eo(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ea(v)}bo(c)}function xr(c){c.g&&(Qa(c),c.g.cancel(),c.g=null)}function po(c){xr(c),c.u&&(g.clearTimeout(c.u),c.u=null),Nr(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&g.clearTimeout(c.s),c.s=null)}function Rr(c){if(!Ha(c.h)&&!c.s){c.s=!0;var v=c.Ga;Te||B(),Ne||(Te(),Ne=!0),nt.add(v,c),c.B=0}}function Tl(c,v){return Ga(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=xt(N(c.Ga,c,v),ks(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const G=new mn(this,this.j,c);let ee=this.o;if(this.S&&(ee?(ee=k(ee),C(ee,this.S)):ee=this.S),this.m!==null||this.O||(G.H=ee,ee=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(v+=D,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=go(this,G,v),T=En(this.I),St(T,"RID",c),St(T,"CVER",22),this.D&&St(T,"X-HTTP-Session-Id",this.D),Ya(this,T),ee&&(this.O?v="headers="+encodeURIComponent(String(_(ee)))+"&"+v:this.m&&b(T,this.m,ee)),Ka(this.h,G),this.Ua&&St(T,"TYPE","init"),this.P?(St(T,"$req",v),St(T,"SID","null"),G.T=!0,Un(G,T,null)):Un(G,T,v),this.G=2}}else this.G==3&&(c?Rs(this,c):this.i.length==0||Ha(this.h)||Rs(this))};function Rs(c,v){var T;v?T=v.l:T=c.U++;const D=En(c.I);St(D,"SID",c.K),St(D,"RID",T),St(D,"AID",c.T),Ya(c,D),c.m&&c.o&&b(D,c.m,c.o),T=new mn(c,c.j,T,c.B+1),c.m===null&&(T.H=c.o),v&&(c.i=v.D.concat(c.i)),v=go(c,T,1e3),T.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ka(c.h,T),Un(T,D,v)}function Ya(c,v){c.H&&ce(c.H,function(T,D){St(v,D,T)}),c.l&&Ji({},function(T,D){St(v,D,T)})}function go(c,v,T){T=Math.min(c.i.length,T);var D=c.l?N(c.l.Na,c.l,c):null;e:{var G=c.i;let ee=-1;for(;;){const V=["count="+T];ee==-1?0<T?(ee=G[0].g,V.push("ofs="+ee)):ee=0:V.push("ofs="+ee);let ne=!0;for(let Ie=0;Ie<T;Ie++){let Ae=G[Ie].g;const Pe=G[Ie].map;if(Ae-=ee,0>Ae)ee=Math.max(0,G[Ie].g-100),ne=!1;else try{Fn(Pe,V,"req"+Ae+"_")}catch{D&&D(Pe)}}if(ne){D=V.join("&");break e}}}return c=c.i.splice(0,T),v.D=c,D}function _o(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;Te||B(),Ne||(Te(),Ne=!0),nt.add(v,c),c.v=0}}function kr(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=xt(N(c.Fa,c),ks(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,yo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=xt(N(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),xr(this),yo(this))};function Qa(c){c.A!=null&&(g.clearTimeout(c.A),c.A=null)}function yo(c){c.g=new mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=En(c.qa);St(v,"RID","rpc"),St(v,"SID",c.K),St(v,"AID",c.T),St(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&St(v,"TO",c.ja),St(v,"TYPE","xmlhttp"),Ya(c,v),c.m&&c.o&&b(v,c.m,c.o),c.L&&(c.g.I=c.L);var T=c.g;c=c.ia,T.L=1,T.v=Ta(En(v)),T.m=null,T.P=!0,vi(T,c)}i.Za=function(){this.C!=null&&(this.C=null,xr(this),kr(this),Ct(19))};function Nr(c){c.C!=null&&(g.clearTimeout(c.C),c.C=null)}function vo(c,v){var T=null;if(c.g==v){Nr(c),Qa(c),c.g=null;var D=2}else if(Is(c.h,v))T=v.D,bn(c.h,v),D=1;else return;if(c.G!=0){if(v.o)if(D==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var G=c.B;D=Ee(),ft(D,new Xt(D,T)),Rr(c)}else _o(c);else if(G=v.s,G==3||G==0&&0<v.X||!(D==1&&Tl(c,v)||D==2&&kr(c)))switch(T&&0<T.length&&(v=c.h,v.i=v.i.concat(T)),G){case 1:ia(c,5);break;case 4:ia(c,10);break;case 3:ia(c,6);break;default:ia(c,2)}}}function ks(c,v){let T=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(T*=2),T*v}function ia(c,v){if(c.j.info("Error code "+v),v==2){var T=N(c.fb,c),D=c.Xa;const G=!D;D=new Bt(D||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Vi(D,"https"),Ta(D),G?Aa(D.toString(),T):zn(D.toString(),T)}else Ct(2);c.G=0,c.l&&c.l.sa(v),bo(c),po(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function bo(c){if(c.G=0,c.ka=[],c.l){const v=Zi(c.h);(v.length!=0||c.i.length!=0)&&($(c.ka,v),$(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function Ns(c,v,T){var D=T instanceof Bt?En(T):new Bt(T);if(D.g!="")v&&(D.g=v+"."+D.g),li(D,D.s);else{var G=g.location;D=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;var ee=new Bt(null);D&&Vi(ee,D),v&&(ee.g=v),G&&li(ee,G),T&&(ee.l=T),D=ee}return T=c.D,v=c.ya,T&&v&&St(D,T,v),St(D,"VER",c.la),Ya(c,D),D}function Eo(c,v,T){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new R(new di({eb:T})):new R(c.pa),v.Ha(c.J),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function So(){}i=So.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Dr(){}Dr.prototype.g=function(c,v){return new kn(c,v)};function kn(c,v){jt.call(this),this.g=new Ir(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!pe(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!pe(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new Si(this)}X(kn,jt),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Cr(this.g)},kn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var T={};T.__data__=c,c=T}else this.u&&(T={},T.__data__=_i(c),c=T);v.i.push(new Er(v.Ya++,c)),v.G==3&&Rr(v)},kn.prototype.N=function(){this.g.l=null,delete this.j,Cr(this.g),delete this.g,kn.aa.N.call(this)};function To(c){Zn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const T in v){c=T;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}X(To,Zn);function wo(){Ss.call(this),this.status=1}X(wo,Ss);function Si(c){this.g=c}X(Si,So),Si.prototype.ua=function(){ft(this.g,"a")},Si.prototype.ta=function(c){ft(this.g,new To(c))},Si.prototype.sa=function(c){ft(this.g,new wo)},Si.prototype.ra=function(){ft(this.g,"b")},Dr.prototype.createWebChannel=Dr.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,bE=function(){return new Dr},vE=function(){return Ee()},yE=hn,Tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,id=va,Ut.COMPLETE="complete",_E=Ut,Fa.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",jt.prototype.listen=jt.prototype.K,pu=Fa,R.prototype.listenOnce=R.prototype.L,R.prototype.getLastError=R.prototype.Ka,R.prototype.getLastErrorCode=R.prototype.Ba,R.prototype.getStatus=R.prototype.Z,R.prototype.getResponseJson=R.prototype.Oa,R.prototype.getResponseText=R.prototype.oa,R.prototype.send=R.prototype.ea,R.prototype.setWithCredentials=R.prototype.Ha,gE=R}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});const Xv="@firebase/firestore",Wv="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Pd("@firebase/firestore");function Jo(){return no.logLevel}function Re(i,...e){if(no.logLevel<=ct.DEBUG){const n=e.map(lp);no.debug(`Firestore (${yl}): ${i}`,...n)}}function gr(i,...e){if(no.logLevel<=ct.ERROR){const n=e.map(lp);no.error(`Firestore (${yl}): ${i}`,...n)}}function ul(i,...e){if(no.logLevel<=ct.WARN){const n=e.map(lp);no.warn(`Firestore (${yl}): ${i}`,...n)}}function lp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,EE(i,r,n)}function EE(i,e,n){let r=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw gr(r),new Error(r)}function wt(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||EE(e,o,r)}function Xe(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends fa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yn.UNAUTHENTICATED))}shutdown(){}}class d2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class f2{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wt(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let u=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ds,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},g=y=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ds)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string",31837,{l:r}),new SE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}}class h2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class m2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new h2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ki(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){wt(this.o===void 0,3512);const r=u=>{u.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=g2(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function at(i,e){return i<e?-1:i>e?1:0}function wm(i,e){let n=0;for(;n<i.length&&n<e.length;){const r=i.codePointAt(n),o=e.codePointAt(n);if(r!==o){if(r<128&&o<128)return at(r,o);{const u=TE(),f=_2(u.encode(Jv(i,n)),u.encode(Jv(e,n)));return f!==0?f:at(r,o)}}n+=r>65535?2:1}return at(i.length,e.length)}function Jv(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function _2(i,e){for(let n=0;n<i.length&&n<e.length;++n)if(i[n]!==e[n])return at(i[n],e[n]);return at(i.length,e.length)}function cl(i,e,n){return i.length===e.length&&i.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=-62135596800,t0=1e6;class fn{static now(){return fn.fromMillis(Date.now())}static fromDate(e){return fn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*t0);return new fn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<e0)throw new Ue(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/t0}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-e0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new fn(0,0))}static max(){return new Ye(new fn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="__name__";class Ma{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ma.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ma?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=Ma.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return at(e.length,n.length)}static compareSegments(e,n){const r=Ma.isNumericId(e),o=Ma.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ma.extractNumericId(e).compare(Ma.extractNumericId(n)):wm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class en extends Ma{construct(e,n,r){return new en(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new en(n)}static emptyPath(){return new en([])}}const y2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends Ma{construct(e,n,r){return new Ln(e,n,r)}static isValidIdentifier(e){return y2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===n0}static keyField(){return new Ln([n0])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Ue(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new Ue(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Ue(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(r+=g,o++):(u(),o++)}if(u(),f)throw new Ue(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ln(n)}static emptyPath(){return new Ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(en.fromString(e))}static fromName(e){return new Be(en.fromString(e).popFirst(5))}static empty(){return new Be(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&en.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return en.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new en(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=-1;function v2(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ye.fromTimestamp(r===1e9?new fn(n+1,0):new fn(n,r));return new hs(o,Be.empty(),e)}function b2(i){return new hs(i.readTime,i.key,Cu)}class hs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hs(Ye.min(),Be.empty(),Cu)}static max(){return new hs(Ye.max(),Be.empty(),Cu)}}function E2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Be.comparator(i.documentKey,e.documentKey),n!==0?n:at(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(i){if(i.code!==be.FAILED_PRECONDITION||i.message!==S2)throw i;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof he?n:he.resolve(n)}catch(n){return he.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):he.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):he.reject(n)}static resolve(e){return new he((n,r)=>{n(e)})}static reject(e){return new he((n,r)=>{r(e)})}static waitFor(e){return new he((n,r)=>{let o=0,u=0,f=!1;e.forEach(g=>{++o,g.next(()=>{++u,f&&u===o&&n()},y=>r(y))}),f=!0,u===o&&n()})}static or(e){let n=he.resolve(!1);for(const r of e)n=n.next(o=>o?he.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,u)=>{r.push(n.call(this,o,u))}),this.waitFor(r)}static mapArray(e,n){return new he((r,o)=>{const u=e.length,f=new Array(u);let g=0;for(let y=0;y<u;y++){const p=y;n(e[p]).next(E=>{f[p]=E,++g,g===u&&r(f)},E=>o(E))}})}static doWhile(e,n){return new he((r,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):r()};u()})}}function w2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Bd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=-1;function qd(i){return i==null}function bd(i){return i===0&&1/i==-1/0}function A2(i){return typeof i=="number"&&Number.isInteger(i)&&!bd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="";function I2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=i0(e)),e=C2(i.get(n),e);return i0(e)}function C2(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case AE:n+="";break;default:n+=u}}return n}function i0(i){return i+AE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function so(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function IE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new Qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new Qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $c(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $c(this.root,e,this.comparator,!1)}getReverseIterator(){return new $c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $c(this.root,e,this.comparator,!0)}}class $c{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Mn.RED,this.left=o??Mn.EMPTY,this.right=u??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Mn(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Mn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new r0(this.data.getIterator())}getIteratorFrom(e){return new r0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yn(this.comparator);return n.data=e,n}}class r0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.fields=e,e.sort(Ln.comparator)}static empty(){return new ua([])}unionWith(e){let n=new yn(Ln.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ua(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new CE("Invalid base64 string: "+u):u}}(e);return new Vn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new Vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const x2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(i){if(wt(!!i,39018),typeof i=="string"){let e=0;const n=x2.exec(i);if(wt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sn(i.seconds),nanos:sn(i.nanos)}}function sn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ps(i){return typeof i=="string"?Vn.fromBase64String(i):Vn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="server_timestamp",RE="__type__",kE="__previous_value__",NE="__local_write_time__";function cp(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[RE])===null||n===void 0?void 0:n.stringValue)===xE}function zd(i){const e=i.mapValue.fields[kE];return cp(e)?zd(e):e}function xu(i){const e=ms(i.mapValue.fields[NE].timestampValue);return new fn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,r,o,u,f,g,y,p,E){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=E}}const Ed="(default)";class Ru{constructor(e,n){this.projectId=e,this.database=n||Ed}static empty(){return new Ru("","")}get isDefaultDatabase(){return this.database===Ed}isEqual(e){return e instanceof Ru&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="__type__",k2="__max__",Yc={mapValue:{}},OE="__vector__",Sd="value";function gs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?cp(i)?4:D2(i)?9007199254740991:N2(i)?10:11:Ge(28295,{value:i})}function Ba(i,e){if(i===e)return!0;const n=gs(i);if(n!==gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return xu(i).isEqual(xu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=ms(o.timestampValue),g=ms(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return ps(o.bytesValue).isEqual(ps(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return sn(o.geoPointValue.latitude)===sn(u.geoPointValue.latitude)&&sn(o.geoPointValue.longitude)===sn(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return sn(o.integerValue)===sn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=sn(o.doubleValue),g=sn(u.doubleValue);return f===g?bd(f)===bd(g):isNaN(f)&&isNaN(g)}return!1}(i,e);case 9:return cl(i.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(a0(f)!==a0(g))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(g[y]===void 0||!Ba(f[y],g[y])))return!1;return!0}(i,e);default:return Ge(52216,{left:i})}}function ku(i,e){return(i.values||[]).find(n=>Ba(n,e))!==void 0}function dl(i,e){if(i===e)return 0;const n=gs(i),r=gs(e);if(n!==r)return at(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(i.booleanValue,e.booleanValue);case 2:return function(u,f){const g=sn(u.integerValue||u.doubleValue),y=sn(f.integerValue||f.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(i,e);case 3:return s0(i.timestampValue,e.timestampValue);case 4:return s0(xu(i),xu(e));case 5:return wm(i.stringValue,e.stringValue);case 6:return function(u,f){const g=ps(u),y=ps(f);return g.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const g=u.split("/"),y=f.split("/");for(let p=0;p<g.length&&p<y.length;p++){const E=at(g[p],y[p]);if(E!==0)return E}return at(g.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const g=at(sn(u.latitude),sn(f.latitude));return g!==0?g:at(sn(u.longitude),sn(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return o0(i.arrayValue,e.arrayValue);case 10:return function(u,f){var g,y,p,E;const A=u.fields||{},N=f.fields||{},M=(g=A[Sd])===null||g===void 0?void 0:g.arrayValue,X=(y=N[Sd])===null||y===void 0?void 0:y.arrayValue,Q=at(((p=M==null?void 0:M.values)===null||p===void 0?void 0:p.length)||0,((E=X==null?void 0:X.values)===null||E===void 0?void 0:E.length)||0);return Q!==0?Q:o0(M,X)}(i.mapValue,e.mapValue);case 11:return function(u,f){if(u===Yc.mapValue&&f===Yc.mapValue)return 0;if(u===Yc.mapValue)return 1;if(f===Yc.mapValue)return-1;const g=u.fields||{},y=Object.keys(g),p=f.fields||{},E=Object.keys(p);y.sort(),E.sort();for(let A=0;A<y.length&&A<E.length;++A){const N=wm(y[A],E[A]);if(N!==0)return N;const M=dl(g[y[A]],p[E[A]]);if(M!==0)return M}return at(y.length,E.length)}(i.mapValue,e.mapValue);default:throw Ge(23264,{Pe:n})}}function s0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return at(i,e);const n=ms(i),r=ms(e),o=at(n.seconds,r.seconds);return o!==0?o:at(n.nanos,r.nanos)}function o0(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=dl(n[o],r[o]);if(u)return u}return at(n.length,r.length)}function fl(i){return Am(i)}function Am(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const r=ms(n);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ps(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return Be.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=Am(u);return r+"]"}(i.arrayValue):"mapValue"in i?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${Am(n.fields[f])}`;return o+"}"}(i.mapValue):Ge(61005,{value:i})}function ad(i){switch(gs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zd(i);return e?16+ad(e):16;case 5:return 2*i.stringValue.length;case 6:return ps(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+ad(u),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return so(r.fields,(u,f)=>{o+=u.length+ad(f)}),o}(i.mapValue);default:throw Ge(13486,{value:i})}}function Im(i){return!!i&&"integerValue"in i}function dp(i){return!!i&&"arrayValue"in i}function l0(i){return!!i&&"nullValue"in i}function u0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function rd(i){return!!i&&"mapValue"in i}function N2(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[DE])===null||n===void 0?void 0:n.stringValue)===OE}function bu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return so(i.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bu(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bu(i.arrayValue.values[n]);return e}return Object.assign({},i)}function D2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===k2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.value=e}static empty(){return new Ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(n)}setAll(e){let n=Ln.emptyPath(),r={},o=[];e.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,r,o),r={},o=[],n=g.popLast()}f?r[g.lastSegment()]=bu(f):o.push(g.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];rd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){so(n,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ki(bu(this.value))}}function PE(i){const e=[];return so(i.fields,(n,r)=>{const o=new Ln([n]);if(rd(r)){const u=PE(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new ua(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n,r,o,u,f,g){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new Qn(e,0,Ye.min(),Ye.min(),Ye.min(),Ki.empty(),0)}static newFoundDocument(e,n,r,o){return new Qn(e,1,n,Ye.min(),r,o,0)}static newNoDocument(e,n){return new Qn(e,2,n,Ye.min(),Ye.min(),Ki.empty(),0)}static newUnknownDocument(e,n){return new Qn(e,3,n,Ye.min(),Ye.min(),Ki.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.position=e,this.inclusive=n}}function c0(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?r=Be.comparator(Be.fromName(f.referenceValue),n.key):r=dl(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function d0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ba(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n="asc"){this.field=e,this.dir=n}}function O2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{}class _n extends ME{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new M2(e,n,r):n==="array-contains"?new j2(e,r):n==="in"?new U2(e,r):n==="not-in"?new B2(e,r):n==="array-contains-any"?new q2(e,r):new _n(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new L2(e,r):new V2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(dl(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(dl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qa extends ME{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new qa(e,n)}matches(e){return LE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function LE(i){return i.op==="and"}function VE(i){return P2(i)&&LE(i)}function P2(i){for(const e of i.filters)if(e instanceof qa)return!1;return!0}function Cm(i){if(i instanceof _n)return i.field.canonicalString()+i.op.toString()+fl(i.value);if(VE(i))return i.filters.map(e=>Cm(e)).join(",");{const e=i.filters.map(n=>Cm(n)).join(",");return`${i.op}(${e})`}}function jE(i,e){return i instanceof _n?function(r,o){return o instanceof _n&&r.op===o.op&&r.field.isEqual(o.field)&&Ba(r.value,o.value)}(i,e):i instanceof qa?function(r,o){return o instanceof qa&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,g)=>u&&jE(f,o.filters[g]),!0):!1}(i,e):void Ge(19439)}function UE(i){return i instanceof _n?function(n){return`${n.field.canonicalString()} ${n.op} ${fl(n.value)}`}(i):i instanceof qa?function(n){return n.op.toString()+" {"+n.getFilters().map(UE).join(" ,")+"}"}(i):"Filter"}class M2 extends _n{constructor(e,n,r){super(e,n,r),this.key=Be.fromName(r.referenceValue)}matches(e){const n=Be.comparator(e.key,this.key);return this.matchesComparison(n)}}class L2 extends _n{constructor(e,n){super(e,"in",n),this.keys=BE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class V2 extends _n{constructor(e,n){super(e,"not-in",n),this.keys=BE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BE(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Be.fromName(r.referenceValue))}class j2 extends _n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dp(n)&&ku(n.arrayValue,this.value)}}class U2 extends _n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ku(this.value.arrayValue,n)}}class B2 extends _n{constructor(e,n){super(e,"not-in",n)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ku(this.value.arrayValue,n)}}class q2 extends _n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ku(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n=null,r=[],o=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Ie=null}}function f0(i,e=null,n=[],r=[],o=null,u=null,f=null){return new z2(i,e,n,r,o,u,f)}function fp(i){const e=Xe(i);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),qd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fl(r)).join(",")),e.Ie=n}return e.Ie}function hp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!O2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!jE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!d0(i.startAt,e.startAt)&&d0(i.endAt,e.endAt)}function xm(i){return Be.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n=null,r=[],o=[],u=null,f="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function F2(i,e,n,r,o,u,f,g){return new Fd(i,e,n,r,o,u,f,g)}function mp(i){return new Fd(i)}function h0(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function H2(i){return i.collectionGroup!==null}function Eu(i){const e=Xe(i);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new yn(Ln.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(p=>{p.isInequality()&&(g=g.add(p.field))})}),g})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new wd(u,r))}),n.has(Ln.keyField().canonicalString())||e.Ee.push(new wd(Ln.keyField(),r))}return e.Ee}function Va(i){const e=Xe(i);return e.de||(e.de=G2(e,Eu(i))),e.de}function G2(i,e){if(i.limitType==="F")return f0(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new wd(o.field,u)});const n=i.endAt?new Td(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Td(i.startAt.position,i.startAt.inclusive):null;return f0(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function Rm(i,e,n){return new Fd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Hd(i,e){return hp(Va(i),Va(e))&&i.limitType===e.limitType}function qE(i){return`${fp(Va(i))}|lt:${i.limitType}`}function el(i){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>UE(o)).join(", ")}]`),qd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>fl(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>fl(o)).join(",")),`Target(${r})`}(Va(i))}; limitType=${i.limitType})`}function Gd(i,e){return e.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Be.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(i,e)&&function(r,o){for(const u of Eu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(f,g,y){const p=c0(f,g,y);return f.inclusive?p<=0:p<0}(r.startAt,Eu(r),o)||r.endAt&&!function(f,g,y){const p=c0(f,g,y);return f.inclusive?p>=0:p>0}(r.endAt,Eu(r),o))}(i,e)}function K2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function zE(i){return(e,n)=>{let r=!1;for(const o of Eu(i)){const u=$2(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function $2(i,e,n){const r=i.field.isKeyField()?Be.comparator(e.key,n.key):function(u,f,g){const y=f.data.field(u),p=g.data.field(u);return y!==null&&p!==null?dl(y,p):Ge(42886)}(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ge(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,(n,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return IE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new Qt(Be.comparator);function _r(){return Y2}const FE=new Qt(Be.comparator);function gu(...i){let e=FE;for(const n of i)e=e.insert(n.key,n);return e}function HE(i){let e=FE;return i.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xs(){return Su()}function GE(){return Su()}function Su(){return new oo(i=>i.toString(),(i,e)=>i.isEqual(e))}const Q2=new Qt(Be.comparator),X2=new yn(Be.comparator);function dt(...i){let e=X2;for(const n of i)e=e.add(n);return e}const W2=new yn(at);function Z2(){return W2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bd(e)?"-0":e}}function KE(i){return{integerValue:""+i}}function J2(i,e){return A2(e)?KE(e):pp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this._=void 0}}function eR(i,e,n){return i instanceof Ad?function(o,u){const f={fields:{[RE]:{stringValue:xE},[NE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&cp(u)&&(u=zd(u)),u&&(f.fields[kE]=u),{mapValue:f}}(n,e):i instanceof Nu?YE(i,e):i instanceof Du?QE(i,e):function(o,u){const f=$E(o,u),g=m0(f)+m0(o.Re);return Im(f)&&Im(o.Re)?KE(g):pp(o.serializer,g)}(i,e)}function tR(i,e,n){return i instanceof Nu?YE(i,e):i instanceof Du?QE(i,e):n}function $E(i,e){return i instanceof Id?function(r){return Im(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class Ad extends Kd{}class Nu extends Kd{constructor(e){super(),this.elements=e}}function YE(i,e){const n=XE(e);for(const r of i.elements)n.some(o=>Ba(o,r))||n.push(r);return{arrayValue:{values:n}}}class Du extends Kd{constructor(e){super(),this.elements=e}}function QE(i,e){let n=XE(e);for(const r of i.elements)n=n.filter(o=>!Ba(o,r));return{arrayValue:{values:n}}}class Id extends Kd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function m0(i){return sn(i.integerValue||i.doubleValue)}function XE(i){return dp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function nR(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof Nu&&o instanceof Nu||r instanceof Du&&o instanceof Du?cl(r.elements,o.elements,Ba):r instanceof Id&&o instanceof Id?Ba(r.Re,o.Re):r instanceof Ad&&o instanceof Ad}(i.transform,e.transform)}class iR{constructor(e,n){this.version=e,this.transformResults=n}}class hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class $d{}function WE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new JE(i.key,hr.none()):new qu(i.key,i.data,hr.none());{const n=i.data,r=Ki.empty();let o=new yn(Ln.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new lo(i.key,r,new ua(o.toArray()),hr.none())}}function aR(i,e,n){i instanceof qu?function(o,u,f){const g=o.value.clone(),y=g0(o.fieldTransforms,u,f.transformResults);g.setAll(y),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(i,e,n):i instanceof lo?function(o,u,f){if(!sd(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=g0(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(ZE(o)),y.setAll(g),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(i,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Tu(i,e,n,r){return i instanceof qu?function(u,f,g,y){if(!sd(u.precondition,f))return g;const p=u.value.clone(),E=_0(u.fieldTransforms,y,f);return p.setAll(E),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(i,e,n,r):i instanceof lo?function(u,f,g,y){if(!sd(u.precondition,f))return g;const p=_0(u.fieldTransforms,y,f),E=f.data;return E.setAll(ZE(u)),E.setAll(p),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(A=>A.field))}(i,e,n,r):function(u,f,g){return sd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(i,e,n)}function rR(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),u=$E(r.transform,o||null);u!=null&&(n===null&&(n=Ki.empty()),n.set(r.field,u))}return n||null}function p0(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&cl(r,o,(u,f)=>nR(u,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class qu extends $d{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class lo extends $d{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function ZE(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}}),e}function g0(i,e,n){const r=new Map;wt(i.length===n.length,32656,{Ve:n.length,me:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,g=e.data.field(u.field);r.set(u.field,tR(f,g,n[o]))}return r}function _0(i,e,n){const r=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);r.set(o.field,eR(u,f,e))}return r}class JE extends $d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sR extends $d{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&aR(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Tu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GE();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const y=WE(f,g);y!==null&&r.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),dt())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,(n,r)=>p0(n,r))&&cl(this.baseMutations,e.baseMutations,(n,r)=>p0(n,r))}}class gp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){wt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return Q2}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new gp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,mt;function cR(i){switch(i){case be.OK:return Ge(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return Ge(15467,{code:i})}}function eS(i){if(i===void 0)return gr("GRPC error has no .code"),be.UNKNOWN;switch(i){case dn.OK:return be.OK;case dn.CANCELLED:return be.CANCELLED;case dn.UNKNOWN:return be.UNKNOWN;case dn.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case dn.INTERNAL:return be.INTERNAL;case dn.UNAVAILABLE:return be.UNAVAILABLE;case dn.UNAUTHENTICATED:return be.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case dn.NOT_FOUND:return be.NOT_FOUND;case dn.ALREADY_EXISTS:return be.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return be.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case dn.ABORTED:return be.ABORTED;case dn.OUT_OF_RANGE:return be.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return be.UNIMPLEMENTED;case dn.DATA_LOSS:return be.DATA_LOSS;default:return Ge(39323,{code:i})}}(mt=dn||(dn={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=new cs([4294967295,4294967295],0);function y0(i){const e=TE().encode(i),n=new pE;return n.update(e),new Uint8Array(n.digest())}function v0(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new cs([n,r],0),new cs([o,u],0)]}class _p{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _u(`Invalid padding: ${n}`);if(r<0)throw new _u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _u(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _u(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=cs.fromNumber(this.pe)}we(e,n,r){let o=e.add(n.multiply(cs.fromNumber(r)));return o.compare(dR)===1&&(o=new cs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=y0(e),[r,o]=v0(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);if(!this.Se(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new _p(u,o,n);return r.forEach(g=>f.insert(g)),f}insert(e){if(this.pe===0)return;const n=y0(e),[r,o]=v0(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);this.be(f)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,zu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yd(Ye.min(),o,new Qt(at),_r(),dt())}}class zu{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zu(r,n,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n,r,o){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=o}}class tS{constructor(e,n){this.targetId=e,this.Ce=n}}class nS{constructor(e,n,r=Vn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class b0{constructor(){this.Fe=0,this.Me=E0(),this.xe=Vn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=dt(),n=dt(),r=dt();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ge(38017,{changeType:u})}}),new zu(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=E0()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,wt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class fR{constructor(e){this.ze=e,this.je=new Map,this.He=_r(),this.Je=Qc(),this.Ye=Qc(),this.Ze=new Qt(at)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,r=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(xm(u))if(r===0){const f=new Be(u.path);this.tt(n,f,Qn.newNoDocument(f,Ye.min()))}else wt(r===1,20013,{expectedCount:r});else{const f=this.ut(n);if(f!==r){const g=this.ct(e),y=g?this.lt(g,e,f):1;if(y!==0){this.st(n);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=ps(r).toUint8Array()}catch(y){if(y instanceof CE)return ul("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new _p(f,o,u)}catch(y){return ul(y instanceof _u?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.pe===0?null:g}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let o=0;return r.forEach(u=>{const f=this.ze.Pt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,f)=>{const g=this._t(f);if(g){if(u.current&&xm(g.target)){const y=new Be(g.target.path);this.Et(y).has(f)||this.dt(f,y)||this.tt(f,y,Qn.newNoDocument(y,e))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let r=dt();this.Ye.forEach((u,f)=>{let g=!0;f.forEachWhile(y=>{const p=this._t(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(r=r.add(u))}),this.He.forEach((u,f)=>f.setReadTime(e));const o=new Yd(e,n,this.Ze,this.He,r);return this.He=_r(),this.Je=Qc(),this.Ye=Qc(),this.Ze=new Qt(at),o}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new b0,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new yn(at),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new yn(at),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new b0),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Qc(){return new Qt(Be.comparator)}function E0(){return new Qt(Be.comparator)}const hR={asc:"ASCENDING",desc:"DESCENDING"},mR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pR={and:"AND",or:"OR"};class gR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function km(i,e){return i.useProto3Json||qd(e)?e:{value:e}}function Cd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iS(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function _R(i,e){return Cd(i,e.toTimestamp())}function ja(i){return wt(!!i,49232),Ye.fromTimestamp(function(n){const r=ms(n);return new fn(r.seconds,r.nanos)}(i))}function yp(i,e){return Nm(i,e).canonicalString()}function Nm(i,e){const n=function(o){return new en(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?n:n.child(e)}function aS(i){const e=en.fromString(i);return wt(uS(e),10190,{key:e.toString()}),e}function Dm(i,e){return yp(i.databaseId,e.path)}function rm(i,e){const n=aS(e);if(n.get(1)!==i.databaseId.projectId)throw new Ue(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ue(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Be(sS(n))}function rS(i,e){return yp(i.databaseId,e)}function yR(i){const e=aS(i);return e.length===4?en.emptyPath():sS(e)}function Om(i){return new en(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function sS(i){return wt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function S0(i,e,n){return{name:Dm(i,e),fields:n.value.mapValue.fields}}function vR(i,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ge(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(p,E){return p.useProto3Json?(wt(E===void 0||typeof E=="string",58123),Vn.fromBase64String(E||"")):(wt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Vn.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(p){const E=p.code===void 0?be.UNKNOWN:eS(p.code);return new Ue(E,p.message||"")}(f);n=new nS(r,o,u,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=rm(i,r.document.name),u=ja(r.document.updateTime),f=r.document.createTime?ja(r.document.createTime):Ye.min(),g=new Ki({mapValue:{fields:r.document.fields}}),y=Qn.newFoundDocument(o,u,f,g),p=r.targetIds||[],E=r.removedTargetIds||[];n=new od(p,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=rm(i,r.document),u=r.readTime?ja(r.readTime):Ye.min(),f=Qn.newNoDocument(o,u),g=r.removedTargetIds||[];n=new od([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=rm(i,r.document),u=r.removedTargetIds||[];n=new od([],u,o,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new uR(o,u),g=r.targetId;n=new tS(g,f)}}return n}function bR(i,e){let n;if(e instanceof qu)n={update:S0(i,e.key,e.value)};else if(e instanceof JE)n={delete:Dm(i,e.key)};else if(e instanceof lo)n={update:S0(i,e.key,e.data),updateMask:RR(e.fieldMask)};else{if(!(e instanceof sR))return Ge(16599,{ft:e.type});n={verify:Dm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(u,f){const g=f.transform;if(g instanceof Ad)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Nu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Du)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Id)return{fieldPath:f.field.canonicalString(),increment:g.Re};throw Ge(20930,{transform:f.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:_R(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ge(27497)}(i,e.precondition)),n}function ER(i,e){return i&&i.length>0?(wt(e!==void 0,14353),i.map(n=>function(o,u){let f=o.updateTime?ja(o.updateTime):ja(u);return f.isEqual(Ye.min())&&(f=ja(u)),new iR(f,o.transformResults||[])}(n,e))):[]}function SR(i,e){return{documents:[rS(i,e.path)]}}function TR(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rS(i,o);const u=function(p){if(p.length!==0)return lS(qa.create(p,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(p){if(p.length!==0)return p.map(E=>function(N){return{field:tl(N.field),direction:IR(N.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=km(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:n,parent:o}}function wR(i){let e=yR(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){wt(r===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(A){const N=oS(A);return N instanceof qa&&VE(N)?N.getFilters():[N]}(n.where));let f=[];n.orderBy&&(f=function(A){return A.map(N=>function(X){return new wd(nl(X.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(X.direction))}(N))}(n.orderBy));let g=null;n.limit&&(g=function(A){let N;return N=typeof A=="object"?A.value:A,qd(N)?null:N}(n.limit));let y=null;n.startAt&&(y=function(A){const N=!!A.before,M=A.values||[];return new Td(M,N)}(n.startAt));let p=null;return n.endAt&&(p=function(A){const N=!A.before,M=A.values||[];return new Td(M,N)}(n.endAt)),F2(e,o,f,u,g,"F",y,p)}function AR(i,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oS(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nl(n.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=nl(n.unaryFilter.field);return _n.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=nl(n.unaryFilter.field);return _n.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=nl(n.unaryFilter.field);return _n.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}}(i):i.fieldFilter!==void 0?function(n){return _n.create(nl(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return qa.create(n.compositeFilter.filters.map(r=>oS(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}}(n.compositeFilter.op))}(i):Ge(30097,{filter:i})}function IR(i){return hR[i]}function CR(i){return mR[i]}function xR(i){return pR[i]}function tl(i){return{fieldPath:i.canonicalString()}}function nl(i){return Ln.fromServerFormat(i.fieldPath)}function lS(i){return i instanceof _n?function(n){if(n.op==="=="){if(u0(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NAN"}};if(l0(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u0(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NAN"}};if(l0(n.value))return{unaryFilter:{field:tl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tl(n.field),op:CR(n.op),value:n.value}}}(i):i instanceof qa?function(n){const r=n.getFilters().map(o=>lS(o));return r.length===1?r[0]:{compositeFilter:{op:xR(n.op),filters:r}}}(i):Ge(54877,{filter:i})}function RR(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r,o,u=Ye.min(),f=Ye.min(),g=Vn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.wt=e}}function NR(i){const e=wR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.Cn=new OR}addToCollectionParentIndex(e,n){return this.Cn.add(n),he.resolve()}getCollectionParents(e,n){return he.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return he.resolve()}deleteFieldIndex(e,n){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,n){return he.resolve()}getDocumentsMatchingTarget(e,n){return he.resolve(null)}getIndexType(e,n){return he.resolve(0)}getFieldIndexes(e,n){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,n){return he.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,n){return he.resolve(hs.min())}updateCollectionGroup(e,n,r){return he.resolve()}updateIndexEntries(e,n){return he.resolve()}}class OR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new yn(en.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new yn(en.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cS=41943040;class pi{static withCacheSize(e){return new pi(e,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi.DEFAULT_COLLECTION_PERCENTILE=10,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pi.DEFAULT=new pi(cS,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pi.DISABLED=new pi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new hl(0)}static lr(){return new hl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="LruGarbageCollector",PR=1048576;function A0([i,e],[n,r]){const o=at(i,n);return o===0?at(e,r):o}class MR{constructor(e){this.Er=e,this.buffer=new yn(A0),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();A0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Re(w0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bl(n)?Re(w0,"Ignoring IndexedDB error during garbage collection: ",n):await vl(n)}await this.mr(3e5)})}}class VR{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return he.resolve(Bd.le);const r=new MR(n);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(T0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T0):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,o,u,f,g,y,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(r=A,g=Date.now(),this.removeTargets(e,r,n))).next(A=>(u=A,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(p=Date.now(),Jo()<=ct.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(y-g)+`ms
	Removed ${A} documents in `+(p-y)+`ms
Total Duration: ${p-E}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}function jR(i,e){return new VR(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.changes=new oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?he.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&Tu(r.mutation,o,ua.empty(),fn.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,dt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=dt()){const o=Xs();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(u=>{let f=gu();return u.forEach((g,y)=>{f=f.insert(g,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const r=Xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,dt()))}populateOverlays(e,n,r){const o=[];return r.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,g)=>{n.set(f,g)})})}computeViews(e,n,r,o){let u=_r();const f=Su(),g=function(){return Su()}();return n.forEach((y,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof lo)?u=u.insert(p.key,p):E!==void 0?(f.set(p.key,E.mutation.getFieldMask()),Tu(E.mutation,p,E.mutation.getFieldMask(),fn.now())):f.set(p.key,ua.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((p,E)=>f.set(p,E)),n.forEach((p,E)=>{var A;return g.set(p,new BR(E,(A=f.get(p))!==null&&A!==void 0?A:null))}),g))}recalculateAndSaveOverlays(e,n){const r=Su();let o=new Qt((f,g)=>f-g),u=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const g of f)g.keys().forEach(y=>{const p=n.get(y);if(p===null)return;let E=r.get(y)||ua.empty();E=g.applyToLocalView(p,E),r.set(y,E);const A=(o.get(g.batchId)||dt()).add(y);o=o.insert(g.batchId,A)})}).next(()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),p=y.key,E=y.value,A=GE();E.forEach(N=>{if(!u.has(N)){const M=WE(n.get(N),r.get(N));M!==null&&A.set(N,M),u=u.add(N)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,A))}return he.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(f){return Be.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):H2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):he.resolve(Xs());let g=Cu,y=u;return f.next(p=>he.forEach(p,(E,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),u.get(E)?he.resolve():this.remoteDocumentCache.getEntry(e,E).next(N=>{y=y.insert(E,N)}))).next(()=>this.populateOverlays(e,p,u)).next(()=>this.computeViews(e,y,p,dt())).next(E=>({batchId:g,changes:HE(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Be(n)).next(r=>{let o=gu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=gu();return this.indexManager.getCollectionParents(e,u).next(g=>he.forEach(g,y=>{const p=function(A,N){return new Fd(N,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next(E=>{E.forEach((A,N)=>{f=f.insert(A,N)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o))).next(f=>{u.forEach((y,p)=>{const E=p.getKey();f.get(E)===null&&(f=f.insert(E,Qn.newInvalidDocument(E)))});let g=gu();return f.forEach((y,p)=>{const E=u.get(y);E!==void 0&&Tu(E.mutation,p,ua.empty(),fn.now()),Gd(n,p)&&(g=g.insert(y,p))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return he.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ja(o.createTime)}}(n)),he.resolve()}getNamedQuery(e,n){return he.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:NR(o.bundledQuery),readTime:ja(o.readTime)}}(n)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.overlays=new Qt(Be.comparator),this.Qr=new Map}getOverlay(e,n){return he.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xs();return he.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,u)=>{this.bt(e,n,u)}),he.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),he.resolve()}getOverlaysForCollection(e,n,r){const o=Xs(),u=n.length+1,f=new Be(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const y=g.getNext().value,p=y.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return he.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new Qt((p,E)=>p-E);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=Xs(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const g=Xs(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((p,E)=>g.set(p,E)),!(g.size()>=o)););return he.resolve(g)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new lR(n,r));let u=this.Qr.get(n);u===void 0&&(u=dt(),this.Qr.set(n,u)),this.Qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(){this.$r=new yn(In.Ur),this.Kr=new yn(In.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new In(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new In(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Be(new en([])),r=new In(n,e),o=new In(n,e+1),u=[];return this.Kr.forEachInRange([r,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Be(new en([])),r=new In(n,e),o=new In(n,e+1);let u=dt();return this.Kr.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new In(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class In{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Be.comparator(e.key,n.key)||at(e.Zr,n.Zr)}static Wr(e,n){return at(e.Zr,n.Zr)||Be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new yn(In.Ur)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new oR(u,n,r,o);this.mutationQueue.push(f);for(const g of o)this.Xr=this.Xr.add(new In(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return he.resolve(f)}lookupMutationBatch(e,n){return he.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ti(r),u=o<0?0:o;return he.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?up:this.nr-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new In(n,0),o=new In(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,o],f=>{const g=this.ei(f.Zr);u.push(g)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yn(at);return n.forEach(o=>{const u=new In(o,0),f=new In(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],g=>{r=r.add(g.Zr)})}),he.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const f=new In(new Be(u),0);let g=new yn(at);return this.Xr.forEachWhile(y=>{const p=y.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(g=g.add(y.Zr)),!0)},f),he.resolve(this.ni(g))}ni(e){const n=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){wt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return he.forEach(n.mutations,o=>{const u=new In(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new In(n,0),o=this.Xr.firstAfterOrEqual(r);return he.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.ii=e,this.docs=function(){return new Qt(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return he.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(n))}getEntries(e,n){let r=_r();return n.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Qn.newInvalidDocument(o))}),he.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=_r();const f=n.path,g=new Be(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:p,value:{document:E}}=y.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||E2(b2(E),r)<=0||(o.has(E.key)||Gd(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return he.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Ge(9500)}si(e,n){return he.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $R(this)}getSize(e){return he.resolve(this.size)}}class $R extends UR{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),he.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.persistence=e,this.oi=new oo(n=>fp(n),hp),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this._i=0,this.ai=new vp,this.targetCount=0,this.ui=hl.cr()}forEachTarget(e,n){return this.oi.forEach((r,o)=>n(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),he.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new hl(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,he.resolve()}updateTargetData(e,n){return this.Tr(n),he.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.oi.forEach((f,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),he.waitFor(u).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return he.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),he.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),he.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return he.resolve(r)}containsKey(e,n){return he.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n){this.ci={},this.overlays={},this.li=new Bd(0),this.hi=!1,this.hi=!0,this.Pi=new HR,this.referenceDelegate=e(this),this.Ti=new YR(this),this.indexManager=new DR,this.remoteDocumentCache=function(o){return new KR(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new kR(n),this.Ei=new zR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new GR(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Re("MemoryPersistence","Starting transaction:",e);const o=new QR(this.li.next());return this.referenceDelegate.di(),r(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return he.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class QR extends T2{constructor(e){super(),this.currentSequenceNumber=e}}class bp{constructor(e){this.persistence=e,this.Vi=new vp,this.mi=null}static fi(e){return new bp(e)}get gi(){if(this.mi)return this.mi;throw Ge(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),he.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),he.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.gi,r=>{const o=Be.fromPath(r);return this.pi(e,o).next(u=>{u||n.removeEntry(o,Ye.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return he.or([()=>he.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class xd{constructor(e,n){this.persistence=e,this.yi=new oo(r=>I2(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=jR(this,n)}static fi(e,n){return new xd(e,n)}di(){}Ai(e){return he.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return he.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(u=>u?he.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,f=>this.Dr(e,f,n).next(g=>{g||(r++,u.removeEntry(f,Ye.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),he.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),he.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),he.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ad(e.data.value)),n}Dr(e,n,r){return he.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return he.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.ds=r,this.As=o}static Rs(e,n){let r=dt(),o=dt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ep(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return e1()?8:w2(Xn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ws(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.Ss(e,n,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new XR;return this.bs(e,n,f).next(g=>{if(u.result=g,this.fs)return this.Ds(e,n,f,g.size)})}).next(()=>u.result)}Ds(e,n,r,o){return r.documentReadCount<this.gs?(Jo()<=ct.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",el(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),he.resolve()):(Jo()<=ct.DEBUG&&Re("QueryEngine","Query:",el(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(Jo()<=ct.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",el(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Va(n))):he.resolve())}ws(e,n){if(h0(n))return he.resolve(null);let r=Va(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Rm(n,null,"F"),r=Va(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const f=dt(...u);return this.ys.getDocuments(e,f).next(g=>this.indexManager.getMinOffset(e,r).next(y=>{const p=this.vs(n,g);return this.Cs(n,p,f,y.readTime)?this.ws(e,Rm(n,null,"F")):this.Fs(e,p,n,y)}))})))}Ss(e,n,r,o){return h0(n)||o.isEqual(Ye.min())?he.resolve(null):this.ys.getDocuments(e,r).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,r,o)?he.resolve(null):(Jo()<=ct.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),el(n)),this.Fs(e,f,n,v2(o,Cu)).next(g=>g))})}vs(e,n){let r=new yn(zE(e));return n.forEach((o,u)=>{Gd(e,u)&&(r=r.add(u))}),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}bs(e,n,r){return Jo()<=ct.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",el(n)),this.ys.getDocumentsMatchingQuery(e,n,hs.min(),r)}Fs(e,n,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="LocalStore",ZR=3e8;class JR{constructor(e,n,r,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new Qt(at),this.Os=new oo(u=>fp(u),hp),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qR(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function ek(i,e,n,r){return new JR(i,e,n,r)}async function fS(i,e){const n=Xe(i);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],g=[];let y=dt();for(const p of o){f.push(p.batchId);for(const E of p.mutations)y=y.add(E.key)}for(const p of u){g.push(p.batchId);for(const E of p.mutations)y=y.add(E.key)}return n.localDocuments.getDocuments(r,y).next(p=>({ks:p,removedBatchIds:f,addedBatchIds:g}))})})}function tk(i,e){const n=Xe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,y,p,E){const A=p.batch,N=A.keys();let M=he.resolve();return N.forEach(X=>{M=M.next(()=>E.getEntry(y,X)).next(Q=>{const $=p.docVersions.get(X);wt($!==null,48541),Q.version.compareTo($)<0&&(A.applyToRemoteDocument(Q,p),Q.isValidDocument()&&(Q.setReadTime(p.commitVersion),E.addEntry(Q)))})}),M.next(()=>g.mutationQueue.removeMutationBatch(y,A))}(n,r,e,u).next(()=>u.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let y=dt();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(y=y.add(g.batch.mutations[p].key));return y}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function hS(i){const e=Xe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function nk(i,e){const n=Xe(i),r=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const g=[];e.targetChanges.forEach((E,A)=>{const N=o.get(A);if(!N)return;g.push(n.Ti.removeMatchingKeys(u,E.removedDocuments,A).next(()=>n.Ti.addMatchingKeys(u,E.addedDocuments,A)));let M=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?M=M.withResumeToken(Vn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,r)),o=o.insert(A,M),function(Q,$,re){return Q.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=ZR?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(N,M,E)&&g.push(n.Ti.updateTargetData(u,M))});let y=_r(),p=dt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),g.push(ik(u,f,e.documentUpdates).next(E=>{y=E.qs,p=E.Qs})),!r.isEqual(Ye.min())){const E=n.Ti.getLastRemoteSnapshotVersion(u).next(A=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(E)}return he.waitFor(g).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,y,p)).next(()=>y)}).then(u=>(n.xs=o,u))}function ik(i,e,n){let r=dt(),o=dt();return n.forEach(u=>r=r.add(u)),e.getEntries(i,r).next(u=>{let f=_r();return n.forEach((g,y)=>{const p=u.get(g);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),y.isNoDocument()&&y.version.isEqual(Ye.min())?(e.removeEntry(g,y.readTime),f=f.insert(g,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),f=f.insert(g,y)):Re(Sp,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",y.version)}),{qs:f,Qs:o}})}function ak(i,e){const n=Xe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=up),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rk(i,e){const n=Xe(i);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Ti.getTargetData(r,e).next(u=>u?(o=u,he.resolve(o)):n.Ti.allocateTargetId(r).next(f=>(o=new ss(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function Pm(i,e,n){const r=Xe(i),o=r.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!bl(f))throw f;Re(Sp,`Failed to update sequence numbers for target ${e}: ${f}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function I0(i,e,n){const r=Xe(i);let o=Ye.min(),u=dt();return r.persistence.runTransaction("Execute query","readwrite",f=>function(y,p,E){const A=Xe(y),N=A.Os.get(E);return N!==void 0?he.resolve(A.xs.get(N)):A.Ti.getTargetData(p,E)}(r,f,Va(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(f,g.targetId).next(y=>{u=y})}).next(()=>r.Ms.getDocumentsMatchingQuery(f,e,n?o:Ye.min(),n?u:dt())).next(g=>(sk(r,K2(e),g),{documents:g,$s:u})))}function sk(i,e,n){let r=i.Ns.get(e)||Ye.min();n.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),i.Ns.set(e,r)}class C0{constructor(){this.activeTargetIds=Z2()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ok{constructor(){this.xo=new C0,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new C0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="ConnectivityMonitor";class R0{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Re(x0,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Re(x0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc=null;function Mm(){return Xc===null?Xc=function(){return 268435456+Math.round(2147483648*Math.random())}():Xc++,"0x"+Xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="RestConnection",uk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ck{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===Ed?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,n,r,o,u){const f=Mm(),g=this.jo(e,n.toUriEncodedString());Re(sm,`Sending RPC '${e}' ${f}:`,g,r);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,o,u);const{host:p}=new URL(g),E=Mu(p);return this.Jo(e,g,y,r,E).then(A=>(Re(sm,`Received RPC '${e}' ${f}: `,A),A),A=>{throw ul(sm,`RPC '${e}' ${f} failed with error: `,A,"url: ",g,"request:",r),A})}Yo(e,n,r,o,u,f){return this.zo(e,n,r,o,u)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const r=uk[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="WebChannelConnection";class fk extends ck{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const f=Mm();return new Promise((g,y)=>{const p=new gE;p.setWithCredentials(!0),p.listenOnce(_E.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case id.NO_ERROR:const A=p.getResponseJson();Re(Kn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),g(A);break;case id.TIMEOUT:Re(Kn,`RPC '${e}' ${f} timed out`),y(new Ue(be.DEADLINE_EXCEEDED,"Request time out"));break;case id.HTTP_ERROR:const N=p.getStatus();if(Re(Kn,`RPC '${e}' ${f} failed with status:`,N,"response text:",p.getResponseText()),N>0){let M=p.getResponseJson();Array.isArray(M)&&(M=M[0]);const X=M==null?void 0:M.error;if(X&&X.status&&X.message){const Q=function(re){const pe=re.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(pe)>=0?pe:be.UNKNOWN}(X.status);y(new Ue(Q,X.message))}else y(new Ue(be.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new Ue(be.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Re(Kn,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(o);Re(Kn,`RPC '${e}' ${f} sending request:`,o),p.send(n,"POST",E,r,15)})}T_(e,n,r){const o=Mm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=bE(),g=vE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const E=u.join("");Re(Kn,`Creating RPC '${e}' stream ${o}: ${E}`,y);const A=f.createWebChannel(E,y);let N=!1,M=!1;const X=new dk({Zo:$=>{M?Re(Kn,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(N||(Re(Kn,`Opening RPC '${e}' stream ${o} transport.`),A.open(),N=!0),Re(Kn,`RPC '${e}' stream ${o} sending:`,$),A.send($))},Xo:()=>A.close()}),Q=($,re,pe)=>{$.listen(re,_e=>{try{pe(_e)}catch(ie){setTimeout(()=>{throw ie},0)}})};return Q(A,pu.EventType.OPEN,()=>{M||(Re(Kn,`RPC '${e}' stream ${o} transport opened.`),X.__())}),Q(A,pu.EventType.CLOSE,()=>{M||(M=!0,Re(Kn,`RPC '${e}' stream ${o} transport closed`),X.u_())}),Q(A,pu.EventType.ERROR,$=>{M||(M=!0,ul(Kn,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),X.u_(new Ue(be.UNAVAILABLE,"The operation could not be completed")))}),Q(A,pu.EventType.MESSAGE,$=>{var re;if(!M){const pe=$.data[0];wt(!!pe,16349);const _e=pe,ie=(_e==null?void 0:_e.error)||((re=_e[0])===null||re===void 0?void 0:re.error);if(ie){Re(Kn,`RPC '${e}' stream ${o} received error:`,ie);const F=ie.status;let ce=function(O){const C=dn[O];if(C!==void 0)return eS(C)}(F),I=ie.message;ce===void 0&&(ce=be.INTERNAL,I="Unknown error status: "+F+" with message "+ie.message),M=!0,X.u_(new Ue(ce,I)),A.close()}else Re(Kn,`RPC '${e}' stream ${o} received:`,pe),X.c_(pe)}}),Q(g,yE.STAT_EVENT,$=>{$.stat===Tm.PROXY?Re(Kn,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Tm.NOPROXY&&Re(Kn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{X.a_()},0),X}}function om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(i){return new gR(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n,r=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=o,this.d_=u,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),o=Math.max(0,n-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="PersistentStream";class pS{constructor(e,n,r,o,u,f,g,y){this.xi=e,this.y_=r,this.w_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new mS(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.S_===n&&this.K_(r,o)},r=>{e(()=>{const o=new Ue(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(o)})})}K_(e,n){const r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.W_(o))}),this.stream.onMessage(o=>{r(()=>++this.v_==1?this.z_(o):this.onNext(o))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return Re(k0,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(Re(k0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hk extends pS{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=vR(this.serializer,e),r=function(u){if(!("targetChange"in u))return Ye.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ye.min():f.readTime?ja(f.readTime):Ye.min()}(e);return this.listener.j_(n,r)}H_(e){const n={};n.database=Om(this.serializer),n.addTarget=function(u,f){let g;const y=f.target;if(g=xm(y)?{documents:SR(u,y)}:{query:TR(u,y).gt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=iS(u,f.resumeToken);const p=km(u,f.expectedCount);p!==null&&(g.expectedCount=p)}else if(f.snapshotVersion.compareTo(Ye.min())>0){g.readTime=Cd(u,f.snapshotVersion.toTimestamp());const p=km(u,f.expectedCount);p!==null&&(g.expectedCount=p)}return g}(this.serializer,e);const r=AR(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){const n={};n.database=Om(this.serializer),n.removeTarget=e,this.L_(n)}}class mk extends pS{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=ER(e.writeResults,e.commitTime),r=ja(e.commitTime);return this.listener.ea(r,n)}ta(){const e={};e.database=Om(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bR(this.serializer,r))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{}class gk extends pk{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.na=!1}ra(){if(this.na)throw new Ue(be.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(e,Nm(n,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ue(be.UNKNOWN,u.toString())})}Yo(e,n,r,o,u){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Yo(e,Nm(n,r),o,f,g,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ue(be.UNKNOWN,f.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class _k{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(gr(n),this.oa=!1):Re("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="RemoteStore";class yk{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=u,this.Ea.No(f=>{r.enqueueAndForget(async()=>{uo(this)&&(Re(io,"Restarting streams for network reachability change."),await async function(y){const p=Xe(y);p.Ta.add(4),await Fu(p),p.da.set("Unknown"),p.Ta.delete(4),await Xd(p)}(this))})}),this.da=new _k(r,o)}}async function Xd(i){if(uo(i))for(const e of i.Ia)await e(!0)}async function Fu(i){for(const e of i.Ia)await e(!1)}function gS(i,e){const n=Xe(i);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),Ip(n)?Ap(n):El(n).M_()&&wp(n,e))}function Tp(i,e){const n=Xe(i),r=El(n);n.Pa.delete(e),r.M_()&&_S(n,e),n.Pa.size===0&&(r.M_()?r.N_():uo(n)&&n.da.set("Unknown"))}function wp(i,e){if(i.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}El(i).H_(e)}function _S(i,e){i.Aa.Ke(e),El(i).J_(e)}function Ap(i){i.Aa=new fR({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Pa.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),El(i).start(),i.da._a()}function Ip(i){return uo(i)&&!El(i).F_()&&i.Pa.size>0}function uo(i){return Xe(i).Ta.size===0}function yS(i){i.Aa=void 0}async function vk(i){i.da.set("Online")}async function bk(i){i.Pa.forEach((e,n)=>{wp(i,e)})}async function Ek(i,e){yS(i),Ip(i)?(i.da.ca(e),Ap(i)):i.da.set("Unknown")}async function Sk(i,e,n){if(i.da.set("Online"),e instanceof nS&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Pa.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Pa.delete(g),o.Aa.removeTarget(g))}(i,e)}catch(r){Re(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rd(i,r)}else if(e instanceof od?i.Aa.Xe(e):e instanceof tS?i.Aa.ot(e):i.Aa.nt(e),!n.isEqual(Ye.min()))try{const r=await hS(i.localStore);n.compareTo(r)>=0&&await function(u,f){const g=u.Aa.It(f);return g.targetChanges.forEach((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const E=u.Pa.get(p);E&&u.Pa.set(p,E.withResumeToken(y.resumeToken,f))}}),g.targetMismatches.forEach((y,p)=>{const E=u.Pa.get(y);if(!E)return;u.Pa.set(y,E.withResumeToken(Vn.EMPTY_BYTE_STRING,E.snapshotVersion)),_S(u,y);const A=new ss(E.target,y,p,E.sequenceNumber);wp(u,A)}),u.remoteSyncer.applyRemoteEvent(g)}(i,n)}catch(r){Re(io,"Failed to raise snapshot:",r),await Rd(i,r)}}async function Rd(i,e,n){if(!bl(e))throw e;i.Ta.add(1),await Fu(i),i.da.set("Offline"),n||(n=()=>hS(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Re(io,"Retrying IndexedDB access"),await n(),i.Ta.delete(1),await Xd(i)})}function vS(i,e){return e().catch(n=>Rd(i,n,e))}async function Wd(i){const e=Xe(i),n=_s(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:up;for(;Tk(e);)try{const o=await ak(e.localStore,r);if(o===null){e.ha.length===0&&n.N_();break}r=o.batchId,wk(e,o)}catch(o){await Rd(e,o)}bS(e)&&ES(e)}function Tk(i){return uo(i)&&i.ha.length<10}function wk(i,e){i.ha.push(e);const n=_s(i);n.M_()&&n.Y_&&n.Z_(e.mutations)}function bS(i){return uo(i)&&!_s(i).F_()&&i.ha.length>0}function ES(i){_s(i).start()}async function Ak(i){_s(i).ta()}async function Ik(i){const e=_s(i);for(const n of i.ha)e.Z_(n.mutations)}async function Ck(i,e,n){const r=i.ha.shift(),o=gp.from(r,e,n);await vS(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await Wd(i)}async function xk(i,e){e&&_s(i).Y_&&await async function(r,o){if(function(f){return cR(f)&&f!==be.ABORTED}(o.code)){const u=r.ha.shift();_s(r).O_(),await vS(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Wd(r)}}(i,e),bS(i)&&ES(i)}async function N0(i,e){const n=Xe(i);n.asyncQueue.verifyOperationInProgress(),Re(io,"RemoteStore received new credentials");const r=uo(n);n.Ta.add(3),await Fu(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await Xd(n)}async function Rk(i,e){const n=Xe(i);e?(n.Ta.delete(2),await Xd(n)):e||(n.Ta.add(2),await Fu(n),n.da.set("Unknown"))}function El(i){return i.Ra||(i.Ra=function(n,r,o){const u=Xe(n);return u.ra(),new hk(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{e_:vk.bind(null,i),n_:bk.bind(null,i),i_:Ek.bind(null,i),j_:Sk.bind(null,i)}),i.Ia.push(async e=>{e?(i.Ra.O_(),Ip(i)?Ap(i):i.da.set("Unknown")):(await i.Ra.stop(),yS(i))})),i.Ra}function _s(i){return i.Va||(i.Va=function(n,r,o){const u=Xe(n);return u.ra(),new mk(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:Ak.bind(null,i),i_:xk.bind(null,i),X_:Ik.bind(null,i),ea:Ck.bind(null,i)}),i.Ia.push(async e=>{e?(i.Va.O_(),await Wd(i)):(await i.Va.stop(),i.ha.length>0&&(Re(io,`Stopping write stream with ${i.ha.length} pending writes`),i.ha=[]))})),i.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,g=new Cp(e,n,f,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(i,e){if(gr("AsyncQueue",`${e}: ${i}`),bl(i))return new Ue(be.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{static emptySet(e){return new ll(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Be.comparator(n.key,r.key):(n,r)=>Be.comparator(n.key,r.key),this.keyedMap=gu(),this.sortedSet=new Qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ll)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.ma=new Qt(Be.comparator)}track(e){const n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):Ge(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}}class ml{constructor(e,n,r,o,u,f,g,y,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new ml(e,n,ll.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class Nk{constructor(){this.queries=O0(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const o=Xe(n),u=o.queries;o.queries=O0(),u.forEach((f,g)=>{for(const y of g.ya)y.onError(r)})})(this,new Ue(be.ABORTED,"Firestore shutting down"))}}function O0(){return new oo(i=>qE(i),Hd)}async function Dk(i,e){const n=Xe(i);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.wa()&&e.Sa()&&(r=2):(u=new kk,r=e.Sa()?0:1);try{switch(r){case 0:u.pa=await n.onListen(o,!0);break;case 1:u.pa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=xp(f,`Initialization of query '${el(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.ya.push(e),e.Da(n.onlineState),u.pa&&e.va(u.pa)&&Rp(n)}async function Ok(i,e){const n=Xe(i),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.ya.indexOf(e);f>=0&&(u.ya.splice(f,1),u.ya.length===0?o=e.Sa()?0:1:!u.wa()&&e.Sa()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Pk(i,e){const n=Xe(i);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.ya)g.va(o)&&(r=!0);f.pa=o}}r&&Rp(n)}function Mk(i,e,n){const r=Xe(i),o=r.queries.get(e);if(o)for(const u of o.ya)u.onError(n);r.queries.delete(e)}function Rp(i){i.ba.forEach(e=>{e.next()})}var Lm,P0;(P0=Lm||(Lm={})).Ca="default",P0.Cache="cache";class Lk{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.key=e}}class TS{constructor(e){this.key=e}}class Vk{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=dt(),this.mutatedKeys=dt(),this.Ha=zE(e),this.Ja=new ll(this.Ha)}get Ya(){return this.Ga}Za(e,n){const r=n?n.Xa:new D0,o=n?n.Ja:this.Ja;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,A)=>{const N=o.get(E),M=Gd(this.query,A)?A:null,X=!!N&&this.mutatedKeys.has(N.key),Q=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let $=!1;N&&M?N.data.isEqual(M.data)?X!==Q&&(r.track({type:3,doc:M}),$=!0):this.eu(N,M)||(r.track({type:2,doc:M}),$=!0,(y&&this.Ha(M,y)>0||p&&this.Ha(M,p)<0)&&(g=!0)):!N&&M?(r.track({type:0,doc:M}),$=!0):N&&!M&&(r.track({type:1,doc:N}),$=!0,(y||p)&&(g=!0)),$&&(M?(f=f.add(M),u=Q?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{Ja:f,Xa:r,Cs:g,mutatedKeys:u}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const f=e.Xa.ga();f.sort((E,A)=>function(M,X){const Q=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:$})}};return Q(M)-Q(X)}(E.type,A.type)||this.Ha(E.doc,A.doc)),this.tu(r),o=o!=null&&o;const g=n&&!o?this.nu():[],y=this.ja.size===0&&this.current&&!o?1:0,p=y!==this.za;return this.za=y,f.length!==0||p?{snapshot:new ml(this.query,e.Ja,u,f,e.mutatedKeys,y===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:g}:{ru:g}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new D0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=dt(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new TS(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new SS(r))}),n}su(e){this.Ga=e.$s,this.ja=dt();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return ml.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const kp="SyncEngine";class jk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Uk{constructor(e){this.key=e,this._u=!1}}class Bk{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.au={},this.uu=new oo(g=>qE(g),Hd),this.cu=new Map,this.lu=new Set,this.hu=new Qt(Be.comparator),this.Pu=new Map,this.Tu=new vp,this.Iu={},this.Eu=new Map,this.du=hl.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function qk(i,e,n=!0){const r=RS(i);let o;const u=r.uu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.ou()):o=await wS(r,e,n,!0),o}async function zk(i,e){const n=RS(i);await wS(n,e,!0,!1)}async function wS(i,e,n,r){const o=await rk(i.localStore,Va(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let g;return r&&(g=await Fk(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&gS(i.remoteStore,o),g}async function Fk(i,e,n,r,o){i.Ru=(A,N,M)=>async function(Q,$,re,pe){let _e=$.view.Za(re);_e.Cs&&(_e=await I0(Q.localStore,$.query,!1).then(({documents:I})=>$.view.Za(I,_e)));const ie=pe&&pe.targetChanges.get($.targetId),F=pe&&pe.targetMismatches.get($.targetId)!=null,ce=$.view.applyChanges(_e,Q.isPrimaryClient,ie,F);return L0(Q,$.targetId,ce.ru),ce.snapshot}(i,A,N,M);const u=await I0(i.localStore,e,!0),f=new Vk(e,u.$s),g=f.Za(u.documents),y=zu.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),p=f.applyChanges(g,i.isPrimaryClient,y);L0(i,n,p.ru);const E=new jk(e,n,f);return i.uu.set(e,E),i.cu.has(n)?i.cu.get(n).push(e):i.cu.set(n,[e]),p.snapshot}async function Hk(i,e,n){const r=Xe(i),o=r.uu.get(e),u=r.cu.get(o.targetId);if(u.length>1)return r.cu.set(o.targetId,u.filter(f=>!Hd(f,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Pm(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Tp(r.remoteStore,o.targetId),Vm(r,o.targetId)}).catch(vl)):(Vm(r,o.targetId),await Pm(r.localStore,o.targetId,!0))}async function Gk(i,e){const n=Xe(i),r=n.uu.get(e),o=n.cu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tp(n.remoteStore,r.targetId))}async function Kk(i,e,n){const r=Jk(i);try{const o=await function(f,g){const y=Xe(f),p=fn.now(),E=g.reduce((M,X)=>M.add(X.key),dt());let A,N;return y.persistence.runTransaction("Locally write mutations","readwrite",M=>{let X=_r(),Q=dt();return y.Bs.getEntries(M,E).next($=>{X=$,X.forEach((re,pe)=>{pe.isValidDocument()||(Q=Q.add(re))})}).next(()=>y.localDocuments.getOverlayedDocuments(M,X)).next($=>{A=$;const re=[];for(const pe of g){const _e=rR(pe,A.get(pe.key).overlayedDocument);_e!=null&&re.push(new lo(pe.key,_e,PE(_e.value.mapValue),hr.exists(!0)))}return y.mutationQueue.addMutationBatch(M,p,re,g)}).next($=>{N=$;const re=$.applyToLocalDocumentSet(A,Q);return y.documentOverlayCache.saveOverlays(M,$.batchId,re)})}).then(()=>({batchId:N.batchId,changes:HE(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(f,g,y){let p=f.Iu[f.currentUser.toKey()];p||(p=new Qt(at)),p=p.insert(g,y),f.Iu[f.currentUser.toKey()]=p}(r,o.batchId,n),await Hu(r,o.changes),await Wd(r.remoteStore)}catch(o){const u=xp(o,"Failed to persist write");n.reject(u)}}async function AS(i,e){const n=Xe(i);try{const r=await nk(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Pu.get(u);f&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f._u=!0:o.modifiedDocuments.size>0?wt(f._u,14607):o.removedDocuments.size>0&&(wt(f._u,42227),f._u=!1))}),await Hu(n,r,e)}catch(r){await vl(r)}}function M0(i,e,n){const r=Xe(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.uu.forEach((u,f)=>{const g=f.view.Da(e);g.snapshot&&o.push(g.snapshot)}),function(f,g){const y=Xe(f);y.onlineState=g;let p=!1;y.queries.forEach((E,A)=>{for(const N of A.ya)N.Da(g)&&(p=!0)}),p&&Rp(y)}(r.eventManager,e),o.length&&r.au.j_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $k(i,e,n){const r=Xe(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Pu.get(e),u=o&&o.key;if(u){let f=new Qt(Be.comparator);f=f.insert(u,Qn.newNoDocument(u,Ye.min()));const g=dt().add(u),y=new Yd(Ye.min(),new Map,new Qt(at),f,g);await AS(r,y),r.hu=r.hu.remove(u),r.Pu.delete(e),Np(r)}else await Pm(r.localStore,e,!1).then(()=>Vm(r,e,n)).catch(vl)}async function Yk(i,e){const n=Xe(i),r=e.batch.batchId;try{const o=await tk(n.localStore,e);CS(n,r,null),IS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hu(n,o)}catch(o){await vl(o)}}async function Qk(i,e,n){const r=Xe(i);try{const o=await function(f,g){const y=Xe(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let E;return y.mutationQueue.lookupMutationBatch(p,g).next(A=>(wt(A!==null,37113),E=A.keys(),y.mutationQueue.removeMutationBatch(p,A))).next(()=>y.mutationQueue.performConsistencyCheck(p)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(p,E,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E)).next(()=>y.localDocuments.getDocuments(p,E))})}(r.localStore,e);CS(r,e,n),IS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hu(r,o)}catch(o){await vl(o)}}function IS(i,e){(i.Eu.get(e)||[]).forEach(n=>{n.resolve()}),i.Eu.delete(e)}function CS(i,e,n){const r=Xe(i);let o=r.Iu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Iu[r.currentUser.toKey()]=o}}function Vm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.cu.get(e))i.uu.delete(r),n&&i.au.Vu(r,n);i.cu.delete(e),i.isPrimaryClient&&i.Tu.Hr(e).forEach(r=>{i.Tu.containsKey(r)||xS(i,r)})}function xS(i,e){i.lu.delete(e.path.canonicalString());const n=i.hu.get(e);n!==null&&(Tp(i.remoteStore,n),i.hu=i.hu.remove(e),i.Pu.delete(n),Np(i))}function L0(i,e,n){for(const r of n)r instanceof SS?(i.Tu.addReference(r.key,e),Xk(i,r)):r instanceof TS?(Re(kp,"Document no longer in limbo: "+r.key),i.Tu.removeReference(r.key,e),i.Tu.containsKey(r.key)||xS(i,r.key)):Ge(19791,{mu:r})}function Xk(i,e){const n=e.key,r=n.path.canonicalString();i.hu.get(n)||i.lu.has(r)||(Re(kp,"New document in limbo: "+n),i.lu.add(r),Np(i))}function Np(i){for(;i.lu.size>0&&i.hu.size<i.maxConcurrentLimboResolutions;){const e=i.lu.values().next().value;i.lu.delete(e);const n=new Be(en.fromString(e)),r=i.du.next();i.Pu.set(r,new Uk(n)),i.hu=i.hu.insert(n,r),gS(i.remoteStore,new ss(Va(mp(n.path)),r,"TargetPurposeLimboResolution",Bd.le))}}async function Hu(i,e,n){const r=Xe(i),o=[],u=[],f=[];r.uu.isEmpty()||(r.uu.forEach((g,y)=>{f.push(r.Ru(y,e,n).then(p=>{var E;if((p||n)&&r.isPrimaryClient){const A=p?!p.fromCache:(E=n==null?void 0:n.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(y.targetId,A?"current":"not-current")}if(p){o.push(p);const A=Ep.Rs(y.targetId,p);u.push(A)}}))}),await Promise.all(f),r.au.j_(o),await async function(y,p){const E=Xe(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>he.forEach(p,N=>he.forEach(N.ds,M=>E.persistence.referenceDelegate.addReference(A,N.targetId,M)).next(()=>he.forEach(N.As,M=>E.persistence.referenceDelegate.removeReference(A,N.targetId,M)))))}catch(A){if(!bl(A))throw A;Re(Sp,"Failed to update sequence numbers: "+A)}for(const A of p){const N=A.targetId;if(!A.fromCache){const M=E.xs.get(N),X=M.snapshotVersion,Q=M.withLastLimboFreeSnapshotVersion(X);E.xs=E.xs.insert(N,Q)}}}(r.localStore,u))}async function Wk(i,e){const n=Xe(i);if(!n.currentUser.isEqual(e)){Re(kp,"User change. New user:",e.toKey());const r=await fS(n.localStore,e);n.currentUser=e,function(u,f){u.Eu.forEach(g=>{g.forEach(y=>{y.reject(new Ue(be.CANCELLED,f))})}),u.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hu(n,r.ks)}}function Zk(i,e){const n=Xe(i),r=n.Pu.get(e);if(r&&r._u)return dt().add(r.key);{let o=dt();const u=n.cu.get(e);if(!u)return o;for(const f of u){const g=n.uu.get(f);o=o.unionWith(g.view.Ya)}return o}}function RS(i){const e=Xe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=AS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$k.bind(null,e),e.au.j_=Pk.bind(null,e.eventManager),e.au.Vu=Mk.bind(null,e.eventManager),e}function Jk(i){const e=Xe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qk.bind(null,e),e}class kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return ek(this.persistence,new WR,e.initialUser,this.serializer)}yu(e){return new dS(bp.fi,this.serializer)}pu(e){return new ok}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kd.provider={build:()=>new kd};class eN extends kd{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){wt(this.persistence.referenceDelegate instanceof xd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new LR(r,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?pi.withCacheSize(this.cacheSizeBytes):pi.DEFAULT;return new dS(r=>xd.fi(r,n),this.serializer)}}class jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>M0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wk.bind(null,this.syncEngine),await Rk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Nk}()}createDatastore(e){const n=Qd(e.databaseInfo.databaseId),r=function(u){return new fk(u)}(e.databaseInfo);return function(u,f,g,y){return new gk(u,f,g,y)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,u,f,g){return new yk(r,o,u,f,g)}(this.localStore,this.datastore,e.asyncQueue,n=>M0(this.syncEngine,n,0),function(){return R0.C()?new R0:new lk}())}createSyncEngine(e,n){return function(o,u,f,g,y,p,E){const A=new Bk(o,u,f,g,y,p);return E&&(A.Au=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Xe(o);Re(io,"RemoteStore shutting down."),u.Ta.add(5),await Fu(u),u.Ea.shutdown(),u.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jm.provider={build:()=>new jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class nN{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Yn.UNAUTHENTICATED,this.clientId=wE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{Re(ys,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(Re(ys,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lm(i,e){i.asyncQueue.verifyOperationInProgress(),Re(ys,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await fS(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function V0(i,e){i.asyncQueue.verifyOperationInProgress();const n=await iN(i);Re(ys,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(r=>N0(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>N0(e.remoteStore,o)),i._onlineComponents=e}async function iN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Re(ys,"Using user provided OfflineComponentProvider");try{await lm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===be.FAILED_PRECONDITION||o.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;ul("Error using user provided cache. Falling back to memory cache: "+n),await lm(i,new kd)}}else Re(ys,"Using default OfflineComponentProvider"),await lm(i,new eN(void 0));return i._offlineComponents}async function kS(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Re(ys,"Using user provided OnlineComponentProvider"),await V0(i,i._uninitializedComponentsProvider._online)):(Re(ys,"Using default OnlineComponentProvider"),await V0(i,new jm))),i._onlineComponents}function aN(i){return kS(i).then(e=>e.syncEngine)}async function rN(i){const e=await kS(i),n=e.eventManager;return n.onListen=qk.bind(null,e.syncEngine),n.onUnlisten=Hk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Gk.bind(null,e.syncEngine),n}function sN(i,e,n={}){const r=new ds;return i.asyncQueue.enqueueAndForget(async()=>function(u,f,g,y,p){const E=new tN({next:N=>{E.Cu(),f.enqueueAndForget(()=>Ok(u,A));const M=N.docs.has(g);!M&&N.fromCache?p.reject(new Ue(be.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&N.fromCache&&y&&y.source==="server"?p.reject(new Ue(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(N)},error:N=>p.reject(N)}),A=new Lk(mp(g.path),E,{includeMetadataChanges:!0,La:!0});return Dk(u,A)}(await rN(i),i.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(i,e,n){if(!n)throw new Ue(be.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function lN(i,e,n,r){if(e===!0&&r===!0)throw new Ue(be.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function U0(i){if(!Be.isDocumentKey(i))throw new Ue(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Dp(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ge(12329,{type:typeof i})}function Ou(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ue(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dp(i);throw new Ue(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="firestore.googleapis.com",B0=!0;class q0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DS,this.ssl=B0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:B0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PR)throw new Ue(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ue(be.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ue(be.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ue(be.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Op{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new c2;switch(r.type){case"firstParty":return new m2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=j0.get(n);r&&(Re("ComponentProvider","Removing Datastore"),j0.delete(n),r.terminate())}(this),Promise.resolve()}}function uN(i,e,n,r={}){var o;i=Ou(i,Op);const u=Mu(e),f=i._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:i._getEmulatorOptions()}),y=`${e}:${n}`;u&&(nb(`https://${y}`),ib("Firestore",!0)),f.host!==DS&&f.host!==y&&ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},f),{host:y,ssl:u,emulatorOptions:r});if(!fs(p,g)&&(i._setSettings(p),r.mockUserToken)){let E,A;if(typeof r.mockUserToken=="string")E=r.mockUserToken,A=Yn.MOCK_USER;else{E=Kw(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const N=r.mockUserToken.sub||r.mockUserToken.user_id;if(!N)throw new Ue(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Yn(N)}i._authCredentials=new d2(new SE(E,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pp(this.firestore,e,this._query)}}class Yi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yi(this.firestore,e,this._key)}}class Pu extends Pp{constructor(e,n,r){super(e,n,mp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yi(this.firestore,null,new Be(e))}withConverter(e){return new Pu(this.firestore,e,this._path)}}function Mp(i,e,...n){if(i=Wn(i),arguments.length===1&&(e=wE.newId()),oN("doc","path",e),i instanceof Op){const r=en.fromString(e,...n);return U0(r),new Yi(i,null,new Be(r))}{if(!(i instanceof Yi||i instanceof Pu))throw new Ue(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(en.fromString(e,...n));return U0(r),new Yi(i.firestore,i instanceof Pu?i.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="AsyncQueue";class F0{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new mS(this,"async_queue_retry"),this.ec=()=>{const r=om();r&&Re(z0,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const n=om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new ds;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!bl(e))throw e;Re(z0,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,gr("INTERNAL UNHANDLED ERROR: ",H0(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const o=Cp.createAndSchedule(this,e,n,r,u=>this.oc(u));return this.Hu.push(o),o}nc(){this.Ju&&Ge(47125,{_c:H0(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function H0(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Lp extends Op{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new F0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F0(e),this._firestoreClient=void 0,await e}}}function cN(i,e){const n=typeof i=="object"?i:Hm(),r=typeof i=="string"?i:Ed,o=ro(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=Hw("firestore");u&&uN(o,...u)}return o}function OS(i){if(i._terminated)throw new Ue(be.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||dN(i),i._firestoreClient}function dN(i){var e,n,r;const o=i._freezeSettings(),u=function(g,y,p,E){return new R2(g,y,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,NS(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new nN(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pl(Vn.fromBase64String(e))}catch(n){throw new Ue(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pl(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ue(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=/^__.*__$/;class hN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new lo(e,this.data,this.fieldMask,n,this.fieldTransforms):new qu(e,this.data,n,this.fieldTransforms)}}function MS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{hc:i})}}class Bp{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Pc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Tc({path:r,Ec:!1});return o.dc(e),o}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Tc({path:r,Ec:!1});return o.Pc(),o}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Nd(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(MS(this.hc)&&fN.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class mN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qd(e)}gc(e,n,r,o=!1){return new Bp({hc:e,methodName:n,fc:r,path:Ln.emptyPath(),Ec:!1,mc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pN(i){const e=i._freezeSettings(),n=Qd(i._databaseId);return new mN(i._databaseId,!!e.ignoreUndefinedProperties,n)}function gN(i,e,n,r,o,u={}){const f=i.gc(u.merge||u.mergeFields?2:0,e,n,o);US("Data must be an object, but it was:",f,r);const g=VS(r,f);let y,p;if(u.merge)y=new ua(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const A of u.mergeFields){const N=_N(e,A,n);if(!f.contains(N))throw new Ue(be.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);vN(E,N)||E.push(N)}y=new ua(E),p=f.fieldTransforms.filter(A=>y.covers(A.field))}else y=null,p=f.fieldTransforms;return new hN(new Ki(g),y,p)}function LS(i,e){if(jS(i=Wn(i)))return US("Unsupported field value:",e,i),VS(i,e);if(i instanceof PS)return function(r,o){if(!MS(o.hc))throw o.Vc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Vc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const g of r){let y=LS(g,o.Rc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(i,e)}return function(r,o){if((r=Wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return J2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=fn.fromDate(r);return{timestampValue:Cd(o.serializer,u)}}if(r instanceof fn){const u=new fn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cd(o.serializer,u)}}if(r instanceof jp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pl)return{bytesValue:iS(o.serializer,r._byteString)};if(r instanceof Yi){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Vc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:yp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Up)return function(f,g){return{mapValue:{fields:{[DE]:{stringValue:OE},[Sd]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw g.Vc("VectorValues must only contain numeric values.");return pp(g.serializer,p)})}}}}}}(r,o);throw o.Vc(`Unsupported field value: ${Dp(r)}`)}(i,e)}function VS(i,e){const n={};return IE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(i,(r,o)=>{const u=LS(o,e.Ic(r));u!=null&&(n[r]=u)}),{mapValue:{fields:n}}}function jS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof fn||i instanceof jp||i instanceof pl||i instanceof Yi||i instanceof PS||i instanceof Up)}function US(i,e,n){if(!jS(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const r=Dp(n);throw r==="an object"?e.Vc(i+" a custom object"):e.Vc(i+" "+r)}}function _N(i,e,n){if((e=Wn(e))instanceof Vp)return e._internalPath;if(typeof e=="string")return BS(i,e);throw Nd("Field path arguments must be of type string or ",i,!1,void 0,n)}const yN=new RegExp("[~\\*/\\[\\]]");function BS(i,e,n){if(e.search(yN)>=0)throw Nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Vp(...e.split("."))._internalPath}catch{throw Nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Nd(i,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${r}`),f&&(y+=` in document ${o}`),y+=")"),new Ue(be.INVALID_ARGUMENT,g+i+y)}function vN(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Yi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bN extends qS{data(){return super.data()}}function zS(i,e){return typeof e=="string"?BS(i,e):e instanceof Vp?e._internalPath:e._delegate._internalPath}class EN{convertValue(e,n="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return so(e,(o,u)=>{r[o]=this.convertValue(u,n)}),r}convertVectorValue(e){var n,r,o;const u=(o=(r=(n=e.fields)===null||n===void 0?void 0:n[Sd].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>sn(f.doubleValue));return new Up(u)}convertGeoPoint(e){return new jp(sn(e.latitude),sn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const n=ms(e);return new fn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=en.fromString(e);wt(uS(r),9688,{name:e});const o=new Ru(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return o.isEqual(n)||gr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(i,e,n){let r;return r=i?i.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FS extends qS{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class wN extends FS{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(i){i=Ou(i,Yi);const e=Ou(i.firestore,Lp);return sN(OS(e),i._key).then(n=>xN(e,i,n))}class AN extends EN{constructor(e){super(),this.firestore=e}convertBytes(e){return new pl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Yi(this.firestore,null,n)}}function IN(i,e,n){i=Ou(i,Yi);const r=Ou(i.firestore,Lp),o=SN(i.converter,e);return CN(r,[gN(pN(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,hr.none())])}function CN(i,e){return function(r,o){const u=new ds;return r.asyncQueue.enqueueAndForget(async()=>Kk(await aN(r),o,u)),u.promise}(OS(i),e)}function xN(i,e,n){const r=n.docs.get(e._key),o=new AN(i);return new FS(i,o,e._key,r,new TN(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){yl=o})(gl),Ua(new da("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),g=new Lp(new f2(r.getProvider("auth-internal")),new p2(f,r.getProvider("app-check-internal")),function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ue(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ru(p.options.projectId,E)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),$i(Xv,Wv,e),$i(Xv,Wv,"esm2017")})();let du;const qp=()=>{if(du)return du;if(us)try{return du=cN(us),console.log("Firestore initialized successfully via getDb."),du}catch(i){console.error("Firestore initialization error via getDb:",i),du=void 0;return}else{console.warn("Firebase App not initialized when getDb called, Firestore service will be disabled.");return}},RN=async(i,e,n)=>{const r=qp();if(!r)return Promise.reject(new Error("Firestore is not available. Patch not saved."));if(!i)return Promise.reject(new Error("User ID is missing. Cannot save patch state."));if(!e||e!=="slot1"&&e!=="slot2")return Promise.reject(new Error("Invalid slot ID provided."));const o=Mp(r,"userPatches",i,"slots",e);try{const u=JSON.parse(JSON.stringify(n));await IN(o,{patchData:u,updatedAt:fn.fromDate(new Date)})}catch(u){throw console.error(`Error saving patch state to Firestore (Slot: ${e}):`,u),u instanceof Error?new Error(`Failed to save patch to ${e.replace("s","S")}: ${u.message}`):new Error(`An unknown error occurred while saving the patch to ${e.replace("s","S")}.`)}},um=async(i,e)=>{const n=qp();if(!n)return console.warn("Firestore is not available. Cannot load patch state."),null;if(!i)return console.warn("User ID is missing. Cannot load patch state."),null;if(!e||e!=="slot1"&&e!=="slot2")return console.warn("Invalid slot ID provided for loading."),null;const r=Mp(n,"userPatches",i,"slots",e);try{const o=await HS(r);if(o.exists()){const u=o.data();return{patchData:u.patchData,updatedAt:u.updatedAt}}else return console.log(`No saved patch state found for user ${i} in ${e}.`),null}catch(o){return console.error(`Error loading patch state from Firestore (Slot: ${e}):`,o),null}},G0=async(i,e)=>{const n=qp();if(!n)return console.warn("Firestore is not available. Cannot get slot metadata."),{updatedAt:null,exists:!1};if(!i)return console.warn("User ID is missing. Cannot get slot metadata."),{updatedAt:null,exists:!1};if(!e||e!=="slot1"&&e!=="slot2")return console.warn("Invalid slot ID provided for metadata."),{updatedAt:null,exists:!1};const r=Mp(n,"userPatches",i,"slots",e);try{const o=await HS(r);return o.exists()?{updatedAt:o.data().updatedAt||null,exists:!0}:{updatedAt:null,exists:!1}}catch(o){return console.error(`Error fetching metadata for slot ${e}:`,o),{updatedAt:null,exists:!1}}},GS={0:"AGL",1:"TEQ",2:"INT",3:"STR",4:"PHY",10:"Super AGL",11:"Super TEQ",12:"Super INT",13:"Super STR",14:"Super PHY",20:"Extreme AGL",21:"Extreme TEQ",22:"Extreme INT",23:"Extreme STR",24:"Extreme PHY"},KS=Object.entries(GS).map(([i,e])=>({label:e,value:parseInt(i)})).sort((i,e)=>i.value-e.value),$S={3:"SSR",4:"UR",5:"LR"},YS=Object.entries($S).map(([i,e])=>({label:e,value:parseInt(i)})),kN={0:"Calc Plus",1:"Calc Minus",2:"Calc Percent Plus",3:"Calc Percent Minus",4:"Calc Equal"},NN=Object.entries(kN).map(([i,e])=>({label:e,value:parseInt(i)})),DN={1:"Start Round",2:"Link Skills",3:"Your Turn",4:"On Player Attack",5:"Enemy Turn",6:"Before Player Hit",7:"After Player Hit",8:"Battle Result Phase",9:"End Round",10:"Start Turn",11:"End of Puzzle Phase",12:"Start of Puzzle Phase",14:"After delivering a final blow",15:"Acquired Energy Ball",17:"Dokkan Field Efficacies",18:"Dokkan Field"},ON=Object.entries(DN).map(([i,e])=>({label:`${i}: ${e}`,value:parseInt(i)})),PN={0:"None",1:"Self",2:"Party All",3:"Enemy",4:"Enemy All",5:"Self And Target",6:"Party Race Type",7:"Party Exist Chara",8:"Target Excepct",9:"Target Party Enemy Attack Order",10:"Slot Attacker",11:"Party Slot Random",12:"Party Super Class",13:"Party Extreme Class",14:"Enemy Super Class",15:"Enemy Extreme Class",16:"Party All (self excluded)"},MN=Object.entries(PN).map(([i,e])=>({label:`${i}: ${e}`,value:parseInt(i)})),LN={1:{name:"Change Atk Param",params:["Atk Value"]},2:{name:"Change Def Param",params:["Def Value"]},3:{name:"Change Atk Def Param",params:["Atk Value","Def Value"]},4:{name:"Change Heal HP",params:["Hp Value"]},5:{name:"Change Energy Param",params:["Ki Value"]},8:{name:"Change Condition Delay",params:[]},9:{name:"Change Condition Stun",params:[]},11:{name:"Change Attack Order",params:[]},12:{name:"Change Pain Attack",params:[]},13:{name:"Change Resist Damage",params:["100-Reduction Value (%)"]},16:{name:"Change Element Type Atk",params:["ATK (Element) Value"]},17:{name:"Change Element Type Def",params:["DEF (Element) Value"]},18:{name:"Change Element Type Atk Def",params:["ATK (Element) Value","DEF (Element) Value"]},19:{name:"Change Element Type Hp Param",params:["HP (Element) Value"]},20:{name:"Change Element Type Energy Param",params:["KI (Element) Value"]},21:{name:"Change Recovery",params:[]},22:{name:"Change Condition Heal",params:[]},24:{name:"Change Guard Break",params:[]},26:{name:"Change Absorb Special Energy",params:[]},27:{name:"Change Resist Special Damage",params:["100-Reduction Value"]},28:{name:"Change Absorb Deal Damage",params:["Recovery Value (%)"]},34:{name:"Change Dokkan Gauge Bonus",params:[]},35:{name:"Change Heal Bonus",params:[]},36:{name:"Change Special Bonus",params:[]},37:{name:"Change Energy Bonus",params:[]},38:{name:"Change Link Skill Bonus",params:["Link Effect Value Boost (%)"]},39:{name:"Change Element Type Energy Bonus",params:[]},40:{name:"Change Element Type Linkage Bonus",params:[]},43:{name:"Change Hp Atk",params:["HP Value","ATK Value"]},44:{name:"Change Element Type Hp Atk",params:["Element Value","HP Value","ATK Value"]},46:{name:"Change Passive Probability Bonus",params:[]},47:{name:"Change Condition Psychic",params:[]},48:{name:"Change Condition Seal",params:[]},50:{name:"Change Invalid Bad Condition",params:[]},51:{name:"Change Energy Ball Color",params:["Change KI Orb (Element ID)","Target KI Orb (Element ID)"]},52:{name:"Change Resurrection",params:[]},53:{name:"Ignore Enemy Defense",params:[]},54:{name:"Change Invalid Combination Attack Bonus",params:[]},55:{name:"Change Target Def And Self Atk",params:["Target DEF Debuff","Self ATK Buff"]},56:{name:"Change Target Def And Self Def",params:["Target DEF Debuff","Self DEF Buff"]},57:{name:"Change Target Def And Self Energy",params:["Target DEF Debuff","Self Ki Buff"]},58:{name:"Change Energy Ball Heal",params:["Heal per Orb"]},59:{name:"Change Energy Ball Proportional Atk",params:["ATK Value per Orb"]},60:{name:"Change Energy Ball Proportional Def",params:["DEF Value per Orb"]},61:{name:"Change Energy Ball Proportional Atk Def",params:["ATK Value per Orb","DEF Value per Orb"]},63:{name:"Change Special Energy Cost",params:["Ki Cost Change"]},64:{name:"Change Element Type Energy Ball Proportional Atk",params:["Element Value (0-4)","ATK Boost Value (%)","Element Value (0-4)"]},65:{name:"Change Element Type Energy Ball Proportional Def",params:["Element Value (0-4)","DEF Boost Value (%)","Element Value (0-4)"]},66:{name:"Change Element Type Energy Ball Proportional Atk Def",params:["Element Value (0-4)","ATK & DEF Boost Value (%)","Element Value (0-4)"]},67:{name:"Change Energy Ball Color Bitpattern",params:["Target Ki Orb Bitset","Change To Ki Orb Bitset"]},68:{name:"Change Energy Ball Proportional Bitpattern",params:["Energy Ball Bitset","Stat (1:ATK,2:HP,3:DEF,4:Crit,5:Eva,6:DR)","Value"]},69:{name:"Change Energy Ball Color Specify Random",params:["Change All Orbs to (Element ID)","Insert 1","Insert 1"]},70:{name:"Change Energy Ball Color Specify Random Without Obstacles",params:[]},71:{name:"Change Hp Range Atk",params:["ATK Boost At MIN HP (%)","ATK Boost At MAX HP (%)","Always 1100"]},72:{name:"Change Hp Range Def",params:["DEF Boost At MIN HP (%)","DEF Boost At MAX HP (%)","Always 1100"]},73:{name:"Change Hp Range Atk Def",params:["ATK & DEF Boost At MIN HP (%)","ATK & DEF Boost At MAX HP (%)","Always 1100"]},74:{name:"Change Hp Range Ball Heal",params:[]},75:{name:"Change Condition Disable Swap",params:[]},76:{name:"Change Condition Super Effective Atk",params:[]},77:{name:"Change Reset Ball Color",params:[]},78:{name:"Guard Against All Attacks",params:[]},79:{name:"Metamorphic Transformation (Rage, Giant Ape, etc.)",params:["Transform Card Id","battle_params Set #1","battle_params Set #2"]},80:{name:"Change Counter Attack",params:["Dmg Reduction % (Optional)","Counter Multiplier","Lua Script #"]},81:{name:"Change Extra Attack",params:["Unused","Prob Second Attack","Prob of Super Attack"]},82:{name:"Change Element Type Hp Atk Def",params:["Type Bitset","Boost Value"]},83:{name:"Change Element Type Energy Bitpattern",params:["Type Bitset","Boost Value"]},84:{name:"Change Suicide Attack",params:[]},85:{name:"Change Step Extra Attack",params:[]},86:{name:"Change Special Atk Rate",params:[]},87:{name:"Change Element Type Attack Coef",params:[]},88:{name:"Change Element Type Defense Coef",params:[]},89:{name:"Change Element Type Attack Defense Coef",params:[]},90:{name:"Change Critical Attack",params:["Probability"]},91:{name:"Change Dodge",params:["Probability"]},92:{name:"Change Always Hit",params:[]},93:{name:"Change Element Type Bitpattern Hp",params:[]},94:{name:"Change Invalidate Stun",params:[]},95:{name:"Change Dodge Counter Attack",params:["battle_params param_no","Counter Multiplier","Lua Script #"]},96:{name:"Change Energy Ball Additional Point",params:["Energy Ball Bitset","Ki Value"]},97:{name:"Change Absorb Special",params:["Recover HP %?","Special Category Raw Attribute","Animation ID"]},98:{name:"Change Incremental Param",params:["Increase Value","Max Value","Stat (0:Atk,1:Def,2:Crit,3:Dodge,4:DR,5:Ki)"]},99:{name:"Change Invalidate Status Down",params:[]},100:{name:"Change Invalidate Astute",params:[]},101:{name:"Change Prediction",params:[]},102:{name:"Change Metamorphic Probability Count Limit",params:[]},103:{name:"Transformation",params:["Transform Card Id","Turn Req.","battle_params param_no"]},104:{name:"Change HP Atk Def",params:["HP Value","ATK Value","DEF Value"]},105:{name:"Replace Energy Ball",params:["Energy Ball Bitset","Unknown","Unknown"]},106:{name:"Potential Heal",params:["Unknown","Unknown","Unknown"]},107:{name:"Change Condition Stackable Delay",params:["Delay turn count","0","0"]},108:{name:"Add Potential Skill Variable Parameter (nullptr)",params:["Unknown","Unknown","Unknown"]},109:{name:"Revival Skill",params:["HP% to heal","effect_pack Row","BGM ID"],efficacy_values:'{"priority":int}'},110:{name:"Remove Ability Efficacy Info And Inactive Ability Status",params:["Skill Types Table ID","Skill ID","Skill Category Types Table ID"]},111:{name:"Change Condition Attack Break",params:[]},112:{name:"Change Invalidate Attack Break",params:[]},113:{name:"Threshold Damage",params:[]},114:{name:"Cannot Attack (nullptr)",params:[],efficacy_values:'{"text":string,"script_path":string}'},115:{name:"Update Standby Mode",params:[],efficacy_values:'{"type":string,"is_active":bool}'},116:{name:"Charge Start",params:[],efficacy_values:'{"type":string,"gauge_value":int array,"count_multiplier":int,"max_effect_value":int,"ball_type_multiplier":int array}'},117:{name:"End Transformation",params:[]},118:{name:"Add Special Atk Rate By Charge Count",params:[]},119:{name:"Counter Attack Behaviour (nullptr)",params:["Unknown"]},120:{name:"Counter Attack (Same as 80)",params:["Dmg Reduction % (Optional)","Counter Multiplier","Lua Script #"]},121:{name:"Unknown (nullptr)",params:[]},122:{name:"Increased Received Damage",params:["Received Damage Value %"]},123:{name:"Target Focus",params:[]},124:{name:"Incremental Critical Probability For Enemy",params:["Unknown","Unknown","Unknown"]},125:{name:"Hp Damage",params:["Damage Value"]},126:{name:"Reflect Damage",params:["Damage Value"],efficacy_values:'{"text":string,"script_path":string}'},127:{name:"Set Plug In On Energy Ball With Bitpattern",params:["Unknown","Unknown","Unknown"]},128:{name:"Dodge Counter Attack Behaviour",params:["Unknown","Unknown","Unknown"]},129:{name:"Change Invalidate Always Hit",params:["Unknown","Unknown","Unknown"]},131:{name:"Transform/Exchange",params:["Target Card ID","Condition Turn (0 = no turn limit)","Passive Skill Effect ID for transition animation (optional)"]}},VN=Object.entries(LN).map(([i,e])=>({label:`${i}: ${e.name}`,value:parseInt(i)})),jN={0:{name:"isNoneRule",params:[]},1:{name:"isOverHpRate",params:["HP Percent"]},2:{name:"isUnderHpRate",params:["HP Percent"]},3:{name:"isOverEnergy",params:["Ki Amount"]},4:{name:"isUnderEnergy",params:["Ki Amount"]},5:{name:"isElapsedTurn",params:["Turn"]},6:{name:"isPartyRaceType",params:["Link Skill ID"]},7:{name:"isEnemyRaceType",params:["Link Skill ID"]},8:{name:"isOverFightingPower",params:["Attack","Defense"]},9:{name:"isUnderFightingPower",params:["Attack","Defense"]},10:{name:"isOverHpRateOverEnergy",params:["HP Percent","Ki Amount"]},11:{name:"isOverHpRateUnderEnergy",params:["HP Percent","Ki Amount"]},12:{name:"isUnderHpRateOverEnergy",params:["HP Percent","Ki Amount"]},13:{name:"isUnderHpRateUnderEnergy",params:["HP Percent","Ki Amount"]},14:{name:"isFirstAttack",params:[]},15:{name:"isOverTargetNum",params:["Number of Enemies"]},16:{name:"isUnderTargetNum",params:["Number of Enemies"]},17:{name:"isOverTargetHpRate",params:["HP Percent"]},18:{name:"isUnderTargetHpRate",params:["HP Percent"]},19:{name:"isAttackOrder",params:["Slot (0, 1, 2)"]},20:{name:"isOverEnergyCondition",params:["Ki Percent"]},21:{name:"isUnderEnergyCondition",params:["Ki Percent"]},22:{name:"isPartyExistChara",params:["Card Unique Info ID"]},23:{name:"isLinkNum",params:["Number of links"]},24:{name:"isHitDamaged",params:[]},25:{name:"isTargetKill",params:[]},26:{name:"isOverHpRateEnableSpecial",params:["HP Percent"]},27:{name:"isUnderHpRateEnableSpecial",params:["HP Percent"]},28:{name:"isSlotElementType",params:["Element Type"]},29:{name:"isEnemyExistChara",params:["Card Unique Info ID"]},30:{name:"isGuardSuccess",params:[]},31:{name:"isCombinationAttack",params:[]},32:{name:"isChangeEnergyBallColor",params:["Ki Type"]},33:{name:"isBetweenHpRate",params:["HP Percent Lower","HP Percent Higher"]},34:{name:"isOverTeamCategoryNum",params:["Target (0:deck,1:enemy,2:ally in turn)","Category ID","Amount"]},35:{name:"hasAllElementBitpatternCards",params:["Element Bitset"]},36:{name:"isOverHpRateAndElapsedTurn",params:["HP Percent","Turn"]},37:{name:"isUnderHpRateAndElapsedTurn",params:["HP Percent","Turn"]},38:{name:"isTargetEnemyCondition",params:["Status Effect Flags","Unknown"]},39:{name:"isTargetElementTypeBitPattern",params:["Element Bitset"]},40:{name:"isSpecialAttack",params:[]},41:{name:"isOverTeamUniqueCardNum",params:["Unknown","Card Unique Info ID","Unknown"]},42:{name:"isEnergyBallGetNum",params:["Energy Ball Bitset","Ki Amount"]},43:{name:"isDodgeSuccess",params:["Unknown","Unknown","Unknown"]},44:{name:"isCountUp",params:["Action (1:SA,2:Attack,3:DmgRecv,4:Guard,5:Evade)","Amount"]},45:{name:"isContainsCardByCategoryAndUniqueInfo",params:["Target","Category ID","card_unique_info_set_relations ID"]},46:{name:"isContainsSpecifiedElemenets",params:["Target (0:deck,1:enemy,2:ally in turn)","Type Bitset","Amount"]},47:{name:"isExecutedRevivalSkill",params:[]},48:{name:"isAttackedByEnemyWhichTakeSpecialDamage",params:["special_categories.raw_attribute"]},49:{name:"isAttackedBySpecialCategory",params:["special_categories.raw_attribute","Unknown","Unknown"]},50:{name:"hasPlayedPassiveSkillEffect",params:["Unknown","Unknown","Unknown"]},51:{name:"isUnderTurnCountFromApperance",params:["Turn count"]},52:{name:"chargeCount",params:["Unknown","Unknown","Unknown"]},53:{name:"inStandbyMode",params:["Unknown (usually 0)"]},54:{name:"isPartyExecutedRevivalSkill",params:[]},55:{name:"isOverTurnCountFromApperance",params:["Turn count"]},56:{name:"isNormalAttack",params:["Unknown","Unknown","Unknown"]},57:{name:"isInSpecifiedDokkanField",params:["dokkan_field.id"]},58:{name:"isInDokkanField",params:["0=no, 1=yes"]},59:{name:"isSameAwakeningElementType",params:["Super Class=1, Extreme Class=2"]},60:{name:"isInSubTargetTypeSet",params:["SubTargetTypeSet ID"]},61:{name:"isReceivedAttackDuringTurn",params:[]},62:{name:"isAttackerElementTypeBitPattern",params:["Element Bitset"]},63:{name:"isElapsedTurnPerRound",params:["Turn","Round ID?"]}};Object.entries(jN).map(([i,e])=>({label:`${i}: ${e.name}`,value:parseInt(i)}));const zp=()=>({id:"",name:"",character_id:"",card_unique_info_id:"",cost:0,rarity:4,hp_init:0,hp_max:0,atk_init:0,atk_max:0,def_init:0,def_max:0,element:0,lv_max:120,skill_lv_max:10,grow_type:0,price:0,exp_type:0,training_exp:0,special_motion:0,passive_skill_set_id:"",leader_skill_set_id:"",link_skill_ids:Array(7).fill(""),category_ids:[],eball_mod_min:0,eball_mod_num100:0,eball_mod_mid:0,eball_mod_mid_num:0,eball_mod_max:0,eball_mod_max_num:0,max_level_reward_id:"1",max_level_reward_type:"1",collectable_type:1,face_x:0,face_y:0,aura_id:null,is_selling_only:0,awakening_element_type:null,potential_board_id:null,active_skill_set_id_ref:"",standby_skill_set_id_ref:""}),UN=()=>({id:"",name:"",description:"",exec_timing_type:1,efficacy_type:1,target_type:1,calc_option:2,turn:1,is_once:0,probability:100,causality_conditions:null,eff_value1:0,eff_value2:0,eff_value3:0,efficacy_values:"{}",sub_target_type_set_id:null,passive_skill_effect_id:null}),BN=()=>({id:"",leader_skill_set_id:"",exec_timing_type:1,target_type:2,efficacy_type:5,efficacy_values:"[3,0,0]",calc_option:0,sub_target_type_set_id:null,causality_conditions:null}),qN=()=>({id:"",special_set_id:"",type:"Special::NormalEfficacySpecial",efficacy_type:1,target_type:3,calc_option:2,turn:1,prob:100,causality_conditions:null,eff_value1:0,eff_value2:0,eff_value3:0}),zN=()=>({id:"",active_skill_set_id:"",target_type:1,efficacy_type:1,calc_option:2,eff_val1:0,eff_val2:0,eff_val3:0,efficacy_values:"{}",sub_target_type_set_id:null,thumb_effect_id:null,effect_se_id:null}),Mt={CARD_UNIQUE_INFO:"70",PASSIVE_SKILL_SET:"71",LEADER_SKILL_SET:"72",ACTIVE_SKILL_SET:"73",SPECIAL_SET:"74",OPTIMAL_AWAKENING_GROWTH_ID:"75",OPTIMAL_AWAKENING_GROWTH_TYPE_ID:"oag_type_",STANDBY_SKILL_SET:"77",FINISH_SKILL_SET:"78",FINISH_SPECIAL:"79",BATTLE_PARAM:"bp_"},FN=Object.values(Mt),Um=7e6,Bm=7999999;let K0=0;const ri=()=>{const i=Um+K0;return i>Bm&&console.warn("Local ID counter has exceeded the defined range. This may lead to issues."),K0++,String(i)},oa=i=>{if(!i||typeof i!="string")return!1;const e=Number(i);if(!isNaN(e)&&e>=Um&&e<=Bm)return!0;for(const n of FN)if(i.startsWith(n)){const r=i.substring(n.length);if(r){const o=Number(r);if(!isNaN(o)&&o>=Um&&o<=Bm)return!0}}return!1},Dd=(i,e)=>({id:ri(),card_id:i,special_set_id:e||"",priority:0,style:"Normal",lv_start:1,eball_num_start:12,view_id:0,card_costume_condition_id:0,special_bonus_id1:0,special_bonus_lv1:0,bonus_view_id1:0,special_bonus_id2:0,special_bonus_lv2:0,bonus_view_id2:0,causality_conditions:null,special_asset_id:null}),HN=i=>({id:ri(),standby_skill_set_id:i,target_type:1,target_type_values:"{}",sub_target_type_set_id:null,turn:1,efficacy_type:1,calc_option:null,efficacy_values:"{}",thumb_effect_id:null,effect_se_id:null}),GN=()=>{const i=ri();return{id:Mt.STANDBY_SKILL_SET+i,name:`New Standby Skill Set ${i}`,ingame_icon_path:"",effect_description:"",condition_description:"",exec_limit:1,causality_conditions:null,special_view_id:null,costume_special_view_id:0,bgm_id:null,skills:[],finishSkillSetRelations:[]}},KN=i=>({id:ri(),finish_skill_set_id:i,target_type:3,target_type_values:"{}",sub_target_type_set_id:null,turn:1,efficacy_type:1,calc_option:null,efficacy_values:"{}",thumb_effect_id:null,effect_se_id:null}),$N=()=>{const i=ri();return{id:Mt.FINISH_SKILL_SET+i,name:`New Finish Skill Set ${i}`,effect_description:"",condition_description:"",dialog_order:0,dialog_images:null,exec_timing_type:0,exec_limit:1,causality_conditions:null,finish_special_id:null,special_view_id:null,costume_special_view_id:0,bgm_id:null,is_dialog_view_visible:1,skills:[]}},YN=(i,e)=>({id:`${i}_${e}_${ri()}`,standby_skill_set_id:i,finish_skill_set_id:e}),QN=()=>{const i=ri();return{id:Mt.FINISH_SPECIAL+i,increase_rate:180,aim_target:0}},$0=(i,e)=>({id:Mt.BATTLE_PARAM+`${i}_${e}_${ri()}`,param_no:i,idx:e,value:0}),XN={cards:["id","name","character_id","card_unique_info_id","cost","rarity","hp_init","hp_max","atk_init","atk_max","def_init","def_max","element","lv_max","skill_lv_max","grow_type","optimal_awakening_grow_type","price","exp_type","training_exp","special_motion","passive_skill_set_id","leader_skill_set_id","link_skill1_id","link_skill2_id","link_skill3_id","link_skill4_id","link_skill5_id","link_skill6_id","link_skill7_id","eball_mod_min","eball_mod_num100","eball_mod_mid","eball_mod_mid_num","eball_mod_max","eball_mod_max_num","max_level_reward_id","max_level_reward_type","collectable_type","face_x","face_y","aura_id","aura_scale","aura_offset_x","aura_offset_y","is_aura_front","is_selling_only","awakening_number","resource_id","bg_effect_id","selling_exchange_point","awakening_element_type","potential_board_id","open_at","created_at","updated_at"],card_unique_infos:["id","name","kana","created_at","updated_at"],card_card_categories:["id","card_id","card_category_id","num","created_at","updated_at"],leader_skill_sets:["id","name","description","created_at","updated_at"],leader_skills:["id","leader_skill_set_id","exec_timing_type","target_type","sub_target_type_set_id","causality_conditions","efficacy_type","efficacy_values","calc_option","created_at","updated_at"],passive_skill_sets:["id","name","description","itemized_description","created_at","updated_at"],passive_skills:["id","name","description","exec_timing_type","efficacy_type","target_type","sub_target_type_set_id","passive_skill_effect_id","calc_option","turn","is_once","probability","causality_conditions","eff_value1","eff_value2","eff_value3","efficacy_values","created_at","updated_at"],passive_skill_set_relations:["id","passive_skill_set_id","passive_skill_id","created_at","updated_at"],special_sets:["id","name","description","causality_description","aim_target","increase_rate","lv_bonus","is_inactive","created_at","updated_at"],specials:["id","special_set_id","type","efficacy_type","target_type","calc_option","turn","prob","causality_conditions","eff_value1","eff_value2","eff_value3","created_at","updated_at"],card_specials:["id","card_id","special_set_id","priority","style","lv_start","eball_num_start","view_id","card_costume_condition_id","special_bonus_id1","special_bonus_lv1","bonus_view_id1","special_bonus_id2","special_bonus_lv2","bonus_view_id2","causality_conditions","special_asset_id","created_at","updated_at"],passive_skill_effects:["id","script_name","lite_flicker_rate","bgm_id","created_at","updated_at"],effect_packs:["id","category","name","pack_name","scene_name","red","green","blue","alpha","lite_flicker_rate","created_at","updated_at"],active_skill_sets:["id","name","effect_description","condition_description","turn","exec_limit","causality_conditions","ultimate_special_id","special_view_id","costume_special_view_id","bgm_id","created_at","updated_at"],active_skills:["id","active_skill_set_id","target_type","sub_target_type_set_id","calc_option","efficacy_type","eff_val1","eff_val2","eff_val3","efficacy_values","thumb_effect_id","effect_se_id","created_at","updated_at"],card_active_skills:["id","card_id","active_skill_set_id","created_at","updated_at"],optimal_awakening_growths:["id","optimal_awakening_grow_type","step","lv_max","skill_lv_max","passive_skill_set_id","leader_skill_set_id","created_at","updated_at"],standby_skill_sets:["id","name","ingame_icon_path","effect_description","condition_description","exec_limit","causality_conditions","special_view_id","costume_special_view_id","bgm_id","created_at","updated_at"],standby_skills:["id","standby_skill_set_id","target_type","target_type_values","sub_target_type_set_id","turn","efficacy_type","calc_option","efficacy_values","thumb_effect_id","effect_se_id","created_at","updated_at"],card_standby_skill_set_relations:["id","card_id","standby_skill_set_id","created_at","updated_at"],finish_skill_sets:["id","name","effect_description","condition_description","dialog_order","dialog_images","exec_timing_type","exec_limit","causality_conditions","finish_special_id","special_view_id","costume_special_view_id","bgm_id","is_dialog_view_visible","created_at","updated_at"],finish_skills:["id","finish_skill_set_id","target_type","target_type_values","sub_target_type_set_id","turn","efficacy_type","calc_option","efficacy_values","thumb_effect_id","effect_se_id","created_at","updated_at"],standby_skill_set_finish_skill_set_relations:["id","standby_skill_set_id","finish_skill_set_id","created_at","updated_at"],finish_specials:["id","increase_rate","aim_target","created_at","updated_at"],battle_params:["id","param_no","idx","value","created_at","updated_at"]},QS=[{id:"34",name:"DB Saga"},{id:"86",name:"Saiyan Saga"},{id:"14",name:"Planet Namek Saga"},{id:"38",name:"Androids/Cell Saga"},{id:"9",name:"Majin Buu Saga"},{id:"19",name:"Future Saga"},{id:"6",name:"Universe Survival Saga"},{id:"2",name:"Shadow Dragon Saga"},{id:"17",name:"Pure Saiyans"},{id:"5",name:"Hybrid Saiyans"},{id:"51",name:"Earthlings"},{id:"18",name:"Namekians"},{id:"21",name:"Androids"},{id:"32",name:"Artificial Life Forms"},{id:"30",name:"Goku's Family"},{id:"31",name:"Vegeta's Family"},{id:"24",name:"Wicked Bloodline"},{id:"33",name:"Youth"},{id:"4",name:"Peppy Gals"},{id:"36",name:"Super Saiyans"},{id:"45",name:"Super Saiyan 2"},{id:"12",name:"Super Saiyan 3"},{id:"84",name:"Power Beyond Super Saiyan"},{id:"1",name:"Fusion"},{id:"10",name:"Potara"},{id:"85",name:"Fused Fighters"},{id:"13",name:"Giant Form"},{id:"23",name:"Transformation Boost"},{id:"59",name:"Power Absorption"},{id:"39",name:"Kamehameha"},{id:"8",name:"Realm of Gods"},{id:"20",name:"Full Power"},{id:"60",name:"Giant Ape Power"},{id:"53",name:"Majin Power"},{id:"94",name:"Uncontrollable Power"},{id:"67",name:"Powerful Comeback"},{id:"90",name:"Power of Wishes"},{id:"93",name:"Demonic Power"},{id:"66",name:"Miraculous Awakening"},{id:"64",name:"Corroded Body and Mind"},{id:"54",name:"Rapid Growth"},{id:"76",name:"Mastered Evolution"},{id:"75",name:"Time Limit"},{id:"46",name:"Final Trump Card"},{id:"37",name:"Worthy Rivals"},{id:"78",name:"Sworn Enemies"},{id:"28",name:"Joined Forces"},{id:"87",name:"Bond of Parent and Child"},{id:"35",name:"Siblings' Bond"},{id:"79",name:"Bond of Friendship"},{id:"40",name:"Bond of Master and Disciple"},{id:"15",name:"Ginyu Force"},{id:"49",name:"Team Bardock"},{id:"27",name:"Universe 6"},{id:"22",name:"Representatives of Universe 7"},{id:"56",name:"Universe 11"},{id:"72",name:"GT Heroes"},{id:"73",name:"GT Bosses"},{id:"88",name:"Super Heroes"},{id:"92",name:"Super Bosses"},{id:"29",name:"Movie Heroes"},{id:"16",name:"Movie Bosses"},{id:"65",name:"Turtle School"},{id:"3",name:"World Tournament"},{id:"91",name:"Tournament Participants"},{id:"89",name:"Earth-Bred Fighters"},{id:"11",name:"Low-Class Warrior"},{id:"68",name:"Gifted Warriors"},{id:"44",name:"Otherworld Warriors"},{id:"7",name:"Resurrected Warriors"},{id:"62",name:"Space-Traveling Warriors"},{id:"26",name:"Time Travelers"},{id:"25",name:"Dragon Ball Seekers"},{id:"96",name:"Successors"},{id:"71",name:"Storied Figures"},{id:"77",name:"Legendary Existence"},{id:"57",name:"Saviors"},{id:"70",name:"Defenders of Justice"},{id:"95",name:"Earth-Protecting Heroes"},{id:"48",name:"Revenge"},{id:"43",name:"Target: Goku"},{id:"41",name:"Terrifying Conquerors"},{id:"50",name:"Inhuman Deeds"},{id:"69",name:"Planetary Destruction"},{id:"47",name:"Exploding Rage"},{id:"63",name:"Connected Hope"},{id:"81",name:"Entrusted Will"},{id:"55",name:"All-Out Struggle"},{id:"58",name:"Battle of Wits"},{id:"80",name:"Accelerated Battle"},{id:"83",name:"Battle of Fate"},{id:"74",name:"Heavenly Events"},{id:"52",name:"Special Pose"},{id:"82",name:"Worldwide Chaos"},{id:"61",name:"Crossover"},{id:"42",name:"Dragon Ball Heroes"}],XS=QS.map(i=>({label:`${i.name} (ID: ${i.id})`,value:i.id}));XS.sort((i,e)=>i.label.localeCompare(e.label));const WN=[{id:"23",name:"All in the Family"},{id:"35",name:"Android Assault"},{id:"33",name:"Attack of the Clones"},{id:"105",name:"Auto Regeneration"},{id:"64",name:"Battlefield Diva"},{id:"49",name:"Berserker"},{id:"50",name:"Big Bad Bosses"},{id:"1000",name:"Blazing Battle"},{id:"57",name:"Bombardment"},{id:"8",name:"Brainiacs"},{id:"18",name:"Brutal Beatdown"},{id:"82",name:"Budding Warrior"},{id:"44",name:"Champion's Strength"},{id:"39",name:"Cold Judgment"},{id:"79",name:"Connoisseur"},{id:"92",name:"Cooler's Armored Squad"},{id:"91",name:"Cooler's Underling"},{id:"2",name:"Courage"},{id:"32",name:"Coward"},{id:"5",name:"Crane School"},{id:"107",name:"Deficit Boost"},{id:"7",name:"Demonic Power"},{id:"6",name:"Demonic Ways"},{id:"98",name:"Destroyer of the Universe"},{id:"66",name:"Dismal Future"},{id:"46",name:"Dodon Ray"},{id:"81",name:"Energy Absorption"},{id:"11",name:"Evil Autocrats"},{id:"30",name:"Experienced Fighters"},{id:"61",name:"Family Ties"},{id:"120",name:"Fear and Faith"},{id:"109",name:"Fierce Battle"},{id:"12",name:"Flee"},{id:"111",name:"Formidable Enemy"},{id:"101",name:"Fortuneteller Babas Fighter"},{id:"51",name:"Frieza's Army"},{id:"43",name:"Frieza's Minion"},{id:"112",name:"Fused Fighter"},{id:"106",name:"Fusion"},{id:"113",name:"Fusion Failure"},{id:"95",name:"GT"},{id:"75",name:"Galactic Visitor"},{id:"88",name:"Galactic Warriors"},{id:"56",name:"Gaze of Respect"},{id:"17",name:"Gentleman"},{id:"80",name:"Godly Power"},{id:"9",name:"Golden Warrior"},{id:"1002",name:"Golden Z-Fighter"},{id:"102",name:"Guidance of the Dragon Balls"},{id:"104",name:"Hardened Grudge"},{id:"115",name:"Hatred of Saiyans"},{id:"15",name:"Hero"},{id:"93",name:"Hero of Justice"},{id:"1",name:"High Compatibility"},{id:"42",name:"Infighter"},{id:"110",name:"Infinite Energy"},{id:"96",name:"Infinite Regeneration"},{id:"47",name:"Kamehameha"},{id:"125",name:"Legendary Power"},{id:"116",name:"Limit-Breaking Form"},{id:"73",name:"Loyalty"},{id:"83",name:"Majin"},{id:"77",name:"Majin Resurrection Plan"},{id:"76",name:"Master of Magic"},{id:"38",name:"Mechanical Menaces"},{id:"19",name:"Messenger from the Future"},{id:"28",name:"Metamorphosis"},{id:"10",name:"Money Money Money"},{id:"14",name:"More Than Meets the Eye"},{id:"48",name:"Namekians"},{id:"21",name:"New"},{id:"72",name:"New Frieza Army"},{id:"119",name:"Nightmare"},{id:"67",name:"Organic Upgrade"},{id:"129",name:"Otherworld Warriors"},{id:"58",name:"Over 9000"},{id:"89",name:"Over in a Flash"},{id:"69",name:"Patrol"},{id:"128",name:"Penguin Village Adventure"},{id:"103",name:"Power Bestowed by God"},{id:"97",name:"Prepared for Battle"},{id:"26",name:"Prodigies"},{id:"55",name:"RR Army"},{id:"25",name:"Respect"},{id:"68",name:"Resurrection 'F'"},{id:"65",name:"Revival"},{id:"40",name:"Royal Lineage"},{id:"63",name:"Saiyan Pride"},{id:"124",name:"Saiyan Roar"},{id:"22",name:"Saiyan Warrior Race"},{id:"114",name:"Scientist"},{id:"127",name:"Shadow Dragons"},{id:"118",name:"Shattering the Limit"},{id:"60",name:"Shocking Speed"},{id:"94",name:"Signature Pose"},{id:"37",name:"Solid Support"},{id:"1001",name:"Soul vs Soul"},{id:"53",name:"Speedy Retribution"},{id:"84",name:"Strength in Unity"},{id:"85",name:"Strongest Clan in Space"},{id:"29",name:"Super Saiyan"},{id:"122",name:"Super Strike"},{id:"71",name:"Super-God Combat"},{id:"1003",name:"Supreme Power"},{id:"16",name:"Supreme Warrior"},{id:"54",name:"Tag Team of Terror"},{id:"62",name:"Team Bardock"},{id:"100",name:"Team Turles"},{id:"13",name:"Telekinesis"},{id:"24",name:"Telepathy"},{id:"117",name:"The First Awakened"},{id:"41",name:"The Ginyu Force"},{id:"87",name:"The Hera Clan"},{id:"90",name:"The Incredible Adventure"},{id:"4",name:"The Innocents"},{id:"34",name:"The Saiyan Lineage"},{id:"3",name:"The Students"},{id:"1004",name:"The Wall Standing Tall"},{id:"86",name:"Thirst for Conquest"},{id:"52",name:"Tough as Nails"},{id:"130",name:"Tournament of Power"},{id:"123",name:"Transform"},{id:"36",name:"Turtle School"},{id:"31",name:"Twin Terrors"},{id:"108",name:"Ultimate Lifeform"},{id:"74",name:"Unbreakable Bond"},{id:"59",name:"Universes Most Malevolent"},{id:"70",name:"Warrior Gods"},{id:"126",name:"Warriors of Universe 6"},{id:"27",name:"World Tournament Champion"},{id:"20",name:"World Tournament Reborn"},{id:"121",name:"Xenoverse"},{id:"45",name:"Z Fighters"}],ld=WN.map(i=>({label:`${i.name} (ID: ${i.id})`,value:i.id}));ld.sort((i,e)=>i.label.localeCompare(e.label));const Wc="custom_category_id_input",Zc="custom_link_id_input",ve=({label:i,value:e,onChange:n,type:r="text",placeholder:o,disabled:u,helpText:f,className:g,min:y,max:p,onBlur:E})=>S.jsxs("div",{className:`mb-1 ${g}`,children:[S.jsx("label",{className:"block text-sm font-medium text-orange-300 mb-1 font-rajdhani",children:i}),S.jsx("input",{type:r,value:e,onChange:A=>n(A.target.value),onBlur:E,placeholder:o,disabled:u,min:y,max:p,className:`w-full bg-indigo-700 bg-opacity-50 border border-indigo-500 text-indigo-100 rounded-md shadow-sm py-2 px-3 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all duration-150 ease-in-out placeholder-indigo-400 ${u?"opacity-60 cursor-not-allowed":""}`}),f&&S.jsx("p",{className:"mt-1 text-xs text-indigo-300 opacity-80",children:f})]}),rn=({label:i,value:e,onChange:n,options:r,disabled:o,helpText:u,className:f,allowCustom:g,customLabel:y,isOptional:p})=>S.jsxs("div",{className:`mb-1 ${f}`,children:[S.jsx("label",{className:"block text-sm font-medium text-orange-300 mb-1 font-rajdhani",children:i}),S.jsxs("select",{value:e,onChange:E=>n(E.target.value),disabled:o,className:`w-full bg-indigo-700 bg-opacity-50 border border-indigo-500 text-indigo-100 rounded-md shadow-sm py-2 px-3 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all duration-150 ease-in-out ${o?"opacity-60 cursor-not-allowed":""}`,children:[p&&S.jsx("option",{value:"",children:"-- None --"}),r.map(E=>S.jsx("option",{value:E.value,className:"bg-indigo-700 text-indigo-100",children:E.label},E.value)),g&&S.jsx("option",{value:"custom_id",className:"bg-indigo-700 text-indigo-100",children:y||"Enter Custom ID..."})]}),u&&S.jsx("p",{className:"mt-1 text-xs text-indigo-300 opacity-80",children:u})]}),ii=({label:i,value:e,onChange:n,rows:r=3,placeholder:o,disabled:u,helpText:f,className:g})=>S.jsxs("div",{className:`mb-1 ${g}`,children:[S.jsx("label",{className:"block text-sm font-medium text-orange-300 mb-1 font-rajdhani",children:i}),S.jsx("textarea",{value:e,onChange:y=>n(y.target.value),rows:r,placeholder:o,disabled:u,className:`w-full bg-indigo-700 bg-opacity-50 border border-indigo-500 text-indigo-100 rounded-md shadow-sm py-2 px-3 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all duration-150 ease-in-out placeholder-indigo-400 ${u?"opacity-60 cursor-not-allowed":""}`}),f&&S.jsx("p",{className:"mt-1 text-xs text-indigo-300 opacity-80",children:f})]}),Fp=({label:i,checked:e,onChange:n,disabled:r,helpText:o,className:u})=>S.jsxs("div",{className:`mb-1 flex items-center ${u}`,children:[S.jsx("input",{type:"checkbox",checked:e,onChange:f=>n(f.target.checked),disabled:r,className:`h-4 w-4 text-orange-500 border-indigo-500 rounded bg-indigo-700 bg-opacity-50 focus:ring-orange-400 focus:ring-offset-indigo-800 ${r?"opacity-60 cursor-not-allowed":""}`}),S.jsx("label",{className:"ml-2 block text-sm text-indigo-100 font-rajdhani",children:i}),o&&S.jsx("p",{className:"ml-2 text-xs text-indigo-300 opacity-80",children:o})]}),ZN=({formIndex:i,cardForm:e,updateCardForm:n,removeCardForm:r,patchState:o,setPatchState:u})=>{const[f,g]=Oe.useState(""),[y,p]=Oe.useState(""),[E,A]=Oe.useState(e.id);Oe.useEffect(()=>{e.id!==E&&A(e.id)},[e.id]);const N=Oe.useCallback((I,k)=>{n(i,{...e,[I]:k})},[e,i,n]),M=Oe.useCallback((I,k,O)=>{const L=[...e[I]||[]];L[k]=O,N(I,L)},[e,N]),X=Oe.useCallback(()=>{let I="";if(f===Wc?I=y.trim():I=f,I&&!(e.category_ids||[]).includes(I)){const k=[...e.category_ids||[],I];N("category_ids",k)}g(""),p("")},[e.category_ids,y,f,N]),Q=Oe.useCallback(I=>{const k=(e.category_ids||[]).filter(O=>O!==I);N("category_ids",k)},[e.category_ids,N]),$=Oe.useCallback((I,k)=>{const O=e.link_skill_ids[I]||"",C=ld.some(L=>L.value===O&&O!=="");k===Zc?C&&M("link_skill_ids",I,""):M("link_skill_ids",I,k)},[e.link_skill_ids,M]),re=o.cardSpecials.filter(I=>I.card_id===e.id),pe=()=>{const I=oa(e.id)?Mt.SPECIAL_SET+e.id:void 0,k=Dd(e.id,I);u(O=>({...O,cardSpecials:[...O.cardSpecials,k]}))},_e=(I,k,O)=>{const C=o.cardSpecials.findIndex(L=>L.id===re[I].id);C!==-1&&u(L=>({...L,cardSpecials:L.cardSpecials.map((q,P)=>P===C?{...q,[k]:O}:q)}))},ie=I=>{const k=re[I].id;u(O=>({...O,cardSpecials:O.cardSpecials.filter(C=>C.id!==k)}))},F=I=>{const k=QS.find(O=>O.id===I);return k?`${k.name} (ID: ${I})`:`Custom ID: ${I}`},ce=[{label:"None / Clear",value:""},...ld,{label:"Enter Custom ID...",value:Zc}];return S.jsxs("div",{className:"bg-indigo-800 bg-opacity-30 p-6 rounded-xl shadow-xl mb-8 border border-orange-500 border-opacity-50",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsxs("h3",{className:"text-2xl font-bold text-orange-400 font-rajdhani",children:["Card Form ",i+1,S.jsxs("span",{className:"text-sm text-indigo-300 ml-2 code-text",children:["(ID: ",e.id||"Not Set",")"]})]}),o.cardForms.length>1&&S.jsxs("button",{onClick:()=>r(i),className:"text-red-400 hover:text-red-500 transition-colors font-semibold py-1 px-3 rounded-md bg-red-900 bg-opacity-30 hover:bg-opacity-50 border border-red-500",children:[S.jsx("i",{className:"fas fa-trash-alt mr-1"})," Remove Form"]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4",children:[S.jsx(ve,{label:"Card ID",value:E,onChange:I=>A(I),onBlur:()=>{E!==e.id&&N("id",E)},placeholder:"e.g., 1070001",type:"text",className:"font-roboto-mono"}),S.jsx(ve,{label:"Name",value:e.name,onChange:I=>N("name",I)}),S.jsx(ve,{label:"Character ID",value:e.character_id,onChange:I=>N("character_id",I),className:"font-roboto-mono"}),S.jsx(ve,{label:"Card Unique Info ID",value:e.card_unique_info_id,onChange:I=>N("card_unique_info_id",I),className:"font-roboto-mono"}),S.jsx(ve,{label:"Cost",type:"number",value:e.cost,onChange:I=>N("cost",Number(I))}),S.jsx(rn,{label:"Rarity",value:e.rarity,onChange:I=>N("rarity",Number(I)),options:YS}),S.jsx(rn,{label:"Element",value:e.element,onChange:I=>N("element",Number(I)),options:KS}),S.jsx(ve,{label:"HP Init",type:"number",value:e.hp_init,onChange:I=>N("hp_init",Number(I))}),S.jsx(ve,{label:"HP Max",type:"number",value:e.hp_max,onChange:I=>N("hp_max",Number(I))}),S.jsx(ve,{label:"ATK Init",type:"number",value:e.atk_init,onChange:I=>N("atk_init",Number(I))}),S.jsx(ve,{label:"ATK Max",type:"number",value:e.atk_max,onChange:I=>N("atk_max",Number(I))}),S.jsx(ve,{label:"DEF Init",type:"number",value:e.def_init,onChange:I=>N("def_init",Number(I))}),S.jsx(ve,{label:"DEF Max",type:"number",value:e.def_max,onChange:I=>N("def_max",Number(I))}),S.jsx(ve,{label:"Max Level",type:"number",value:e.lv_max,onChange:I=>N("lv_max",Number(I))}),S.jsx(ve,{label:"Max Skill Level",type:"number",value:e.skill_lv_max,onChange:I=>N("skill_lv_max",Number(I))}),S.jsx(ve,{label:"Grow Type",type:"number",value:e.grow_type,onChange:I=>N("grow_type",Number(I))}),S.jsx(ve,{label:"Special Motion ID",type:"number",value:e.special_motion,onChange:I=>N("special_motion",Number(I))}),S.jsx(rn,{label:"Leader Skill Set ID",value:e.leader_skill_set_id,onChange:I=>N("leader_skill_set_id",I),options:(o.leaderSkillSets||[]).map(I=>({label:`${I.id} - ${I.name}`,value:I.id})),allowCustom:!0,customLabel:"Use Custom ID",className:"font-roboto-mono"}),S.jsx(rn,{label:"Passive Skill Set ID",value:e.passive_skill_set_id,onChange:I=>N("passive_skill_set_id",I),options:(o.passiveSkillSets||[]).map(I=>({label:`${I.id} - ${I.name}`,value:I.id})),allowCustom:!0,customLabel:"Use Custom ID",className:"font-roboto-mono"}),S.jsx(rn,{label:"Active Skill Set ID (Ref)",value:e.active_skill_set_id_ref||"",onChange:I=>N("active_skill_set_id_ref",I),options:(o.activeSkillSets||[]).map(I=>({label:`${I.id} - ${I.name}`,value:I.id})),allowCustom:!0,customLabel:"Use Custom ID",isOptional:!0,className:"font-roboto-mono"}),S.jsx(rn,{label:"Standby Skill Set ID (Ref)",value:e.standby_skill_set_id_ref||"",onChange:I=>N("standby_skill_set_id_ref",I),options:(o.standbySkillSets||[]).map(I=>({label:`${I.id} - ${I.name}`,value:I.id})),allowCustom:!0,customLabel:"Use Custom ID",isOptional:!0,className:"font-roboto-mono"})]}),S.jsxs("div",{className:"mt-8",children:[S.jsx("h4",{className:"text-xl font-semibold mb-3 text-orange-400 font-rajdhani",children:"Link Skills"}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4",children:e.link_skill_ids.map((I,k)=>{const O=I||"",C=ld.some(P=>P.value===O&&O!==""),L=O===""?"":C?O:Zc,q=L===Zc;return S.jsxs("div",{className:"space-y-1",children:[S.jsx(rn,{label:`Link Skill ${k+1}`,value:L,onChange:P=>$(k,P),options:ce}),q&&S.jsx(ve,{label:`Custom Link ID ${k+1}`,value:O,onChange:P=>M("link_skill_ids",k,P),placeholder:"Enter Custom Link ID",className:"font-roboto-mono"})]},k)})})]}),S.jsxs("div",{className:"mt-8",children:[S.jsx("h4",{className:"text-xl font-semibold text-orange-400 font-rajdhani mb-3",children:"Categories"}),S.jsxs("div",{className:"flex items-end gap-x-3 mb-4",children:[S.jsx(rn,{label:"Select or Add Category",value:f,onChange:g,options:[{label:"Select Category...",value:""},...XS,{label:"Enter Custom ID...",value:Wc}],className:"flex-grow"}),f===Wc&&S.jsx(ve,{label:"Custom Category ID",value:y,onChange:p,placeholder:"Enter ID",className:"flex-grow font-roboto-mono"}),S.jsxs("button",{onClick:X,disabled:!f||f===Wc&&!y.trim(),className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-3 rounded-md shadow-sm hover:shadow-md transition-all h-[42px] disabled:opacity-50 disabled:cursor-not-allowed",children:[S.jsx("i",{className:"fas fa-plus mr-1"})," Add"]})]}),S.jsxs("div",{className:"space-y-2",children:[(e.category_ids||[]).length===0&&S.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No categories added."}),(e.category_ids||[]).map(I=>S.jsxs("div",{className:"flex items-center justify-between p-2 bg-indigo-700 bg-opacity-30 rounded-md text-sm",children:[S.jsx("span",{className:"text-indigo-200",children:F(I)}),S.jsx("button",{onClick:()=>Q(I),className:"text-red-400 hover:text-red-500 text-xs p-1 bg-red-900 bg-opacity-20 hover:bg-opacity-40 rounded-full transition-colors",children:S.jsx("i",{className:"fas fa-times"})})]},I))]})]}),S.jsxs("div",{className:"mt-8",children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("h4",{className:"text-xl font-semibold text-orange-400 font-rajdhani",children:"Special Attacks (card_specials entries)"}),S.jsxs("button",{onClick:pe,className:"bg-green-500 hover:bg-green-600 text-sm text-white font-semibold py-1.5 px-3 rounded-md shadow-sm hover:shadow-md transition-all",children:[S.jsx("i",{className:"fas fa-plus mr-1"})," Add Special Attack"]})]}),re.length===0&&S.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No special attacks defined for this card form."}),re.map((I,k)=>S.jsxs("div",{className:"bg-indigo-700 bg-opacity-40 p-4 rounded-lg shadow-md mb-4 border border-indigo-600",children:[S.jsxs("div",{className:"flex justify-between items-center mb-3",children:[S.jsxs("p",{className:"text-md font-medium text-orange-300 font-rajdhani",children:["Special Attack ",k+1," ",S.jsxs("span",{className:"text-xs text-indigo-300 font-roboto-mono",children:["(Row ID: ",I.id,")"]})]}),S.jsxs("button",{onClick:()=>ie(k),className:"text-red-300 hover:text-red-400 text-xs font-semibold py-1 px-2 rounded bg-red-700 bg-opacity-30 hover:bg-opacity-50 transition-colors",children:[S.jsx("i",{className:"fas fa-times mr-1"}),"Remove Special"]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-3",children:[S.jsx(ve,{label:"Row ID (card_specials)",value:I.id,onChange:O=>_e(k,"id",O),className:"font-roboto-mono"}),S.jsx(rn,{label:"Special Set ID",value:I.special_set_id,onChange:O=>_e(k,"special_set_id",O),options:(o.specialSets||[]).map(O=>({label:`${O.id} - ${O.name}`,value:O.id})),allowCustom:!0,customLabel:"Enter Custom Set ID",className:"font-roboto-mono"}),S.jsx(ve,{label:"Style (e.g. Normal, Hyper)",value:I.style,onChange:O=>_e(k,"style",O)}),S.jsx(ve,{label:"Priority",type:"number",value:I.priority,onChange:O=>_e(k,"priority",Number(O))}),S.jsx(ve,{label:"SA Lvl Start",type:"number",value:I.lv_start,onChange:O=>_e(k,"lv_start",Number(O))}),S.jsx(ve,{label:"Ki Required (eball_num_start)",type:"number",value:I.eball_num_start,onChange:O=>_e(k,"eball_num_start",Number(O))}),S.jsx(ve,{label:"View ID",type:"number",value:I.view_id,onChange:O=>_e(k,"view_id",Number(O))}),S.jsx(ve,{label:"Costume Condition ID",type:"number",value:I.card_costume_condition_id,onChange:O=>_e(k,"card_costume_condition_id",Number(O))}),S.jsx(ve,{label:"Bonus ID 1",type:"number",value:I.special_bonus_id1,onChange:O=>_e(k,"special_bonus_id1",Number(O))}),S.jsx(ve,{label:"Bonus Lvl 1",type:"number",value:I.special_bonus_lv1,onChange:O=>_e(k,"special_bonus_lv1",Number(O))}),S.jsx(ii,{label:"Causality Conditions (JSON)",value:I.causality_conditions||"",onChange:O=>_e(k,"causality_conditions",O||null),rows:2,className:"font-roboto-mono lg:col-span-3 md:col-span-2"})]})]},I.id))]})]})},JN=({sql:i})=>{const[e,n]=Oe.useState(!1),r=()=>{navigator.clipboard.writeText(i).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)}).catch(u=>{console.error("Failed to copy SQL: ",u),alert("Failed to copy SQL to clipboard.")})},o=()=>{const u=new Blob([i],{type:"text/sql"}),f=URL.createObjectURL(u),g=document.createElement("a");g.href=f,g.download=`dokkan_patch_${new Date().toISOString().slice(0,10)}.sql`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(f)};return i?S.jsxs("div",{className:"bg-indigo-800 bg-opacity-30 p-4 rounded-lg shadow-inner border border-indigo-700",children:[S.jsxs("div",{className:"flex justify-end mb-4 space-x-3",children:[S.jsxs("button",{onClick:r,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md text-sm transition-all duration-150 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400",children:[S.jsx("i",{className:`fas ${e?"fa-check":"fa-copy"} mr-2`}),e?"Copied!":"Copy SQL"]}),S.jsxs("button",{onClick:o,className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-md text-sm transition-all duration-150 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-green-400",children:[S.jsx("i",{className:"fas fa-download mr-2"}),"Download .sql"]})]}),S.jsx("pre",{className:"bg-gray-900 bg-opacity-75 p-4 rounded-md text-sm text-indigo-200 whitespace-pre-wrap break-all overflow-x-auto h-96 max-h-[70vh] border border-indigo-600 font-roboto-mono shadow-inner",children:i})]}):S.jsx("p",{className:"text-center text-indigo-300 italic font-rajdhani text-lg",children:'No SQL generated yet. Fill in some data and click "Generate SQL Patch".'})},WS=()=>{const i=new Date,e=i.getFullYear(),n=(i.getMonth()+1).toString().padStart(2,"0"),r=i.getDate().toString().padStart(2,"0"),o=i.getHours().toString().padStart(2,"0"),u=i.getMinutes().toString().padStart(2,"0"),f=i.getSeconds().toString().padStart(2,"0"),y=(i.getMilliseconds().toString().padStart(3,"0")+"000").slice(0,6);return`${e}-${n}-${r} ${o}:${u}:${f}.${y}`},ns=i=>i==null?"NULL":typeof i=="string"?`'${i.replace(/'/g,"''")}'`:typeof i=="boolean"?i?"1":"0":String(i),eD=(i,e,n)=>{if(n.hasOwnProperty(e)&&n[e]!==void 0&&n[e]!==null)return i==="cards"&&e.startsWith("link_skill")&&e.endsWith("_id")&&n[e]===""?null:n[e];if(e==="created_at"||e==="updated_at")return WS();if(e==="open_at"&&i==="cards")return 0;if(i==="cards"){if(e.startsWith("link_skill")&&e.endsWith("_id")){const r=n.link_skill_ids;if(r){const o=parseInt(e.replace("link_skill","").replace("_id",""))-1;if(o>=0&&o<r.length&&r[o]&&r[o]!=="")return r[o]}return null}if(["optimal_awakening_grow_type","aura_id","aura_scale","aura_offset_x","aura_offset_y","awakening_number","resource_id","bg_effect_id","awakening_element_type","potential_board_id"].includes(e))return null;if(e==="is_aura_front")return 0}if(i==="card_unique_infos"&&e==="kana"||["leader_skills","specials","active_skill_sets","standby_skill_sets","finish_skill_sets"].includes(i)&&e==="causality_conditions"||i==="leader_skills"&&e==="sub_target_type_set_id"||i==="passive_skill_sets"&&e==="itemized_description")return null;if(i==="passive_skills"){if(e==="efficacy_values")return"{}";if(["sub_target_type_set_id","passive_skill_effect_id","causality_conditions"].includes(e))return null}if(i==="special_sets"&&e==="causality_description")return null;if(i==="active_skill_sets"){if(e==="costume_special_view_id")return 0;if(["ultimate_special_id","special_view_id","bgm_id"].includes(e))return null}if(i==="active_skills"){if(e==="efficacy_values")return"{}";if(["sub_target_type_set_id","thumb_effect_id","effect_se_id"].includes(e))return null}if(i==="card_specials"&&["causality_conditions","special_asset_id"].includes(e)||i==="passive_skill_effects"&&e==="bgm_id")return null;if(i==="standby_skill_sets"){if(e==="costume_special_view_id")return 0;if(["special_view_id","bgm_id"].includes(e))return null}if(i==="standby_skills"){if(["target_type_values","sub_target_type_set_id","calc_option","thumb_effect_id","effect_se_id"].includes(e))return null;if(e==="efficacy_values")return"{}"}if(i==="finish_skill_sets"){if(e==="dialog_order"||e==="exec_timing_type"||e==="costume_special_view_id")return 0;if(e==="is_dialog_view_visible")return 1;if(["dialog_images","finish_special_id","special_view_id","bgm_id"].includes(e))return null}if(i==="finish_skills"){if(["target_type_values","sub_target_type_set_id","calc_option","thumb_effect_id","effect_se_id"].includes(e))return null;if(e==="efficacy_values")return"{}"}},qt=(i,e)=>{const n=XN[i];if(!n)return console.warn(`WARN: No column definition for table ${i}. Could not generate SQL for: ${JSON.stringify(e)}`),`-- WARN: No column definition for table ${i}. Could not generate SQL for: ${JSON.stringify(e)}
`;const r=n.map(u=>`"${u}"`).join(", "),o=n.map(u=>{let f=eD(i,u,e);return ns(f)}).join(", ");return`INSERT OR REPLACE INTO "main"."${i}" (${r}) VALUES (${o});
`},tD=i=>{let e=`-- Dokkan Battle Patch Generated --

`;e+=`-- cards
`;const n=[];i.cardForms.forEach(o=>{e+=qt("cards",o),(o.category_ids||[]).forEach((u,f)=>{if(u&&u.trim()!==""){const g=`${o.id}${(f+1).toString().padStart(3,"0")}`;n.push({id:g,card_id:o.id,card_category_id:u,num:f+1})}})}),e+=`
`,e+=`-- card_unique_infos
`,i.cardUniqueInfos.forEach(o=>{e+=qt("card_unique_infos",o)}),e+=`
`,i.isEZA&&i.optimalAwakeningGrowth&&(e+=`-- optimal_awakening_growths (EZA)
`,e+=qt("optimal_awakening_growths",i.optimalAwakeningGrowth),e+=`
`),n.length>0&&(e+=`-- card_card_categories
`,n.forEach(o=>{e+=qt("card_card_categories",o)}),e+=`
`),e+=`-- leader_skill_sets
`,i.leaderSkillSets.forEach(o=>{e+=qt("leader_skill_sets",{id:o.id,name:o.name,description:o.description}),e+="-- leader_skills for set "+o.id+`
`,o.skills.forEach(u=>{const f={...u,leader_skill_set_id:o.id};e+=qt("leader_skills",f)})}),e+=`
`,e+=`-- passive_skill_sets
`;const r=[];if(i.passiveSkillSets.forEach(o=>{e+=qt("passive_skill_sets",{id:o.id,name:o.name,description:o.description,itemized_description:o.itemized_description}),e+="-- passive_skills for set "+o.id+`
`,o.skills.forEach((u,f)=>{e+=qt("passive_skills",u),r.push({id:`${o.id}${f.toString().padStart(4,"0")}`,passive_skill_set_id:o.id,passive_skill_id:u.id})})}),e+=`
`,r.length>0&&(e+=`-- passive_skill_set_relations
`,r.forEach(o=>{e+=qt("passive_skill_set_relations",o)}),e+=`
`),e+=`-- special_sets
`,i.specialSets.forEach(o=>{e+=qt("special_sets",{id:o.id,name:o.name,description:o.description,causality_description:o.causality_description,aim_target:o.aim_target,increase_rate:o.increase_rate,lv_bonus:o.lv_bonus,is_inactive:o.is_inactive}),e+="-- specials for set "+o.id+`
`,o.skills.forEach(u=>{const f={...u,special_set_id:o.id};e+=qt("specials",f)})}),e+=`
`,i.cardSpecials&&i.cardSpecials.length>0&&(e+=`-- card_specials
`,i.cardSpecials.forEach(o=>{e+=qt("card_specials",o)}),e+=`
`),i.passiveSkillEffects&&i.passiveSkillEffects.length>0&&(e+=`-- Passive Skill Effects
`,i.passiveSkillEffects.forEach(o=>{e+=qt("passive_skill_effects",o)}),e+=`
`),i.effectPacks&&i.effectPacks.length>0&&(e+=`-- effect_packs
`,i.effectPacks.forEach(o=>{e+=qt("effect_packs",o)}),e+=`
`),e+=`-- active_skill_sets
`,i.activeSkillSets.forEach(o=>{e+=qt("active_skill_sets",{id:o.id,name:o.name,effect_description:o.effect_description,condition_description:o.condition_description,turn:o.turn,exec_limit:o.exec_limit,causality_conditions:o.causality_conditions,ultimate_special_id:o.ultimate_special_id,special_view_id:o.special_view_id,costume_special_view_id:o.costume_special_view_id,bgm_id:o.bgm_id}),e+="-- active_skills for set "+o.id+`
`,o.skills.forEach(u=>{const f={...u,active_skill_set_id:o.id};e+=qt("active_skills",f)})}),e+=`
`,i.cardActiveSkills&&i.cardActiveSkills.length>0&&(e+=`-- card_active_skills
`,i.cardActiveSkills.forEach(o=>{e+=qt("card_active_skills",o)}),e+=`
`),i.standbySkillSets&&i.standbySkillSets.length>0&&(e+=`-- standby_skill_sets
`,i.standbySkillSets.forEach(o=>{const u={id:o.id,name:o.name,ingame_icon_path:o.ingame_icon_path,effect_description:o.effect_description,condition_description:o.condition_description,exec_limit:o.exec_limit,causality_conditions:o.causality_conditions,special_view_id:o.special_view_id,costume_special_view_id:o.costume_special_view_id,bgm_id:o.bgm_id};e+=qt("standby_skill_sets",u),e+="-- standby_skills for set "+o.id+`
`,o.skills.forEach(f=>{const g={...f,standby_skill_set_id:o.id};e+=qt("standby_skills",g)})}),e+=`
`),i.cardStandbySkills&&i.cardStandbySkills.length>0&&(e+=`-- card_standby_skill_set_relations
`,i.cardStandbySkills.forEach(o=>{e+=qt("card_standby_skill_set_relations",o)}),e+=`
`),i.finishSpecials&&i.finishSpecials.length>0&&(e+=`-- finish_specials
`,i.finishSpecials.forEach(o=>{e+=qt("finish_specials",o)}),e+=`
`),i.finishSkillSets&&i.finishSkillSets.length>0&&(e+=`-- finish_skill_sets
`,i.finishSkillSets.forEach(o=>{const u={id:o.id,name:o.name,effect_description:o.effect_description,condition_description:o.condition_description,dialog_order:o.dialog_order,dialog_images:o.dialog_images,exec_timing_type:o.exec_timing_type,exec_limit:o.exec_limit,causality_conditions:o.causality_conditions,finish_special_id:o.finish_special_id,special_view_id:o.special_view_id,costume_special_view_id:o.costume_special_view_id,bgm_id:o.bgm_id,is_dialog_view_visible:o.is_dialog_view_visible};e+=qt("finish_skill_sets",u),e+="-- finish_skills for set "+o.id+`
`,o.skills.forEach(f=>{const g={...f,finish_skill_set_id:o.id};e+=qt("finish_skills",g)})}),e+=`
`),i.standbySkillSetFinishSkillSetRelations&&i.standbySkillSetFinishSkillSetRelations.length>0&&(e+=`-- standby_skill_set_finish_skill_set_relations
`,i.standbySkillSetFinishSkillSetRelations.forEach(o=>{e+=qt("standby_skill_set_finish_skill_set_relations",o)}),e+=`
`),i.battleParams&&i.battleParams.length>0&&(e+=`-- battle_params
`,i.battleParams.forEach(o=>{e+=qt("battle_params",o)}),e+=`
`),i.isEZA&&i.optimalAwakeningGrowth&&i.baseCardIdForEZA){const o=i.optimalAwakeningGrowth;e+=`-- EZA Card Update
`,e+=`UPDATE "main"."cards" SET 
        "optimal_awakening_grow_type" = ${ns(o.optimal_awakening_grow_type)},
        "lv_max" = ${ns(o.lv_max)},
        "skill_lv_max" = ${ns(o.skill_lv_max)},
        "passive_skill_set_id" = ${ns(o.passive_skill_set_id)},
        "leader_skill_set_id" = ${ns(o.leader_skill_set_id)},
        "updated_at" = ${ns(WS())}
    WHERE "id" = ${ns(i.baseCardIdForEZA)};

`}return e+=`-- End of Patch --
`,e},il=({skillSetId:i,skills:e,updateSkills:n,initialSkillFactory:r,skillName:o})=>{const u=()=>{const E=r(),A=e.length,N=String(i).replace(/\D/g,""),X=N.length>0?N:i;o==="Passive Effect"||o==="Special Effect"?A===0?E.id=String(X):E.id=String(A*100)+String(X):o==="Leader Skill Effect"?E.id=String(X)+String(A).padStart(2,"0"):o==="Active Skill Effect"?E.id=String(X)+String(A+1):E.id=ri(),"name"in E&&!E.name&&e.length>0&&"name"in e[0]&&e[0].name?E.name=e[0].name:"name"in E&&!E.name&&(E.name=`${o} Detail for ${i}`),"description"in E&&!E.description&&e.length>0&&"description"in e[0]&&e[0].description?E.description=e[0].description:"description"in E&&!E.description&&(E.description=`Detail for ${i}`),n([...e,E])},f=(E,A,N)=>{const M=e.map((X,Q)=>Q===E?{...X,[A]:N}:X);n(M)},g=E=>{n(e.filter((A,N)=>N!==E))},y=(E,A,N)=>S.jsxs(S.Fragment,{children:[S.jsx(ve,{label:"Effect ID",value:E.id,onChange:M=>f(A,"id",M),className:"font-roboto-mono"}),"name"in E&&S.jsx(ve,{label:"Effect Name (Internal)",value:E.name||"",onChange:M=>f(A,"name",M)}),"description"in E&&S.jsx(ve,{label:"Effect Description (Internal)",value:E.description||"",onChange:M=>f(A,"description",M)}),S.jsx("div",{className:N?"flex flex-col":"",children:S.jsx(rn,{label:"Efficacy Type",value:E.efficacy_type,onChange:M=>f(A,"efficacy_type",Number(M)),options:VN})}),S.jsx(ve,{label:"Eff Value 1",value:E.eff_value1??"",onChange:M=>f(A,"eff_value1",M)}),S.jsx(ve,{label:"Eff Value 2",value:E.eff_value2??"",onChange:M=>f(A,"eff_value2",M)}),S.jsx(ve,{label:"Eff Value 3",value:E.eff_value3??"",onChange:M=>f(A,"eff_value3",M)}),"efficacy_values"in E&&S.jsx(ve,{label:"Efficacy Values (JSON)",value:E.efficacy_values||"{}",onChange:M=>f(A,"efficacy_values",M),className:"font-roboto-mono"}),S.jsx(rn,{label:"Target Type",value:E.target_type,onChange:M=>f(A,"target_type",Number(M)),options:MN}),S.jsx(rn,{label:"Calc Option",value:E.calc_option??"",onChange:M=>f(A,"calc_option",M===""?null:Number(M)),options:NN}),"exec_timing_type"in E&&S.jsx(rn,{label:"Exec Timing Type",value:E.exec_timing_type,onChange:M=>f(A,"exec_timing_type",Number(M)),options:ON}),"turn"in E&&S.jsx(ve,{label:"Turn Duration",type:"number",value:E.turn,onChange:M=>f(A,"turn",Number(M))}),"probability"in E&&S.jsx(ve,{label:"Probability (%)",type:"number",value:E.probability,onChange:M=>f(A,"probability",Number(M)),min:0,max:100}),"prob"in E&&S.jsx(ve,{label:"Probability (%)",type:"number",value:E.prob,onChange:M=>f(A,"prob",Number(M)),min:0,max:100}),"is_once"in E&&S.jsx(Fp,{label:"Is Once Only",checked:E.is_once===1,onChange:M=>f(A,"is_once",M?1:0)}),S.jsx(ve,{label:"Sub Target Type Set ID",value:E.sub_target_type_set_id||"",onChange:M=>f(A,"sub_target_type_set_id",M||null),className:"font-roboto-mono"}),"passive_skill_effect_id"in E&&S.jsx(ve,{label:"Passive Skill Effect ID",value:E.passive_skill_effect_id||"",onChange:M=>f(A,"passive_skill_effect_id",M||null),className:"font-roboto-mono"}),S.jsx("div",{className:N?"lg:col-span-3 md:col-span-2":"",children:S.jsx(ii,{label:"Causality Conditions (JSON)",value:E.causality_conditions||"",onChange:M=>f(A,"causality_conditions",M||null),rows:N?2:3,className:"font-roboto-mono"})}),"target_type_values"in E&&S.jsx(ve,{label:"Target Type Values (JSON)",value:E.target_type_values||"{}",onChange:M=>f(A,"target_type_values",M),className:"font-roboto-mono"}),"thumb_effect_id"in E&&S.jsx(ve,{label:"Thumb Effect ID",value:E.thumb_effect_id||"",onChange:M=>f(A,"thumb_effect_id",M||null),className:"font-roboto-mono"}),"effect_se_id"in E&&S.jsx(ve,{label:"Effect SE ID",value:E.effect_se_id||"",onChange:M=>f(A,"effect_se_id",M||null),className:"font-roboto-mono"})]}),p=o==="Passive Effect";return S.jsxs("div",{className:"mt-6",children:[S.jsxs("h5",{className:"text-xl font-semibold mb-3 text-orange-300 font-rajdhani",children:[o," Details:"]}),e.map((E,A)=>S.jsxs("div",{className:"mb-6 p-4 bg-indigo-700 bg-opacity-40 rounded-lg shadow-md border border-indigo-600",children:[S.jsxs("div",{className:"flex justify-between items-center mb-3",children:[S.jsxs("p",{className:"text-md font-medium text-orange-300 font-rajdhani",children:[o," ",A+1," ",S.jsxs("span",{className:"text-xs text-indigo-300 font-roboto-mono",children:["(ID: ",E.id,")"]})]}),S.jsxs("button",{onClick:()=>g(A),className:"text-red-300 hover:text-red-400 text-xs font-semibold py-1 px-2 rounded bg-red-700 bg-opacity-30 hover:bg-opacity-50 transition-colors",children:[S.jsx("i",{className:"fas fa-times mr-1"}),"Remove Effect"]})]}),S.jsxs("div",{className:`grid gap-x-6 gap-y-3 ${p?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1 sm:grid-cols-2"}`,children:[y(E,A,p),o==="Special Effect"&&S.jsx(ve,{label:"Type (e.g. Special::NormalEfficacySpecial)",value:E.type,onChange:N=>f(A,"type",N)})]})]},E.id||A)),e.length===0&&S.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No effects added yet."}),S.jsxs("button",{onClick:u,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md text-sm shadow-md hover:shadow-lg transition-all",children:[S.jsx("i",{className:"fas fa-plus mr-2"})," Add ",o," Effect"]})]})},nD=({patchState:i,setPatchState:e})=>{const[n,r]=Oe.useState(null),o=p=>{const E=ri();let A;switch(p){case"passiveSkillSets":A={id:E,name:`New Global Passive ${i.passiveSkillSets.length+1}`,description:"",itemized_description:"",skills:[]};break;case"leaderSkillSets":A={id:E,name:`New Global Leader ${i.leaderSkillSets.length+1}`,description:"",skills:[]};break;case"specialSets":A={id:E,name:`New Global Special ${i.specialSets.length+1}`,description:"",skills:[],aim_target:0,increase_rate:180,lv_bonus:25,is_inactive:0};break;case"activeSkillSets":A={id:E,name:`New Global Active ${i.activeSkillSets.length+1}`,effect_description:"",condition_description:"",turn:1,exec_limit:1,skills:[],costume_special_view_id:0};break}A&&(e(N=>({...N,[p]:[...N[p],A]})),r({type:p,id:E}))},u=(p,E)=>{e(A=>({...A,[p]:A[p].map(N=>N.id===E.id?E:N)}))},f=(p,E)=>{window.confirm(`Are you sure you want to delete skill set ${E}? This might break Card Form references.`)&&(e(A=>({...A,[p]:A[p].filter(N=>N.id!==E)})),(n==null?void 0:n.id)===E&&r(null))},g=(p,E)=>S.jsxs("div",{className:"mb-8 p-4 bg-indigo-800 bg-opacity-40 rounded-lg shadow-lg border border-indigo-600",children:[S.jsx("h3",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani capitalize",children:p.replace(/([A-Z])/g," $1").replace("Skill Sets"," Skill Sets")}),S.jsxs("button",{onClick:()=>o(p),className:"mb-4 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md text-sm shadow-md hover:shadow-lg transition-all",children:[S.jsx("i",{className:"fas fa-plus mr-2"})," Add New ",p.replace("SkillSets"," Skill Set").replace("Sets"," Set")]}),S.jsxs("ul",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:[E.map(A=>S.jsxs("li",{className:`p-3 rounded-md cursor-pointer flex justify-between items-center transition-all duration-150 ease-in-out shadow-sm hover:shadow-md font-rajdhani
                          ${(n==null?void 0:n.type)===p&&(n==null?void 0:n.id)===A.id?"bg-orange-500 text-white ring-2 ring-orange-300":"bg-indigo-700 hover:bg-indigo-600 hover:text-orange-300"}`,onClick:()=>r({type:p,id:A.id}),children:[S.jsxs("span",{className:"truncate",children:[S.jsx("span",{className:"font-roboto-mono text-xs opacity-75",children:A.id})," - ",A.name]}),S.jsx("button",{onClick:N=>{N.stopPropagation(),f(p,A.id)},className:"text-red-300 hover:text-red-500 hover:bg-red-700 hover:bg-opacity-50 rounded-full p-1 text-xs transition-colors",children:S.jsx("i",{className:"fas fa-trash"})})]},A.id)),E.length===0&&S.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No sets defined yet."})]})]}),y=()=>{if(!n)return S.jsx("p",{className:"text-center text-indigo-300 font-rajdhani text-lg italic mt-10",children:"Select a skill set to edit or create a new one."});const{type:p,id:E}=n,A=i[p].find(M=>M.id===E);if(!A)return r(null),S.jsx("p",{className:"text-red-400",children:"Error: Skill set not found."});const N=S.jsxs(S.Fragment,{children:[S.jsx(ve,{label:"ID",value:A.id,onChange:M=>u(p,{...A,id:M}),className:"font-roboto-mono"}),S.jsx(ve,{label:"Name",value:A.name,onChange:M=>u(p,{...A,name:M})})]});switch(p){case"passiveSkillSets":const M=A;return S.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[S.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Passive Skill Set: ",S.jsx("span",{className:"text-indigo-200",children:M.name})]}),N,S.jsx(ii,{label:"Description (Player-facing)",value:M.description,onChange:re=>u(p,{...M,description:re}),rows:4}),S.jsx(ii,{label:"Itemized Description",value:M.itemized_description||"",onChange:re=>u(p,{...M,itemized_description:re}),rows:6}),S.jsx(il,{skillSetId:M.id,skills:M.skills,updateSkills:re=>u(p,{...M,skills:re}),initialSkillFactory:UN,skillName:"Passive Effect"})]});case"leaderSkillSets":const X=A;return S.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[S.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Leader Skill Set: ",S.jsx("span",{className:"text-indigo-200",children:X.name})]}),N,S.jsx(ii,{label:"Description (Player-facing)",value:X.description,onChange:re=>u(p,{...X,description:re}),rows:4}),S.jsx(il,{skillSetId:X.id,skills:X.skills,updateSkills:re=>u(p,{...X,skills:re}),initialSkillFactory:()=>({...BN(),leader_skill_set_id:X.id}),skillName:"Leader Skill Effect"})]});case"specialSets":const Q=A;return S.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[S.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Special Set: ",S.jsx("span",{className:"text-indigo-200",children:Q.name})]}),N,S.jsx(ii,{label:"Description",value:Q.description,onChange:re=>u(p,{...Q,description:re}),rows:3}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[S.jsx(ve,{label:"Aim Target",type:"number",value:Q.aim_target,onChange:re=>u(p,{...Q,aim_target:Number(re)})}),S.jsx(ve,{label:"Increase Rate",type:"number",value:Q.increase_rate,onChange:re=>u(p,{...Q,increase_rate:Number(re)})}),S.jsx(ve,{label:"Level Bonus",type:"number",value:Q.lv_bonus,onChange:re=>u(p,{...Q,lv_bonus:Number(re)})}),S.jsx(rn,{label:"Is Inactive",value:Q.is_inactive,onChange:re=>u(p,{...Q,is_inactive:Number(re)}),options:[{label:"Active",value:0},{label:"Inactive",value:1}]})]}),S.jsx(il,{skillSetId:Q.id,skills:Q.skills,updateSkills:re=>u(p,{...Q,skills:re}),initialSkillFactory:()=>({...qN(),special_set_id:Q.id}),skillName:"Special Effect"})]});case"activeSkillSets":const $=A;return S.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[S.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Active Skill Set: ",S.jsx("span",{className:"text-indigo-200",children:$.name})]}),N,S.jsx(ii,{label:"Effect Description",value:$.effect_description,onChange:re=>u(p,{...$,effect_description:re}),rows:3}),S.jsx(ii,{label:"Condition Description",value:$.condition_description,onChange:re=>u(p,{...$,condition_description:re}),rows:3}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[S.jsx(ve,{label:"Turn",type:"number",value:$.turn,onChange:re=>u(p,{...$,turn:Number(re)})}),S.jsx(ve,{label:"Execution Limit",type:"number",value:$.exec_limit,onChange:re=>u(p,{...$,exec_limit:Number(re)})}),S.jsx(ve,{label:"BGM ID",type:"number",value:$.bgm_id??"",onChange:re=>u(p,{...$,bgm_id:re?Number(re):null}),placeholder:"Optional BGM ID"}),S.jsx(ve,{label:"Ultimate Special ID",type:"number",value:$.ultimate_special_id??"",onChange:re=>u(p,{...$,ultimate_special_id:re?Number(re):null}),placeholder:"Optional"}),S.jsx(ve,{label:"Special View ID",type:"number",value:$.special_view_id??"",onChange:re=>u(p,{...$,special_view_id:re?Number(re):null}),placeholder:"Optional"}),S.jsx(ve,{label:"Costume Special View ID",type:"number",value:$.costume_special_view_id??"",onChange:re=>u(p,{...$,costume_special_view_id:re?Number(re):0}),placeholder:"Defaults to 0"})]}),S.jsx(il,{skillSetId:$.id,skills:$.skills,updateSkills:re=>u(p,{...$,skills:re}),initialSkillFactory:()=>({...zN(),active_skill_set_id:$.id}),skillName:"Active Skill Effect"})]});default:return null}};return S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[S.jsxs("div",{className:"space-y-6",children:[g("passiveSkillSets",i.passiveSkillSets),g("leaderSkillSets",i.leaderSkillSets)]}),S.jsxs("div",{className:"space-y-6",children:[g("specialSets",i.specialSets),g("activeSkillSets",i.activeSkillSets)]}),S.jsx("div",{className:"md:col-span-2 mt-4",children:y()})]})},iD=({patchState:i,setPatchState:e})=>{const[n,r]=Oe.useState(null),[o,u]=Oe.useState(null),[f,g]=Oe.useState(null),y=ie=>{let F,ce=ri();switch(ie){case"standbySkillSet":F=GN(),ce=F.id,e(C=>({...C,standbySkillSets:[...C.standbySkillSets||[],F]}));break;case"finishSkillSet":F=$N(),ce=F.id,e(C=>({...C,finishSkillSets:[...C.finishSkillSets||[],F]}));break;case"finishSpecial":F=QN(),ce=F.id,e(C=>({...C,finishSpecials:[...C.finishSpecials||[],F]}));break;case"battleParam":const I=(i.battleParams||[]).map(C=>C.param_no);let k=1;for(;I.includes(k);)k++;const O=$0(k,0);e(C=>({...C,battleParams:[...C.battleParams||[],O]})),ce=k,g(k),u(null),r("battleParam");return}r(ie),u(ce),g(null)},p=(ie,F)=>{r(ie),ie==="battleParam"?(g(F),u(null)):(u(F),g(null))},E=(ie,F)=>{e(ce=>{const k=(ce[ie]||[]).map(O=>O.id===F.id?F:O);return{...ce,[ie]:k}})},A=ie=>{e(F=>({...F,battleParams:(F.battleParams||[]).map(ce=>ce.id===ie.id?ie:ce)}))},N=ie=>{const F=(i.battleParams||[]).filter(k=>k.param_no===ie),ce=F.length>0?Math.max(...F.map(k=>k.idx))+1:0,I=$0(ie,ce);e(k=>({...k,battleParams:[...k.battleParams||[],I]}))},M=ie=>{e(F=>({...F,battleParams:(F.battleParams||[]).filter(ce=>ce.id!==ie)}))},X=(ie,F)=>{let ce=null;switch(ie){case"standbySkillSet":ce="standbySkillSets";break;case"finishSkillSet":ce="finishSkillSets";break;case"finishSpecial":ce="finishSpecials";break;case"battleParam":e(I=>({...I,battleParams:(I.battleParams||[]).filter(k=>k.param_no!==F)})),f===F&&(g(null),r(null));return}if(ce){const I=ce;e(k=>({...k,[I]:(k[I]||[]).filter(O=>O.id!==F)})),o===F&&(u(null),r(null))}},Q=(ie,F)=>{if(!F)return;if((i.standbySkillSetFinishSkillSetRelations||[]).some(k=>k.standby_skill_set_id===ie&&k.finish_skill_set_id===F)){alert("This Finish Skill Set is already linked.");return}const I=YN(ie,F);e(k=>({...k,standbySkillSetFinishSkillSetRelations:[...k.standbySkillSetFinishSkillSetRelations||[],I]}))},$=ie=>{e(F=>({...F,standbySkillSetFinishSkillSetRelations:(F.standbySkillSetFinishSkillSetRelations||[]).filter(ce=>ce.id!==ie)}))},re=(ie,F,ce,I)=>S.jsxs("div",{className:"mb-6 p-4 bg-indigo-800 bg-opacity-40 rounded-lg shadow-lg border border-indigo-600",children:[S.jsx("h3",{className:"text-xl font-bold mb-3 text-orange-400 font-rajdhani",children:ie}),S.jsxs("button",{onClick:()=>y(F),className:"mb-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all",children:[S.jsx("i",{className:"fas fa-plus mr-1.5"})," Add New"]}),S.jsxs("ul",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[ce.map(k=>S.jsxs("li",{className:`p-2.5 rounded-md cursor-pointer flex justify-between items-center transition-all duration-150 ease-in-out shadow-sm hover:shadow-md font-rajdhani text-sm
                          ${n===F&&I===k.id?"bg-orange-500 text-white ring-1 ring-orange-300":"bg-indigo-700 hover:bg-indigo-600 hover:text-orange-300"}`,onClick:()=>p(F,k.id),children:[S.jsxs("span",{className:"truncate",children:[S.jsx("span",{className:"font-roboto-mono text-xs opacity-70 mr-1",children:k.id})," - ",k.name||"Unnamed"]}),S.jsx("button",{onClick:O=>{O.stopPropagation(),X(F,k.id)},className:"text-red-300 hover:text-red-500 hover:bg-red-700 hover:bg-opacity-40 rounded-full p-0.5 px-1.5 text-xs transition-colors",children:S.jsx("i",{className:"fas fa-trash"})})]},k.id)),ce.length===0&&S.jsx("p",{className:"text-xs text-indigo-300 italic",children:"No items yet."})]})]}),pe=()=>{const ie=Array.from(new Set((i.battleParams||[]).map(F=>F.param_no))).sort((F,ce)=>F-ce);return S.jsxs("div",{className:"mb-6 p-4 bg-indigo-800 bg-opacity-40 rounded-lg shadow-lg border border-indigo-600",children:[S.jsx("h3",{className:"text-xl font-bold mb-3 text-orange-400 font-rajdhani",children:"Battle Param Sets (by param_no)"}),S.jsxs("button",{onClick:()=>y("battleParam"),className:"mb-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all",children:[S.jsx("i",{className:"fas fa-plus mr-1.5"})," Add New Param Set"]}),S.jsxs("ul",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[ie.map(F=>S.jsxs("li",{className:`p-2.5 rounded-md cursor-pointer flex justify-between items-center transition-all duration-150 ease-in-out shadow-sm hover:shadow-md font-rajdhani text-sm
                                ${n==="battleParam"&&f===F?"bg-orange-500 text-white ring-1 ring-orange-300":"bg-indigo-700 hover:bg-indigo-600 hover:text-orange-300"}`,onClick:()=>p("battleParam",F),children:[S.jsxs("span",{children:["Param No: ",S.jsx("span",{className:"font-roboto-mono",children:F})," (",(i.battleParams||[]).filter(ce=>ce.param_no===F).length," entries)"]}),S.jsx("button",{onClick:ce=>{ce.stopPropagation(),X("battleParam",F)},className:"text-red-300 hover:text-red-500 hover:bg-red-700 hover:bg-opacity-40 rounded-full p-0.5 px-1.5 text-xs transition-colors",children:S.jsx("i",{className:"fas fa-trash"})})]},F)),ie.length===0&&S.jsx("p",{className:"text-xs text-indigo-300 italic",children:"No Battle Param sets yet."})]})]})},_e=()=>{if(!n||o===null&&f===null)return S.jsx("p",{className:"text-center text-indigo-300 font-rajdhani text-lg italic mt-10",children:"Select an item or create a new one to start editing."});let ie;if(!(n==="battleParam"&&f!==null)){if(o!==null)switch(n){case"standbySkillSet":ie=(i.standbySkillSets||[]).find(F=>F.id===o);break;case"finishSkillSet":ie=(i.finishSkillSets||[]).find(F=>F.id===o);break;case"finishSpecial":ie=(i.finishSpecials||[]).find(F=>F.id===o);break}}if(n!=="battleParam"&&!ie)return u(null),r(null),S.jsx("p",{className:"text-red-400",children:"Error: Selected item not found."});switch(n){case"standbySkillSet":const F=ie,ce=(i.standbySkillSetFinishSkillSetRelations||[]).filter(C=>C.standby_skill_set_id===F.id).map(C=>({relationId:C.id,finishSet:(i.finishSkillSets||[]).find(L=>L.id===C.finish_skill_set_id)})).filter(C=>C.finishSet);return S.jsxs("div",{className:"p-5 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[S.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Standby Skill Set: ",S.jsx("span",{className:"text-indigo-200",children:F.name})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mb-4",children:[S.jsx(ve,{label:"ID",value:F.id,onChange:C=>E("standbySkillSets",{...F,id:C}),className:"font-roboto-mono"}),S.jsx(ve,{label:"Name",value:F.name,onChange:C=>E("standbySkillSets",{...F,name:C})}),S.jsx(ve,{label:"Ingame Icon Path",value:F.ingame_icon_path,onChange:C=>E("standbySkillSets",{...F,ingame_icon_path:C})}),S.jsx(ve,{label:"Execution Limit",type:"number",value:F.exec_limit,onChange:C=>E("standbySkillSets",{...F,exec_limit:Number(C)})}),S.jsx(ve,{label:"Special View ID",type:"number",value:F.special_view_id??"",onChange:C=>E("standbySkillSets",{...F,special_view_id:C?Number(C):null}),placeholder:"Optional"}),S.jsx(ve,{label:"Costume Special View ID",type:"number",value:F.costume_special_view_id,onChange:C=>E("standbySkillSets",{...F,costume_special_view_id:Number(C)})}),S.jsx(ve,{label:"BGM ID",type:"number",value:F.bgm_id??"",onChange:C=>E("standbySkillSets",{...F,bgm_id:C?Number(C):null}),placeholder:"Optional",className:"font-roboto-mono"}),S.jsx(ii,{label:"Effect Description",value:F.effect_description,onChange:C=>E("standbySkillSets",{...F,effect_description:C}),rows:3,className:"md:col-span-2"}),S.jsx(ii,{label:"Condition Description",value:F.condition_description,onChange:C=>E("standbySkillSets",{...F,condition_description:C}),rows:3,className:"md:col-span-2"}),S.jsx(ii,{label:"Causality Conditions (JSON)",value:F.causality_conditions||"",onChange:C=>E("standbySkillSets",{...F,causality_conditions:C||null}),rows:2,className:"md:col-span-2 font-roboto-mono"})]}),S.jsx(il,{skillSetId:F.id,skills:F.skills||[],updateSkills:C=>E("standbySkillSets",{...F,skills:C}),initialSkillFactory:()=>HN(F.id),skillName:"Standby Skill Effect"}),S.jsxs("div",{className:"mt-6 pt-4 border-t border-indigo-600",children:[S.jsx("h5",{className:"text-lg font-semibold mb-2 text-orange-300 font-rajdhani",children:"Link Finish Skill Set"}),S.jsx("div",{className:"flex items-end gap-2 mb-3",children:S.jsx(rn,{label:"Available Finish Skill Sets",value:"",onChange:C=>Q(F.id,C),options:[{label:"Select Finish Set to Link...",value:""},...(i.finishSkillSets||[]).map(C=>({label:`${C.id} - ${C.name}`,value:C.id}))],className:"flex-grow"})}),ce.length>0&&S.jsx("p",{className:"text-sm text-indigo-200 mb-1",children:"Linked Sets:"}),S.jsx("ul",{className:"space-y-1",children:ce.map(C=>C.finishSet&&S.jsxs("li",{className:"flex justify-between items-center text-xs p-1.5 bg-indigo-700 bg-opacity-30 rounded",children:[S.jsxs("span",{children:[C.finishSet.id," - ",C.finishSet.name]}),S.jsx("button",{onClick:()=>$(C.relationId),className:"text-red-400 hover:text-red-500 text-xs p-0.5",children:S.jsx("i",{className:"fas fa-unlink"})})]},C.relationId))})]})]});case"finishSkillSet":const I=ie;return S.jsxs("div",{className:"p-5 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[S.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Finish Skill Set: ",S.jsx("span",{className:"text-indigo-200",children:I.name})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mb-4",children:[S.jsx(ve,{label:"ID",value:I.id,onChange:C=>E("finishSkillSets",{...I,id:C}),className:"font-roboto-mono"}),S.jsx(ve,{label:"Name",value:I.name,onChange:C=>E("finishSkillSets",{...I,name:C})}),S.jsx(ve,{label:"Dialog Order",type:"number",value:I.dialog_order,onChange:C=>E("finishSkillSets",{...I,dialog_order:Number(C)})}),S.jsx(ve,{label:"Execution Timing Type",type:"number",value:I.exec_timing_type,onChange:C=>E("finishSkillSets",{...I,exec_timing_type:Number(C)})}),S.jsx(ve,{label:"Execution Limit",type:"number",value:I.exec_limit,onChange:C=>E("finishSkillSets",{...I,exec_limit:Number(C)})}),S.jsx(rn,{label:"Finish Special ID",value:I.finish_special_id||"",onChange:C=>E("finishSkillSets",{...I,finish_special_id:C||null}),options:[{label:"None",value:""},...(i.finishSpecials||[]).map(C=>({label:`${C.id} (Rate: ${C.increase_rate})`,value:C.id}))],className:"font-roboto-mono",isOptional:!0}),S.jsx(ve,{label:"Special View ID",type:"number",value:I.special_view_id??"",onChange:C=>E("finishSkillSets",{...I,special_view_id:C?Number(C):null}),placeholder:"Optional"}),S.jsx(ve,{label:"Costume Special View ID",type:"number",value:I.costume_special_view_id,onChange:C=>E("finishSkillSets",{...I,costume_special_view_id:Number(C)})}),S.jsx(ve,{label:"BGM ID",type:"number",value:I.bgm_id??"",onChange:C=>E("finishSkillSets",{...I,bgm_id:C?Number(C):null}),placeholder:"Optional",className:"font-roboto-mono"}),S.jsx(Fp,{label:"Is Dialog View Visible",checked:I.is_dialog_view_visible===1,onChange:C=>E("finishSkillSets",{...I,is_dialog_view_visible:C?1:0})}),S.jsx(ii,{label:"Effect Description",value:I.effect_description,onChange:C=>E("finishSkillSets",{...I,effect_description:C}),rows:3,className:"md:col-span-2"}),S.jsx(ii,{label:"Condition Description",value:I.condition_description,onChange:C=>E("finishSkillSets",{...I,condition_description:C}),rows:3,className:"md:col-span-2"}),S.jsx(ii,{label:"Dialog Images (JSON)",value:I.dialog_images||"",onChange:C=>E("finishSkillSets",{...I,dialog_images:C||null}),rows:2,className:"md:col-span-2 font-roboto-mono"}),S.jsx(ii,{label:"Causality Conditions (JSON)",value:I.causality_conditions||"",onChange:C=>E("finishSkillSets",{...I,causality_conditions:C||null}),rows:2,className:"md:col-span-2 font-roboto-mono"})]}),S.jsx(il,{skillSetId:I.id,skills:I.skills||[],updateSkills:C=>E("finishSkillSets",{...I,skills:C}),initialSkillFactory:()=>KN(I.id),skillName:"Finish Skill Effect"})]});case"finishSpecial":const k=ie;return S.jsxs("div",{className:"p-5 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[S.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Finish Special: ",S.jsx("span",{className:"text-indigo-200",children:k.id})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[S.jsx(ve,{label:"ID",value:k.id,onChange:C=>E("finishSpecials",{...k,id:C}),className:"font-roboto-mono"}),S.jsx(ve,{label:"Increase Rate",type:"number",value:k.increase_rate,onChange:C=>E("finishSpecials",{...k,increase_rate:Number(C)})}),S.jsx(ve,{label:"Aim Target",type:"number",value:k.aim_target,onChange:C=>E("finishSpecials",{...k,aim_target:Number(C)})})]})]});case"battleParam":if(f===null)return S.jsx("p",{children:"Select a Battle Param Set number."});const O=(i.battleParams||[]).filter(C=>C.param_no===f).sort((C,L)=>C.idx-L.idx);return S.jsxs("div",{className:"p-5 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[S.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Battle Param Set: ",S.jsx("span",{className:"text-indigo-200 font-roboto-mono",children:f})]}),S.jsxs("button",{onClick:()=>N(f),className:"mb-4 bg-green-500 hover:bg-green-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all",children:[S.jsx("i",{className:"fas fa-plus mr-1.5"})," Add Param Entry"]}),O.map((C,L)=>S.jsxs("div",{className:"grid grid-cols-3 gap-x-4 gap-y-2 items-center mb-2 p-2 bg-indigo-700 bg-opacity-30 rounded",children:[S.jsx(ve,{label:`ID (Row ${L+1})`,value:C.id,onChange:q=>A({...C,id:q}),disabled:!0,className:"font-roboto-mono text-xs"}),S.jsx(ve,{label:"Index (idx)",type:"number",value:C.idx,onChange:q=>A({...C,idx:Number(q)})}),S.jsxs("div",{className:"flex items-end",children:[S.jsx(ve,{label:"Value",value:C.value,onChange:q=>A({...C,value:isNaN(Number(q))?q:Number(q)})}),S.jsx("button",{onClick:()=>M(C.id),className:"ml-2 text-red-400 hover:text-red-500 p-1.5 h-[38px] bg-red-700 bg-opacity-20 hover:bg-opacity-40 rounded",children:S.jsx("i",{className:"fas fa-times"})})]})]},C.id)),O.length===0&&S.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No parameters in this set yet."})]});default:return null}};return S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-6",children:[S.jsxs("div",{className:"md:col-span-1 space-y-4",children:[re("Standby Skill Sets","standbySkillSet",i.standbySkillSets||[],o),re("Finish Skill Sets","finishSkillSet",i.finishSkillSets||[],o),re("Finish Specials","finishSpecial",i.finishSpecials||[],o),pe()]}),S.jsx("div",{className:"md:col-span-2",children:_e()})]})},aD=({patchState:i,setPatchState:e})=>{Oe.useEffect(()=>{i.isEZA&&i.baseCardIdForEZA&&oa(i.baseCardIdForEZA)&&e(u=>{if(!u.optimalAwakeningGrowth)return u;const f=Mt.OPTIMAL_AWAKENING_GROWTH_ID+u.baseCardIdForEZA,g=Mt.OPTIMAL_AWAKENING_GROWTH_TYPE_ID+u.baseCardIdForEZA;let y=!1;const p={...u.optimalAwakeningGrowth};return oa(p.id)&&p.id!==f&&(p.id=f,y=!0),oa(p.optimal_awakening_grow_type)&&p.optimal_awakening_grow_type!==g&&(p.optimal_awakening_grow_type=g,y=!0),y?{...u,optimalAwakeningGrowth:p}:u})},[i.isEZA,i.baseCardIdForEZA,e]);const n=u=>{e(f=>{const g=f.baseCardIdForEZA||(f.cardForms.length>0?f.cardForms[0].id:ri()),y=Mt.OPTIMAL_AWAKENING_GROWTH_ID+g,p=Mt.OPTIMAL_AWAKENING_GROWTH_TYPE_ID+g;return{...f,isEZA:u,baseCardIdForEZA:u&&!f.baseCardIdForEZA?g:f.baseCardIdForEZA,optimalAwakeningGrowth:u?f.optimalAwakeningGrowth||{id:y,optimal_awakening_grow_type:p,step:7,lv_max:140,skill_lv_max:15,passive_skill_set_id:"",leader_skill_set_id:""}:void 0}})},r=u=>{e(f=>({...f,baseCardIdForEZA:u}))},o=(u,f)=>{e(g=>({...g,optimalAwakeningGrowth:g.optimalAwakeningGrowth?{...g.optimalAwakeningGrowth,[u]:f}:void 0}))};return S.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-30 rounded-xl shadow-xl border border-indigo-700",children:[S.jsx("h2",{className:"text-3xl font-bold mb-8 text-orange-400 font-rajdhani border-b-2 border-orange-500 pb-2",children:"Extreme Z-Awakening (EZA) Details"}),S.jsx(Fp,{label:"Is this an EZA patch?",checked:i.isEZA,onChange:n,className:"mb-6 text-lg"}),i.isEZA&&S.jsxs("div",{className:"mt-6 space-y-6",children:[S.jsx(ve,{label:"Base Card ID for EZA",value:i.baseCardIdForEZA||"",onChange:r,placeholder:"e.g., 1024061 (Original Card ID)",helpText:"The ID of the card that is being EZA'd. This is used in the `UPDATE cards ...` statement.",className:"font-roboto-mono"}),i.optimalAwakeningGrowth&&S.jsxs("div",{className:"p-6 border-2 border-orange-500 border-opacity-60 rounded-lg bg-indigo-700 bg-opacity-30 shadow-lg",children:[S.jsx("h3",{className:"text-2xl font-semibold mb-6 text-orange-300 font-rajdhani",children:"Optimal Awakening Growth Details"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[S.jsx(ve,{label:"Row ID (optimal_awakening_growths table PK)",value:i.optimalAwakeningGrowth.id,onChange:u=>o("id",u),placeholder:"e.g., 1025731 (often related to card ID)",className:"font-roboto-mono"}),S.jsx(ve,{label:"Growth Type Key (links to cards.optimal_awakening_grow_type)",value:i.optimalAwakeningGrowth.optimal_awakening_grow_type,onChange:u=>o("optimal_awakening_grow_type",u),placeholder:"e.g., 102573 or oag_type_XYZ",className:"font-roboto-mono"}),S.jsx(ve,{label:"Step (EZA Marker)",type:"number",value:i.optimalAwakeningGrowth.step,onChange:u=>o("step",Number(u)),helpText:"Typically 3 for LR EZA, 7 for TUR EZA."}),S.jsx(ve,{label:"New Max Level",type:"number",value:i.optimalAwakeningGrowth.lv_max,onChange:u=>o("lv_max",Number(u)),helpText:"e.g., 150 for LR EZA, 140 for TUR EZA."}),S.jsx(ve,{label:"New Max Skill Level",type:"number",value:i.optimalAwakeningGrowth.skill_lv_max,onChange:u=>o("skill_lv_max",Number(u)),helpText:"e.g., 25 for LR EZA, 15 for TUR EZA."}),S.jsx(rn,{label:"New Passive Skill Set ID",value:i.optimalAwakeningGrowth.passive_skill_set_id,onChange:u=>o("passive_skill_set_id",u),options:i.passiveSkillSets.map(u=>({label:`${u.id} - ${u.name}`,value:u.id})),allowCustom:!0,customLabel:"Enter Custom Passive Set ID",helpText:"Select or enter the ID of the new Passive Skill Set for the EZA.",className:"font-roboto-mono"}),S.jsx(rn,{label:"New/Existing Leader Skill Set ID",value:i.optimalAwakeningGrowth.leader_skill_set_id,onChange:u=>o("leader_skill_set_id",u),options:i.leaderSkillSets.map(u=>({label:`${u.id} - ${u.name}`,value:u.id})),allowCustom:!0,customLabel:"Enter Custom Leader Set ID",helpText:"Select or enter the ID of the Leader Skill Set (can be original or new).",className:"font-roboto-mono"})]})]})]})]})},rD=({patchState:i,setPatchState:e})=>{const n=(g,y)=>{e(p=>{const A=[...p[g]||[],y()];return{...p,[g]:A}})},r=(g,y,p,E)=>{e(A=>{const M=A[g].map((X,Q)=>Q===y?{...X,[p]:E}:X);return{...A,[g]:M}})},o=(g,y)=>{e(p=>{const A=p[g].filter((N,M)=>M!==y);return{...p,[g]:A}})},u=()=>({id:ri(),script_name:"",lite_flicker_rate:0,bgm_id:null}),f=()=>({id:ri(),category:1,name:"",pack_name:"",scene_name:"",red:255,green:255,blue:255,alpha:255,lite_flicker_rate:0});return S.jsxs("div",{className:"space-y-10",children:[S.jsx("h2",{className:"text-3xl font-bold text-orange-400 font-rajdhani border-b-2 border-orange-500 pb-2 mb-8",children:"Miscellaneous Table Entries"}),S.jsxs("section",{className:"p-6 bg-indigo-800 bg-opacity-30 rounded-xl shadow-xl border border-indigo-700",children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("h3",{className:"text-2xl font-semibold text-orange-300 font-rajdhani",children:"Passive Skill Effects (passive_skill_effects)"}),S.jsxs("button",{onClick:()=>n("passiveSkillEffects",u),className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-md hover:shadow-lg transition-all",children:[S.jsx("i",{className:"fas fa-plus mr-1"})," Add Effect"]})]}),i.passiveSkillEffects.map((g,y)=>S.jsxs("div",{className:"mb-4 p-4 bg-indigo-700 bg-opacity-40 rounded-lg grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-3 relative border border-indigo-600 shadow-sm",children:[S.jsx("button",{onClick:()=>o("passiveSkillEffects",y),className:"absolute top-2 right-2 text-red-300 hover:text-red-400 text-xs p-1 bg-red-700 bg-opacity-30 hover:bg-opacity-50 rounded-full transition-colors",children:S.jsx("i",{className:"fas fa-times"})}),S.jsx(ve,{label:"ID",value:g.id,onChange:p=>r("passiveSkillEffects",y,"id",p),className:"font-roboto-mono"}),S.jsx(ve,{label:"Script Name",value:g.script_name,onChange:p=>r("passiveSkillEffects",y,"script_name",p)}),S.jsx(ve,{label:"Lite Flicker Rate",type:"number",value:g.lite_flicker_rate,onChange:p=>r("passiveSkillEffects",y,"lite_flicker_rate",Number(p))}),S.jsx(ve,{label:"BGM ID (Optional)",type:"number",value:g.bgm_id??"",onChange:p=>r("passiveSkillEffects",y,"bgm_id",p?Number(p):null),className:"font-roboto-mono"})]},g.id||y)),i.passiveSkillEffects.length===0&&S.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No passive skill effects added."})]}),S.jsxs("section",{className:"p-6 bg-indigo-800 bg-opacity-30 rounded-xl shadow-xl border border-indigo-700",children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("h3",{className:"text-2xl font-semibold text-orange-300 font-rajdhani",children:"Effect Packs (effect_packs)"}),S.jsxs("button",{onClick:()=>n("effectPacks",f),className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-md hover:shadow-lg transition-all",children:[S.jsx("i",{className:"fas fa-plus mr-1"})," Add Pack"]})]}),i.effectPacks.map((g,y)=>S.jsxs("div",{className:"mb-4 p-4 bg-indigo-700 bg-opacity-40 rounded-lg grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-x-6 gap-y-3 relative border border-indigo-600 shadow-sm",children:[S.jsx("button",{onClick:()=>o("effectPacks",y),className:"absolute top-2 right-2 text-red-300 hover:text-red-400 text-xs p-1 bg-red-700 bg-opacity-30 hover:bg-opacity-50 rounded-full transition-colors",children:S.jsx("i",{className:"fas fa-times"})}),S.jsx(ve,{label:"ID",value:g.id,onChange:p=>r("effectPacks",y,"id",p),className:"font-roboto-mono"}),S.jsx(ve,{label:"Category",type:"number",value:g.category,onChange:p=>r("effectPacks",y,"category",Number(p))}),S.jsx(ve,{label:"Name",value:g.name,onChange:p=>r("effectPacks",y,"name",p)}),S.jsx(ve,{label:"Pack Name",value:g.pack_name,onChange:p=>r("effectPacks",y,"pack_name",p)}),S.jsx(ve,{label:"Scene Name",value:g.scene_name,onChange:p=>r("effectPacks",y,"scene_name",p)}),S.jsx(ve,{label:"Red",type:"number",value:g.red,onChange:p=>r("effectPacks",y,"red",Number(p))}),S.jsx(ve,{label:"Green",type:"number",value:g.green,onChange:p=>r("effectPacks",y,"green",Number(p))}),S.jsx(ve,{label:"Blue",type:"number",value:g.blue,onChange:p=>r("effectPacks",y,"blue",Number(p))}),S.jsx(ve,{label:"Alpha",type:"number",value:g.alpha,onChange:p=>r("effectPacks",y,"alpha",Number(p))}),S.jsx(ve,{label:"Lite Flicker Rate",type:"number",value:g.lite_flicker_rate,onChange:p=>r("effectPacks",y,"lite_flicker_rate",Number(p))})]},g.id||y)),i.effectPacks.length===0&&S.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No effect packs added."})]})]})};var cm={exports:{}};const sD={},oD=Object.freeze(Object.defineProperty({__proto__:null,default:sD},Symbol.toStringTag,{value:"Module"})),dm=Tw(oD);var Y0;function lD(){return Y0||(Y0=1,function(i,e){var n=void 0,r=function(o){return n||(n=new Promise(function(u,f){var g=typeof o<"u"?o:{},y=g.onAbort;g.onAbort=function(h){f(new Error(h)),y&&y(h)},g.postRun=g.postRun||[],g.postRun.push(function(){u(g)}),i=void 0;var p;p||(p=typeof g<"u"?g:{}),p.onRuntimeInitialized=function(){function h(V,ne){switch(typeof ne){case"boolean":T(V,ne?1:0);break;case"number":wo(V,ne);break;case"string":c(V,ne,-1,-1);break;case"object":if(ne===null)Si(V);else if(ne.length!=null){var Ie=wr(ne,Tr);v(V,Ie,ne.length,-1),Rn(Ie)}else D(V,"Wrong API use : tried to return a value of an unknown type ("+ne+").",-1);break;default:Si(V)}}function _(V,ne){for(var Ie=[],Ae=0;Ae<V;Ae+=1){var Pe=on(ne+4*Ae,"i32"),$e=Eo(Pe);if($e===1||$e===2)Pe=To(Pe);else if($e===3)Pe=Dr(Pe);else if($e===4){$e=Pe,Pe=So($e),$e=kn($e);for(var tn=new Uint8Array(Pe),Tt=0;Tt<Pe;Tt+=1)tn[Tt]=C[$e+Tt];Pe=tn}else Pe=null;Ie.push(Pe)}return Ie}function b(V,ne){this.La=V,this.db=ne,this.Ja=1,this.fb=[]}function R(V,ne){if(this.db=ne,ne=Kt(V)+1,this.Ya=zn(ne),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");Xi(V,L,this.Ya,ne),this.eb=this.Ya,this.Ua=this.ib=null}function U(V){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),V!=null){var ne=this.filename,Ie="/",Ae=ne;if(Ie&&(Ie=typeof Ie=="string"?Ie:_a(Ie),Ae=ne?st(Ie+"/"+ne):Ie),ne=vr(!0,!0),Ae=ba(Ae,(ne!==void 0?ne:438)&4095|32768,0),V){if(typeof V=="string"){Ie=Array(V.length);for(var Pe=0,$e=V.length;Pe<$e;++Pe)Ie[Pe]=V.charCodeAt(Pe);V=Ie}ti(Ae,ne|146),Ie=oi(Ae,577),Ga(Ie,V,0,V.length,0),Er(Ie),ti(Ae,ne)}}this.handleError(Le(this.filename,Z)),this.db=on(Z,"i32"),ee(this.db),this.Za={},this.Na={}}var Z=Sn(4),le=p.cwrap,Le=le("sqlite3_open","number",["string","number"]),tt=le("sqlite3_close_v2","number",["number"]),Ve=le("sqlite3_exec","number",["number","string","number","number","number"]),Rt=le("sqlite3_changes","number",["number"]),bt=le("sqlite3_prepare_v2","number",["number","string","number","number","number"]),xs=le("sqlite3_sql","string",["number"]),Sl=le("sqlite3_normalized_sql","string",["number"]),xa=le("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Ir=le("sqlite3_bind_text","number",["number","number","number","number","number"]),Cr=le("sqlite3_bind_blob","number",["number","number","number","number","number"]),xr=le("sqlite3_bind_double","number",["number","number","number"]),po=le("sqlite3_bind_int","number",["number","number","number"]),Rr=le("sqlite3_bind_parameter_index","number",["number","string"]),Tl=le("sqlite3_step","number",["number"]),Rs=le("sqlite3_errmsg","string",["number"]),Ya=le("sqlite3_column_count","number",["number"]),go=le("sqlite3_data_count","number",["number"]),_o=le("sqlite3_column_double","number",["number","number"]),kr=le("sqlite3_column_text","string",["number","number"]),Qa=le("sqlite3_column_blob","number",["number","number"]),yo=le("sqlite3_column_bytes","number",["number","number"]),Nr=le("sqlite3_column_type","number",["number","number"]),vo=le("sqlite3_column_name","string",["number","number"]),ks=le("sqlite3_reset","number",["number"]),ia=le("sqlite3_clear_bindings","number",["number"]),bo=le("sqlite3_finalize","number",["number"]),Ns=le("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Eo=le("sqlite3_value_type","number",["number"]),So=le("sqlite3_value_bytes","number",["number"]),Dr=le("sqlite3_value_text","string",["number"]),kn=le("sqlite3_value_blob","number",["number"]),To=le("sqlite3_value_double","number",["number"]),wo=le("sqlite3_result_double","",["number","number"]),Si=le("sqlite3_result_null","",["number"]),c=le("sqlite3_result_text","",["number","string","number","number"]),v=le("sqlite3_result_blob","",["number","number","number","number"]),T=le("sqlite3_result_int","",["number","number"]),D=le("sqlite3_result_error","",["number","string","number"]),G=le("sqlite3_aggregate_context","number",["number","number"]),ee=le("RegisterExtensionFunctions","number",["number"]);b.prototype.bind=function(V){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(V)?this.wb(V):V!=null&&typeof V=="object"?this.xb(V):!0},b.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var V=Tl(this.La);switch(V){case 100:return!0;case 101:return!1;default:throw this.db.handleError(V)}},b.prototype.rb=function(V){return V==null&&(V=this.Ja,this.Ja+=1),_o(this.La,V)},b.prototype.Ab=function(V){if(V==null&&(V=this.Ja,this.Ja+=1),V=kr(this.La,V),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(V)},b.prototype.Bb=function(V){return V==null&&(V=this.Ja,this.Ja+=1),kr(this.La,V)},b.prototype.getBlob=function(V){V==null&&(V=this.Ja,this.Ja+=1);var ne=yo(this.La,V);V=Qa(this.La,V);for(var Ie=new Uint8Array(ne),Ae=0;Ae<ne;Ae+=1)Ie[Ae]=C[V+Ae];return Ie},b.prototype.get=function(V,ne){ne=ne||{},V!=null&&this.bind(V)&&this.step(),V=[];for(var Ie=go(this.La),Ae=0;Ae<Ie;Ae+=1)switch(Nr(this.La,Ae)){case 1:var Pe=ne.useBigInt?this.Ab(Ae):this.rb(Ae);V.push(Pe);break;case 2:V.push(this.rb(Ae));break;case 3:V.push(this.Bb(Ae));break;case 4:V.push(this.getBlob(Ae));break;default:V.push(null)}return V},b.prototype.getColumnNames=function(){for(var V=[],ne=Ya(this.La),Ie=0;Ie<ne;Ie+=1)V.push(vo(this.La,Ie));return V},b.prototype.getAsObject=function(V,ne){V=this.get(V,ne),ne=this.getColumnNames();for(var Ie={},Ae=0;Ae<ne.length;Ae+=1)Ie[ne[Ae]]=V[Ae];return Ie},b.prototype.getSQL=function(){return xs(this.La)},b.prototype.getNormalizedSQL=function(){return Sl(this.La)},b.prototype.run=function(V){return V!=null&&this.bind(V),this.step(),this.reset()},b.prototype.nb=function(V,ne){ne==null&&(ne=this.Ja,this.Ja+=1),V=fo(V);var Ie=wr(V,Tr);this.fb.push(Ie),this.db.handleError(Ir(this.La,ne,Ie,V.length-1,0))},b.prototype.vb=function(V,ne){ne==null&&(ne=this.Ja,this.Ja+=1);var Ie=wr(V,Tr);this.fb.push(Ie),this.db.handleError(Cr(this.La,ne,Ie,V.length,0))},b.prototype.mb=function(V,ne){ne==null&&(ne=this.Ja,this.Ja+=1),this.db.handleError((V===(V|0)?po:xr)(this.La,ne,V))},b.prototype.yb=function(V){V==null&&(V=this.Ja,this.Ja+=1),Cr(this.La,V,0,0,0)},b.prototype.ob=function(V,ne){switch(ne==null&&(ne=this.Ja,this.Ja+=1),typeof V){case"string":this.nb(V,ne);return;case"number":this.mb(V,ne);return;case"bigint":this.nb(V.toString(),ne);return;case"boolean":this.mb(V+0,ne);return;case"object":if(V===null){this.yb(ne);return}if(V.length!=null){this.vb(V,ne);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+V+")."},b.prototype.xb=function(V){var ne=this;return Object.keys(V).forEach(function(Ie){var Ae=Rr(ne.La,Ie);Ae!==0&&ne.ob(V[Ie],Ae)}),!0},b.prototype.wb=function(V){for(var ne=0;ne<V.length;ne+=1)this.ob(V[ne],ne+1);return!0},b.prototype.reset=function(){return this.freemem(),ia(this.La)===0&&ks(this.La)===0},b.prototype.freemem=function(){for(var V;(V=this.fb.pop())!==void 0;)Rn(V)},b.prototype.free=function(){this.freemem();var V=bo(this.La)===0;return delete this.db.Za[this.La],this.La=0,V},R.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var V=Fn(),ne=Sn(4);Gt(Z),Gt(ne);try{this.db.handleError(xa(this.db.db,this.eb,-1,Z,ne)),this.eb=on(ne,"i32");var Ie=on(Z,"i32");return Ie===0?(this.gb(),{done:!0}):(this.Ua=new b(Ie,this.db),this.db.Za[Ie]=this.Ua,{value:this.Ua,done:!1})}catch(Ae){throw this.ib=jn(this.eb),this.gb(),Ae}finally{di(V)}},R.prototype.gb=function(){Rn(this.Ya),this.Ya=null},R.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:jn(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(R.prototype[Symbol.iterator]=function(){return this}),U.prototype.run=function(V,ne){if(!this.db)throw"Database closed";if(ne){V=this.prepare(V,ne);try{V.step()}finally{V.free()}}else this.handleError(Ve(this.db,V,0,0,Z));return this},U.prototype.exec=function(V,ne,Ie){if(!this.db)throw"Database closed";var Ae=Fn(),Pe=null;try{var $e=$a(V),tn=Sn(4);for(V=[];on($e,"i8")!==0;){Gt(Z),Gt(tn),this.handleError(xa(this.db,$e,-1,Z,tn));var Tt=on(Z,"i32");if($e=on(tn,"i32"),Tt!==0){var Ft=null;for(Pe=new b(Tt,this),ne!=null&&Pe.bind(ne);Pe.step();)Ft===null&&(Ft={columns:Pe.getColumnNames(),values:[]},V.push(Ft)),Ft.values.push(Pe.get(null,Ie));Pe.free()}}return V}catch(Nn){throw Pe&&Pe.free(),Nn}finally{di(Ae)}},U.prototype.each=function(V,ne,Ie,Ae,Pe){typeof ne=="function"&&(Ae=Ie,Ie=ne,ne=void 0),V=this.prepare(V,ne);try{for(;V.step();)Ie(V.getAsObject(null,Pe))}finally{V.free()}if(typeof Ae=="function")return Ae()},U.prototype.prepare=function(V,ne){if(Gt(Z),this.handleError(bt(this.db,V,-1,Z,0)),V=on(Z,"i32"),V===0)throw"Nothing to prepare";var Ie=new b(V,this);return ne!=null&&Ie.bind(ne),this.Za[V]=Ie},U.prototype.iterateStatements=function(V){return new R(V,this)},U.prototype.export=function(){Object.values(this.Za).forEach(function(ne){ne.free()}),Object.values(this.Na).forEach(qn),this.Na={},this.handleError(tt(this.db));var V=Is(this.filename);return this.handleError(Le(this.filename,Z)),this.db=on(Z,"i32"),ee(this.db),V},U.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(V){V.free()}),Object.values(this.Na).forEach(qn),this.Na={},this.handleError(tt(this.db)),As("/"+this.filename),this.db=null)},U.prototype.handleError=function(V){if(V===0)return null;throw V=Rs(this.db),Error(V)},U.prototype.getRowsModified=function(){return Rt(this.db)},U.prototype.create_function=function(V,ne){Object.prototype.hasOwnProperty.call(this.Na,V)&&(qn(this.Na[V]),delete this.Na[V]);var Ie=ci(function(Ae,Pe,$e){Pe=_(Pe,$e);try{var tn=ne.apply(null,Pe)}catch(Tt){D(Ae,Tt,-1);return}h(Ae,tn)},"viii");return this.Na[V]=Ie,this.handleError(Ns(this.db,V,ne.length,1,0,Ie,0,0,0)),this},U.prototype.create_aggregate=function(V,ne){var Ie=ne.init||function(){return null},Ae=ne.finalize||function(Ft){return Ft},Pe=ne.step;if(!Pe)throw"An aggregate function must have a step function in "+V;var $e={};Object.hasOwnProperty.call(this.Na,V)&&(qn(this.Na[V]),delete this.Na[V]),ne=V+"__finalize",Object.hasOwnProperty.call(this.Na,ne)&&(qn(this.Na[ne]),delete this.Na[ne]);var tn=ci(function(Ft,Nn,Or){var Ra=G(Ft,1);Object.hasOwnProperty.call($e,Ra)||($e[Ra]=Ie()),Nn=_(Nn,Or),Nn=[$e[Ra]].concat(Nn);try{$e[Ra]=Pe.apply(null,Nn)}catch(Gu){delete $e[Ra],D(Ft,Gu,-1)}},"viii"),Tt=ci(function(Ft){var Nn=G(Ft,1);try{var Or=Ae($e[Nn])}catch(Ra){delete $e[Nn],D(Ft,Ra,-1);return}h(Ft,Or),delete $e[Nn]},"vi");return this.Na[V]=tn,this.Na[ne]=Tt,this.handleError(Ns(this.db,V,Pe.length-1,1,0,0,tn,Tt,0)),this},p.Database=U};var E=Object.assign({},p),A="./this.program",N=typeof window=="object",M=typeof importScripts=="function",X=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Q="",$,re,pe;if(X){var _e=dm,ie=dm;Q=M?ie.dirname(Q)+"/":__dirname+"/",$=(h,_)=>(h=te(h)?new URL(h):ie.normalize(h),_e.readFileSync(h,_?void 0:"utf8")),pe=h=>(h=$(h,!0),h.buffer||(h=new Uint8Array(h)),h),re=(h,_,b,R=!0)=>{h=te(h)?new URL(h):ie.normalize(h),_e.readFile(h,R?void 0:"utf8",(U,Z)=>{U?b(U):_(R?Z.buffer:Z)})},!p.thisProgram&&1<process.argv.length&&(A=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),i.exports=p,p.inspect=()=>"[Emscripten Module object]"}else(N||M)&&(M?Q=self.location.href:typeof document<"u"&&document.currentScript&&(Q=document.currentScript.src),Q=Q.indexOf("blob:")!==0?Q.substr(0,Q.replace(/[?#].*/,"").lastIndexOf("/")+1):"",$=h=>{var _=new XMLHttpRequest;return _.open("GET",h,!1),_.send(null),_.responseText},M&&(pe=h=>{var _=new XMLHttpRequest;return _.open("GET",h,!1),_.responseType="arraybuffer",_.send(null),new Uint8Array(_.response)}),re=(h,_,b)=>{var R=new XMLHttpRequest;R.open("GET",h,!0),R.responseType="arraybuffer",R.onload=()=>{R.status==200||R.status==0&&R.response?_(R.response):b()},R.onerror=b,R.send(null)});var F=p.print||console.log.bind(console),ce=p.printErr||console.error.bind(console);Object.assign(p,E),E=null,p.thisProgram&&(A=p.thisProgram);var I;p.wasmBinary&&(I=p.wasmBinary),typeof WebAssembly!="object"&&ye("no native wasm support detected");var k,O=!1,C,L,q,P,Ke,yt,ae;function Te(){var h=k.buffer;p.HEAP8=C=new Int8Array(h),p.HEAP16=q=new Int16Array(h),p.HEAPU8=L=new Uint8Array(h),p.HEAPU16=new Uint16Array(h),p.HEAP32=P=new Int32Array(h),p.HEAPU32=Ke=new Uint32Array(h),p.HEAPF32=yt=new Float32Array(h),p.HEAPF64=ae=new Float64Array(h)}var Ne=[],nt=[],B=[];function fe(){var h=p.preRun.shift();Ne.unshift(h)}var Se=0,me=null;function ye(h){var _;throw(_=p.onAbort)==null||_.call(p,h),h="Aborted("+h+")",ce(h),O=!0,new WebAssembly.RuntimeError(h+". Build with -sASSERTIONS for more info.")}var ge=h=>h.startsWith("data:application/octet-stream;base64,"),te=h=>h.startsWith("file://"),we;if(we="sql-wasm.wasm",!ge(we)){var xe=we;we=p.locateFile?p.locateFile(xe,Q):Q+xe}function Je(h){if(h==we&&I)return new Uint8Array(I);if(pe)return pe(h);throw"both async and sync fetching of the wasm failed"}function Ze(h){if(!I&&(N||M)){if(typeof fetch=="function"&&!te(h))return fetch(h,{credentials:"same-origin"}).then(_=>{if(!_.ok)throw"failed to load wasm binary file at '"+h+"'";return _.arrayBuffer()}).catch(()=>Je(h));if(re)return new Promise((_,b)=>{re(h,R=>_(new Uint8Array(R)),b)})}return Promise.resolve().then(()=>Je(h))}function pt(h,_,b){return Ze(h).then(R=>WebAssembly.instantiate(R,_)).then(R=>R).then(b,R=>{ce(`failed to asynchronously prepare wasm: ${R}`),ye(R)})}function We(h,_){var b=we;I||typeof WebAssembly.instantiateStreaming!="function"||ge(b)||te(b)||X||typeof fetch!="function"?pt(b,h,_):fetch(b,{credentials:"same-origin"}).then(R=>WebAssembly.instantiateStreaming(R,h).then(_,function(U){return ce(`wasm streaming compile failed: ${U}`),ce("falling back to ArrayBuffer instantiation"),pt(b,h,_)}))}var Ce,rt,Di=h=>{for(;0<h.length;)h.shift()(p)};function on(h,_="i8"){switch(_.endsWith("*")&&(_="*"),_){case"i1":return C[h>>0];case"i8":return C[h>>0];case"i16":return q[h>>1];case"i32":return P[h>>2];case"i64":ye("to do getValue(i64) use WASM_BIGINT");case"float":return yt[h>>2];case"double":return ae[h>>3];case"*":return Ke[h>>2];default:ye(`invalid type for getValue: ${_}`)}}function Gt(h){var _="i32";switch(_.endsWith("*")&&(_="*"),_){case"i1":C[h>>0]=0;break;case"i8":C[h>>0]=0;break;case"i16":q[h>>1]=0;break;case"i32":P[h>>2]=0;break;case"i64":ye("to do setValue(i64) use WASM_BIGINT");case"float":yt[h>>2]=0;break;case"double":ae[h>>3]=0;break;case"*":Ke[h>>2]=0;break;default:ye(`invalid type for setValue: ${_}`)}}var Oi=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,vt=(h,_,b)=>{var R=_+b;for(b=_;h[b]&&!(b>=R);)++b;if(16<b-_&&h.buffer&&Oi)return Oi.decode(h.subarray(_,b));for(R="";_<b;){var U=h[_++];if(U&128){var Z=h[_++]&63;if((U&224)==192)R+=String.fromCharCode((U&31)<<6|Z);else{var le=h[_++]&63;U=(U&240)==224?(U&15)<<12|Z<<6|le:(U&7)<<18|Z<<12|le<<6|h[_++]&63,65536>U?R+=String.fromCharCode(U):(U-=65536,R+=String.fromCharCode(55296|U>>10,56320|U&1023))}}else R+=String.fromCharCode(U)}return R},jn=(h,_)=>h?vt(L,h,_):"",qe=(h,_)=>{for(var b=0,R=h.length-1;0<=R;R--){var U=h[R];U==="."?h.splice(R,1):U===".."?(h.splice(R,1),b++):b&&(h.splice(R,1),b--)}if(_)for(;b;b--)h.unshift("..");return h},st=h=>{var _=h.charAt(0)==="/",b=h.substr(-1)==="/";return(h=qe(h.split("/").filter(R=>!!R),!_).join("/"))||_||(h="."),h&&b&&(h+="/"),(_?"/":"")+h},Vt=h=>{var _=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(h).slice(1);return h=_[0],_=_[1],!h&&!_?".":(_&&(_=_.substr(0,_.length-1)),h+_)},si=h=>{if(h==="/")return"/";h=st(h),h=h.replace(/\/$/,"");var _=h.lastIndexOf("/");return _===-1?h:h.substr(_+1)},co=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return b=>crypto.getRandomValues(b);if(X)try{var h=dm;if(h.randomFillSync)return b=>h.randomFillSync(b);var _=h.randomBytes;return b=>(b.set(_(b.byteLength)),b)}catch{}ye("initRandomDevice")},jt=h=>(jt=co())(h);function ft(){for(var h="",_=!1,b=arguments.length-1;-1<=b&&!_;b--){if(_=0<=b?arguments[b]:"/",typeof _!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!_)return"";h=_+"/"+h,_=_.charAt(0)==="/"}return h=qe(h.split("/").filter(R=>!!R),!_).join("/"),(_?"/":"")+h||"."}var Cn=[],Kt=h=>{for(var _=0,b=0;b<h.length;++b){var R=h.charCodeAt(b);127>=R?_++:2047>=R?_+=2:55296<=R&&57343>=R?(_+=4,++b):_+=3}return _},Xi=(h,_,b,R)=>{if(!(0<R))return 0;var U=b;R=b+R-1;for(var Z=0;Z<h.length;++Z){var le=h.charCodeAt(Z);if(55296<=le&&57343>=le){var Le=h.charCodeAt(++Z);le=65536+((le&1023)<<10)|Le&1023}if(127>=le){if(b>=R)break;_[b++]=le}else{if(2047>=le){if(b+1>=R)break;_[b++]=192|le>>6}else{if(65535>=le){if(b+2>=R)break;_[b++]=224|le>>12}else{if(b+3>=R)break;_[b++]=240|le>>18,_[b++]=128|le>>12&63}_[b++]=128|le>>6&63}_[b++]=128|le&63}}return _[b]=0,b-U};function fo(h,_){var b=Array(Kt(h)+1);return h=Xi(h,b,0,b.length),_&&(b.length=h),b}var ha=[];function ma(h,_){ha[h]={input:[],output:[],Xa:_},mn(h,za)}var za={open(h){var _=ha[h.node.rdev];if(!_)throw new Ee(43);h.tty=_,h.seekable=!1},close(h){h.tty.Xa.fsync(h.tty)},fsync(h){h.tty.Xa.fsync(h.tty)},read(h,_,b,R){if(!h.tty||!h.tty.Xa.sb)throw new Ee(60);for(var U=0,Z=0;Z<R;Z++){try{var le=h.tty.Xa.sb(h.tty)}catch{throw new Ee(29)}if(le===void 0&&U===0)throw new Ee(6);if(le==null)break;U++,_[b+Z]=le}return U&&(h.node.timestamp=Date.now()),U},write(h,_,b,R){if(!h.tty||!h.tty.Xa.jb)throw new Ee(60);try{for(var U=0;U<R;U++)h.tty.Xa.jb(h.tty,_[b+U])}catch{throw new Ee(29)}return R&&(h.node.timestamp=Date.now()),U}},_i={sb(){e:{if(!Cn.length){var h=null;if(X){var _=Buffer.alloc(256),b=0,R=process.stdin.fd;try{b=_e.readSync(R,_)}catch(U){if(U.toString().includes("EOF"))b=0;else throw U}0<b?h=_.slice(0,b).toString("utf-8"):h=null}else typeof window<"u"&&typeof window.prompt=="function"?(h=window.prompt("Input: "),h!==null&&(h+=`
`)):typeof readline=="function"&&(h=readline(),h!==null&&(h+=`
`));if(!h){h=null;break e}Cn=fo(h,!0)}h=Cn.shift()}return h},jb(h,_){_===null||_===10?(F(vt(h.output,0)),h.output=[]):_!=0&&h.output.push(_)},fsync(h){h.output&&0<h.output.length&&(F(vt(h.output,0)),h.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},yr={jb(h,_){_===null||_===10?(ce(vt(h.output,0)),h.output=[]):_!=0&&h.output.push(_)},fsync(h){h.output&&0<h.output.length&&(ce(vt(h.output,0)),h.output=[])}};function pa(h,_){var b=h.Ia?h.Ia.length:0;b>=_||(_=Math.max(_,b*(1048576>b?2:1.125)>>>0),b!=0&&(_=Math.max(_,256)),b=h.Ia,h.Ia=new Uint8Array(_),0<h.Ma&&h.Ia.set(b.subarray(0,h.Ma),0))}var Qe={Qa:null,Ra(){return Qe.createNode(null,"/",16895,0)},createNode(h,_,b,R){if((b&61440)===24576||(b&61440)===4096)throw new Ee(63);return Qe.Qa||(Qe.Qa={dir:{node:{Pa:Qe.Ga.Pa,Oa:Qe.Ga.Oa,lookup:Qe.Ga.lookup,ab:Qe.Ga.ab,rename:Qe.Ga.rename,unlink:Qe.Ga.unlink,rmdir:Qe.Ga.rmdir,readdir:Qe.Ga.readdir,symlink:Qe.Ga.symlink},stream:{Ta:Qe.Ha.Ta}},file:{node:{Pa:Qe.Ga.Pa,Oa:Qe.Ga.Oa},stream:{Ta:Qe.Ha.Ta,read:Qe.Ha.read,write:Qe.Ha.write,lb:Qe.Ha.lb,bb:Qe.Ha.bb,cb:Qe.Ha.cb}},link:{node:{Pa:Qe.Ga.Pa,Oa:Qe.Ga.Oa,readlink:Qe.Ga.readlink},stream:{}},pb:{node:{Pa:Qe.Ga.Pa,Oa:Qe.Ga.Oa},stream:Mi}}),b=Jn(h,_,b,R),vn(b.mode)?(b.Ga=Qe.Qa.dir.node,b.Ha=Qe.Qa.dir.stream,b.Ia={}):(b.mode&61440)===32768?(b.Ga=Qe.Qa.file.node,b.Ha=Qe.Qa.file.stream,b.Ma=0,b.Ia=null):(b.mode&61440)===40960?(b.Ga=Qe.Qa.link.node,b.Ha=Qe.Qa.link.stream):(b.mode&61440)===8192&&(b.Ga=Qe.Qa.pb.node,b.Ha=Qe.Qa.pb.stream),b.timestamp=Date.now(),h&&(h.Ia[_]=b,h.timestamp=b.timestamp),b},Lb(h){return h.Ia?h.Ia.subarray?h.Ia.subarray(0,h.Ma):new Uint8Array(h.Ia):new Uint8Array(0)},Ga:{Pa(h){var _={};return _.dev=(h.mode&61440)===8192?h.id:1,_.ino=h.id,_.mode=h.mode,_.nlink=1,_.uid=0,_.gid=0,_.rdev=h.rdev,vn(h.mode)?_.size=4096:(h.mode&61440)===32768?_.size=h.Ma:(h.mode&61440)===40960?_.size=h.link.length:_.size=0,_.atime=new Date(h.timestamp),_.mtime=new Date(h.timestamp),_.ctime=new Date(h.timestamp),_.zb=4096,_.blocks=Math.ceil(_.size/_.zb),_},Oa(h,_){if(_.mode!==void 0&&(h.mode=_.mode),_.timestamp!==void 0&&(h.timestamp=_.timestamp),_.size!==void 0&&(_=_.size,h.Ma!=_))if(_==0)h.Ia=null,h.Ma=0;else{var b=h.Ia;h.Ia=new Uint8Array(_),b&&h.Ia.set(b.subarray(0,Math.min(_,h.Ma))),h.Ma=_}},lookup(){throw ga[44]},ab(h,_,b,R){return Qe.createNode(h,_,b,R)},rename(h,_,b){if(vn(h.mode)){try{var R=xt(_,b)}catch{}if(R)for(var U in R.Ia)throw new Ee(55)}delete h.parent.Ia[h.name],h.parent.timestamp=Date.now(),h.name=b,_.Ia[b]=h,_.timestamp=h.parent.timestamp,h.parent=_},unlink(h,_){delete h.Ia[_],h.timestamp=Date.now()},rmdir(h,_){var b=xt(h,_),R;for(R in b.Ia)throw new Ee(55);delete h.Ia[_],h.timestamp=Date.now()},readdir(h){var _=[".",".."],b;for(b of Object.keys(h.Ia))_.push(b);return _},symlink(h,_,b){return h=Qe.createNode(h,_,41471,0),h.link=b,h},readlink(h){if((h.mode&61440)!==40960)throw new Ee(28);return h.link}},Ha:{read(h,_,b,R,U){var Z=h.node.Ia;if(U>=h.node.Ma)return 0;if(h=Math.min(h.node.Ma-U,R),8<h&&Z.subarray)_.set(Z.subarray(U,U+h),b);else for(R=0;R<h;R++)_[b+R]=Z[U+R];return h},write(h,_,b,R,U,Z){if(_.buffer===C.buffer&&(Z=!1),!R)return 0;if(h=h.node,h.timestamp=Date.now(),_.subarray&&(!h.Ia||h.Ia.subarray)){if(Z)return h.Ia=_.subarray(b,b+R),h.Ma=R;if(h.Ma===0&&U===0)return h.Ia=_.slice(b,b+R),h.Ma=R;if(U+R<=h.Ma)return h.Ia.set(_.subarray(b,b+R),U),R}if(pa(h,U+R),h.Ia.subarray&&_.subarray)h.Ia.set(_.subarray(b,b+R),U);else for(Z=0;Z<R;Z++)h.Ia[U+Z]=_[b+Z];return h.Ma=Math.max(h.Ma,U+R),R},Ta(h,_,b){if(b===1?_+=h.position:b===2&&(h.node.mode&61440)===32768&&(_+=h.node.Ma),0>_)throw new Ee(28);return _},lb(h,_,b){pa(h.node,_+b),h.node.Ma=Math.max(h.node.Ma,_+b)},bb(h,_,b,R,U){if((h.node.mode&61440)!==32768)throw new Ee(43);if(h=h.node.Ia,U&2||h.buffer!==C.buffer){if((0<b||b+_<h.length)&&(h.subarray?h=h.subarray(b,b+_):h=Array.prototype.slice.call(h,b,b+_)),b=!0,_=65536*Math.ceil(_/65536),(U=Ia(65536,_))?(L.fill(0,U,U+_),_=U):_=0,!_)throw new Ee(48);C.set(h,_)}else b=!1,_=h.byteOffset;return{Db:_,ub:b}},cb(h,_,b,R){return Qe.Ha.write(h,_,0,R,b,!1),0}}},vr=(h,_)=>{var b=0;return h&&(b|=365),_&&(b|=146),b},Fa=null,Pi={},Zn=[],Ss=1,hn=null,br=!0,Ee=null,ga={};function $t(h,_={}){if(h=ft(h),!h)return{path:"",node:null};if(_=Object.assign({qb:!0,kb:0},_),8<_.kb)throw new Ee(32);h=h.split("/").filter(le=>!!le);for(var b=Fa,R="/",U=0;U<h.length;U++){var Z=U===h.length-1;if(Z&&_.parent)break;if(b=xt(b,h[U]),R=st(R+"/"+h[U]),b.Va&&(!Z||Z&&_.qb)&&(b=b.Va.root),!Z||_.Sa){for(Z=0;(b.mode&61440)===40960;)if(b=Ea(R),R=ft(Vt(R),b),b=$t(R,{kb:_.kb+1}).node,40<Z++)throw new Ee(32)}}return{path:R,node:b}}function _a(h){for(var _;;){if(h===h.parent)return h=h.Ra.tb,_?h[h.length-1]!=="/"?`${h}/${_}`:h+_:h;_=_?`${h.name}/${_}`:h.name,h=h.parent}}function Ct(h,_){for(var b=0,R=0;R<_.length;R++)b=(b<<5)-b+_.charCodeAt(R)|0;return(h+b>>>0)%hn.length}function Xt(h){var _=Ct(h.parent.id,h.name);if(hn[_]===h)hn[_]=h.Wa;else for(_=hn[_];_;){if(_.Wa===h){_.Wa=h.Wa;break}_=_.Wa}}function xt(h,_){var b;if(b=(b=ei(h,"x"))?b:h.Ga.lookup?0:2)throw new Ee(b,h);for(b=hn[Ct(h.id,_)];b;b=b.Wa){var R=b.name;if(b.parent.id===h.id&&R===_)return b}return h.Ga.lookup(h,_)}function Jn(h,_,b,R){return h=new Ar(h,_,b,R),_=Ct(h.parent.id,h.name),h.Wa=hn[_],hn[_]=h}function vn(h){return(h&61440)===16384}function ho(h){var _=["r","w","rw"][h&3];return h&512&&(_+="w"),_}function ei(h,_){if(br)return 0;if(!_.includes("r")||h.mode&292){if(_.includes("w")&&!(h.mode&146)||_.includes("x")&&!(h.mode&73))return 2}else return 2;return 0}function Ts(h,_){try{return xt(h,_),20}catch{}return ei(h,"wx")}function ya(h,_,b){try{var R=xt(h,_)}catch(U){return U.Ka}if(h=ei(h,"wx"))return h;if(b){if(!vn(R.mode))return 54;if(R===R.parent||_a(R)==="/")return 10}else if(vn(R.mode))return 31;return 0}function va(){for(var h=0;4096>=h;h++)if(!Zn[h])return h;throw new Ee(33)}function Ut(h){if(h=Zn[h],!h)throw new Ee(8);return h}function yi(h,_=-1){return Ji||(Ji=function(){this.$a={}},Ji.prototype={},Object.defineProperties(Ji.prototype,{object:{get(){return this.node},set(b){this.node=b}},flags:{get(){return this.$a.flags},set(b){this.$a.flags=b}},position:{get(){return this.$a.position},set(b){this.$a.position=b}}})),h=Object.assign(new Ji,h),_==-1&&(_=va()),h.fd=_,Zn[_]=h}var Mi={open(h){var _,b;h.Ha=Pi[h.node.rdev].Ha,(b=(_=h.Ha).open)==null||b.call(_,h)},Ta(){throw new Ee(70)}};function mn(h,_){Pi[h]={Ha:_}}function zt(h,_){var b=_==="/",R=!_;if(b&&Fa)throw new Ee(10);if(!b&&!R){var U=$t(_,{qb:!1});if(_=U.path,U=U.node,U.Va)throw new Ee(10);if(!vn(U.mode))throw new Ee(54)}_={type:h,Pb:{},tb:_,Cb:[]},h=h.Ra(_),h.Ra=_,_.root=h,b?Fa=h:U&&(U.Va=_,U.Ra&&U.Ra.Cb.push(_))}function ba(h,_,b){var R=$t(h,{parent:!0}).node;if(h=si(h),!h||h==="."||h==="..")throw new Ee(28);var U=Ts(R,h);if(U)throw new Ee(U);if(!R.Ga.ab)throw new Ee(63);return R.Ga.ab(R,h,_,b)}function xn(h,_){return ba(h,(_!==void 0?_:511)&1023|16384,0)}function Un(h,_,b){typeof b>"u"&&(b=_,_=438),ba(h,_|8192,b)}function vi(h,_){if(!ft(h))throw new Ee(44);var b=$t(_,{parent:!0}).node;if(!b)throw new Ee(44);_=si(_);var R=Ts(b,_);if(R)throw new Ee(R);if(!b.Ga.symlink)throw new Ee(63);b.Ga.symlink(b,_,h)}function ws(h){var _=$t(h,{parent:!0}).node;h=si(h);var b=xt(_,h),R=ya(_,h,!0);if(R)throw new Ee(R);if(!_.Ga.rmdir)throw new Ee(63);if(b.Va)throw new Ee(10);_.Ga.rmdir(_,h),Xt(b)}function As(h){var _=$t(h,{parent:!0}).node;if(!_)throw new Ee(44);h=si(h);var b=xt(_,h),R=ya(_,h,!1);if(R)throw new Ee(R);if(!_.Ga.unlink)throw new Ee(63);if(b.Va)throw new Ee(10);_.Ga.unlink(_,h),Xt(b)}function Ea(h){if(h=$t(h).node,!h)throw new Ee(44);if(!h.Ga.readlink)throw new Ee(28);return ft(_a(h.parent),h.Ga.readlink(h))}function Sa(h,_){if(h=$t(h,{Sa:!_}).node,!h)throw new Ee(44);if(!h.Ga.Pa)throw new Ee(63);return h.Ga.Pa(h)}function Wi(h){return Sa(h,!0)}function ti(h,_){if(h=typeof h=="string"?$t(h,{Sa:!0}).node:h,!h.Ga.Oa)throw new Ee(63);h.Ga.Oa(h,{mode:_&4095|h.mode&-4096,timestamp:Date.now()})}function ln(h,_){if(0>_)throw new Ee(28);if(h=typeof h=="string"?$t(h,{Sa:!0}).node:h,!h.Ga.Oa)throw new Ee(63);if(vn(h.mode))throw new Ee(31);if((h.mode&61440)!==32768)throw new Ee(28);var b=ei(h,"w");if(b)throw new Ee(b);h.Ga.Oa(h,{size:_,timestamp:Date.now()})}function oi(h,_,b){if(h==="")throw new Ee(44);if(typeof _=="string"){var R={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[_];if(typeof R>"u")throw Error(`Unknown file open mode: ${_}`);_=R}if(b=_&64?(typeof b>"u"?438:b)&4095|32768:0,typeof h=="object")var U=h;else{h=st(h);try{U=$t(h,{Sa:!(_&131072)}).node}catch{}}if(R=!1,_&64)if(U){if(_&128)throw new Ee(20)}else U=ba(h,b,0),R=!0;if(!U)throw new Ee(44);if((U.mode&61440)===8192&&(_&=-513),_&65536&&!vn(U.mode))throw new Ee(54);if(!R&&(b=U?(U.mode&61440)===40960?32:vn(U.mode)&&(ho(_)!=="r"||_&512)?31:ei(U,ho(_)):44))throw new Ee(b);return _&512&&!R&&ln(U,0),_&=-131713,U=yi({node:U,path:_a(U),flags:_,seekable:!0,position:0,Ha:U.Ha,Fb:[],error:!1}),U.Ha.open&&U.Ha.open(U),!p.logReadFiles||_&1||(ea||(ea={}),h in ea||(ea[h]=1)),U}function Er(h){if(h.fd===null)throw new Ee(8);h.hb&&(h.hb=null);try{h.Ha.close&&h.Ha.close(h)}catch(_){throw _}finally{Zn[h.fd]=null}h.fd=null}function Li(h,_,b){if(h.fd===null)throw new Ee(8);if(!h.seekable||!h.Ha.Ta)throw new Ee(70);if(b!=0&&b!=1&&b!=2)throw new Ee(28);h.position=h.Ha.Ta(h,_,b),h.Fb=[]}function Ha(h,_,b,R,U){if(0>R||0>U)throw new Ee(28);if(h.fd===null)throw new Ee(8);if((h.flags&2097155)===1)throw new Ee(8);if(vn(h.node.mode))throw new Ee(31);if(!h.Ha.read)throw new Ee(28);var Z=typeof U<"u";if(!Z)U=h.position;else if(!h.seekable)throw new Ee(70);return _=h.Ha.read(h,_,b,R,U),Z||(h.position+=_),_}function Ga(h,_,b,R,U){if(0>R||0>U)throw new Ee(28);if(h.fd===null)throw new Ee(8);if((h.flags&2097155)===0)throw new Ee(8);if(vn(h.node.mode))throw new Ee(31);if(!h.Ha.write)throw new Ee(28);h.seekable&&h.flags&1024&&Li(h,0,2);var Z=typeof U<"u";if(!Z)U=h.position;else if(!h.seekable)throw new Ee(70);return _=h.Ha.write(h,_,b,R,U,void 0),Z||(h.position+=_),_}function Is(h){var _,b=oi(h,b||0);h=Sa(h).size;var R=new Uint8Array(h);return Ha(b,R,0,h,0),_=R,Er(b),_}function Ka(){Ee||(Ee=function(h,_){this.name="ErrnoError",this.node=_,this.Eb=function(b){this.Ka=b},this.Eb(h),this.message="FS error"},Ee.prototype=Error(),Ee.prototype.constructor=Ee,[44].forEach(h=>{ga[h]=new Ee(h),ga[h].stack="<generic error, no stack>"}))}var bn;function Zi(h,_,b){h=st("/dev/"+h);var R=vr(!!_,!!b);mo||(mo=64);var U=mo++<<8|0;mn(U,{open(Z){Z.seekable=!1},close(){var Z;(Z=b==null?void 0:b.buffer)!=null&&Z.length&&b(10)},read(Z,le,Le,tt){for(var Ve=0,Rt=0;Rt<tt;Rt++){try{var bt=_()}catch{throw new Ee(29)}if(bt===void 0&&Ve===0)throw new Ee(6);if(bt==null)break;Ve++,le[Le+Rt]=bt}return Ve&&(Z.node.timestamp=Date.now()),Ve},write(Z,le,Le,tt){for(var Ve=0;Ve<tt;Ve++)try{b(le[Le+Ve])}catch{throw new Ee(29)}return tt&&(Z.node.timestamp=Date.now()),Ve}}),Un(h,R,U)}var mo,gt={},Ji,ea;function ta(h,_,b){if(_.charAt(0)==="/")return _;if(h=h===-100?"/":Ut(h).path,_.length==0){if(!b)throw new Ee(44);return h}return st(h+"/"+_)}function Bt(h,_,b){try{var R=h(_)}catch(Z){if(Z&&Z.node&&st(_)!==st(_a(Z.node)))return-54;throw Z}P[b>>2]=R.dev,P[b+4>>2]=R.mode,Ke[b+8>>2]=R.nlink,P[b+12>>2]=R.uid,P[b+16>>2]=R.gid,P[b+20>>2]=R.rdev,rt=[R.size>>>0,(Ce=R.size,1<=+Math.abs(Ce)?0<Ce?+Math.floor(Ce/4294967296)>>>0:~~+Math.ceil((Ce-+(~~Ce>>>0))/4294967296)>>>0:0)],P[b+24>>2]=rt[0],P[b+28>>2]=rt[1],P[b+32>>2]=4096,P[b+36>>2]=R.blocks,h=R.atime.getTime(),_=R.mtime.getTime();var U=R.ctime.getTime();return rt=[Math.floor(h/1e3)>>>0,(Ce=Math.floor(h/1e3),1<=+Math.abs(Ce)?0<Ce?+Math.floor(Ce/4294967296)>>>0:~~+Math.ceil((Ce-+(~~Ce>>>0))/4294967296)>>>0:0)],P[b+40>>2]=rt[0],P[b+44>>2]=rt[1],Ke[b+48>>2]=h%1e3*1e3,rt=[Math.floor(_/1e3)>>>0,(Ce=Math.floor(_/1e3),1<=+Math.abs(Ce)?0<Ce?+Math.floor(Ce/4294967296)>>>0:~~+Math.ceil((Ce-+(~~Ce>>>0))/4294967296)>>>0:0)],P[b+56>>2]=rt[0],P[b+60>>2]=rt[1],Ke[b+64>>2]=_%1e3*1e3,rt=[Math.floor(U/1e3)>>>0,(Ce=Math.floor(U/1e3),1<=+Math.abs(Ce)?0<Ce?+Math.floor(Ce/4294967296)>>>0:~~+Math.ceil((Ce-+(~~Ce>>>0))/4294967296)>>>0:0)],P[b+72>>2]=rt[0],P[b+76>>2]=rt[1],Ke[b+80>>2]=U%1e3*1e3,rt=[R.ino>>>0,(Ce=R.ino,1<=+Math.abs(Ce)?0<Ce?+Math.floor(Ce/4294967296)>>>0:~~+Math.ceil((Ce-+(~~Ce>>>0))/4294967296)>>>0:0)],P[b+88>>2]=rt[0],P[b+92>>2]=rt[1],0}var En=void 0;function Vi(){var h=P[+En>>2];return En+=4,h}var li=(h,_)=>_+2097152>>>0<4194305-!!h?(h>>>0)+4294967296*_:NaN,na=[0,31,60,91,121,152,182,213,244,274,305,335],St=[0,31,59,90,120,151,181,212,243,273,304,334],Ta=h=>{var _=Kt(h)+1,b=zn(_);return b&&Xi(h,L,b,_),b},Bn={},wa=()=>{if(!Sr){var h={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},_;for(_ in Bn)Bn[_]===void 0?delete h[_]:h[_]=Bn[_];var b=[];for(_ in h)b.push(`${_}=${h[_]}`);Sr=b}return Sr},Sr,$a=h=>{var _=Kt(h)+1,b=Sn(_);return Xi(h,L,b,_),b},Cs=(h,_,b,R)=>{var U={string:Ve=>{var Rt=0;return Ve!=null&&Ve!==0&&(Rt=$a(Ve)),Rt},array:Ve=>{var Rt=Sn(Ve.length);return C.set(Ve,Rt),Rt}};h=p["_"+h];var Z=[],le=0;if(R)for(var Le=0;Le<R.length;Le++){var tt=U[b[Le]];tt?(le===0&&(le=Fn()),Z[Le]=tt(R[Le])):Z[Le]=R[Le]}return b=h.apply(null,Z),b=function(Ve){return le!==0&&di(le),_==="string"?Ve?vt(L,Ve):"":_==="boolean"?!!Ve:Ve}(b)},Tr=0,wr=(h,_)=>(_=_==1?Sn(h.length):zn(h.length),h.subarray||h.slice||(h=new Uint8Array(h)),L.set(h,_),_),ui,bi=[],Wt,qn=h=>{ui.delete(Wt.get(h)),Wt.set(h,null),bi.push(h)},ci=(h,_)=>{if(!ui){ui=new WeakMap;var b=Wt.length;if(ui)for(var R=0;R<0+b;R++){var U=Wt.get(R);U&&ui.set(U,R)}}if(b=ui.get(h)||0)return b;if(bi.length)b=bi.pop();else{try{Wt.grow(1)}catch(Le){throw Le instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Le}b=Wt.length-1}try{Wt.set(b,h)}catch(Le){if(!(Le instanceof TypeError))throw Le;if(typeof WebAssembly.Function=="function"){R=WebAssembly.Function,U={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var Z={parameters:[],results:_[0]=="v"?[]:[U[_[0]]]},le=1;le<_.length;++le)Z.parameters.push(U[_[le]]);_=new R(Z,h)}else{for(R=[1],U=_.slice(0,1),_=_.slice(1),Z={i:127,p:127,j:126,f:125,d:124,e:111},R.push(96),le=_.length,128>le?R.push(le):R.push(le%128|128,le>>7),le=0;le<_.length;++le)R.push(Z[_[le]]);U=="v"?R.push(0):R.push(1,Z[U]),_=[0,97,115,109,1,0,0,0,1],U=R.length,128>U?_.push(U):_.push(U%128|128,U>>7),_.push.apply(_,R),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),_=new WebAssembly.Module(new Uint8Array(_)),_=new WebAssembly.Instance(_,{e:{f:h}}).exports.f}Wt.set(b,_)}return ui.set(h,b),b};function Ar(h,_,b,R){h||(h=this),this.parent=h,this.Ra=h.Ra,this.Va=null,this.id=Ss++,this.name=_,this.mode=b,this.Ga={},this.Ha={},this.rdev=R}Object.defineProperties(Ar.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(h){h?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(h){h?this.mode|=146:this.mode&=-147}}}),Ka(),hn=Array(4096),zt(Qe,"/"),xn("/tmp"),xn("/home"),xn("/home/web_user"),function(){xn("/dev"),mn(259,{read:()=>0,write:(R,U,Z,le)=>le}),Un("/dev/null",259),ma(1280,_i),ma(1536,yr),Un("/dev/tty",1280),Un("/dev/tty1",1536);var h=new Uint8Array(1024),_=0,b=()=>(_===0&&(_=jt(h).byteLength),h[--_]);Zi("random",b),Zi("urandom",b),xn("/dev/shm"),xn("/dev/shm/tmp")}(),function(){xn("/proc");var h=xn("/proc/self");xn("/proc/self/fd"),zt({Ra(){var _=Jn(h,"fd",16895,73);return _.Ga={lookup(b,R){var U=Ut(+R);return b={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>U.path}},b.parent=b}},_}},"/proc/self/fd")}();var ji={a:(h,_,b,R)=>{ye(`Assertion failed: ${h?vt(L,h):""}, at: `+[_?_?vt(L,_):"":"unknown filename",b,R?R?vt(L,R):"":"unknown function"])},h:function(h,_){try{return h=h?vt(L,h):"",ti(h,_),0}catch(b){if(typeof gt>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},H:function(h,_,b){try{if(_=_?vt(L,_):"",_=ta(h,_),b&-8)return-28;var R=$t(_,{Sa:!0}).node;return R?(h="",b&4&&(h+="r"),b&2&&(h+="w"),b&1&&(h+="x"),h&&ei(R,h)?-2:0):-44}catch(U){if(typeof gt>"u"||U.name!=="ErrnoError")throw U;return-U.Ka}},i:function(h,_){try{var b=Ut(h);return ti(b.node,_),0}catch(R){if(typeof gt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},g:function(h){try{var _=Ut(h).node,b=typeof _=="string"?$t(_,{Sa:!0}).node:_;if(!b.Ga.Oa)throw new Ee(63);return b.Ga.Oa(b,{timestamp:Date.now()}),0}catch(R){if(typeof gt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},b:function(h,_,b){En=b;try{var R=Ut(h);switch(_){case 0:var U=Vi();if(0>U)return-28;for(;Zn[U];)U++;return yi(R,U).fd;case 1:case 2:return 0;case 3:return R.flags;case 4:return U=Vi(),R.flags|=U,0;case 5:return U=Vi(),q[U+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return P[Aa()>>2]=28,-1;default:return-28}}catch(Z){if(typeof gt>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Ka}},f:function(h,_){try{var b=Ut(h);return Bt(Sa,b.path,_)}catch(R){if(typeof gt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},n:function(h,_,b){_=li(_,b);try{if(isNaN(_))return 61;var R=Ut(h);if((R.flags&2097155)===0)throw new Ee(28);return ln(R.node,_),0}catch(U){if(typeof gt>"u"||U.name!=="ErrnoError")throw U;return-U.Ka}},C:function(h,_){try{if(_===0)return-28;var b=Kt("/")+1;return _<b?-68:(Xi("/",L,h,_),b)}catch(R){if(typeof gt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},F:function(h,_){try{return h=h?vt(L,h):"",Bt(Wi,h,_)}catch(b){if(typeof gt>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},z:function(h,_,b){try{return _=_?vt(L,_):"",_=ta(h,_),_=st(_),_[_.length-1]==="/"&&(_=_.substr(0,_.length-1)),xn(_,b),0}catch(R){if(typeof gt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},E:function(h,_,b,R){try{_=_?vt(L,_):"";var U=R&256;return _=ta(h,_,R&4096),Bt(U?Wi:Sa,_,b)}catch(Z){if(typeof gt>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Ka}},y:function(h,_,b,R){En=R;try{_=_?vt(L,_):"",_=ta(h,_);var U=R?Vi():0;return oi(_,b,U).fd}catch(Z){if(typeof gt>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Ka}},w:function(h,_,b,R){try{if(_=_?vt(L,_):"",_=ta(h,_),0>=R)return-28;var U=Ea(_),Z=Math.min(R,Kt(U)),le=C[b+Z];return Xi(U,L,b,R+1),C[b+Z]=le,Z}catch(Le){if(typeof gt>"u"||Le.name!=="ErrnoError")throw Le;return-Le.Ka}},v:function(h){try{return h=h?vt(L,h):"",ws(h),0}catch(_){if(typeof gt>"u"||_.name!=="ErrnoError")throw _;return-_.Ka}},G:function(h,_){try{return h=h?vt(L,h):"",Bt(Sa,h,_)}catch(b){if(typeof gt>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},r:function(h,_,b){try{return _=_?vt(L,_):"",_=ta(h,_),b===0?As(_):b===512?ws(_):ye("Invalid flags passed to unlinkat"),0}catch(R){if(typeof gt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},q:function(h,_,b){try{if(_=_?vt(L,_):"",_=ta(h,_,!0),b){var R=Ke[b>>2]+4294967296*P[b+4>>2],U=P[b+8>>2];Z=1e3*R+U/1e6,b+=16,R=Ke[b>>2]+4294967296*P[b+4>>2],U=P[b+8>>2],le=1e3*R+U/1e6}else var Z=Date.now(),le=Z;h=Z;var Le=$t(_,{Sa:!0}).node;return Le.Ga.Oa(Le,{timestamp:Math.max(h,le)}),0}catch(tt){if(typeof gt>"u"||tt.name!=="ErrnoError")throw tt;return-tt.Ka}},l:function(h,_,b){h=new Date(1e3*li(h,_)),P[b>>2]=h.getSeconds(),P[b+4>>2]=h.getMinutes(),P[b+8>>2]=h.getHours(),P[b+12>>2]=h.getDate(),P[b+16>>2]=h.getMonth(),P[b+20>>2]=h.getFullYear()-1900,P[b+24>>2]=h.getDay(),_=h.getFullYear(),P[b+28>>2]=(_%4!==0||_%100===0&&_%400!==0?St:na)[h.getMonth()]+h.getDate()-1|0,P[b+36>>2]=-(60*h.getTimezoneOffset()),_=new Date(h.getFullYear(),6,1).getTimezoneOffset();var R=new Date(h.getFullYear(),0,1).getTimezoneOffset();P[b+32>>2]=(_!=R&&h.getTimezoneOffset()==Math.min(R,_))|0},j:function(h,_,b,R,U,Z,le,Le){U=li(U,Z);try{if(isNaN(U))return 61;var tt=Ut(R);if((_&2)!==0&&(b&2)===0&&(tt.flags&2097155)!==2)throw new Ee(2);if((tt.flags&2097155)===1)throw new Ee(2);if(!tt.Ha.bb)throw new Ee(43);var Ve=tt.Ha.bb(tt,h,U,_,b),Rt=Ve.Db;return P[le>>2]=Ve.ub,Ke[Le>>2]=Rt,0}catch(bt){if(typeof gt>"u"||bt.name!=="ErrnoError")throw bt;return-bt.Ka}},k:function(h,_,b,R,U,Z,le){Z=li(Z,le);try{if(isNaN(Z))return 61;var Le=Ut(U);if(b&2){if((Le.node.mode&61440)!==32768)throw new Ee(43);if(!(R&2)){var tt=L.slice(h,h+_);Le.Ha.cb&&Le.Ha.cb(Le,tt,Z,_,R)}}}catch(Ve){if(typeof gt>"u"||Ve.name!=="ErrnoError")throw Ve;return-Ve.Ka}},s:(h,_,b)=>{function R(tt){return(tt=tt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?tt[1]:"GMT"}var U=new Date().getFullYear(),Z=new Date(U,0,1),le=new Date(U,6,1);U=Z.getTimezoneOffset();var Le=le.getTimezoneOffset();Ke[h>>2]=60*Math.max(U,Le),P[_>>2]=+(U!=Le),h=R(Z),_=R(le),h=Ta(h),_=Ta(_),Le<U?(Ke[b>>2]=h,Ke[b+4>>2]=_):(Ke[b>>2]=_,Ke[b+4>>2]=h)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:h=>{var _=L.length;if(h>>>=0,2147483648<h)return!1;for(var b=1;4>=b;b*=2){var R=_*(1+.2/b);R=Math.min(R,h+100663296);var U=Math;R=Math.max(h,R);e:{U=(U.min.call(U,2147483648,R+(65536-R%65536)%65536)-k.buffer.byteLength+65535)/65536;try{k.grow(U),Te();var Z=1;break e}catch{}Z=void 0}if(Z)return!0}return!1},A:(h,_)=>{var b=0;return wa().forEach((R,U)=>{var Z=_+b;for(U=Ke[h+4*U>>2]=Z,Z=0;Z<R.length;++Z)C[U++>>0]=R.charCodeAt(Z);C[U>>0]=0,b+=R.length+1}),0},B:(h,_)=>{var b=wa();Ke[h>>2]=b.length;var R=0;return b.forEach(U=>R+=U.length+1),Ke[_>>2]=R,0},e:function(h){try{var _=Ut(h);return Er(_),0}catch(b){if(typeof gt>"u"||b.name!=="ErrnoError")throw b;return b.Ka}},p:function(h,_){try{var b=Ut(h);return C[_>>0]=b.tty?2:vn(b.mode)?3:(b.mode&61440)===40960?7:4,q[_+2>>1]=0,rt=[0,(Ce=0,1<=+Math.abs(Ce)?0<Ce?+Math.floor(Ce/4294967296)>>>0:~~+Math.ceil((Ce-+(~~Ce>>>0))/4294967296)>>>0:0)],P[_+8>>2]=rt[0],P[_+12>>2]=rt[1],rt=[0,(Ce=0,1<=+Math.abs(Ce)?0<Ce?+Math.floor(Ce/4294967296)>>>0:~~+Math.ceil((Ce-+(~~Ce>>>0))/4294967296)>>>0:0)],P[_+16>>2]=rt[0],P[_+20>>2]=rt[1],0}catch(R){if(typeof gt>"u"||R.name!=="ErrnoError")throw R;return R.Ka}},x:function(h,_,b,R){try{e:{var U=Ut(h);h=_;for(var Z,le=_=0;le<b;le++){var Le=Ke[h>>2],tt=Ke[h+4>>2];h+=8;var Ve=Ha(U,C,Le,tt,Z);if(0>Ve){var Rt=-1;break e}if(_+=Ve,Ve<tt)break;typeof Z<"u"&&(Z+=Ve)}Rt=_}return Ke[R>>2]=Rt,0}catch(bt){if(typeof gt>"u"||bt.name!=="ErrnoError")throw bt;return bt.Ka}},m:function(h,_,b,R,U){_=li(_,b);try{if(isNaN(_))return 61;var Z=Ut(h);return Li(Z,_,R),rt=[Z.position>>>0,(Ce=Z.position,1<=+Math.abs(Ce)?0<Ce?+Math.floor(Ce/4294967296)>>>0:~~+Math.ceil((Ce-+(~~Ce>>>0))/4294967296)>>>0:0)],P[U>>2]=rt[0],P[U+4>>2]=rt[1],Z.hb&&_===0&&R===0&&(Z.hb=null),0}catch(le){if(typeof gt>"u"||le.name!=="ErrnoError")throw le;return le.Ka}},D:function(h){var b;try{var _=Ut(h);return(b=_.Ha)!=null&&b.fsync?_.Ha.fsync(_):0}catch(R){if(typeof gt>"u"||R.name!=="ErrnoError")throw R;return R.Ka}},u:function(h,_,b,R){try{e:{var U=Ut(h);h=_;for(var Z,le=_=0;le<b;le++){var Le=Ke[h>>2],tt=Ke[h+4>>2];h+=8;var Ve=Ga(U,C,Le,tt,Z);if(0>Ve){var Rt=-1;break e}_+=Ve,typeof Z<"u"&&(Z+=Ve)}Rt=_}return Ke[R>>2]=Rt,0}catch(bt){if(typeof gt>"u"||bt.name!=="ErrnoError")throw bt;return bt.Ka}}},De=function(){var b;function h(R){var U;return De=R.exports,k=De.I,Te(),Wt=De.Aa,nt.unshift(De.J),Se--,(U=p.monitorRunDependencies)==null||U.call(p,Se),Se==0&&me&&(R=me,me=null,R()),De}var _={a:ji};if(Se++,(b=p.monitorRunDependencies)==null||b.call(p,Se),p.instantiateWasm)try{return p.instantiateWasm(_,h)}catch(R){return ce(`Module.instantiateWasm callback failed with error: ${R}`),!1}return We(_,function(R){h(R.instance)}),{}}();p._sqlite3_free=h=>(p._sqlite3_free=De.K)(h),p._sqlite3_value_text=h=>(p._sqlite3_value_text=De.L)(h);var Aa=()=>(Aa=De.M)();p._sqlite3_prepare_v2=(h,_,b,R,U)=>(p._sqlite3_prepare_v2=De.N)(h,_,b,R,U),p._sqlite3_step=h=>(p._sqlite3_step=De.O)(h),p._sqlite3_reset=h=>(p._sqlite3_reset=De.P)(h),p._sqlite3_exec=(h,_,b,R,U)=>(p._sqlite3_exec=De.Q)(h,_,b,R,U),p._sqlite3_finalize=h=>(p._sqlite3_finalize=De.R)(h),p._sqlite3_column_name=(h,_)=>(p._sqlite3_column_name=De.S)(h,_),p._sqlite3_column_text=(h,_)=>(p._sqlite3_column_text=De.T)(h,_),p._sqlite3_column_type=(h,_)=>(p._sqlite3_column_type=De.U)(h,_),p._sqlite3_errmsg=h=>(p._sqlite3_errmsg=De.V)(h),p._sqlite3_clear_bindings=h=>(p._sqlite3_clear_bindings=De.W)(h),p._sqlite3_value_blob=h=>(p._sqlite3_value_blob=De.X)(h),p._sqlite3_value_bytes=h=>(p._sqlite3_value_bytes=De.Y)(h),p._sqlite3_value_double=h=>(p._sqlite3_value_double=De.Z)(h),p._sqlite3_value_int=h=>(p._sqlite3_value_int=De._)(h),p._sqlite3_value_type=h=>(p._sqlite3_value_type=De.$)(h),p._sqlite3_result_blob=(h,_,b,R)=>(p._sqlite3_result_blob=De.aa)(h,_,b,R),p._sqlite3_result_double=(h,_)=>(p._sqlite3_result_double=De.ba)(h,_),p._sqlite3_result_error=(h,_,b)=>(p._sqlite3_result_error=De.ca)(h,_,b),p._sqlite3_result_int=(h,_)=>(p._sqlite3_result_int=De.da)(h,_),p._sqlite3_result_int64=(h,_,b)=>(p._sqlite3_result_int64=De.ea)(h,_,b),p._sqlite3_result_null=h=>(p._sqlite3_result_null=De.fa)(h),p._sqlite3_result_text=(h,_,b,R)=>(p._sqlite3_result_text=De.ga)(h,_,b,R),p._sqlite3_aggregate_context=(h,_)=>(p._sqlite3_aggregate_context=De.ha)(h,_),p._sqlite3_column_count=h=>(p._sqlite3_column_count=De.ia)(h),p._sqlite3_data_count=h=>(p._sqlite3_data_count=De.ja)(h),p._sqlite3_column_blob=(h,_)=>(p._sqlite3_column_blob=De.ka)(h,_),p._sqlite3_column_bytes=(h,_)=>(p._sqlite3_column_bytes=De.la)(h,_),p._sqlite3_column_double=(h,_)=>(p._sqlite3_column_double=De.ma)(h,_),p._sqlite3_bind_blob=(h,_,b,R,U)=>(p._sqlite3_bind_blob=De.na)(h,_,b,R,U),p._sqlite3_bind_double=(h,_,b)=>(p._sqlite3_bind_double=De.oa)(h,_,b),p._sqlite3_bind_int=(h,_,b)=>(p._sqlite3_bind_int=De.pa)(h,_,b),p._sqlite3_bind_text=(h,_,b,R,U)=>(p._sqlite3_bind_text=De.qa)(h,_,b,R,U),p._sqlite3_bind_parameter_index=(h,_)=>(p._sqlite3_bind_parameter_index=De.ra)(h,_),p._sqlite3_sql=h=>(p._sqlite3_sql=De.sa)(h),p._sqlite3_normalized_sql=h=>(p._sqlite3_normalized_sql=De.ta)(h),p._sqlite3_changes=h=>(p._sqlite3_changes=De.ua)(h),p._sqlite3_close_v2=h=>(p._sqlite3_close_v2=De.va)(h),p._sqlite3_create_function_v2=(h,_,b,R,U,Z,le,Le,tt)=>(p._sqlite3_create_function_v2=De.wa)(h,_,b,R,U,Z,le,Le,tt),p._sqlite3_open=(h,_)=>(p._sqlite3_open=De.xa)(h,_);var zn=p._malloc=h=>(zn=p._malloc=De.ya)(h),Rn=p._free=h=>(Rn=p._free=De.za)(h);p._RegisterExtensionFunctions=h=>(p._RegisterExtensionFunctions=De.Ba)(h);var Ia=(h,_)=>(Ia=De.Ca)(h,_),Fn=()=>(Fn=De.Da)(),di=h=>(di=De.Ea)(h),Sn=h=>(Sn=De.Fa)(h);p.stackAlloc=Sn,p.stackSave=Fn,p.stackRestore=di,p.cwrap=(h,_,b,R)=>{var U=!b||b.every(Z=>Z==="number"||Z==="boolean");return _!=="string"&&U&&!R?p["_"+h]:function(){return Cs(h,_,b,arguments)}},p.addFunction=ci,p.removeFunction=qn,p.UTF8ToString=jn,p.ALLOC_NORMAL=Tr,p.allocate=wr,p.allocateUTF8OnStack=$a;var Ca;me=function h(){Ca||Ei(),Ca||(me=h)};function Ei(){function h(){if(!Ca&&(Ca=!0,p.calledRun=!0,!O)){if(p.noFSInit||bn||(bn=!0,Ka(),p.stdin=p.stdin,p.stdout=p.stdout,p.stderr=p.stderr,p.stdin?Zi("stdin",p.stdin):vi("/dev/tty","/dev/stdin"),p.stdout?Zi("stdout",null,p.stdout):vi("/dev/tty","/dev/stdout"),p.stderr?Zi("stderr",null,p.stderr):vi("/dev/tty1","/dev/stderr"),oi("/dev/stdin",0),oi("/dev/stdout",1),oi("/dev/stderr",1)),br=!1,Di(nt),p.onRuntimeInitialized&&p.onRuntimeInitialized(),p.postRun)for(typeof p.postRun=="function"&&(p.postRun=[p.postRun]);p.postRun.length;){var _=p.postRun.shift();B.unshift(_)}Di(B)}}if(!(0<Se)){if(p.preRun)for(typeof p.preRun=="function"&&(p.preRun=[p.preRun]);p.preRun.length;)fe();Di(Ne),0<Se||(p.setStatus?(p.setStatus("Running..."),setTimeout(function(){setTimeout(function(){p.setStatus("")},1),h()},1)):h())}}if(p.preInit)for(typeof p.preInit=="function"&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();return Ei(),g}),n)};i.exports=r,i.exports.default=r}(cm)),cm.exports}var uD=lD();const cD=qm(uD);let fm=null;const dD=async()=>{if(!fm)try{fm=await cD({locateFile:i=>`https://unpkg.com/sql.js@1.10.3/dist/${i}`})}catch(i){throw console.error("Failed to initialize sql.js:",i),new Error("Failed to initialize SQL.js. Check network connection or browser compatibility.")}return fm},fD=async i=>{const e=await dD(),n=await i.arrayBuffer();try{return new e.Database(new Uint8Array(n))}catch(r){throw console.error("Error creating database from file buffer:",r),new Error("Invalid or corrupted database file.")}},Pt=i=>{if(!i||i.length===0)return[];const{columns:e,values:n}=i[0];return n.map(r=>{const o={};return e.forEach((u,f)=>{o[u]=r[f]}),o})},hD=async(i,e,n,r,o)=>{if(!e.trim())return[];let u=`
    SELECT c.id, c.name, c.rarity, c.element 
    FROM cards c
    WHERE (c.name LIKE ? OR c.id LIKE ?)
  `;const f=[`%${e}%`,`${e}%`];if(n!==null){const g=n%10;n<10?(u+=" AND (c.element = ? OR c.element = ? OR c.element = ?)",f.push(g),f.push(g+10),f.push(g+20)):(u+=" AND c.element = ?",f.push(n))}r!==null&&(u+=" AND c.rarity = ?",f.push(r)),o==="base"?u+=" AND SUBSTR(c.id, 1, 1) = '1'":o==="transformed"&&(u+=" AND SUBSTR(c.id, 1, 1) != '1'"),u+=`
    ORDER BY c.name ASC, c.id ASC
    LIMIT 200; 
  `;try{const g=i.exec(u,f),y=Pt(g).map(A=>({id:String(A.id),name:String(A.name),rarity:Number(A.rarity),element:Number(A.element)})),p=new Map;for(const A of y){const N=A.id;if(N.length>1){const M=N.substring(0,N.length-1),X=N.substring(N.length-1);X==="1"?p.set(M,A):X==="0"?p.has(M)||p.set(M,A):p.has(N)||p.set(N,A)}else p.has(N)||p.set(N,A)}return Array.from(p.values()).sort((A,N)=>A.name<N.name?-1:A.name>N.name?1:A.id<N.id?-1:A.id>N.id?1:0).slice(0,50)}catch(g){throw console.error("DB search error:",g),new Error("Failed to search characters in the database.")}},oe=(i,e)=>i??e,mD=i=>({id:String(i.id),name:oe(i.name,""),description:oe(i.description,""),exec_timing_type:oe(i.exec_timing_type,0),efficacy_type:oe(i.efficacy_type,0),target_type:oe(i.target_type,0),sub_target_type_set_id:i.sub_target_type_set_id?String(i.sub_target_type_set_id):null,passive_skill_effect_id:i.passive_skill_effect_id?String(i.passive_skill_effect_id):null,calc_option:oe(i.calc_option,0),turn:oe(i.turn,0),is_once:oe(i.is_once,0),probability:oe(i.probability,100),causality_conditions:i.causality_conditions?String(i.causality_conditions):null,eff_value1:i.eff_value1,eff_value2:i.eff_value2,eff_value3:i.eff_value3,efficacy_values:oe(i.efficacy_values,"{}")}),pD=(i,e)=>({id:String(i.id),leader_skill_set_id:e,exec_timing_type:oe(i.exec_timing_type,0),target_type:oe(i.target_type,0),sub_target_type_set_id:i.sub_target_type_set_id?String(i.sub_target_type_set_id):null,causality_conditions:i.causality_conditions?String(i.causality_conditions):null,efficacy_type:oe(i.efficacy_type,0),efficacy_values:oe(i.efficacy_values,"[]"),calc_option:oe(i.calc_option,0)}),gD=(i,e)=>({id:String(i.id),special_set_id:e,type:oe(i.type,"Special::NormalEfficacySpecial"),efficacy_type:oe(i.efficacy_type,0),target_type:oe(i.target_type,0),calc_option:oe(i.calc_option,0),turn:oe(i.turn,1),prob:oe(i.prob,100),causality_conditions:i.causality_conditions?String(i.causality_conditions):null,eff_value1:i.eff_value1,eff_value2:i.eff_value2,eff_value3:i.eff_value3}),_D=(i,e)=>({id:String(i.id),active_skill_set_id:e,target_type:oe(i.target_type,0),sub_target_type_set_id:i.sub_target_type_set_id?String(i.sub_target_type_set_id):null,calc_option:oe(i.calc_option,0),efficacy_type:oe(i.efficacy_type,0),eff_val1:i.eff_val1,eff_val2:i.eff_val2,eff_val3:i.eff_val3,efficacy_values:oe(i.efficacy_values,"{}"),thumb_effect_id:i.thumb_effect_id?Number(i.thumb_effect_id):null,effect_se_id:i.effect_se_id?Number(i.effect_se_id):null}),yD=i=>({id:String(i.id),card_id:String(i.card_id),special_set_id:String(i.special_set_id),priority:oe(i.priority,0),style:oe(i.style,"Normal"),lv_start:oe(i.lv_start,Dd("","").lv_start),eball_num_start:oe(i.eball_num_start,Dd("","").eball_num_start),view_id:oe(i.view_id,0),card_costume_condition_id:oe(i.card_costume_condition_id,0),special_bonus_id1:oe(i.special_bonus_id1,0),special_bonus_lv1:oe(i.special_bonus_lv1,0),bonus_view_id1:oe(i.bonus_view_id1,0),special_bonus_id2:oe(i.special_bonus_id2,0),special_bonus_lv2:oe(i.special_bonus_lv2,0),bonus_view_id2:oe(i.bonus_view_id2,0),causality_conditions:i.causality_conditions?String(i.causality_conditions):null,special_asset_id:i.special_asset_id?String(i.special_asset_id):null}),vD=(i,e)=>({id:String(i.id),standby_skill_set_id:e,target_type:oe(i.target_type,0),target_type_values:oe(i.target_type_values,"{}"),sub_target_type_set_id:i.sub_target_type_set_id?String(i.sub_target_type_set_id):null,turn:oe(i.turn,0),efficacy_type:oe(i.efficacy_type,0),calc_option:i.calc_option?String(i.calc_option):null,efficacy_values:oe(i.efficacy_values,"{}"),thumb_effect_id:i.thumb_effect_id?String(i.thumb_effect_id):null,effect_se_id:i.effect_se_id?String(i.effect_se_id):null}),bD=(i,e)=>({id:String(i.id),finish_skill_set_id:e,target_type:oe(i.target_type,0),target_type_values:oe(i.target_type_values,"{}"),sub_target_type_set_id:i.sub_target_type_set_id?String(i.sub_target_type_set_id):null,turn:oe(i.turn,0),efficacy_type:oe(i.efficacy_type,0),calc_option:i.calc_option?String(i.calc_option):null,efficacy_values:oe(i.efficacy_values,"{}"),thumb_effect_id:i.thumb_effect_id?String(i.thumb_effect_id):null,effect_se_id:i.effect_se_id?String(i.effect_se_id):null}),ED=i=>({id:String(i.id),script_name:oe(i.script_name,""),lite_flicker_rate:oe(i.lite_flicker_rate,0),bgm_id:i.bgm_id?Number(i.bgm_id):null}),SD=i=>({id:String(i.id),category:oe(i.category,0),name:oe(i.name,""),pack_name:oe(i.pack_name,""),scene_name:oe(i.scene_name,""),red:oe(i.red,0),green:oe(i.green,0),blue:oe(i.blue,0),alpha:oe(i.alpha,0),lite_flicker_rate:oe(i.lite_flicker_rate,0)}),TD=async(i,e)=>{const n=i.exec("SELECT * FROM cards WHERE id = ?",[e]),r=Pt(n)[0];if(!r)return null;let o;if(r.card_unique_info_id){const E=i.exec("SELECT * FROM card_unique_infos WHERE id = ?",[r.card_unique_info_id]),A=Pt(E)[0];A?o={id:String(A.id),name:oe(A.name,""),kana:A.kana?String(A.kana):null}:o={id:String(r.card_unique_info_id),name:String(r.name||`Unique Info for ${e}`)}}const u={...zp(),id:String(r.id),name:oe(r.name,""),character_id:String(r.character_id),card_unique_info_id:String(r.card_unique_info_id),cost:oe(r.cost,0),rarity:oe(r.rarity,4),hp_init:oe(r.hp_init,0),hp_max:oe(r.hp_max,0),atk_init:oe(r.atk_init,0),atk_max:oe(r.atk_max,0),def_init:oe(r.def_init,0),def_max:oe(r.def_max,0),element:oe(r.element,0),lv_max:oe(r.lv_max,120),skill_lv_max:oe(r.skill_lv_max,10),grow_type:oe(r.grow_type,0),price:oe(r.price,0),exp_type:oe(r.exp_type,0),training_exp:oe(r.training_exp,0),special_motion:oe(r.special_motion,0),passive_skill_set_id:String(r.passive_skill_set_id||""),leader_skill_set_id:String(r.leader_skill_set_id||""),link_skill_ids:[r.link_skill1_id,r.link_skill2_id,r.link_skill3_id,r.link_skill4_id,r.link_skill5_id,r.link_skill6_id,r.link_skill7_id].map(E=>String(E||"")).filter(E=>E&&E!=="null"&&E.trim()!==""&&E.trim()!=="0"),category_ids:Pt(i.exec("SELECT card_category_id FROM card_card_categories WHERE card_id = ? ORDER BY num",[e])).map(E=>String(E.card_category_id)),eball_mod_min:oe(r.eball_mod_min,0),eball_mod_num100:oe(r.eball_mod_num100,0),eball_mod_mid:oe(r.eball_mod_mid,0),eball_mod_mid_num:oe(r.eball_mod_mid_num,0),eball_mod_max:oe(r.eball_mod_max,0),eball_mod_max_num:oe(r.eball_mod_max_num,0),max_level_reward_id:String(r.max_level_reward_id||"1"),max_level_reward_type:String(r.max_level_reward_type||"1"),collectable_type:oe(r.collectable_type,1),face_x:oe(r.face_x,0),face_y:oe(r.face_y,0),aura_id:r.aura_id?String(r.aura_id):null,is_selling_only:oe(r.is_selling_only,0),awakening_element_type:r.awakening_element_type,potential_board_id:r.potential_board_id?String(r.potential_board_id):null,active_skill_set_id_ref:"",standby_skill_set_id_ref:""},f={cardForms:[u],cardUniqueInfos:o?[o]:[],passiveSkillSets:[],leaderSkillSets:[],specialSets:[],activeSkillSets:[],cardSpecials:[],cardActiveSkills:[],cardStandbySkills:[],standbySkillSets:[],finishSkillSets:[],standbySkillSetFinishSkillSetRelations:[],finishSpecials:[],battleParams:[],passiveSkillEffects:[],effectPacks:[]};if(r.passive_skill_set_id){const E=i.exec("SELECT * FROM passive_skill_sets WHERE id = ?",[r.passive_skill_set_id]),A=Pt(E)[0];if(A){const N=Pt(i.exec("SELECT passive_skill_id FROM passive_skill_set_relations WHERE passive_skill_set_id = ? ORDER BY passive_skill_id",[A.id])).map(Q=>String(Q.passive_skill_id)),M=N.length?Pt(i.exec(`SELECT * FROM passive_skills WHERE id IN (${N.map(()=>"?").join(",")}) ORDER BY id`,N)).map(mD):[];f.passiveSkillSets.push({id:String(A.id),name:oe(A.name,""),description:oe(A.description,""),itemized_description:A.itemized_description?String(A.itemized_description):null,skills:M});const X=new Set;if(M.forEach(Q=>{Q.passive_skill_effect_id&&X.add(Q.passive_skill_effect_id),(Q.efficacy_type===103||Q.efficacy_type===131)&&Q.eff_value3&&String(Q.eff_value3).trim()!==""&&X.add(String(Q.eff_value3))}),X.size>0){const Q=Array.from(X),$=[],re=[];Q.forEach(ie=>{const F=Number(ie);!isNaN(F)&&String(F)===ie?$.push(F):ie&&ie.trim()!==""&&re.push(ie)});const pe=[];if($.length>0){const ie=i.exec(`SELECT * FROM passive_skill_effects WHERE id IN (${$.map(()=>"?").join(",")})`,$);pe.push(...Pt(ie))}if(re.length>0){const ie=i.exec(`SELECT * FROM passive_skill_effects WHERE id IN (${re.map(()=>"?").join(",")})`,re);pe.push(...Pt(ie))}const _e=new Map;pe.forEach(ie=>{_e.set(String(ie.id),ie)}),_e.forEach(ie=>{const F=String(ie.id);f.passiveSkillEffects.find(ce=>ce.id===F)||f.passiveSkillEffects.push(ED(ie))})}}}if(r.leader_skill_set_id){const E=i.exec("SELECT * FROM leader_skill_sets WHERE id = ?",[r.leader_skill_set_id]),A=Pt(E)[0];if(A){const N=Pt(i.exec("SELECT * FROM leader_skills WHERE leader_skill_set_id = ? ORDER BY id",[A.id])).map(M=>pD(M,String(A.id)));f.leaderSkillSets.push({id:String(A.id),name:oe(A.name,""),description:oe(A.description,""),skills:N})}}const g=Pt(i.exec("SELECT * FROM card_specials WHERE card_id = ? ORDER BY priority, eball_num_start",[e]));for(const E of g){f.cardSpecials.push(yD(E));const A=String(E.special_set_id);if(A&&!f.specialSets.find(N=>N.id===A)){const N=i.exec("SELECT * FROM special_sets WHERE id = ?",[A]),M=Pt(N)[0];if(M){const X=Pt(i.exec("SELECT * FROM specials WHERE special_set_id = ? ORDER BY id",[A])).map(Q=>gD(Q,A));f.specialSets.push({id:A,name:oe(M.name,""),description:oe(M.description,""),causality_description:M.causality_description?String(M.causality_description):null,aim_target:oe(M.aim_target,0),increase_rate:oe(M.increase_rate,0),lv_bonus:oe(M.lv_bonus,0),is_inactive:oe(M.is_inactive,0),skills:X})}}}const y=Pt(i.exec("SELECT * FROM card_active_skills WHERE card_id = ? LIMIT 1",[e]))[0];if(y!=null&&y.active_skill_set_id){u.active_skill_set_id_ref=String(y.active_skill_set_id),f.cardActiveSkills.push({id:String(y.id),card_id:String(y.card_id),active_skill_set_id:String(y.active_skill_set_id)});const E=String(y.active_skill_set_id);if(!f.activeSkillSets.find(A=>A.id===E)){const A=i.exec("SELECT * FROM active_skill_sets WHERE id = ?",[E]),N=Pt(A)[0];if(N){const M=Pt(i.exec("SELECT * FROM active_skills WHERE active_skill_set_id = ? ORDER BY id",[E])).map(Q=>_D(Q,E));f.activeSkillSets.push({id:E,name:oe(N.name,""),effect_description:oe(N.effect_description,""),condition_description:oe(N.condition_description,""),turn:oe(N.turn,0),exec_limit:oe(N.exec_limit,0),causality_conditions:N.causality_conditions?String(N.causality_conditions):null,ultimate_special_id:N.ultimate_special_id?Number(N.ultimate_special_id):null,special_view_id:N.special_view_id?Number(N.special_view_id):null,costume_special_view_id:oe(N.costume_special_view_id,0),bgm_id:N.bgm_id?Number(N.bgm_id):null,skills:M});const X=new Set;if(M.forEach(Q=>{Q.efficacy_type===109&&Q.eff_val2&&String(Q.eff_val2).trim()!==""&&X.add(String(Q.eff_val2))}),X.size>0){const Q=Array.from(X),$=[],re=[];Q.forEach(ie=>{const F=Number(ie);!isNaN(F)&&String(F)===ie?$.push(F):ie&&ie.trim()!==""&&re.push(ie)});const pe=[];if($.length>0){const ie=i.exec(`SELECT * FROM effect_packs WHERE id IN (${$.map(()=>"?").join(",")})`,$);pe.push(...Pt(ie))}if(re.length>0){const ie=i.exec(`SELECT * FROM effect_packs WHERE id IN (${re.map(()=>"?").join(",")})`,re);pe.push(...Pt(ie))}const _e=new Map;pe.forEach(ie=>{_e.set(String(ie.id),ie)}),_e.forEach(ie=>{f.effectPacks.find(F=>F.id===String(ie.id))||f.effectPacks.push(SD(ie))})}}}}const p=Pt(i.exec("SELECT * FROM card_standby_skill_set_relations WHERE card_id = ? LIMIT 1",[e]))[0];if(p!=null&&p.standby_skill_set_id){u.standby_skill_set_id_ref=String(p.standby_skill_set_id),f.cardStandbySkills.push({id:String(p.id),card_id:String(p.card_id),standby_skill_set_id:String(p.standby_skill_set_id)});const E=String(p.standby_skill_set_id);if(!f.standbySkillSets.find(A=>A.id===E)){const A=i.exec("SELECT * FROM standby_skill_sets WHERE id = ?",[E]),N=Pt(A)[0];if(N){const M=Pt(i.exec("SELECT * FROM standby_skills WHERE standby_skill_set_id = ? ORDER BY id",[E])).map(Q=>vD(Q,E)),X=Pt(i.exec("SELECT * FROM standby_skill_set_finish_skill_set_relations WHERE standby_skill_set_id = ?",[E])).map(Q=>({id:String(Q.id),standby_skill_set_id:String(Q.standby_skill_set_id),finish_skill_set_id:String(Q.finish_skill_set_id)}));f.standbySkillSets.push({id:E,name:oe(N.name,""),ingame_icon_path:oe(N.ingame_icon_path,""),effect_description:oe(N.effect_description,""),condition_description:oe(N.condition_description,""),exec_limit:oe(N.exec_limit,0),causality_conditions:N.causality_conditions?String(N.causality_conditions):null,special_view_id:N.special_view_id?Number(N.special_view_id):null,costume_special_view_id:oe(N.costume_special_view_id,0),bgm_id:N.bgm_id?Number(N.bgm_id):null,skills:M,finishSkillSetRelations:X}),f.standbySkillSetFinishSkillSetRelations.push(...X);for(const Q of X){const $=Q.finish_skill_set_id;if(!f.finishSkillSets.find(re=>re.id===$)){const re=i.exec("SELECT * FROM finish_skill_sets WHERE id = ?",[$]),pe=Pt(re)[0];if(pe){const _e=Pt(i.exec("SELECT * FROM finish_skills WHERE finish_skill_set_id = ? ORDER BY id",[$])).map(ie=>bD(ie,$));if(f.finishSkillSets.push({id:$,name:oe(pe.name,""),effect_description:oe(pe.effect_description,""),condition_description:oe(pe.condition_description,""),dialog_order:oe(pe.dialog_order,0),dialog_images:pe.dialog_images?String(pe.dialog_images):null,exec_timing_type:oe(pe.exec_timing_type,0),exec_limit:oe(pe.exec_limit,0),causality_conditions:pe.causality_conditions?String(pe.causality_conditions):null,finish_special_id:pe.finish_special_id?String(pe.finish_special_id):null,special_view_id:pe.special_view_id?Number(pe.special_view_id):null,costume_special_view_id:oe(pe.costume_special_view_id,0),bgm_id:pe.bgm_id?Number(pe.bgm_id):null,is_dialog_view_visible:oe(pe.is_dialog_view_visible,1),skills:_e}),pe.finish_special_id&&String(pe.finish_special_id).trim()!==""&&!f.finishSpecials.find(ie=>ie.id===String(pe.finish_special_id))){const ie=i.exec("SELECT * FROM finish_specials WHERE id = ?",[pe.finish_special_id]),F=Pt(ie)[0];F&&f.finishSpecials.push({id:String(F.id),increase_rate:oe(F.increase_rate,0),aim_target:oe(F.aim_target,0)})}}}}}}}if(u.rarity===5&&r.optimal_awakening_grow_type){const E=i.exec("SELECT * FROM optimal_awakening_growths WHERE optimal_awakening_grow_type = ?",[r.optimal_awakening_grow_type]),A=Pt(E)[0];A&&(f.optimalAwakeningGrowth={id:String(A.id),optimal_awakening_grow_type:String(A.optimal_awakening_grow_type),step:oe(A.step,0),lv_max:oe(A.lv_max,0),skill_lv_max:oe(A.skill_lv_max,0),passive_skill_set_id:String(A.passive_skill_set_id),leader_skill_set_id:String(A.leader_skill_set_id)},f.isEZA=!0,f.baseCardIdForEZA=e)}return f},wD=async(i,e)=>{var k,O,C,L,q,P,Ke,yt,ae,Te,Ne,nt,B,fe,Se;const n=new Set,r=new Set,o=parseInt(e.slice(0,-1));isNaN(o)?n.add(e):(n.add(String(o)+"0"),n.add(String(o)+"1"));const u=[],f=new Map,g=new Map,y=new Map,p=new Map,E=new Map,A=new Map,N=new Map,M=new Map,X=new Map,Q=new Map,$=new Map,re=new Map,pe=[],_e=new Map,ie=new Map;let F={isEZA:!1};const ce=Array.from(n);for(;ce.length>0;){const me=ce.shift();if(!me||r.has(me))continue;r.add(me);const ye=await TD(i,me);ye&&((k=ye.cardForms)==null||k.forEach(ge=>{u.find(te=>te.id===ge.id)||u.push(ge)}),(O=ye.cardUniqueInfos)==null||O.forEach(ge=>{f.has(ge.id)||f.set(ge.id,ge)}),(C=ye.passiveSkillSets)==null||C.forEach(ge=>{g.has(ge.id)||g.set(ge.id,ge),ge.skills.forEach(te=>{if((te.efficacy_type===103||te.efficacy_type===131)&&te.eff_value1&&String(te.eff_value1).trim()!==""){const we=String(te.eff_value1);!r.has(we)&&!ce.includes(we)&&ce.push(we)}})}),(L=ye.leaderSkillSets)==null||L.forEach(ge=>{y.has(ge.id)||y.set(ge.id,ge)}),(q=ye.specialSets)==null||q.forEach(ge=>{p.has(ge.id)||p.set(ge.id,ge)}),(P=ye.activeSkillSets)==null||P.forEach(ge=>{E.has(ge.id)||E.set(ge.id,ge)}),(Ke=ye.cardSpecials)==null||Ke.forEach(ge=>{A.has(ge.id)||A.set(ge.id,ge)}),(yt=ye.cardActiveSkills)==null||yt.forEach(ge=>{N.has(ge.id)||N.set(ge.id,ge)}),(ae=ye.cardStandbySkills)==null||ae.forEach(ge=>{re.has(ge.id)||re.set(ge.id,ge)}),(Te=ye.standbySkillSets)==null||Te.forEach(ge=>{M.has(ge.id)||M.set(ge.id,ge)}),(Ne=ye.finishSkillSets)==null||Ne.forEach(ge=>{X.has(ge.id)||X.set(ge.id,ge)}),(nt=ye.standbySkillSetFinishSkillSetRelations)==null||nt.forEach(ge=>{Q.has(ge.id)||Q.set(ge.id,ge)}),(B=ye.finishSpecials)==null||B.forEach(ge=>{$.has(ge.id)||$.set(ge.id,ge)}),(fe=ye.passiveSkillEffects)==null||fe.forEach(ge=>{_e.has(ge.id)||_e.set(ge.id,ge)}),(Se=ye.effectPacks)==null||Se.forEach(ge=>{ie.has(ge.id)||ie.set(ge.id,ge)}),ye.isEZA&&ye.optimalAwakeningGrowth&&(!F.isEZA||F.baseCardIdForEZA===me)&&(F={isEZA:!0,baseCardIdForEZA:ye.baseCardIdForEZA||me,optimalAwakeningGrowth:ye.optimalAwakeningGrowth}))}if(u.length===0)return null;const I=parseInt(e.slice(0,-1))+"0";return u.sort((me,ye)=>me.id===I?-1:ye.id===I?1:me.id<ye.id?-1:me.id>ye.id?1:0),{cardForms:u,cardUniqueInfos:Array.from(f.values()),passiveSkillSets:Array.from(g.values()),leaderSkillSets:Array.from(y.values()),specialSets:Array.from(p.values()),activeSkillSets:Array.from(E.values()),cardSpecials:Array.from(A.values()),cardActiveSkills:Array.from(N.values()),cardStandbySkills:Array.from(re.values()),standbySkillSets:Array.from(M.values()),finishSkillSets:Array.from(X.values()),standbySkillSetFinishSkillSetRelations:Array.from(Q.values()),finishSpecials:Array.from($.values()),battleParams:pe,passiveSkillEffects:Array.from(_e.values()),effectPacks:Array.from(ie.values()),...F}},AD=[{label:"All Cards",value:"all"},{label:"Base Cards (ID starts with 1)",value:"base"},{label:"Other/Transformed (ID not 1..)",value:"transformed"}],ID=({isOpen:i,onClose:e,dbInstance:n,onCharacterSelected:r,elementTypes:o,rarityTypes:u})=>{const[f,g]=Oe.useState(""),[y,p]=Oe.useState([]),[E,A]=Oe.useState(!1),[N,M]=Oe.useState(!1),[X,Q]=Oe.useState(null),[$,re]=Oe.useState(""),[pe,_e]=Oe.useState(""),[ie,F]=Oe.useState("all"),ce=Oe.useCallback(async()=>{if(n){if(!f.trim()){p([]),Q(null);return}A(!0),Q(null);try{const C=$?parseInt($):null,L=pe?parseInt(pe):null,q=await hD(n,f,C,L,ie);p(q),q.length===0&&Q("No characters found matching your search criteria.")}catch(C){console.error("Search error:",C),Q(C instanceof Error?C.message:"Failed to search characters."),p([])}finally{A(!1)}}},[n,f,$,pe,ie]);Oe.useEffect(()=>{const C=setTimeout(()=>{f.length>0?ce():f.length===0&&(p([]),Q(null))},300);return()=>clearTimeout(C)},[f,$,pe,ie,ce]);const I=async C=>{M(!0),Q(null);try{const L=await wD(n,C);L?(r(L),e()):Q(`Could not load details for character ID: ${C}.`)}catch(L){console.error("Load details error:",L),Q(L instanceof Error?L.message:`Failed to load details for character ID: ${C}.`)}finally{M(!1)}};if(!i)return null;const k=[{label:"All Elements",value:""},...KS],O=[{label:"All Rarities",value:""},...YS];return S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50 backdrop-blur-sm font-rajdhani",children:S.jsxs("div",{className:"bg-indigo-900 p-6 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col border-2 border-orange-500",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h3",{className:"text-2xl font-bold text-orange-400",children:"Load Character from Database"}),S.jsx("button",{onClick:e,className:"text-indigo-300 hover:text-orange-400 text-2xl",children:S.jsx("i",{className:"fas fa-times"})})]}),S.jsx(ve,{label:"Search Character Name or ID",value:f,onChange:g,placeholder:"e.g., Goku, Vegeta, 1000010...",className:"mb-4"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[S.jsx(rn,{label:"Element",value:$,onChange:C=>re(C),options:k}),S.jsx(rn,{label:"Rarity",value:pe,onChange:C=>_e(C),options:O}),S.jsx(rn,{label:"Card Type Filter",value:ie,onChange:C=>F(C),options:AD})]}),E&&S.jsxs("p",{className:"text-center text-indigo-300 my-4",children:[S.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Searching..."]}),N&&S.jsxs("p",{className:"text-center text-indigo-300 my-4",children:[S.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Loading character details..."]}),X&&S.jsx("p",{className:"text-red-400 text-sm text-center my-4 p-2 bg-red-900 bg-opacity-50 rounded",children:X}),S.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:[y.map(C=>{const L=C.element%10,q=L===0?"bg-blue-500":L===1?"bg-green-500":L===2?"bg-purple-500":L===3?"bg-red-500":L===4?"bg-orange-500":"bg-gray-500";return S.jsxs("div",{className:"p-3 bg-indigo-800 hover:bg-indigo-700 rounded-lg shadow-md cursor-pointer transition-all flex justify-between items-center border border-indigo-700 hover:border-orange-500",onClick:()=>!N&&I(C.id),role:"button",tabIndex:0,onKeyPress:P=>P.key==="Enter"&&!N&&I(C.id),"aria-label":`Load character ${C.name||C.title||C.id}`,children:[S.jsxs("div",{children:[S.jsxs("p",{className:"font-semibold text-orange-300 text-lg",children:[C.name," ",S.jsx("span",{className:"text-sm text-indigo-300 font-normal",children:C.title?`(${C.title})`:""})]}),S.jsxs("p",{className:"text-xs text-indigo-400 font-roboto-mono",children:["ID: ",C.id]})]}),S.jsxs("div",{className:"text-right",children:[S.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold text-white ${q}`,children:o[C.element]||"???"}),S.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-gray-600 text-white",children:u[C.rarity]||"???"})]})]},C.id)}),y.length===0&&!E&&f&&!X&&S.jsx("p",{className:"text-center text-indigo-300 italic",children:"No results. Try adjusting your search or filters."})]}),S.jsx("div",{className:"mt-6 pt-4 border-t border-indigo-700 flex justify-end",children:S.jsx("button",{onClick:e,className:"py-2 px-5 bg-indigo-600 hover:bg-indigo-500 text-indigo-100 rounded-md transition-colors font-semibold shadow-md hover:shadow-lg",disabled:N,children:"Cancel"})})]})})},CD=({isOpen:i,onClose:e,currentUser:n,lastLoadedSlot:r,onSaveToSlot:o,onLoadFromSlot:u,isSavingSlot1:f,isSavingSlot2:g,isGlobalLoading:y})=>{const[p,E]=Oe.useState({updatedAt:null,exists:!1,isLoading:!1}),[A,N]=Oe.useState({updatedAt:null,exists:!1,isLoading:!1}),[M,X]=Oe.useState(!1),[Q,$]=Oe.useState(null),re=Oe.useCallback(async()=>{if(n){X(!0),$(null);try{const[F,ce]=await Promise.all([G0(n.uid,"slot1"),G0(n.uid,"slot2")]);E(I=>({...I,updatedAt:F.updatedAt?F.updatedAt.toDate():null,exists:F.exists})),N(I=>({...I,updatedAt:ce.updatedAt?ce.updatedAt.toDate():null,exists:ce.exists}))}catch(F){console.error("Error fetching slot metadata:",F),$(F instanceof Error?F.message:"Failed to fetch slot information.")}finally{X(!1)}}},[n]);Oe.useEffect(()=>{i&&n&&re()},[i,n,re]);const pe=async F=>{const ce=F==="slot1"?E:N;ce(k=>({...k,isLoading:!0})),$(null),await o(F)&&re(),ce(k=>({...k,isLoading:!1}))},_e=async F=>{const ce=F==="slot1"?E:N;ce(I=>({...I,isLoading:!0})),$(null),await u(F),ce(I=>({...I,isLoading:!1}))};if(!i)return null;const ie=(F,ce,I)=>{const k=F.replace("s","S"),O=r===F;return S.jsxs("div",{className:`p-4 rounded-lg shadow-md ${O?"bg-green-700 bg-opacity-30 border-2 border-green-500":"bg-indigo-700 bg-opacity-50 border border-indigo-600"}`,children:[S.jsxs("h4",{className:`text-xl font-semibold mb-2 ${O?"text-green-300":"text-orange-300"} font-rajdhani`,children:[k," ",O&&S.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-500 text-white rounded-md ml-2",children:"ACTIVE"})]}),M?S.jsxs("p",{className:"text-sm text-indigo-300 italic",children:[S.jsx("i",{className:"fas fa-spinner fa-spin mr-1"}),"Loading info..."]}):S.jsxs(S.Fragment,{children:[S.jsxs("p",{className:"text-xs text-indigo-300 mb-1",children:["Last Saved: ",ce.updatedAt?ce.updatedAt.toLocaleString():ce.exists?"Unknown":"Empty"]}),!ce.exists&&!ce.updatedAt&&S.jsx("p",{className:"text-xs text-yellow-400 italic mb-3",children:"This slot is empty."})]}),S.jsxs("div",{className:"flex space-x-3 mt-3",children:[S.jsx("button",{onClick:()=>pe(F),disabled:I||y||M||ce.isLoading,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center",children:I||ce.isLoading?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fas fa-save mr-2"}),"Save to Slot"]})}),S.jsx("button",{onClick:()=>_e(F),disabled:!ce.exists||y||M||ce.isLoading,className:"flex-1 bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center",children:ce.isLoading&&!I?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Loading..."]}):S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fas fa-cloud-download-alt mr-2"}),"Load from Slot"]})})]})]})};return S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50 backdrop-blur-sm font-rajdhani",children:S.jsxs("div",{className:"bg-indigo-900 p-6 rounded-xl shadow-2xl w-full max-w-xl max-h-[90vh] flex flex-col border-2 border-orange-500",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h3",{className:"text-2xl font-bold text-orange-400",children:"Cloud Save Slots"}),S.jsx("button",{onClick:e,disabled:p.isLoading||A.isLoading||f||g||y||M,className:"text-indigo-300 hover:text-orange-400 text-2xl disabled:opacity-50",children:S.jsx("i",{className:"fas fa-times"})})]}),Q&&S.jsx("p",{className:"text-red-400 text-sm mb-4 bg-red-900 bg-opacity-50 p-2 rounded-md",children:Q}),S.jsxs("div",{className:"space-y-6 flex-grow overflow-y-auto pr-1 custom-scrollbar",children:[ie("slot1",p,f),ie("slot2",A,g)]}),S.jsx("div",{className:"mt-6 pt-4 border-t border-indigo-700 flex justify-end",children:S.jsx("button",{onClick:e,disabled:p.isLoading||A.isLoading||f||g||y||M,className:"py-2 px-5 bg-indigo-600 hover:bg-indigo-500 text-indigo-100 rounded-md transition-colors font-semibold shadow-md hover:shadow-lg disabled:opacity-50",children:"Close"})})]})})},xD=()=>{const[i,e]=Oe.useState(""),[n,r]=Oe.useState(""),[o,u]=Oe.useState(null),[f,g]=Oe.useState(!1),[y,p]=Oe.useState(!1),E=async N=>{N.preventDefault(),g(!0),u(null);try{y?(await s2(i,n),$n("sign_up",{method:"email"}),alert("Sign up successful! Please sign in."),p(!1)):await o2(i,n)}catch(M){u(M.message||"Failed to authenticate."),console.error("Email/Pass Auth Error:",M)}finally{g(!1)}},A=async()=>{g(!0),u(null);try{await l2()}catch(N){u(N.message||"Failed to sign in with Google."),console.error("Google Sign In Error:",N)}finally{g(!1)}};return S.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-indigo-900 text-indigo-100 font-rajdhani",children:[S.jsxs("div",{className:"bg-indigo-800 bg-opacity-70 p-8 sm:p-10 md:p-14 rounded-xl shadow-2xl w-full max-w-md text-center border-2 border-orange-500 border-opacity-50",children:[S.jsx("div",{className:"mb-6 text-center",children:S.jsx("i",{className:"fas fa-dragon text-6xl text-orange-400 p-3 bg-orange-500 bg-opacity-20 rounded-full shadow-lg",style:{textShadow:"0 0 10px rgba(251, 146, 60, 0.7)"}})}),S.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-orange-400 tracking-wider title-animated mb-3",children:"Dokkan Patch Maker"}),S.jsx("p",{className:"text-indigo-200 text-md sm:text-lg mb-8",children:y?"Create an account":"Sign in to continue"}),!1,S.jsxs("form",{onSubmit:E,className:"space-y-5",children:[S.jsx(ve,{label:"Email",type:"email",value:i,onChange:e,placeholder:"your@email.com",disabled:f||!1}),S.jsx(ve,{label:"Password",type:"password",value:n,onChange:r,placeholder:"",disabled:f||!1}),o&&S.jsx("p",{className:"text-red-400 text-sm bg-red-900 bg-opacity-40 p-2 rounded-md",children:o}),S.jsxs("button",{type:"submit",disabled:f||!i||!n||!1,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-orange-400 font-rajdhani text-lg",children:[f&&S.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),y?"Sign Up":"Sign In"]})]}),S.jsx("button",{onClick:()=>{p(!y),u(null)},disabled:f||!1,className:"mt-4 text-sm text-orange-300 hover:text-orange-400 disabled:opacity-60",children:y?"Already have an account? Sign In":"Don't have an account? Sign Up"}),S.jsxs("div",{className:"my-6 flex items-center",children:[S.jsx("hr",{className:"flex-grow border-t border-indigo-600"}),S.jsx("span",{className:"px-3 text-indigo-400 text-sm",children:"OR"}),S.jsx("hr",{className:"flex-grow border-t border-indigo-600"})]}),S.jsxs("button",{onClick:A,disabled:f||!1,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-400 font-rajdhani text-lg",children:[f&&S.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),S.jsx("i",{className:"fab fa-google mr-2"})," Sign In with Google"]})]}),S.jsxs("footer",{className:"absolute bottom-4 text-center w-full text-xs text-indigo-400 opacity-80",children:[S.jsxs("p",{children:[" ",new Date().getFullYear()," Dokkan Patch Maker by @RapiddRobbiee. For personal and educational use only."]}),S.jsx("p",{className:"text-xs opacity-50",children:"Powered by Google Firebase & Gemini"})]})]})},Q0=!0,fu=()=>({cardForms:[zp()],cardUniqueInfos:[],passiveSkillSets:[],leaderSkillSets:[],specialSets:[],activeSkillSets:[],cardSpecials:[],cardActiveSkills:[],cardStandbySkills:[],passiveSkillEffects:[],effectPacks:[],standbySkillSets:[],finishSkillSets:[],standbySkillSetFinishSkillSetRelations:[],finishSpecials:[],battleParams:[],isEZA:!1}),RD=()=>{const[i,e]=Oe.useState(null),[n,r]=Oe.useState(Q0),o=Oe.useRef(null),[u,f]=Oe.useState(fu()),[g,y]=Oe.useState(""),[p,E]=Oe.useState(!1),[A,N]=Oe.useState(!1),[M,X]=Oe.useState(null),[Q,$]=Oe.useState(null),[re,pe]=Oe.useState(!1),[_e,ie]=Oe.useState("cardForms"),[F,ce]=Oe.useState(null),[I,k]=Oe.useState(!1),[O,C]=Oe.useState(null),[L,q]=Oe.useState(!1),P=Oe.useRef(null);Oe.useEffect(()=>{{mE();const te=r2(async we=>{var xe;if(e(we),we){if(!o.current&&we){const pt=((xe=we.providerData[0])==null?void 0:xe.providerId)||"unknown";$n("login",{method:pt})}N(!0),$(null);let Je=null,Ze=null;try{const pt=await um(we.uid,"slot1");if(pt&&pt.patchData)Je=pt.patchData,Ze="slot1";else{const We=await um(we.uid,"slot2");We&&We.patchData&&(Je=We.patchData,Ze="slot2")}Je&&Ze?(f(Je),y(""),ie("cardForms"),$(Ze)):(f(fu()),$(null))}catch(pt){console.error("Error auto-loading patch state from Firestore:",pt),alert(`Failed to auto-load your saved patch: ${pt instanceof Error?pt.message:"Unknown error"}. Starting fresh.`),f(fu()),$(null)}finally{N(!1)}}else f(fu()),y(""),$(null);o.current=we,r(!1)});return()=>te()}},[]);const Ke=async()=>{try{await u2(),$n("sign_out"),alert("Signed out successfully.")}catch(te){console.error("Sign out error:",te),alert(`Failed to sign out: ${te instanceof Error?te.message:"Unknown error"}`)}},yt=async te=>{var xe;const we=(xe=te.target.files)==null?void 0:xe[0];if(we){k(!0),C(null),ce(null);try{const Je=await fD(we);ce(Je),$n("db_file_loaded",{file_size:we.size}),alert("Database loaded successfully!")}catch(Je){console.error("Error loading database:",Je),C(Je instanceof Error?Je.message:"Unknown error loading database."),$n("db_file_load_failed"),alert(`Error loading database: ${Je instanceof Error?Je.message:"Unknown error"}`)}finally{k(!1),P.current&&(P.current.value="")}}},ae=te=>{var we,xe,Je,Ze;f(te),y(""),ie("cardForms"),q(!1),$(null),$n("character_loaded_from_db",{card_id:(we=te.cardForms[0])==null?void 0:we.id,card_name_length:(Je=(xe=te.cardForms[0])==null?void 0:xe.name)==null?void 0:Je.length}),alert(`Character "${((Ze=te.cardForms[0])==null?void 0:Ze.name)||"Unknown"}" loaded successfully! Remember to save to a cloud slot if needed.`)},Te=Oe.useCallback((te,we)=>{f(xe=>{const Je=xe.cardForms[te];let Ze={...xe};const pt=xe.cardForms.map((We,Ce)=>Ce===te?we:We);if(Ze.cardForms=pt,Je.id!==we.id&&oa(Je.id)){const We=Je.id,Ce=we.id,rt=Mt.CARD_UNIQUE_INFO+We;if(oa(rt)){const qe=Mt.CARD_UNIQUE_INFO+Ce;Ze.cardUniqueInfos=xe.cardUniqueInfos.map(st=>st.id===rt?{...st,id:qe}:st),we.card_unique_info_id===rt&&(we.card_unique_info_id=qe)}[{key:"passiveSkillSets",idField:"passive_skill_set_id",prefix:Mt.PASSIVE_SKILL_SET},{key:"leaderSkillSets",idField:"leader_skill_set_id",prefix:Mt.LEADER_SKILL_SET},{key:"activeSkillSets",idField:"active_skill_set_id_ref",prefix:Mt.ACTIVE_SKILL_SET},{key:"standbySkillSets",idField:"standby_skill_set_id_ref",prefix:Mt.STANDBY_SKILL_SET}].forEach(qe=>{const st=qe.prefix+We;if(oa(st)&&Je[qe.idField]===st){const Vt=qe.prefix+Ce;Ze[qe.key]=xe[qe.key].map(si=>si.id===st?{...si,id:Vt}:si),qe.idField!=="id"&&(we[qe.idField]=Vt)}});const on=Mt.SPECIAL_SET+We;if(oa(on)){const qe=Mt.SPECIAL_SET+Ce;Ze.specialSets=xe.specialSets.map(st=>st.id===on?{...st,id:qe}:st),Ze.cardSpecials=Ze.cardSpecials.map(st=>st.card_id===We&&st.special_set_id===on?{...st,card_id:Ce,special_set_id:qe}:st.card_id===We?{...st,card_id:Ce}:st)}else Ze.cardSpecials=Ze.cardSpecials.map(qe=>qe.card_id===We?{...qe,card_id:Ce}:qe);const Gt=Je.active_skill_set_id_ref,Oi=we.active_skill_set_id_ref;Gt&&Oi&&(Ze.cardActiveSkills=Ze.cardActiveSkills.map(qe=>qe.card_id===We&&qe.active_skill_set_id===Gt?{...qe,card_id:Ce,active_skill_set_id:Oi,id:`${Ce}${Oi}`}:qe));const vt=Je.standby_skill_set_id_ref,jn=we.standby_skill_set_id_ref;if(vt&&jn&&(Ze.cardStandbySkills=Ze.cardStandbySkills.map(qe=>qe.card_id===We&&qe.standby_skill_set_id===vt?{...qe,card_id:Ce,standby_skill_set_id:jn,id:`${Ce}${jn}`}:qe)),xe.isEZA&&xe.optimalAwakeningGrowth&&xe.baseCardIdForEZA===We){let qe={...xe.optimalAwakeningGrowth};const st=Mt.OPTIMAL_AWAKENING_GROWTH_ID+Ce,Vt=Mt.OPTIMAL_AWAKENING_GROWTH_TYPE_ID+Ce;oa(qe.id)&&qe.id.endsWith(We)&&(qe.id=st),oa(qe.optimal_awakening_grow_type)&&qe.optimal_awakening_grow_type.endsWith(We)&&(qe.optimal_awakening_grow_type=Vt),Ze.optimalAwakeningGrowth=qe,Ze.baseCardIdForEZA=Ce}Ze.cardForms=xe.cardForms.map((qe,st)=>st===te?we:qe)}return Ze}),$(null)},[]),Ne=Oe.useCallback(()=>{const te=ri(),we=Mt.CARD_UNIQUE_INFO+te,xe=Mt.PASSIVE_SKILL_SET+te,Je=Mt.LEADER_SKILL_SET+te,Ze=Mt.ACTIVE_SKILL_SET+te,pt=Mt.STANDBY_SKILL_SET+te,We=Mt.SPECIAL_SET+te,Ce={...zp(),id:te,name:`New Card ${te}`,card_unique_info_id:we,passive_skill_set_id:xe,leader_skill_set_id:Je,active_skill_set_id_ref:Ze,standby_skill_set_id_ref:pt},rt={id:we,name:`Character Name for ${te}`},Di={id:xe,name:`Passive for ${te}`,description:"",skills:[]},on={id:Je,name:`Leader for ${te}`,description:"",skills:[]},Gt={id:Ze,name:`Active for ${te}`,effect_description:"",condition_description:"",turn:1,exec_limit:1,skills:[],costume_special_view_id:0},Oi={id:pt,name:`Standby for ${te}`,ingame_icon_path:"",effect_description:"",condition_description:"",exec_limit:1,skills:[],costume_special_view_id:0},vt={id:We,name:`Special for ${te}`,description:"",skills:[],aim_target:0,increase_rate:180,lv_bonus:25,is_inactive:0},jn=Dd(te,We),qe={id:`${te}${Ze}`,card_id:te,active_skill_set_id:Ze},st={id:`${te}${pt}`,card_id:te,standby_skill_set_id:pt};f(Vt=>({...Vt,cardForms:[...Vt.cardForms,Ce],cardUniqueInfos:[...Vt.cardUniqueInfos,rt],passiveSkillSets:[...Vt.passiveSkillSets,Di],leaderSkillSets:[...Vt.leaderSkillSets,on],activeSkillSets:[...Vt.activeSkillSets,Gt],standbySkillSets:[...Vt.standbySkillSets,Oi],specialSets:[...Vt.specialSets,vt],cardSpecials:[...Vt.cardSpecials,jn],cardActiveSkills:[...Vt.cardActiveSkills,qe],cardStandbySkills:[...Vt.cardStandbySkills,st]})),$n("add_card_form",{new_card_id:te}),$(null)},[]),nt=Oe.useCallback((te,we)=>{f(xe=>{const Je=We=>oa(We),Ze=We=>We.replace(new RegExp(`^(${Object.values(Mt).join("|")})`),"");let pt;return Je(xe.cardForms[te].card_unique_info_id)&&Ze(xe.cardForms[te].card_unique_info_id)===we&&(pt=xe.cardForms[te].card_unique_info_id),{...xe,cardForms:xe.cardForms.filter((We,Ce)=>Ce!==te),cardUniqueInfos:pt?xe.cardUniqueInfos.filter(We=>We.id!==pt):xe.cardUniqueInfos,cardSpecials:xe.cardSpecials.filter(We=>We.card_id!==we),cardActiveSkills:xe.cardActiveSkills.filter(We=>We.card_id!==we),cardStandbySkills:xe.cardStandbySkills.filter(We=>We.card_id!==we),isEZA:xe.baseCardIdForEZA===we?!1:xe.isEZA,baseCardIdForEZA:xe.baseCardIdForEZA===we?void 0:xe.baseCardIdForEZA,optimalAwakeningGrowth:xe.baseCardIdForEZA===we?void 0:xe.optimalAwakeningGrowth}}),$n("remove_card_form",{removed_card_id:we}),$(null)},[]),B=Oe.useCallback(()=>{E(!0);try{const te=tD(u);y(te),$n("generate_sql_patch",{num_card_forms:u.cardForms.length})}catch(te){console.error("Error generating SQL:",te),y(`-- Error generating SQL: ${te instanceof Error?te.message:String(te)}`),$n("generate_sql_patch_failed")}finally{E(!1)}},[u]),fe=async te=>{if(!i)return alert("Login system is disabled or you are not signed in. Cannot save to cloud."),!1;X(te);try{return await RN(i.uid,te,u),$(te),$n("save_to_cloud",{slot_id:te,num_card_forms:u.cardForms.length}),alert(`Patch saved successfully to ${te.replace("s","S")}!`),!0}catch(we){return console.error(`Error saving patch to ${te}:`,we),$n("save_to_cloud_failed",{slot_id:te}),alert(`Failed to save patch to ${te.replace("s","S")}: ${we instanceof Error?we.message:"Unknown error"}`),!1}finally{X(null)}},Se=async te=>{if(!i)return alert("Login system is disabled or you are not signed in. Cannot load from cloud."),!1;if(window.confirm(`Loading from ${te.replace("s","S")} will overwrite your current unsaved changes. Are you sure?`)){N(!0);try{const we=await um(i.uid,te);return we&&we.patchData?(f(we.patchData),y(""),ie("cardForms"),$(te),$n("load_from_cloud",{slot_id:te,num_card_forms:we.patchData.cardForms.length}),alert(`Successfully loaded patch from ${te.replace("s","S")}.`),pe(!1),!0):($n("load_from_cloud_failed",{slot_id:te,reason:"no_data"}),alert(`No data found in ${te.replace("s","S")} or failed to load. Your current work remains unchanged.`),!1)}catch(we){return console.error(`Error loading patch from ${te}:`,we),$n("load_from_cloud_failed",{slot_id:te,reason:"error"}),alert(`Failed to load patch from ${te.replace("s","S")}: ${we instanceof Error?we.message:"Unknown error"}`),!1}finally{N(!1)}}return!1},me=()=>{window.confirm("Are you sure you want to reset the form? This will clear all current unsaved data and start fresh.")&&(f(fu()),y(""),ie("cardForms"),$(null),$n("reset_form"),alert("Form has been reset."))},ye=!!M||A||p||I||n,ge=[{name:"Card Forms",id:"cardForms",icon:"fa-id-card"},{name:"Shared Skill Sets",id:"skillSets",icon:"fa-sitemap"},{name:"Standby & Finish",id:"standbyFinish",icon:"fa-hourglass-half"},{name:"EZA Details",id:"ezaDetails",icon:"fa-bolt"},{name:"Misc Tables",id:"miscTables",icon:"fa-table-list"},{name:"Generated SQL",id:"sqlOutput",icon:"fa-code"}];return n?S.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-indigo-900 text-orange-400 font-rajdhani",children:[S.jsx("i",{className:"fas fa-spinner fa-spin text-5xl"}),S.jsx("p",{className:"ml-4 text-2xl",children:"Loading Application..."})]}):i?S.jsxs("div",{className:"min-h-screen p-4 flex flex-col bg-indigo-900 text-indigo-100",children:[S.jsx("header",{className:"mb-6",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center space-x-4",children:[S.jsx("i",{className:"fas fa-dragon text-6xl text-orange-400 p-3 bg-orange-500 bg-opacity-20 rounded-full shadow-lg",style:{textShadow:"0 0 10px rgba(251, 146, 60, 0.7)"}}),S.jsx("h1",{className:"text-5xl font-bold text-orange-400 tracking-wider font-rajdhani title-animated",children:"Dokkan Patch Maker"})]}),S.jsxs("div",{className:"flex items-center space-x-4",children:[i&&S.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[Q&&S.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-600 text-white rounded-md font-semibold",children:["Active: ",Q.replace("s","S")]}),!Q&&S.jsx("span",{className:"text-xs px-2 py-1 bg-gray-600 text-white rounded-md font-semibold",children:"Active: Unsaved"}),i.photoURL&&S.jsx("img",{src:i.photoURL,alt:"User",className:"w-8 h-8 rounded-full"}),S.jsx("span",{className:"text-indigo-200 hidden md:inline",children:i.displayName||i.email}),S.jsxs("button",{onClick:Ke,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-1.5 px-3 rounded-lg transition-all duration-150 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-red-400 font-rajdhani text-xs",title:"Sign Out",disabled:ye,children:[S.jsx("i",{className:"fas fa-sign-out-alt"}),S.jsx("span",{className:"ml-1 hidden lg:inline",children:"Sign Out"})]})]}),!1,S.jsxs("div",{className:"flex flex-col items-end",children:[S.jsxs("label",{htmlFor:"db-upload",className:`bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-3 rounded-lg transition-all duration-150 ease-in-out flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-400 font-rajdhani text-sm h-[38px] ${I?"cursor-not-allowed opacity-70":"cursor-pointer"}`,children:[S.jsx("i",{className:"fas fa-database mr-2"}),I?"Loading DB...":F?"DB Loaded":"Select .db File"]}),S.jsx("input",{type:"file",id:"db-upload",ref:P,className:"hidden",accept:".db, .sqlite, .sqlite3",onChange:yt,disabled:ye}),O&&S.jsx("p",{className:"text-xs text-red-400 mt-1 self-center",children:O})]})]})]})}),S.jsxs("div",{className:"flex-grow flex",children:[S.jsxs("aside",{className:"w-1/5 pr-4",children:[S.jsx("nav",{className:"space-y-2",children:ge.map(te=>S.jsxs("button",{onClick:()=>ie(te.id),className:`w-full text-left px-4 py-3 rounded-lg transition-all duration-200 ease-in-out focus:outline-none font-rajdhani font-semibold text-lg shadow-md hover:shadow-lg ${_e===te.id?"bg-orange-500 text-white transform scale-105 ring-2 ring-orange-300":"bg-indigo-700 hover:bg-indigo-600 hover:text-orange-300"}`,disabled:ye&&_e!=="sqlOutput",children:[S.jsx("i",{className:`fas ${te.icon} mr-3 w-5 text-center`}),te.name]},te.id))}),S.jsxs("div",{className:"mt-8 space-y-3",children:[S.jsxs("button",{onClick:()=>i?pe(!0):alert("Login system is currently disabled or you are not signed in."),disabled:!i||ye,className:"w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-2.5 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-sky-400 font-rajdhani text-md",title:i?"Manage Cloud Saves":"Login to enable cloud saves",children:[S.jsx("i",{className:"fas fa-cloud-upload-alt mr-2"}),"Cloud Saves"]}),S.jsx("hr",{className:"border-indigo-600 my-3"}),S.jsxs("button",{onClick:()=>F?q(!0):alert("Please load a database file first."),disabled:!F||ye,className:"w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-2.5 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-teal-400 font-rajdhani text-md",children:[S.jsx("i",{className:"fas fa-user-plus mr-2"})," Load from DB"]}),S.jsx("button",{onClick:B,disabled:p||ye,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2.5 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-green-400 font-rajdhani text-md",children:p?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Generating..."]}):S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"fas fa-cogs mr-2"}),"Generate SQL Patch"]})}),S.jsxs("button",{onClick:me,disabled:ye,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2.5 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-red-400 font-rajdhani text-md",children:[S.jsx("i",{className:"fas fa-undo mr-2"})," Reset Form"]})]})]}),S.jsx("main",{className:"w-4/5 pl-4",children:A&&_e!=="sqlOutput"&&Q0?S.jsxs("div",{className:"flex-grow flex items-center justify-center bg-indigo-800 bg-opacity-50 rounded-lg shadow-lg",children:[S.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-orange-400"}),S.jsx("p",{className:"ml-3 text-xl text-orange-300",children:"Loading Patch Data..."})]}):S.jsxs("div",{className:"content-animated-fade-in",children:[_e==="cardForms"&&S.jsxs(S.Fragment,{children:[u.cardForms.map((te,we)=>S.jsx(ZN,{formIndex:we,cardForm:te,updateCardForm:Te,removeCardForm:()=>nt(we,te.id),patchState:u,setPatchState:f},te.id||`form-${we}`)),S.jsxs("button",{onClick:Ne,disabled:ye,className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-150 ease-in-out flex items-center justify-center text-md font-rajdhani disabled:opacity-60",children:[S.jsx("i",{className:"fas fa-plus mr-2"})," Add New Card Form"]})]}),_e==="skillSets"&&S.jsx(nD,{patchState:u,setPatchState:f}),_e==="standbyFinish"&&S.jsx(iD,{patchState:u,setPatchState:f}),_e==="ezaDetails"&&S.jsx(aD,{patchState:u,setPatchState:f}),_e==="miscTables"&&S.jsx(rD,{patchState:u,setPatchState:f}),_e==="sqlOutput"&&S.jsx(JN,{sql:g})]})})]}),L&&F&&S.jsx(ID,{isOpen:L,onClose:()=>q(!1),dbInstance:F,onCharacterSelected:ae,elementTypes:GS,rarityTypes:$S}),re&&i&&S.jsx(CD,{isOpen:re,onClose:()=>pe(!1),currentUser:i,lastLoadedSlot:Q,onSaveToSlot:fe,onLoadFromSlot:Se,isSavingSlot1:M==="slot1",isSavingSlot2:M==="slot2",isGlobalLoading:A}),S.jsxs("footer",{className:"mt-8 text-center text-xs text-indigo-400 opacity-70",children:["Dokkan Patch Maker v0.0.4 by @RapiddRobbiee",i&&"dokkanpatchmakerauth"&&S.jsx("span",{className:"mx-1",children:"|"}),i&&"dokkanpatchmakerauth"&&S.jsxs("span",{className:"opacity-80",children:["Cloud Sync Enabled (","dokkanpatchmakerauth",")"]}),!1,!1]})]}):S.jsx(xD,{})},ZS=document.getElementById("root");if(!ZS)throw new Error("Could not find root element to mount to");const kD=Mw.createRoot(ZS);kD.render(S.jsx(Cw.StrictMode,{children:S.jsx(RD,{})}));
