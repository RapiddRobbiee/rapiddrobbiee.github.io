(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function Tm(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function vT(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var e=a.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(a).forEach(function(r){var l=Object.getOwnPropertyDescriptor(a,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return a[r]}})}),n}var Rh={exports:{}},Wo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function bT(){if(Ry)return Wo;Ry=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var g in l)g!=="key"&&(u[g]=l[g])}else u=l;return l=u.ref,{$$typeof:a,type:r,key:f,ref:l!==void 0?l:null,props:u}}return Wo.Fragment=e,Wo.jsx=n,Wo.jsxs=n,Wo}var ky;function ET(){return ky||(ky=1,Rh.exports=bT()),Rh.exports}var E=ET(),kh={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function ST(){if(Ny)return Je;Ny=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.iterator;function N(B){return B===null||typeof B!="object"?null:(B=A&&B[A]||B["@@iterator"],typeof B=="function"?B:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,Y={};function Z(B,me,Se){this.props=B,this.context=me,this.refs=Y,this.updater=Se||L}Z.prototype.isReactComponent={},Z.prototype.setState=function(B,me){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,me,"setState")},Z.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function re(){}re.prototype=Z.prototype;function he(B,me,Se){this.props=B,this.context=me,this.refs=Y,this.updater=Se||L}var ve=he.prototype=new re;ve.constructor=he,X(ve,Z.prototype),ve.isPureReactComponent=!0;var ie=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},ue=Object.prototype.hasOwnProperty;function C(B,me,Se,de,Ee,G){return Se=G.ref,{$$typeof:a,type:B,key:me,ref:Se!==void 0?Se:null,props:G}}function k(B,me){return C(B.type,me,void 0,void 0,void 0,B.props)}function O(B){return typeof B=="object"&&B!==null&&B.$$typeof===a}function x(B){var me={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Se){return me[Se]})}var M=/\/+/g;function q(B,me){return typeof B=="object"&&B!==null&&B.key!=null?x(""+B.key):me.toString(36)}function P(){}function Ke(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(P,P):(B.status="pending",B.then(function(me){B.status==="pending"&&(B.status="fulfilled",B.value=me)},function(me){B.status==="pending"&&(B.status="rejected",B.reason=me)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function _t(B,me,Se,de,Ee){var G=typeof B;(G==="undefined"||G==="boolean")&&(B=null);var ge=!1;if(B===null)ge=!0;else switch(G){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(B.$$typeof){case a:case e:ge=!0;break;case S:return ge=B._init,_t(ge(B._payload),me,Se,de,Ee)}}if(ge)return Ee=Ee(B),ge=de===""?"."+q(B,0):de,ie(Ee)?(Se="",ge!=null&&(Se=ge.replace(M,"$&/")+"/"),_t(Ee,me,Se,"",function(Qe){return Qe})):Ee!=null&&(O(Ee)&&(Ee=k(Ee,Se+(Ee.key==null||B&&B.key===Ee.key?"":(""+Ee.key).replace(M,"$&/")+"/")+ge)),me.push(Ee)),1;ge=0;var Ce=de===""?".":de+":";if(ie(B))for(var Me=0;Me<B.length;Me++)de=B[Me],G=Ce+q(de,Me),ge+=_t(de,me,Se,G,Ee);else if(Me=N(B),typeof Me=="function")for(B=Me.call(B),Me=0;!(de=B.next()).done;)de=de.value,G=Ce+q(de,Me++),ge+=_t(de,me,Se,G,Ee);else if(G==="object"){if(typeof B.then=="function")return _t(Ke(B),me,Se,de,Ee);throw me=String(B),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.")}return ge}function ae(B,me,Se){if(B==null)return B;var de=[],Ee=0;return _t(B,de,"","",function(G){return me.call(Se,G,Ee++)}),de}function Te(B){if(B._status===-1){var me=B._result;me=me(),me.then(function(Se){(B._status===0||B._status===-1)&&(B._status=1,B._result=Se)},function(Se){(B._status===0||B._status===-1)&&(B._status=2,B._result=Se)}),B._status===-1&&(B._status=0,B._result=me)}if(B._status===1)return B._result.default;throw B._result}var Re=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var me=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(me))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function tt(){}return Je.Children={map:ae,forEach:function(B,me,Se){ae(B,function(){me.apply(this,arguments)},Se)},count:function(B){var me=0;return ae(B,function(){me++}),me},toArray:function(B){return ae(B,function(me){return me})||[]},only:function(B){if(!O(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Je.Component=Z,Je.Fragment=n,Je.Profiler=l,Je.PureComponent=he,Je.StrictMode=r,Je.Suspense=v,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Je.__COMPILER_RUNTIME={__proto__:null,c:function(B){return H.H.useMemoCache(B)}},Je.cache=function(B){return function(){return B.apply(null,arguments)}},Je.cloneElement=function(B,me,Se){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var de=X({},B.props),Ee=B.key,G=void 0;if(me!=null)for(ge in me.ref!==void 0&&(G=void 0),me.key!==void 0&&(Ee=""+me.key),me)!ue.call(me,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&me.ref===void 0||(de[ge]=me[ge]);var ge=arguments.length-2;if(ge===1)de.children=Se;else if(1<ge){for(var Ce=Array(ge),Me=0;Me<ge;Me++)Ce[Me]=arguments[Me+2];de.children=Ce}return C(B.type,Ee,void 0,void 0,G,de)},Je.createContext=function(B){return B={$$typeof:f,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},Je.createElement=function(B,me,Se){var de,Ee={},G=null;if(me!=null)for(de in me.key!==void 0&&(G=""+me.key),me)ue.call(me,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ee[de]=me[de]);var ge=arguments.length-2;if(ge===1)Ee.children=Se;else if(1<ge){for(var Ce=Array(ge),Me=0;Me<ge;Me++)Ce[Me]=arguments[Me+2];Ee.children=Ce}if(B&&B.defaultProps)for(de in ge=B.defaultProps,ge)Ee[de]===void 0&&(Ee[de]=ge[de]);return C(B,G,void 0,void 0,null,Ee)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(B){return{$$typeof:g,render:B}},Je.isValidElement=O,Je.lazy=function(B){return{$$typeof:S,_payload:{_status:-1,_result:B},_init:Te}},Je.memo=function(B,me){return{$$typeof:p,type:B,compare:me===void 0?null:me}},Je.startTransition=function(B){var me=H.T,Se={};H.T=Se;try{var de=B(),Ee=H.S;Ee!==null&&Ee(Se,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(tt,Re)}catch(G){Re(G)}finally{H.T=me}},Je.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Je.use=function(B){return H.H.use(B)},Je.useActionState=function(B,me,Se){return H.H.useActionState(B,me,Se)},Je.useCallback=function(B,me){return H.H.useCallback(B,me)},Je.useContext=function(B){return H.H.useContext(B)},Je.useDebugValue=function(){},Je.useDeferredValue=function(B,me){return H.H.useDeferredValue(B,me)},Je.useEffect=function(B,me,Se){var de=H.H;if(typeof Se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(B,me)},Je.useId=function(){return H.H.useId()},Je.useImperativeHandle=function(B,me,Se){return H.H.useImperativeHandle(B,me,Se)},Je.useInsertionEffect=function(B,me){return H.H.useInsertionEffect(B,me)},Je.useLayoutEffect=function(B,me){return H.H.useLayoutEffect(B,me)},Je.useMemo=function(B,me){return H.H.useMemo(B,me)},Je.useOptimistic=function(B,me){return H.H.useOptimistic(B,me)},Je.useReducer=function(B,me,Se){return H.H.useReducer(B,me,Se)},Je.useRef=function(B){return H.H.useRef(B)},Je.useState=function(B){return H.H.useState(B)},Je.useSyncExternalStore=function(B,me,Se){return H.H.useSyncExternalStore(B,me,Se)},Je.useTransition=function(){return H.H.useTransition()},Je.version="19.1.0",Je}var Dy;function wm(){return Dy||(Dy=1,kh.exports=ST()),kh.exports}var Pe=wm();const TT=Tm(Pe);var Nh={exports:{}},Jo={},Dh={exports:{}},Oh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function wT(){return Oy||(Oy=1,function(a){function e(ae,Te){var Re=ae.length;ae.push(Te);e:for(;0<Re;){var tt=Re-1>>>1,B=ae[tt];if(0<l(B,Te))ae[tt]=Te,ae[Re]=B,Re=tt;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var Te=ae[0],Re=ae.pop();if(Re!==Te){ae[0]=Re;e:for(var tt=0,B=ae.length,me=B>>>1;tt<me;){var Se=2*(tt+1)-1,de=ae[Se],Ee=Se+1,G=ae[Ee];if(0>l(de,Re))Ee<B&&0>l(G,de)?(ae[tt]=G,ae[Ee]=Re,tt=Ee):(ae[tt]=de,ae[Se]=Re,tt=Se);else if(Ee<B&&0>l(G,Re))ae[tt]=G,ae[Ee]=Re,tt=Ee;else break e}}return Te}function l(ae,Te){var Re=ae.sortIndex-Te.sortIndex;return Re!==0?Re:ae.id-Te.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();a.unstable_now=function(){return f.now()-g}}var v=[],p=[],S=1,A=null,N=3,L=!1,X=!1,Y=!1,Z=!1,re=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,ve=typeof setImmediate<"u"?setImmediate:null;function ie(ae){for(var Te=n(p);Te!==null;){if(Te.callback===null)r(p);else if(Te.startTime<=ae)r(p),Te.sortIndex=Te.expirationTime,e(v,Te);else break;Te=n(p)}}function H(ae){if(Y=!1,ie(ae),!X)if(n(v)!==null)X=!0,ue||(ue=!0,q());else{var Te=n(p);Te!==null&&_t(H,Te.startTime-ae)}}var ue=!1,C=-1,k=5,O=-1;function x(){return Z?!0:!(a.unstable_now()-O<k)}function M(){if(Z=!1,ue){var ae=a.unstable_now();O=ae;var Te=!0;try{e:{X=!1,Y&&(Y=!1,he(C),C=-1),L=!0;var Re=N;try{t:{for(ie(ae),A=n(v);A!==null&&!(A.expirationTime>ae&&x());){var tt=A.callback;if(typeof tt=="function"){A.callback=null,N=A.priorityLevel;var B=tt(A.expirationTime<=ae);if(ae=a.unstable_now(),typeof B=="function"){A.callback=B,ie(ae),Te=!0;break t}A===n(v)&&r(v),ie(ae)}else r(v);A=n(v)}if(A!==null)Te=!0;else{var me=n(p);me!==null&&_t(H,me.startTime-ae),Te=!1}}break e}finally{A=null,N=Re,L=!1}Te=void 0}}finally{Te?q():ue=!1}}}var q;if(typeof ve=="function")q=function(){ve(M)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ke=P.port2;P.port1.onmessage=M,q=function(){Ke.postMessage(null)}}else q=function(){re(M,0)};function _t(ae,Te){C=re(function(){ae(a.unstable_now())},Te)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(ae){ae.callback=null},a.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ae?Math.floor(1e3/ae):5},a.unstable_getCurrentPriorityLevel=function(){return N},a.unstable_next=function(ae){switch(N){case 1:case 2:case 3:var Te=3;break;default:Te=N}var Re=N;N=Te;try{return ae()}finally{N=Re}},a.unstable_requestPaint=function(){Z=!0},a.unstable_runWithPriority=function(ae,Te){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var Re=N;N=ae;try{return Te()}finally{N=Re}},a.unstable_scheduleCallback=function(ae,Te,Re){var tt=a.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?tt+Re:tt):Re=tt,ae){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Re+B,ae={id:S++,callback:Te,priorityLevel:ae,startTime:Re,expirationTime:B,sortIndex:-1},Re>tt?(ae.sortIndex=Re,e(p,ae),n(v)===null&&ae===n(p)&&(Y?(he(C),C=-1):Y=!0,_t(H,Re-tt))):(ae.sortIndex=B,e(v,ae),X||L||(X=!0,ue||(ue=!0,q()))),ae},a.unstable_shouldYield=x,a.unstable_wrapCallback=function(ae){var Te=N;return function(){var Re=N;N=Te;try{return ae.apply(this,arguments)}finally{N=Re}}}}(Oh)),Oh}var Py;function AT(){return Py||(Py=1,Dh.exports=wT()),Dh.exports}var Ph={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function CT(){if(My)return Fn;My=1;var a=wm();function e(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(v,p,S){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:v,containerInfo:p,implementation:S}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Fn.createPortal=function(v,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return u(v,p,null,S)},Fn.flushSync=function(v){var p=f.T,S=r.p;try{if(f.T=null,r.p=2,v)return v()}finally{f.T=p,r.p=S,r.d.f()}},Fn.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(v,p))},Fn.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},Fn.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var S=p.as,A=g(S,p.crossOrigin),N=typeof p.integrity=="string"?p.integrity:void 0,L=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;S==="style"?r.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:A,integrity:N,fetchPriority:L}):S==="script"&&r.d.X(v,{crossOrigin:A,integrity:N,fetchPriority:L,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Fn.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var S=g(p.as,p.crossOrigin);r.d.M(v,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(v)},Fn.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var S=p.as,A=g(S,p.crossOrigin);r.d.L(v,S,{crossOrigin:A,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Fn.preloadModule=function(v,p){if(typeof v=="string")if(p){var S=g(p.as,p.crossOrigin);r.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(v)},Fn.requestFormReset=function(v){r.d.r(v)},Fn.unstable_batchedUpdates=function(v,p){return v(p)},Fn.useFormState=function(v,p,S){return f.H.useFormState(v,p,S)},Fn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Fn.version="19.1.0",Fn}var Vy;function xT(){if(Vy)return Ph.exports;Vy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Ph.exports=CT(),Ph.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function IT(){if(Ly)return Jo;Ly=1;var a=AT(),e=wm(),n=xT();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function v(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var s=t,o=i;;){var d=s.return;if(d===null)break;var m=d.alternate;if(m===null){if(o=d.return,o!==null){s=o;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===s)return g(d),t;if(m===o)return g(d),i;m=m.sibling}throw Error(r(188))}if(s.return!==o.return)s=d,o=m;else{for(var w=!1,I=d.child;I;){if(I===s){w=!0,s=d,o=m;break}if(I===o){w=!0,o=d,s=m;break}I=I.sibling}if(!w){for(I=m.child;I;){if(I===s){w=!0,s=m,o=d;break}if(I===o){w=!0,o=m,s=d;break}I=I.sibling}if(!w)throw Error(r(189))}}if(s.alternate!==o)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:i}function p(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=p(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,A=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),he=Symbol.for("react.consumer"),ve=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var P=Symbol.for("react.client.reference");function Ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===P?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case Z:return"Profiler";case Y:return"StrictMode";case H:return"Suspense";case ue:return"SuspenseList";case O:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case ve:return(t.displayName||"Context")+".Provider";case he:return(t._context.displayName||"Context")+".Consumer";case ie:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return i=t.displayName||null,i!==null?i:Ke(t.type)||"Memo";case k:i=t._payload,t=t._init;try{return Ke(t(i))}catch{}}return null}var _t=Array.isArray,ae=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},tt=[],B=-1;function me(t){return{current:t}}function Se(t){0>B||(t.current=tt[B],tt[B]=null,B--)}function de(t,i){B++,tt[B]=t.current,t.current=i}var Ee=me(null),G=me(null),ge=me(null),Ce=me(null);function Me(t,i){switch(de(ge,i),de(G,t),de(Ee,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?iy(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=iy(i),t=ay(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Se(Ee),de(Ee,t)}function Qe(){Se(Ee),Se(G),Se(ge)}function Lt(t){t.memoizedState!==null&&de(Ce,t);var i=Ee.current,s=ay(i,t.type);i!==s&&(de(G,t),de(Ee,s))}function We(t){G.current===t&&(Se(Ee),Se(G)),Ce.current===t&&(Se(Ce),Yo._currentValue=Re)}var wt=Object.prototype.hasOwnProperty,ke=a.unstable_scheduleCallback,ut=a.unstable_cancelCallback,$n=a.unstable_shouldYield,fn=a.unstable_requestPaint,zt=a.unstable_now,Fi=a.unstable_getCurrentPriorityLevel,mt=a.unstable_ImmediatePriority,qe=a.unstable_UserBlockingPriority,ct=a.unstable_NormalPriority,bt=a.unstable_LowPriority,Ii=a.unstable_IdlePriority,sa=a.log,Js=a.unstable_setDisableYieldValue,jt=null,dt=null;function xn(t){if(typeof sa=="function"&&Js(t),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(jt,t)}catch{}}var Kt=Math.clz32?Math.clz32:la,Gi=Math.log,el=Math.LN2;function la(t){return t>>>=0,t===0?32:31-(Gi(t)/el|0)|0}var oa=256,Ma=4194304;function hi(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fr(t,i,s){var o=t.pendingLanes;if(o===0)return 0;var d=0,m=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var I=o&134217727;return I!==0?(o=I&~m,o!==0?d=hi(o):(w&=I,w!==0?d=hi(w):s||(s=I&~t,s!==0&&(d=hi(s))))):(I=o&~m,I!==0?d=hi(I):w!==0?d=hi(w):s||(s=o&~t,s!==0&&(d=hi(s)))),d===0?0:i!==0&&i!==d&&(i&m)===0&&(m=d&-d,s=i&-i,m>=s||m===32&&(s&4194048)!==0)?i:d}function ua(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Xe(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hr(){var t=oa;return oa<<=1,(oa&4194048)===0&&(oa=256),t}function Va(){var t=Ma;return Ma<<=1,(Ma&62914560)===0&&(Ma=4194304),t}function Ri(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function Xn(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ps(t,i,s,o,d,m){var w=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var I=t.entanglements,j=t.expirationTimes,$=t.hiddenUpdates;for(s=w&~s;0<s;){var se=31-Kt(s),fe=1<<se;I[se]=0,j[se]=-1;var W=$[se];if(W!==null)for($[se]=null,se=0;se<W.length;se++){var ee=W[se];ee!==null&&(ee.lane&=-536870913)}s&=~fe}o!==0&&hn(t,o,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(w&~i))}function hn(t,i,s){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-Kt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|s&4194090}function mr(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var o=31-Kt(s),d=1<<o;d&i|t[o]&i&&(t[o]|=i),s&=~d}}function be(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ca(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Yt(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:Ty(t.type))}function da(t,i){var s=Te.p;try{return Te.p=t,i()}finally{Te.p=s}}var xt=Math.random().toString(36).slice(2),Xt="__reactFiber$"+xt,It="__reactProps$"+xt,Zn="__reactContainer$"+xt,vn="__reactEvents$"+xt,tl="__reactListeners$"+xt,Wn="__reactHandles$"+xt,gs="__reactResources$"+xt,fa="__reactMarker$"+xt;function ha(t){delete t[Xt],delete t[It],delete t[vn],delete t[tl],delete t[Wn]}function Ut(t){var i=t[Xt];if(i)return i;for(var s=t.parentNode;s;){if(i=s[Zn]||s[Xt]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=oy(t);t!==null;){if(s=t[Xt])return s;t=oy(t)}return i}t=s,s=t.parentNode}return null}function mi(t){if(t=t[Xt]||t[Zn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ki(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function mn(t){var i=t[gs];return i||(i=t[gs]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ht(t){t[fa]=!0}var ma=new Set,In={};function jn(t,i){pi(t,i),pi(t+"Capture",i)}function pi(t,i){for(In[t]=i,t=0;t<i.length;t++)ma.add(i[t])}var _s=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ys={},pa={};function ga(t){return wt.call(pa,t)?!0:wt.call(ys,t)?!1:_s.test(t)?pa[t]=!0:(ys[t]=!0,!1)}function Ki(t,i,s){if(ga(i))if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+s)}}function Jn(t,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+s)}}function ln(t,i,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(i,s,""+o)}}var ii,pr;function Ni(t){if(ii===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);ii=i&&i[1]||"",pr=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ii+t+pr}var La=!1;function ja(t,i){if(!t||La)return"";La=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ee){var W=ee}Reflect.construct(t,[],fe)}else{try{fe.call()}catch(ee){W=ee}t.call(fe.prototype)}}else{try{throw Error()}catch(ee){W=ee}(fe=t())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ee){if(ee&&W&&typeof ee.stack=="string")return[ee.stack,W.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),w=m[0],I=m[1];if(w&&I){var j=w.split(`
`),$=I.split(`
`);for(d=o=0;o<j.length&&!j[o].includes("DetermineComponentFrameRoot");)o++;for(;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;if(o===j.length||d===$.length)for(o=j.length-1,d=$.length-1;1<=o&&0<=d&&j[o]!==$[d];)d--;for(;1<=o&&0<=d;o--,d--)if(j[o]!==$[d]){if(o!==1||d!==1)do if(o--,d--,0>d||j[o]!==$[d]){var se=`
`+j[o].replace(" at new "," at ");return t.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",t.displayName)),se}while(1<=o&&0<=d);break}}}finally{La=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Ni(s):""}function vs(t){switch(t.tag){case 26:case 27:case 5:return Ni(t.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return ja(t.type,!1);case 11:return ja(t.type.render,!1);case 1:return ja(t.type,!0);case 31:return Ni("Activity");default:return""}}function Ua(t){try{var i="";do i+=vs(t),t=t.return;while(t);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yi(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function nl(t){var i=Yi(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),o=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,m=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){o=""+w,m.call(this,w)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function pt(t){t._valueTracker||(t._valueTracker=nl(t))}function Qi(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),o="";return t&&(o=Yi(t)?t.checked?"true":"false":t.value),t=o,t!==s?(i.setValue(t),!0):!1}function $i(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Xi=/[\n"\\]/g;function Bt(t){return t.replace(Xi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function En(t,i,s,o,d,m,w,I){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),i!=null?w==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+bn(i)):t.value!==""+bn(i)&&(t.value=""+bn(i)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),i!=null?ai(t,w,bn(i)):s!=null?ai(t,w,bn(s)):o!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?t.name=""+bn(I):t.removeAttribute("name")}function Di(t,i,s,o,d,m,w,I){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),i!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;s=s!=null?""+bn(s):"",i=i!=null?""+bn(i):s,I||i===t.value||(t.value=i),t.defaultValue=i}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=I?t.checked:!!o,t.defaultChecked=!!o,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w)}function ai(t,i,s){i==="number"&&$i(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Zi(t,i,s,o){if(t=t.options,i){i={};for(var d=0;d<s.length;d++)i["$"+s[d]]=!0;for(s=0;s<t.length;s++)d=i.hasOwnProperty("$"+t[s].value),t[s].selected!==d&&(t[s].selected=d),d&&o&&(t[s].defaultSelected=!0)}else{for(s=""+bn(s),i=null,d=0;d<t.length;d++){if(t[d].value===s){t[d].selected=!0,o&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function Et(t,i,s){if(i!=null&&(i=""+bn(i),i!==t.value&&(t.value=i),s==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=s!=null?""+bn(s):""}function _a(t,i,s,o){if(i==null){if(o!=null){if(s!=null)throw Error(r(92));if(_t(o)){if(1<o.length)throw Error(r(93));o=o[0]}s=o}s==null&&(s=""),i=s}s=bn(i),t.defaultValue=s,o=t.textContent,o===s&&o!==""&&o!==null&&(t.value=o)}function Un(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var ya=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gr(t,i,s){var o=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,s):typeof s!="number"||s===0||ya.has(i)?i==="float"?t.cssFloat=s:t[i]=(""+s).trim():t[i]=s+"px"}function Ba(t,i,s){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var d in i)o=i[d],i.hasOwnProperty(d)&&s[d]!==o&&gr(t,d,o)}else for(var m in i)i.hasOwnProperty(m)&&gr(t,m,i[m])}function bs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _r=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ri(t){return yr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var gi=null;function Zt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bn=null,si=null;function vr(t){var i=mi(t);if(i&&(t=i.stateNode)){var s=t[It]||null;e:switch(t=i.stateNode,i.type){case"input":if(En(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Bt(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var o=s[i];if(o!==t&&o.form===t.form){var d=o[It]||null;if(!d)throw Error(r(90));En(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<s.length;i++)o=s[i],o.form===t.form&&Qi(o)}break e;case"textarea":Et(t,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&Zi(t,!!s.multiple,i,!1)}}}var Oi=!1;function Ne(t,i,s){if(Oi)return t(i,s);Oi=!0;try{var o=t(i);return o}finally{if(Oi=!1,(Bn!==null||si!==null)&&(pc(),Bn&&(i=Bn,t=si,si=Bn=null,vr(i),t)))for(i=0;i<t.length;i++)vr(t[i])}}function va(t,i){var s=t.stateNode;if(s===null)return null;var o=s[It]||null;if(o===null)return null;s=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rn=!1;if(qn)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{Rn=!1}var zn=null,li=null,Sn=null;function Ea(){if(Sn)return Sn;var t,i=li,s=i.length,o,d="value"in zn?zn.value:zn.textContent,m=d.length;for(t=0;t<s&&i[t]===d[t];t++);var w=s-t;for(o=1;o<=w&&i[s-o]===d[m-o];o++);return Sn=d.slice(t,1<o?1-o:void 0)}function _i(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function h(){return!0}function _(){return!1}function b(t){function i(s,o,d,m,w){this._reactName=s,this._targetInst=d,this.type=o,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var I in t)t.hasOwnProperty(I)&&(s=t[I],this[I]=s?s(m):m[I]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?h:_,this.isPropagationStopped=_,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=h)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=h)},persist:function(){},isPersistent:h}),i}var R={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U=b(R),J=S({},R,{view:0,detail:0}),oe=b(J),Ve,et,Le,Rt=S({},J,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:za,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Le&&(Le&&t.type==="mousemove"?(Ve=t.screenX-Le.screenX,et=t.screenY-Le.screenY):et=Ve=0,Le=t),Ve)},movementY:function(t){return"movementY"in t?t.movementY:et}}),yt=b(Rt),Es=S({},Rt,{dataTransfer:0}),co=b(Es),Sa=S({},J,{relatedTarget:0}),br=b(Sa),Er=S({},R,{animationName:0,elapsedTime:0,pseudoElement:0}),Sr=b(Er),il=S({},R,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tr=b(il),fo=S({},R,{data:0}),Ss=b(fo),qa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},al={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=rl[t])?!!i[t]:!1}function za(){return wr}var sl=S({},J,{key:function(t){if(t.key){var i=qa[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=_i(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?al[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:za,charCode:function(t){return t.type==="keypress"?_i(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_i(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ar=b(sl),ll=S({},Rt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ts=b(ll),Wi=S({},J,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:za}),ol=b(Wi),ws=S({},R,{propertyName:0,elapsedTime:0,pseudoElement:0}),ul=b(ws),cl=S({},Rt,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cr=b(cl),kn=S({},R,{newState:0,oldState:0}),dl=b(kn),fl=[9,13,27,32],yi=qn&&"CompositionEvent"in window,c=null;qn&&"documentMode"in document&&(c=document.documentMode);var y=qn&&"TextEvent"in window&&!c,T=qn&&(!yi||c&&8<c&&11>=c),D=" ",K=!1;function te(t,i){switch(t){case"keyup":return fl.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ne=!1;function Ae(t,i){switch(t){case"compositionend":return V(i);case"keypress":return i.which!==32?null:(K=!0,D);case"textInput":return t=i.data,t===D&&K?null:t;default:return null}}function we(t,i){if(ne)return t==="compositionend"||!yi&&te(t,i)?(t=Ea(),Sn=li=zn=null,ne=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return T&&i.locale!=="ko"?null:i.data;default:return null}}var De={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ye(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!De[t.type]:i==="textarea"}function tn(t,i,s,o){Bn?si?si.push(o):si=[o]:Bn=o,i=Ec(i,"onChange"),0<i.length&&(s=new U("onChange","change",null,s,o),t.push({event:s,listeners:i}))}var St=null,Ft=null;function Nn(t){W_(t,0)}function xr(t){var i=ki(t);if(Qi(i))return t}function Ta(t,i){if(t==="change")return i}var Vu=!1;if(qn){var jd;if(qn){var Ud="oninput"in document;if(!Ud){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),Ud=typeof Ep.oninput=="function"}jd=Ud}else jd=!1;Vu=jd&&(!document.documentMode||9<document.documentMode)}function Sp(){St&&(St.detachEvent("onpropertychange",Tp),Ft=St=null)}function Tp(t){if(t.propertyName==="value"&&xr(Ft)){var i=[];tn(i,Ft,t,Zt(t)),Ne(Nn,i)}}function $E(t,i,s){t==="focusin"?(Sp(),St=i,Ft=s,St.attachEvent("onpropertychange",Tp)):t==="focusout"&&Sp()}function XE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xr(Ft)}function ZE(t,i){if(t==="click")return xr(i)}function WE(t,i){if(t==="input"||t==="change")return xr(i)}function JE(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var vi=typeof Object.is=="function"?Object.is:JE;function ho(t,i){if(vi(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),o=Object.keys(i);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var d=s[o];if(!wt.call(i,d)||!vi(t[d],i[d]))return!1}return!0}function wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ap(t,i){var s=wp(t);t=0;for(var o;s;){if(s.nodeType===3){if(o=t+s.textContent.length,t<=i&&o>=i)return{node:s,offset:i-t};t=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=wp(s)}}function Cp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Cp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function xp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=$i(t.document);i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=$i(t.document)}return i}function Bd(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var eS=qn&&"documentMode"in document&&11>=document.documentMode,hl=null,qd=null,mo=null,zd=!1;function Ip(t,i,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;zd||hl==null||hl!==$i(o)||(o=hl,"selectionStart"in o&&Bd(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),mo&&ho(mo,o)||(mo=o,o=Ec(qd,"onSelect"),0<o.length&&(i=new U("onSelect","select",null,i,s),t.push({event:i,listeners:o}),i.target=hl)))}function As(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var ml={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},Hd={},Rp={};qn&&(Rp=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function Cs(t){if(Hd[t])return Hd[t];if(!ml[t])return t;var i=ml[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in Rp)return Hd[t]=i[s];return t}var kp=Cs("animationend"),Np=Cs("animationiteration"),Dp=Cs("animationstart"),tS=Cs("transitionrun"),nS=Cs("transitionstart"),iS=Cs("transitioncancel"),Op=Cs("transitionend"),Pp=new Map,Fd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fd.push("scrollEnd");function Ji(t,i){Pp.set(t,i),jn(i,[t])}var Mp=new WeakMap;function Pi(t,i){if(typeof t=="object"&&t!==null){var s=Mp.get(t);return s!==void 0?s:(i={value:t,source:i,stack:Ua(i)},Mp.set(t,i),i)}return{value:t,source:i,stack:Ua(i)}}var Mi=[],pl=0,Gd=0;function Lu(){for(var t=pl,i=Gd=pl=0;i<t;){var s=Mi[i];Mi[i++]=null;var o=Mi[i];Mi[i++]=null;var d=Mi[i];Mi[i++]=null;var m=Mi[i];if(Mi[i++]=null,o!==null&&d!==null){var w=o.pending;w===null?d.next=d:(d.next=w.next,w.next=d),o.pending=d}m!==0&&Vp(s,d,m)}}function ju(t,i,s,o){Mi[pl++]=t,Mi[pl++]=i,Mi[pl++]=s,Mi[pl++]=o,Gd|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Kd(t,i,s,o){return ju(t,i,s,o),Uu(t)}function gl(t,i){return ju(t,null,null,i),Uu(t)}function Vp(t,i,s){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s);for(var d=!1,m=t.return;m!==null;)m.childLanes|=s,o=m.alternate,o!==null&&(o.childLanes|=s),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&i!==null&&(d=31-Kt(s),t=m.hiddenUpdates,o=t[d],o===null?t[d]=[i]:o.push(i),i.lane=s|536870912),m):null}function Uu(t){if(50<Uo)throw Uo=0,Jf=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var _l={};function aS(t,i,s,o){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(t,i,s,o){return new aS(t,i,s,o)}function Yd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ha(t,i){var s=t.alternate;return s===null?(s=bi(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Lp(t,i){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,i=s.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Bu(t,i,s,o,d,m){var w=0;if(o=t,typeof t=="function")Yd(t)&&(w=1);else if(typeof t=="string")w=sT(t,s,Ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case O:return t=bi(31,s,i,d),t.elementType=O,t.lanes=m,t;case X:return xs(s.children,d,m,i);case Y:w=8,d|=24;break;case Z:return t=bi(12,s,i,d|2),t.elementType=Z,t.lanes=m,t;case H:return t=bi(13,s,i,d),t.elementType=H,t.lanes=m,t;case ue:return t=bi(19,s,i,d),t.elementType=ue,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case re:case ve:w=10;break e;case he:w=9;break e;case ie:w=11;break e;case C:w=14;break e;case k:w=16,o=null;break e}w=29,s=Error(r(130,t===null?"null":typeof t,"")),o=null}return i=bi(w,s,i,d),i.elementType=t,i.type=o,i.lanes=m,i}function xs(t,i,s,o){return t=bi(7,t,o,i),t.lanes=s,t}function Qd(t,i,s){return t=bi(6,t,null,i),t.lanes=s,t}function $d(t,i,s){return i=bi(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var yl=[],vl=0,qu=null,zu=0,Vi=[],Li=0,Is=null,Fa=1,Ga="";function Rs(t,i){yl[vl++]=zu,yl[vl++]=qu,qu=t,zu=i}function jp(t,i,s){Vi[Li++]=Fa,Vi[Li++]=Ga,Vi[Li++]=Is,Is=t;var o=Fa;t=Ga;var d=32-Kt(o)-1;o&=~(1<<d),s+=1;var m=32-Kt(i)+d;if(30<m){var w=d-d%5;m=(o&(1<<w)-1).toString(32),o>>=w,d-=w,Fa=1<<32-Kt(i)+d|s<<d|o,Ga=m+t}else Fa=1<<m|s<<d|o,Ga=t}function Xd(t){t.return!==null&&(Rs(t,1),jp(t,1,0))}function Zd(t){for(;t===qu;)qu=yl[--vl],yl[vl]=null,zu=yl[--vl],yl[vl]=null;for(;t===Is;)Is=Vi[--Li],Vi[Li]=null,Ga=Vi[--Li],Vi[Li]=null,Fa=Vi[--Li],Vi[Li]=null}var ei=null,Wt=null,vt=!1,ks=null,wa=!1,Wd=Error(r(519));function Ns(t){var i=Error(r(418,""));throw _o(Pi(i,t)),Wd}function Up(t){var i=t.stateNode,s=t.type,o=t.memoizedProps;switch(i[Xt]=t,i[It]=o,s){case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":case"embed":st("load",i);break;case"video":case"audio":for(s=0;s<qo.length;s++)st(qo[s],i);break;case"source":st("error",i);break;case"img":case"image":case"link":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"input":st("invalid",i),Di(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),pt(i);break;case"select":st("invalid",i);break;case"textarea":st("invalid",i),_a(i,o.value,o.defaultValue,o.children),pt(i)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||o.suppressHydrationWarning===!0||ny(i.textContent,s)?(o.popover!=null&&(st("beforetoggle",i),st("toggle",i)),o.onScroll!=null&&st("scroll",i),o.onScrollEnd!=null&&st("scrollend",i),o.onClick!=null&&(i.onclick=Sc),i=!0):i=!1,i||Ns(t)}function Bp(t){for(ei=t.return;ei;)switch(ei.tag){case 5:case 13:wa=!1;return;case 27:case 3:wa=!0;return;default:ei=ei.return}}function po(t){if(t!==ei)return!1;if(!vt)return Bp(t),vt=!0,!1;var i=t.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||ph(t.type,t.memoizedProps)),s=!s),s&&Wt&&Ns(t),Bp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(i===0){Wt=ta(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++;t=t.nextSibling}Wt=null}}else i===27?(i=Wt,Hr(t.type)?(t=vh,vh=null,Wt=t):Wt=i):Wt=ei?ta(t.stateNode.nextSibling):null;return!0}function go(){Wt=ei=null,vt=!1}function qp(){var t=ks;return t!==null&&(ci===null?ci=t:ci.push.apply(ci,t),ks=null),t}function _o(t){ks===null?ks=[t]:ks.push(t)}var Jd=me(null),Ds=null,Ka=null;function Ir(t,i,s){de(Jd,i._currentValue),i._currentValue=s}function Ya(t){t._currentValue=Jd.current,Se(Jd)}function ef(t,i,s){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===s)break;t=t.return}}function tf(t,i,s,o){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var w=d.child;m=m.firstContext;e:for(;m!==null;){var I=m;m=d;for(var j=0;j<i.length;j++)if(I.context===i[j]){m.lanes|=s,I=m.alternate,I!==null&&(I.lanes|=s),ef(m.return,s,t),o||(w=null);break e}m=I.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(r(341));w.lanes|=s,m=w.alternate,m!==null&&(m.lanes|=s),ef(w,s,t),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===t){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function yo(t,i,s,o){t=null;for(var d=i,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var I=d.type;vi(d.pendingProps.value,w.value)||(t!==null?t.push(I):t=[I])}}else if(d===Ce.current){if(w=d.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Yo):t=[Yo])}d=d.return}t!==null&&tf(i,t,s,o),i.flags|=262144}function Hu(t){for(t=t.firstContext;t!==null;){if(!vi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Os(t){Ds=t,Ka=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Hn(t){return zp(Ds,t)}function Fu(t,i){return Ds===null&&Os(t),zp(t,i)}function zp(t,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Ka===null){if(t===null)throw Error(r(308));Ka=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ka=Ka.next=i;return s}var rS=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(s,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(s){return s()})}},sS=a.unstable_scheduleCallback,lS=a.unstable_NormalPriority,pn={$$typeof:ve,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nf(){return{controller:new rS,data:new Map,refCount:0}}function vo(t){t.refCount--,t.refCount===0&&sS(lS,function(){t.controller.abort()})}var bo=null,af=0,bl=0,El=null;function oS(t,i){if(bo===null){var s=bo=[];af=0,bl=sh(),El={status:"pending",value:void 0,then:function(o){s.push(o)}}}return af++,i.then(Hp,Hp),i}function Hp(){if(--af===0&&bo!==null){El!==null&&(El.status="fulfilled");var t=bo;bo=null,bl=0,El=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function uS(t,i){var s=[],o={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var d=0;d<s.length;d++)(0,s[d])(i)},function(d){for(o.status="rejected",o.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),o}var Fp=ae.S;ae.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&oS(t,i),Fp!==null&&Fp(t,i)};var Ps=me(null);function rf(){var t=Ps.current;return t!==null?t:Vt.pooledCache}function Gu(t,i){i===null?de(Ps,Ps.current):de(Ps,i.pool)}function Gp(){var t=rf();return t===null?null:{parent:pn._currentValue,pool:t}}var Eo=Error(r(460)),Kp=Error(r(474)),Ku=Error(r(542)),sf={then:function(){}};function Yp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Yu(){}function Qp(t,i,s){switch(s=t[s],s===void 0?t.push(i):s!==i&&(i.then(Yu,Yu),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xp(t),t;default:if(typeof i.status=="string")i.then(Yu,Yu);else{if(t=Vt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=o}},function(o){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xp(t),t}throw So=i,Eo}}var So=null;function $p(){if(So===null)throw Error(r(459));var t=So;return So=null,t}function Xp(t){if(t===Eo||t===Ku)throw Error(r(483))}var Rr=!1;function lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function of(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function kr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Nr(t,i,s){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(At&2)!==0){var d=o.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),o.pending=i,i=Uu(t),Vp(t,null,s),i}return ju(t,o,i,s),Uu(t)}function To(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,s|=o,i.lanes=s,mr(t,s)}}function uf(t,i){var s=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var d=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var w={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?d=m=w:m=m.next=w,s=s.next}while(s!==null);m===null?d=m=i:m=m.next=i}else d=m=i;s={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}var cf=!1;function wo(){if(cf){var t=El;if(t!==null)throw t}}function Ao(t,i,s,o){cf=!1;var d=t.updateQueue;Rr=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,I=d.shared.pending;if(I!==null){d.shared.pending=null;var j=I,$=j.next;j.next=null,w===null?m=$:w.next=$,w=j;var se=t.alternate;se!==null&&(se=se.updateQueue,I=se.lastBaseUpdate,I!==w&&(I===null?se.firstBaseUpdate=$:I.next=$,se.lastBaseUpdate=j))}if(m!==null){var fe=d.baseState;w=0,se=$=j=null,I=m;do{var W=I.lane&-536870913,ee=W!==I.lane;if(ee?(ft&W)===W:(o&W)===W){W!==0&&W===bl&&(cf=!0),se!==null&&(se=se.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Fe=t,je=I;W=i;var Dt=s;switch(je.tag){case 1:if(Fe=je.payload,typeof Fe=="function"){fe=Fe.call(Dt,fe,W);break e}fe=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=je.payload,W=typeof Fe=="function"?Fe.call(Dt,fe,W):Fe,W==null)break e;fe=S({},fe,W);break e;case 2:Rr=!0}}W=I.callback,W!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=d.callbacks,ee===null?d.callbacks=[W]:ee.push(W))}else ee={lane:W,tag:I.tag,payload:I.payload,callback:I.callback,next:null},se===null?($=se=ee,j=fe):se=se.next=ee,w|=W;if(I=I.next,I===null){if(I=d.shared.pending,I===null)break;ee=I,I=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);se===null&&(j=fe),d.baseState=j,d.firstBaseUpdate=$,d.lastBaseUpdate=se,m===null&&(d.shared.lanes=0),Ur|=w,t.lanes=w,t.memoizedState=fe}}function Zp(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function Wp(t,i){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Zp(s[t],i)}var Sl=me(null),Qu=me(0);function Jp(t,i){t=er,de(Qu,t),de(Sl,i),er=t|i.baseLanes}function df(){de(Qu,er),de(Sl,Sl.current)}function ff(){er=Qu.current,Se(Sl),Se(Qu)}var Dr=0,nt=null,kt=null,on=null,$u=!1,Tl=!1,Ms=!1,Xu=0,Co=0,wl=null,cS=0;function nn(){throw Error(r(321))}function hf(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!vi(t[s],i[s]))return!1;return!0}function mf(t,i,s,o,d,m){return Dr=m,nt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ae.H=t===null||t.memoizedState===null?Vg:Lg,Ms=!1,m=s(o,d),Ms=!1,Tl&&(m=tg(i,s,o,d)),eg(t),m}function eg(t){ae.H=nc;var i=kt!==null&&kt.next!==null;if(Dr=0,on=kt=nt=null,$u=!1,Co=0,wl=null,i)throw Error(r(300));t===null||Tn||(t=t.dependencies,t!==null&&Hu(t)&&(Tn=!0))}function tg(t,i,s,o){nt=t;var d=0;do{if(Tl&&(wl=null),Co=0,Tl=!1,25<=d)throw Error(r(301));if(d+=1,on=kt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}ae.H=_S,m=i(s,o)}while(Tl);return m}function dS(){var t=ae.H,i=t.useState()[0];return i=typeof i.then=="function"?xo(i):i,t=t.useState()[0],(kt!==null?kt.memoizedState:null)!==t&&(nt.flags|=1024),i}function pf(){var t=Xu!==0;return Xu=0,t}function gf(t,i,s){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~s}function _f(t){if($u){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}$u=!1}Dr=0,on=kt=nt=null,Tl=!1,Co=Xu=0,wl=null}function oi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?nt.memoizedState=on=t:on=on.next=t,on}function un(){if(kt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var i=on===null?nt.memoizedState:on.next;if(i!==null)on=i,kt=t;else{if(t===null)throw nt.alternate===null?Error(r(467)):Error(r(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},on===null?nt.memoizedState=on=t:on=on.next=t}return on}function yf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xo(t){var i=Co;return Co+=1,wl===null&&(wl=[]),t=Qp(wl,t,i),i=nt,(on===null?i.memoizedState:on.next)===null&&(i=i.alternate,ae.H=i===null||i.memoizedState===null?Vg:Lg),t}function Zu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xo(t);if(t.$$typeof===ve)return Hn(t)}throw Error(r(438,String(t)))}function vf(t){var i=null,s=nt.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var o=nt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=yf(),nt.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(t),o=0;o<t;o++)s[o]=x;return i.index++,s}function Qa(t,i){return typeof i=="function"?i(t):i}function Wu(t){var i=un();return bf(i,kt,t)}function bf(t,i,s){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var d=t.baseQueue,m=o.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}i.baseQueue=d=m,o.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{i=d.next;var I=w=null,j=null,$=i,se=!1;do{var fe=$.lane&-536870913;if(fe!==$.lane?(ft&fe)===fe:(Dr&fe)===fe){var W=$.revertLane;if(W===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),fe===bl&&(se=!0);else if((Dr&W)===W){$=$.next,W===bl&&(se=!0);continue}else fe={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(I=j=fe,w=m):j=j.next=fe,nt.lanes|=W,Ur|=W;fe=$.action,Ms&&s(m,fe),m=$.hasEagerState?$.eagerState:s(m,fe)}else W={lane:fe,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(I=j=W,w=m):j=j.next=W,nt.lanes|=fe,Ur|=fe;$=$.next}while($!==null&&$!==i);if(j===null?w=m:j.next=I,!vi(m,t.memoizedState)&&(Tn=!0,se&&(s=El,s!==null)))throw s;t.memoizedState=m,t.baseState=w,t.baseQueue=j,o.lastRenderedState=m}return d===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Ef(t){var i=un(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var o=s.dispatch,d=s.pending,m=i.memoizedState;if(d!==null){s.pending=null;var w=d=d.next;do m=t(m,w.action),w=w.next;while(w!==d);vi(m,i.memoizedState)||(Tn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),s.lastRenderedState=m}return[m,o]}function ng(t,i,s){var o=nt,d=un(),m=vt;if(m){if(s===void 0)throw Error(r(407));s=s()}else s=i();var w=!vi((kt||d).memoizedState,s);w&&(d.memoizedState=s,Tn=!0),d=d.queue;var I=rg.bind(null,o,d,t);if(Io(2048,8,I,[t]),d.getSnapshot!==i||w||on!==null&&on.memoizedState.tag&1){if(o.flags|=2048,Al(9,Ju(),ag.bind(null,o,d,s,i),null),Vt===null)throw Error(r(349));m||(Dr&124)!==0||ig(o,i,s)}return s}function ig(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=nt.updateQueue,i===null?(i=yf(),nt.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function ag(t,i,s,o){i.value=s,i.getSnapshot=o,sg(i)&&lg(t)}function rg(t,i,s){return s(function(){sg(i)&&lg(t)})}function sg(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!vi(t,s)}catch{return!0}}function lg(t){var i=gl(t,2);i!==null&&Ai(i,t,2)}function Sf(t){var i=oi();if(typeof t=="function"){var s=t;if(t=s(),Ms){xn(!0);try{s()}finally{xn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:t},i}function og(t,i,s,o){return t.baseState=s,bf(t,kt,typeof o=="function"?o:Qa)}function fS(t,i,s,o,d){if(tc(t))throw Error(r(485));if(t=i.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};ae.T!==null?s(!0):m.isTransition=!1,o(m),s=i.pending,s===null?(m.next=i.pending=m,ug(i,m)):(m.next=s.next,i.pending=s.next=m)}}function ug(t,i){var s=i.action,o=i.payload,d=t.state;if(i.isTransition){var m=ae.T,w={};ae.T=w;try{var I=s(d,o),j=ae.S;j!==null&&j(w,I),cg(t,i,I)}catch($){Tf(t,i,$)}finally{ae.T=m}}else try{m=s(d,o),cg(t,i,m)}catch($){Tf(t,i,$)}}function cg(t,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){dg(t,i,o)},function(o){return Tf(t,i,o)}):dg(t,i,s)}function dg(t,i,s){i.status="fulfilled",i.value=s,fg(i),t.state=s,i=t.pending,i!==null&&(s=i.next,s===i?t.pending=null:(s=s.next,i.next=s,ug(t,s)))}function Tf(t,i,s){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=s,fg(i),i=i.next;while(i!==o)}t.action=null}function fg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function hg(t,i){return i}function mg(t,i){if(vt){var s=Vt.formState;if(s!==null){e:{var o=nt;if(vt){if(Wt){t:{for(var d=Wt,m=wa;d.nodeType!==8;){if(!m){d=null;break t}if(d=ta(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){Wt=ta(d.nextSibling),o=d.data==="F!";break e}}Ns(o)}o=!1}o&&(i=s[0])}}return s=oi(),s.memoizedState=s.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hg,lastRenderedState:i},s.queue=o,s=Og.bind(null,nt,o),o.dispatch=s,o=Sf(!1),m=If.bind(null,nt,!1,o.queue),o=oi(),d={state:i,dispatch:null,action:t,pending:null},o.queue=d,s=fS.bind(null,nt,d,m,s),d.dispatch=s,o.memoizedState=t,[i,s,!1]}function pg(t){var i=un();return gg(i,kt,t)}function gg(t,i,s){if(i=bf(t,i,hg)[0],t=Wu(Qa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=xo(i)}catch(w){throw w===Eo?Ku:w}else o=i;i=un();var d=i.queue,m=d.dispatch;return s!==i.memoizedState&&(nt.flags|=2048,Al(9,Ju(),hS.bind(null,d,s),null)),[o,m,t]}function hS(t,i){t.action=i}function _g(t){var i=un(),s=kt;if(s!==null)return gg(i,s,t);un(),i=i.memoizedState,s=un();var o=s.queue.dispatch;return s.memoizedState=t,[i,o,!1]}function Al(t,i,s,o){return t={tag:t,create:s,deps:o,inst:i,next:null},i=nt.updateQueue,i===null&&(i=yf(),nt.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=t.next=t:(o=s.next,s.next=t,t.next=o,i.lastEffect=t),t}function Ju(){return{destroy:void 0,resource:void 0}}function yg(){return un().memoizedState}function ec(t,i,s,o){var d=oi();o=o===void 0?null:o,nt.flags|=t,d.memoizedState=Al(1|i,Ju(),s,o)}function Io(t,i,s,o){var d=un();o=o===void 0?null:o;var m=d.memoizedState.inst;kt!==null&&o!==null&&hf(o,kt.memoizedState.deps)?d.memoizedState=Al(i,m,s,o):(nt.flags|=t,d.memoizedState=Al(1|i,m,s,o))}function vg(t,i){ec(8390656,8,t,i)}function bg(t,i){Io(2048,8,t,i)}function Eg(t,i){return Io(4,2,t,i)}function Sg(t,i){return Io(4,4,t,i)}function Tg(t,i){if(typeof i=="function"){t=t();var s=i(t);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function wg(t,i,s){s=s!=null?s.concat([t]):null,Io(4,4,Tg.bind(null,i,t),s)}function wf(){}function Ag(t,i){var s=un();i=i===void 0?null:i;var o=s.memoizedState;return i!==null&&hf(i,o[1])?o[0]:(s.memoizedState=[t,i],t)}function Cg(t,i){var s=un();i=i===void 0?null:i;var o=s.memoizedState;if(i!==null&&hf(i,o[1]))return o[0];if(o=t(),Ms){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[o,i],o}function Af(t,i,s){return s===void 0||(Dr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=s,t=R_(),nt.lanes|=t,Ur|=t,s)}function xg(t,i,s,o){return vi(s,i)?s:Sl.current!==null?(t=Af(t,s,o),vi(t,i)||(Tn=!0),t):(Dr&42)===0?(Tn=!0,t.memoizedState=s):(t=R_(),nt.lanes|=t,Ur|=t,i)}function Ig(t,i,s,o,d){var m=Te.p;Te.p=m!==0&&8>m?m:8;var w=ae.T,I={};ae.T=I,If(t,!1,i,s);try{var j=d(),$=ae.S;if($!==null&&$(I,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var se=uS(j,o);Ro(t,i,se,wi(t))}else Ro(t,i,o,wi(t))}catch(fe){Ro(t,i,{then:function(){},status:"rejected",reason:fe},wi())}finally{Te.p=m,ae.T=w}}function mS(){}function Cf(t,i,s,o){if(t.tag!==5)throw Error(r(476));var d=Rg(t).queue;Ig(t,d,i,Re,s===null?mS:function(){return kg(t),s(o)})}function Rg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:Re},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:s},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function kg(t){var i=Rg(t).next.queue;Ro(t,i,{},wi())}function xf(){return Hn(Yo)}function Ng(){return un().memoizedState}function Dg(){return un().memoizedState}function pS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var s=wi();t=kr(s);var o=Nr(i,t,s);o!==null&&(Ai(o,i,s),To(o,i,s)),i={cache:nf()},t.payload=i;return}i=i.return}}function gS(t,i,s){var o=wi();s={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},tc(t)?Pg(i,s):(s=Kd(t,i,s,o),s!==null&&(Ai(s,t,o),Mg(s,i,o)))}function Og(t,i,s){var o=wi();Ro(t,i,s,o)}function Ro(t,i,s,o){var d={lane:o,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(tc(t))Pg(i,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,I=m(w,s);if(d.hasEagerState=!0,d.eagerState=I,vi(I,w))return ju(t,i,d,0),Vt===null&&Lu(),!1}catch{}finally{}if(s=Kd(t,i,d,o),s!==null)return Ai(s,t,o),Mg(s,i,o),!0}return!1}function If(t,i,s,o){if(o={lane:2,revertLane:sh(),action:o,hasEagerState:!1,eagerState:null,next:null},tc(t)){if(i)throw Error(r(479))}else i=Kd(t,s,o,2),i!==null&&Ai(i,t,2)}function tc(t){var i=t.alternate;return t===nt||i!==null&&i===nt}function Pg(t,i){Tl=$u=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function Mg(t,i,s){if((s&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,s|=o,i.lanes=s,mr(t,s)}}var nc={readContext:Hn,use:Zu,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn},Vg={readContext:Hn,use:Zu,useCallback:function(t,i){return oi().memoizedState=[t,i===void 0?null:i],t},useContext:Hn,useEffect:vg,useImperativeHandle:function(t,i,s){s=s!=null?s.concat([t]):null,ec(4194308,4,Tg.bind(null,i,t),s)},useLayoutEffect:function(t,i){return ec(4194308,4,t,i)},useInsertionEffect:function(t,i){ec(4,2,t,i)},useMemo:function(t,i){var s=oi();i=i===void 0?null:i;var o=t();if(Ms){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[o,i],o},useReducer:function(t,i,s){var o=oi();if(s!==void 0){var d=s(i);if(Ms){xn(!0);try{s(i)}finally{xn(!1)}}}else d=i;return o.memoizedState=o.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},o.queue=t,t=t.dispatch=gS.bind(null,nt,t),[o.memoizedState,t]},useRef:function(t){var i=oi();return t={current:t},i.memoizedState=t},useState:function(t){t=Sf(t);var i=t.queue,s=Og.bind(null,nt,i);return i.dispatch=s,[t.memoizedState,s]},useDebugValue:wf,useDeferredValue:function(t,i){var s=oi();return Af(s,t,i)},useTransition:function(){var t=Sf(!1);return t=Ig.bind(null,nt,t.queue,!0,!1),oi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,s){var o=nt,d=oi();if(vt){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),Vt===null)throw Error(r(349));(ft&124)!==0||ig(o,i,s)}d.memoizedState=s;var m={value:s,getSnapshot:i};return d.queue=m,vg(rg.bind(null,o,m,t),[t]),o.flags|=2048,Al(9,Ju(),ag.bind(null,o,m,s,i),null),s},useId:function(){var t=oi(),i=Vt.identifierPrefix;if(vt){var s=Ga,o=Fa;s=(o&~(1<<32-Kt(o)-1)).toString(32)+s,i=""+i+"R"+s,s=Xu++,0<s&&(i+="H"+s.toString(32)),i+=""}else s=cS++,i=""+i+"r"+s.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:xf,useFormState:mg,useActionState:mg,useOptimistic:function(t){var i=oi();i.memoizedState=i.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=If.bind(null,nt,!0,s),s.dispatch=i,[t,i]},useMemoCache:vf,useCacheRefresh:function(){return oi().memoizedState=pS.bind(null,nt)}},Lg={readContext:Hn,use:Zu,useCallback:Ag,useContext:Hn,useEffect:bg,useImperativeHandle:wg,useInsertionEffect:Eg,useLayoutEffect:Sg,useMemo:Cg,useReducer:Wu,useRef:yg,useState:function(){return Wu(Qa)},useDebugValue:wf,useDeferredValue:function(t,i){var s=un();return xg(s,kt.memoizedState,t,i)},useTransition:function(){var t=Wu(Qa)[0],i=un().memoizedState;return[typeof t=="boolean"?t:xo(t),i]},useSyncExternalStore:ng,useId:Ng,useHostTransitionStatus:xf,useFormState:pg,useActionState:pg,useOptimistic:function(t,i){var s=un();return og(s,kt,t,i)},useMemoCache:vf,useCacheRefresh:Dg},_S={readContext:Hn,use:Zu,useCallback:Ag,useContext:Hn,useEffect:bg,useImperativeHandle:wg,useInsertionEffect:Eg,useLayoutEffect:Sg,useMemo:Cg,useReducer:Ef,useRef:yg,useState:function(){return Ef(Qa)},useDebugValue:wf,useDeferredValue:function(t,i){var s=un();return kt===null?Af(s,t,i):xg(s,kt.memoizedState,t,i)},useTransition:function(){var t=Ef(Qa)[0],i=un().memoizedState;return[typeof t=="boolean"?t:xo(t),i]},useSyncExternalStore:ng,useId:Ng,useHostTransitionStatus:xf,useFormState:_g,useActionState:_g,useOptimistic:function(t,i){var s=un();return kt!==null?og(s,kt,t,i):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:vf,useCacheRefresh:Dg},Cl=null,ko=0;function ic(t){var i=ko;return ko+=1,Cl===null&&(Cl=[]),Qp(Cl,t,i)}function No(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function ac(t,i){throw i.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function jg(t){var i=t._init;return i(t._payload)}function Ug(t){function i(F,z){if(t){var Q=F.deletions;Q===null?(F.deletions=[z],F.flags|=16):Q.push(z)}}function s(F,z){if(!t)return null;for(;z!==null;)i(F,z),z=z.sibling;return null}function o(F){for(var z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function d(F,z){return F=Ha(F,z),F.index=0,F.sibling=null,F}function m(F,z,Q){return F.index=Q,t?(Q=F.alternate,Q!==null?(Q=Q.index,Q<z?(F.flags|=67108866,z):Q):(F.flags|=67108866,z)):(F.flags|=1048576,z)}function w(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function I(F,z,Q,ce){return z===null||z.tag!==6?(z=Qd(Q,F.mode,ce),z.return=F,z):(z=d(z,Q),z.return=F,z)}function j(F,z,Q,ce){var Ie=Q.type;return Ie===X?se(F,z,Q.props.children,ce,Q.key):z!==null&&(z.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===k&&jg(Ie)===z.type)?(z=d(z,Q.props),No(z,Q),z.return=F,z):(z=Bu(Q.type,Q.key,Q.props,null,F.mode,ce),No(z,Q),z.return=F,z)}function $(F,z,Q,ce){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=$d(Q,F.mode,ce),z.return=F,z):(z=d(z,Q.children||[]),z.return=F,z)}function se(F,z,Q,ce,Ie){return z===null||z.tag!==7?(z=xs(Q,F.mode,ce,Ie),z.return=F,z):(z=d(z,Q),z.return=F,z)}function fe(F,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Qd(""+z,F.mode,Q),z.return=F,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case N:return Q=Bu(z.type,z.key,z.props,null,F.mode,Q),No(Q,z),Q.return=F,Q;case L:return z=$d(z,F.mode,Q),z.return=F,z;case k:var ce=z._init;return z=ce(z._payload),fe(F,z,Q)}if(_t(z)||q(z))return z=xs(z,F.mode,Q,null),z.return=F,z;if(typeof z.then=="function")return fe(F,ic(z),Q);if(z.$$typeof===ve)return fe(F,Fu(F,z),Q);ac(F,z)}return null}function W(F,z,Q,ce){var Ie=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ie!==null?null:I(F,z,""+Q,ce);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:return Q.key===Ie?j(F,z,Q,ce):null;case L:return Q.key===Ie?$(F,z,Q,ce):null;case k:return Ie=Q._init,Q=Ie(Q._payload),W(F,z,Q,ce)}if(_t(Q)||q(Q))return Ie!==null?null:se(F,z,Q,ce,null);if(typeof Q.then=="function")return W(F,z,ic(Q),ce);if(Q.$$typeof===ve)return W(F,z,Fu(F,Q),ce);ac(F,Q)}return null}function ee(F,z,Q,ce,Ie){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return F=F.get(Q)||null,I(z,F,""+ce,Ie);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case N:return F=F.get(ce.key===null?Q:ce.key)||null,j(z,F,ce,Ie);case L:return F=F.get(ce.key===null?Q:ce.key)||null,$(z,F,ce,Ie);case k:var at=ce._init;return ce=at(ce._payload),ee(F,z,Q,ce,Ie)}if(_t(ce)||q(ce))return F=F.get(Q)||null,se(z,F,ce,Ie,null);if(typeof ce.then=="function")return ee(F,z,Q,ic(ce),Ie);if(ce.$$typeof===ve)return ee(F,z,Q,Fu(z,ce),Ie);ac(z,ce)}return null}function Fe(F,z,Q,ce){for(var Ie=null,at=null,Oe=z,ze=z=0,An=null;Oe!==null&&ze<Q.length;ze++){Oe.index>ze?(An=Oe,Oe=null):An=Oe.sibling;var gt=W(F,Oe,Q[ze],ce);if(gt===null){Oe===null&&(Oe=An);break}t&&Oe&&gt.alternate===null&&i(F,Oe),z=m(gt,z,ze),at===null?Ie=gt:at.sibling=gt,at=gt,Oe=An}if(ze===Q.length)return s(F,Oe),vt&&Rs(F,ze),Ie;if(Oe===null){for(;ze<Q.length;ze++)Oe=fe(F,Q[ze],ce),Oe!==null&&(z=m(Oe,z,ze),at===null?Ie=Oe:at.sibling=Oe,at=Oe);return vt&&Rs(F,ze),Ie}for(Oe=o(Oe);ze<Q.length;ze++)An=ee(Oe,F,ze,Q[ze],ce),An!==null&&(t&&An.alternate!==null&&Oe.delete(An.key===null?ze:An.key),z=m(An,z,ze),at===null?Ie=An:at.sibling=An,at=An);return t&&Oe.forEach(function(Qr){return i(F,Qr)}),vt&&Rs(F,ze),Ie}function je(F,z,Q,ce){if(Q==null)throw Error(r(151));for(var Ie=null,at=null,Oe=z,ze=z=0,An=null,gt=Q.next();Oe!==null&&!gt.done;ze++,gt=Q.next()){Oe.index>ze?(An=Oe,Oe=null):An=Oe.sibling;var Qr=W(F,Oe,gt.value,ce);if(Qr===null){Oe===null&&(Oe=An);break}t&&Oe&&Qr.alternate===null&&i(F,Oe),z=m(Qr,z,ze),at===null?Ie=Qr:at.sibling=Qr,at=Qr,Oe=An}if(gt.done)return s(F,Oe),vt&&Rs(F,ze),Ie;if(Oe===null){for(;!gt.done;ze++,gt=Q.next())gt=fe(F,gt.value,ce),gt!==null&&(z=m(gt,z,ze),at===null?Ie=gt:at.sibling=gt,at=gt);return vt&&Rs(F,ze),Ie}for(Oe=o(Oe);!gt.done;ze++,gt=Q.next())gt=ee(Oe,F,ze,gt.value,ce),gt!==null&&(t&&gt.alternate!==null&&Oe.delete(gt.key===null?ze:gt.key),z=m(gt,z,ze),at===null?Ie=gt:at.sibling=gt,at=gt);return t&&Oe.forEach(function(yT){return i(F,yT)}),vt&&Rs(F,ze),Ie}function Dt(F,z,Q,ce){if(typeof Q=="object"&&Q!==null&&Q.type===X&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:e:{for(var Ie=Q.key;z!==null;){if(z.key===Ie){if(Ie=Q.type,Ie===X){if(z.tag===7){s(F,z.sibling),ce=d(z,Q.props.children),ce.return=F,F=ce;break e}}else if(z.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===k&&jg(Ie)===z.type){s(F,z.sibling),ce=d(z,Q.props),No(ce,Q),ce.return=F,F=ce;break e}s(F,z);break}else i(F,z);z=z.sibling}Q.type===X?(ce=xs(Q.props.children,F.mode,ce,Q.key),ce.return=F,F=ce):(ce=Bu(Q.type,Q.key,Q.props,null,F.mode,ce),No(ce,Q),ce.return=F,F=ce)}return w(F);case L:e:{for(Ie=Q.key;z!==null;){if(z.key===Ie)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){s(F,z.sibling),ce=d(z,Q.children||[]),ce.return=F,F=ce;break e}else{s(F,z);break}else i(F,z);z=z.sibling}ce=$d(Q,F.mode,ce),ce.return=F,F=ce}return w(F);case k:return Ie=Q._init,Q=Ie(Q._payload),Dt(F,z,Q,ce)}if(_t(Q))return Fe(F,z,Q,ce);if(q(Q)){if(Ie=q(Q),typeof Ie!="function")throw Error(r(150));return Q=Ie.call(Q),je(F,z,Q,ce)}if(typeof Q.then=="function")return Dt(F,z,ic(Q),ce);if(Q.$$typeof===ve)return Dt(F,z,Fu(F,Q),ce);ac(F,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,z!==null&&z.tag===6?(s(F,z.sibling),ce=d(z,Q),ce.return=F,F=ce):(s(F,z),ce=Qd(Q,F.mode,ce),ce.return=F,F=ce),w(F)):s(F,z)}return function(F,z,Q,ce){try{ko=0;var Ie=Dt(F,z,Q,ce);return Cl=null,Ie}catch(Oe){if(Oe===Eo||Oe===Ku)throw Oe;var at=bi(29,Oe,null,F.mode);return at.lanes=ce,at.return=F,at}finally{}}}var xl=Ug(!0),Bg=Ug(!1),ji=me(null),Aa=null;function Or(t){var i=t.alternate;de(gn,gn.current&1),de(ji,t),Aa===null&&(i===null||Sl.current!==null||i.memoizedState!==null)&&(Aa=t)}function qg(t){if(t.tag===22){if(de(gn,gn.current),de(ji,t),Aa===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Aa=t)}}else Pr()}function Pr(){de(gn,gn.current),de(ji,ji.current)}function $a(t){Se(ji),Aa===t&&(Aa=null),Se(gn)}var gn=me(0);function rc(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||yh(s)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Rf(t,i,s,o){i=t.memoizedState,s=s(o,i),s=s==null?i:S({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var kf={enqueueSetState:function(t,i,s){t=t._reactInternals;var o=wi(),d=kr(o);d.payload=i,s!=null&&(d.callback=s),i=Nr(t,d,o),i!==null&&(Ai(i,t,o),To(i,t,o))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var o=wi(),d=kr(o);d.tag=1,d.payload=i,s!=null&&(d.callback=s),i=Nr(t,d,o),i!==null&&(Ai(i,t,o),To(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=wi(),o=kr(s);o.tag=2,i!=null&&(o.callback=i),i=Nr(t,o,s),i!==null&&(Ai(i,t,s),To(i,t,s))}};function zg(t,i,s,o,d,m,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,w):i.prototype&&i.prototype.isPureReactComponent?!ho(s,o)||!ho(d,m):!0}function Hg(t,i,s,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,o),i.state!==t&&kf.enqueueReplaceState(i,i.state,null)}function Vs(t,i){var s=i;if("ref"in i){s={};for(var o in i)o!=="ref"&&(s[o]=i[o])}if(t=t.defaultProps){s===i&&(s=S({},s));for(var d in t)s[d]===void 0&&(s[d]=t[d])}return s}var sc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Fg(t){sc(t)}function Gg(t){console.error(t)}function Kg(t){sc(t)}function lc(t,i){try{var s=t.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function Yg(t,i,s){try{var o=t.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Nf(t,i,s){return s=kr(s),s.tag=3,s.payload={element:null},s.callback=function(){lc(t,i)},s}function Qg(t){return t=kr(t),t.tag=3,t}function $g(t,i,s,o){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;t.payload=function(){return d(m)},t.callback=function(){Yg(i,s,o)}}var w=s.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){Yg(i,s,o),typeof d!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})})}function yS(t,i,s,o,d){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=s.alternate,i!==null&&yo(i,s,d,!0),s=ji.current,s!==null){switch(s.tag){case 13:return Aa===null?th():s.alternate===null&&Jt===0&&(Jt=3),s.flags&=-257,s.flags|=65536,s.lanes=d,o===sf?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([o]):i.add(o),ih(t,o,d)),!1;case 22:return s.flags|=65536,o===sf?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([o]):s.add(o)),ih(t,o,d)),!1}throw Error(r(435,s.tag))}return ih(t,o,d),th(),!1}if(vt)return i=ji.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,o!==Wd&&(t=Error(r(422),{cause:o}),_o(Pi(t,s)))):(o!==Wd&&(i=Error(r(423),{cause:o}),_o(Pi(i,s))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,o=Pi(o,s),d=Nf(t.stateNode,o,d),uf(t,d),Jt!==4&&(Jt=2)),!1;var m=Error(r(520),{cause:o});if(m=Pi(m,s),jo===null?jo=[m]:jo.push(m),Jt!==4&&(Jt=2),i===null)return!0;o=Pi(o,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,t=d&-d,s.lanes|=t,t=Nf(s.stateNode,o,t),uf(s,t),!1;case 1:if(i=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Br===null||!Br.has(m))))return s.flags|=65536,d&=-d,s.lanes|=d,d=Qg(d),$g(d,t,s,o),uf(s,d),!1}s=s.return}while(s!==null);return!1}var Xg=Error(r(461)),Tn=!1;function Dn(t,i,s,o){i.child=t===null?Bg(i,null,s,o):xl(i,t.child,s,o)}function Zg(t,i,s,o,d){s=s.render;var m=i.ref;if("ref"in o){var w={};for(var I in o)I!=="ref"&&(w[I]=o[I])}else w=o;return Os(i),o=mf(t,i,s,w,m,d),I=pf(),t!==null&&!Tn?(gf(t,i,d),Xa(t,i,d)):(vt&&I&&Xd(i),i.flags|=1,Dn(t,i,o,d),i.child)}function Wg(t,i,s,o,d){if(t===null){var m=s.type;return typeof m=="function"&&!Yd(m)&&m.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=m,Jg(t,i,m,o,d)):(t=Bu(s.type,null,o,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(m=t.child,!Uf(t,d)){var w=m.memoizedProps;if(s=s.compare,s=s!==null?s:ho,s(w,o)&&t.ref===i.ref)return Xa(t,i,d)}return i.flags|=1,t=Ha(m,o),t.ref=i.ref,t.return=i,i.child=t}function Jg(t,i,s,o,d){if(t!==null){var m=t.memoizedProps;if(ho(m,o)&&t.ref===i.ref)if(Tn=!1,i.pendingProps=o=m,Uf(t,d))(t.flags&131072)!==0&&(Tn=!0);else return i.lanes=t.lanes,Xa(t,i,d)}return Df(t,i,s,o,d)}function e_(t,i,s){var o=i.pendingProps,d=o.children,m=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((i.flags&128)!==0){if(o=m!==null?m.baseLanes|s:s,t!==null){for(d=i.child=t.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;i.childLanes=m&~o}else i.childLanes=0,i.child=null;return t_(t,i,o,s)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Gu(i,m!==null?m.cachePool:null),m!==null?Jp(i,m):df(),qg(i);else return i.lanes=i.childLanes=536870912,t_(t,i,m!==null?m.baseLanes|s:s,s)}else m!==null?(Gu(i,m.cachePool),Jp(i,m),Pr(),i.memoizedState=null):(t!==null&&Gu(i,null),df(),Pr());return Dn(t,i,d,s),i.child}function t_(t,i,s,o){var d=rf();return d=d===null?null:{parent:pn._currentValue,pool:d},i.memoizedState={baseLanes:s,cachePool:d},t!==null&&Gu(i,null),df(),qg(i),t!==null&&yo(t,i,o,!0),null}function oc(t,i){var s=i.ref;if(s===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(t===null||t.ref!==s)&&(i.flags|=4194816)}}function Df(t,i,s,o,d){return Os(i),s=mf(t,i,s,o,void 0,d),o=pf(),t!==null&&!Tn?(gf(t,i,d),Xa(t,i,d)):(vt&&o&&Xd(i),i.flags|=1,Dn(t,i,s,d),i.child)}function n_(t,i,s,o,d,m){return Os(i),i.updateQueue=null,s=tg(i,o,s,d),eg(t),o=pf(),t!==null&&!Tn?(gf(t,i,m),Xa(t,i,m)):(vt&&o&&Xd(i),i.flags|=1,Dn(t,i,s,m),i.child)}function i_(t,i,s,o,d){if(Os(i),i.stateNode===null){var m=_l,w=s.contextType;typeof w=="object"&&w!==null&&(m=Hn(w)),m=new s(o,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=kf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=o,m.state=i.memoizedState,m.refs={},lf(i),w=s.contextType,m.context=typeof w=="object"&&w!==null?Hn(w):_l,m.state=i.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(Rf(i,s,w,o),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&kf.enqueueReplaceState(m,m.state,null),Ao(i,o,m,d),wo(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){m=i.stateNode;var I=i.memoizedProps,j=Vs(s,I);m.props=j;var $=m.context,se=s.contextType;w=_l,typeof se=="object"&&se!==null&&(w=Hn(se));var fe=s.getDerivedStateFromProps;se=typeof fe=="function"||typeof m.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(I||$!==w)&&Hg(i,m,o,w),Rr=!1;var W=i.memoizedState;m.state=W,Ao(i,o,m,d),wo(),$=i.memoizedState,I||W!==$||Rr?(typeof fe=="function"&&(Rf(i,s,fe,o),$=i.memoizedState),(j=Rr||zg(i,s,j,o,W,$,w))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=$),m.props=o,m.state=$,m.context=w,o=j):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{m=i.stateNode,of(t,i),w=i.memoizedProps,se=Vs(s,w),m.props=se,fe=i.pendingProps,W=m.context,$=s.contextType,j=_l,typeof $=="object"&&$!==null&&(j=Hn($)),I=s.getDerivedStateFromProps,($=typeof I=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==fe||W!==j)&&Hg(i,m,o,j),Rr=!1,W=i.memoizedState,m.state=W,Ao(i,o,m,d),wo();var ee=i.memoizedState;w!==fe||W!==ee||Rr||t!==null&&t.dependencies!==null&&Hu(t.dependencies)?(typeof I=="function"&&(Rf(i,s,I,o),ee=i.memoizedState),(se=Rr||zg(i,s,se,o,W,ee,j)||t!==null&&t.dependencies!==null&&Hu(t.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,ee,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,ee,j)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=ee),m.props=o,m.state=ee,m.context=j,o=se):(typeof m.componentDidUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(i.flags|=1024),o=!1)}return m=o,oc(t,i),o=(i.flags&128)!==0,m||o?(m=i.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,t!==null&&o?(i.child=xl(i,t.child,null,d),i.child=xl(i,null,s,d)):Dn(t,i,s,d),i.memoizedState=m.state,t=i.child):t=Xa(t,i,d),t}function a_(t,i,s,o){return go(),i.flags|=256,Dn(t,i,s,o),i.child}var Of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(t){return{baseLanes:t,cachePool:Gp()}}function Mf(t,i,s){return t=t!==null?t.childLanes&~s:0,i&&(t|=Ui),t}function r_(t,i,s){var o=i.pendingProps,d=!1,m=(i.flags&128)!==0,w;if((w=m)||(w=t!==null&&t.memoizedState===null?!1:(gn.current&2)!==0),w&&(d=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,t===null){if(vt){if(d?Or(i):Pr(),vt){var I=Wt,j;if(j=I){e:{for(j=I,I=wa;j.nodeType!==8;){if(!I){I=null;break e}if(j=ta(j.nextSibling),j===null){I=null;break e}}I=j}I!==null?(i.memoizedState={dehydrated:I,treeContext:Is!==null?{id:Fa,overflow:Ga}:null,retryLane:536870912,hydrationErrors:null},j=bi(18,null,null,0),j.stateNode=I,j.return=i,i.child=j,ei=i,Wt=null,j=!0):j=!1}j||Ns(i)}if(I=i.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return yh(I)?i.lanes=32:i.lanes=536870912,null;$a(i)}return I=o.children,o=o.fallback,d?(Pr(),d=i.mode,I=uc({mode:"hidden",children:I},d),o=xs(o,d,s,null),I.return=i,o.return=i,I.sibling=o,i.child=I,d=i.child,d.memoizedState=Pf(s),d.childLanes=Mf(t,w,s),i.memoizedState=Of,o):(Or(i),Vf(i,I))}if(j=t.memoizedState,j!==null&&(I=j.dehydrated,I!==null)){if(m)i.flags&256?(Or(i),i.flags&=-257,i=Lf(t,i,s)):i.memoizedState!==null?(Pr(),i.child=t.child,i.flags|=128,i=null):(Pr(),d=o.fallback,I=i.mode,o=uc({mode:"visible",children:o.children},I),d=xs(d,I,s,null),d.flags|=2,o.return=i,d.return=i,o.sibling=d,i.child=o,xl(i,t.child,null,s),o=i.child,o.memoizedState=Pf(s),o.childLanes=Mf(t,w,s),i.memoizedState=Of,i=d);else if(Or(i),yh(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var $=w.dgst;w=$,o=Error(r(419)),o.stack="",o.digest=w,_o({value:o,source:null,stack:null}),i=Lf(t,i,s)}else if(Tn||yo(t,i,s,!1),w=(s&t.childLanes)!==0,Tn||w){if(w=Vt,w!==null&&(o=s&-s,o=(o&42)!==0?1:be(o),o=(o&(w.suspendedLanes|s))!==0?0:o,o!==0&&o!==j.retryLane))throw j.retryLane=o,gl(t,o),Ai(w,t,o),Xg;I.data==="$?"||th(),i=Lf(t,i,s)}else I.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=j.treeContext,Wt=ta(I.nextSibling),ei=i,vt=!0,ks=null,wa=!1,t!==null&&(Vi[Li++]=Fa,Vi[Li++]=Ga,Vi[Li++]=Is,Fa=t.id,Ga=t.overflow,Is=i),i=Vf(i,o.children),i.flags|=4096);return i}return d?(Pr(),d=o.fallback,I=i.mode,j=t.child,$=j.sibling,o=Ha(j,{mode:"hidden",children:o.children}),o.subtreeFlags=j.subtreeFlags&65011712,$!==null?d=Ha($,d):(d=xs(d,I,s,null),d.flags|=2),d.return=i,o.return=i,o.sibling=d,i.child=o,o=d,d=i.child,I=t.child.memoizedState,I===null?I=Pf(s):(j=I.cachePool,j!==null?($=pn._currentValue,j=j.parent!==$?{parent:$,pool:$}:j):j=Gp(),I={baseLanes:I.baseLanes|s,cachePool:j}),d.memoizedState=I,d.childLanes=Mf(t,w,s),i.memoizedState=Of,o):(Or(i),s=t.child,t=s.sibling,s=Ha(s,{mode:"visible",children:o.children}),s.return=i,s.sibling=null,t!==null&&(w=i.deletions,w===null?(i.deletions=[t],i.flags|=16):w.push(t)),i.child=s,i.memoizedState=null,s)}function Vf(t,i){return i=uc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function uc(t,i){return t=bi(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Lf(t,i,s){return xl(i,t.child,null,s),t=Vf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function s_(t,i,s){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),ef(t.return,i,s)}function jf(t,i,s,o,d){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=o,m.tail=s,m.tailMode=d)}function l_(t,i,s){var o=i.pendingProps,d=o.revealOrder,m=o.tail;if(Dn(t,i,o.children,s),o=gn.current,(o&2)!==0)o=o&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&s_(t,s,i);else if(t.tag===19)s_(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(de(gn,o),d){case"forwards":for(s=i.child,d=null;s!==null;)t=s.alternate,t!==null&&rc(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=i.child,i.child=null):(d=s.sibling,s.sibling=null),jf(i,!1,d,s,m);break;case"backwards":for(s=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&rc(t)===null){i.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}jf(i,!0,s,null,m);break;case"together":jf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Xa(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),Ur|=i.lanes,(s&i.childLanes)===0)if(t!==null){if(yo(t,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,s=Ha(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=Ha(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function Uf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Hu(t)))}function vS(t,i,s){switch(i.tag){case 3:Me(i,i.stateNode.containerInfo),Ir(i,pn,t.memoizedState.cache),go();break;case 27:case 5:Lt(i);break;case 4:Me(i,i.stateNode.containerInfo);break;case 10:Ir(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Or(i),i.flags|=128,null):(s&i.child.childLanes)!==0?r_(t,i,s):(Or(i),t=Xa(t,i,s),t!==null?t.sibling:null);Or(i);break;case 19:var d=(t.flags&128)!==0;if(o=(s&i.childLanes)!==0,o||(yo(t,i,s,!1),o=(s&i.childLanes)!==0),d){if(o)return l_(t,i,s);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),de(gn,gn.current),o)break;return null;case 22:case 23:return i.lanes=0,e_(t,i,s);case 24:Ir(i,pn,t.memoizedState.cache)}return Xa(t,i,s)}function o_(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps)Tn=!0;else{if(!Uf(t,s)&&(i.flags&128)===0)return Tn=!1,vS(t,i,s);Tn=(t.flags&131072)!==0}else Tn=!1,vt&&(i.flags&1048576)!==0&&jp(i,zu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var o=i.elementType,d=o._init;if(o=d(o._payload),i.type=o,typeof o=="function")Yd(o)?(t=Vs(o,t),i.tag=1,i=i_(null,i,o,t,s)):(i.tag=0,i=Df(null,i,o,t,s));else{if(o!=null){if(d=o.$$typeof,d===ie){i.tag=11,i=Zg(null,i,o,t,s);break e}else if(d===C){i.tag=14,i=Wg(null,i,o,t,s);break e}}throw i=Ke(o)||o,Error(r(306,i,""))}}return i;case 0:return Df(t,i,i.type,i.pendingProps,s);case 1:return o=i.type,d=Vs(o,i.pendingProps),i_(t,i,o,d,s);case 3:e:{if(Me(i,i.stateNode.containerInfo),t===null)throw Error(r(387));o=i.pendingProps;var m=i.memoizedState;d=m.element,of(t,i),Ao(i,o,null,s);var w=i.memoizedState;if(o=w.cache,Ir(i,pn,o),o!==m.cache&&tf(i,[pn],s,!0),wo(),o=w.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=a_(t,i,o,s);break e}else if(o!==d){d=Pi(Error(r(424)),i),_o(d),i=a_(t,i,o,s);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Wt=ta(t.firstChild),ei=i,vt=!0,ks=null,wa=!0,s=Bg(i,null,o,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(go(),o===d){i=Xa(t,i,s);break e}Dn(t,i,o,s)}i=i.child}return i;case 26:return oc(t,i),t===null?(s=fy(i.type,null,i.pendingProps,null))?i.memoizedState=s:vt||(s=i.type,t=i.pendingProps,o=Tc(ge.current).createElement(s),o[Xt]=i,o[It]=t,Pn(o,s,t),Ht(o),i.stateNode=o):i.memoizedState=fy(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Lt(i),t===null&&vt&&(o=i.stateNode=uy(i.type,i.pendingProps,ge.current),ei=i,wa=!0,d=Wt,Hr(i.type)?(vh=d,Wt=ta(o.firstChild)):Wt=d),Dn(t,i,i.pendingProps.children,s),oc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&vt&&((d=o=Wt)&&(o=YS(o,i.type,i.pendingProps,wa),o!==null?(i.stateNode=o,ei=i,Wt=ta(o.firstChild),wa=!1,d=!0):d=!1),d||Ns(i)),Lt(i),d=i.type,m=i.pendingProps,w=t!==null?t.memoizedProps:null,o=m.children,ph(d,m)?o=null:w!==null&&ph(d,w)&&(i.flags|=32),i.memoizedState!==null&&(d=mf(t,i,dS,null,null,s),Yo._currentValue=d),oc(t,i),Dn(t,i,o,s),i.child;case 6:return t===null&&vt&&((t=s=Wt)&&(s=QS(s,i.pendingProps,wa),s!==null?(i.stateNode=s,ei=i,Wt=null,t=!0):t=!1),t||Ns(i)),null;case 13:return r_(t,i,s);case 4:return Me(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=xl(i,null,o,s):Dn(t,i,o,s),i.child;case 11:return Zg(t,i,i.type,i.pendingProps,s);case 7:return Dn(t,i,i.pendingProps,s),i.child;case 8:return Dn(t,i,i.pendingProps.children,s),i.child;case 12:return Dn(t,i,i.pendingProps.children,s),i.child;case 10:return o=i.pendingProps,Ir(i,i.type,o.value),Dn(t,i,o.children,s),i.child;case 9:return d=i.type._context,o=i.pendingProps.children,Os(i),d=Hn(d),o=o(d),i.flags|=1,Dn(t,i,o,s),i.child;case 14:return Wg(t,i,i.type,i.pendingProps,s);case 15:return Jg(t,i,i.type,i.pendingProps,s);case 19:return l_(t,i,s);case 31:return o=i.pendingProps,s=i.mode,o={mode:o.mode,children:o.children},t===null?(s=uc(o,s),s.ref=i.ref,i.child=s,s.return=i,i=s):(s=Ha(t.child,o),s.ref=i.ref,i.child=s,s.return=i,i=s),i;case 22:return e_(t,i,s);case 24:return Os(i),o=Hn(pn),t===null?(d=rf(),d===null&&(d=Vt,m=nf(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=s),d=m),i.memoizedState={parent:o,cache:d},lf(i),Ir(i,pn,d)):((t.lanes&s)!==0&&(of(t,i),Ao(i,null,null,s),wo()),d=t.memoizedState,m=i.memoizedState,d.parent!==o?(d={parent:o,cache:o},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Ir(i,pn,o)):(o=m.cache,Ir(i,pn,o),o!==d.cache&&tf(i,[pn],s,!0))),Dn(t,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Za(t){t.flags|=4}function u_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!_y(i)){if(i=ji.current,i!==null&&((ft&4194048)===ft?Aa!==null:(ft&62914560)!==ft&&(ft&536870912)===0||i!==Aa))throw So=sf,Kp;t.flags|=8192}}function cc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Va():536870912,t.lanes|=i,Nl|=i)}function Do(t,i){if(!vt)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Qt(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,o=0;if(i)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=s,i}function bS(t,i,s){var o=i.pendingProps;switch(Zd(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(i),null;case 1:return Qt(i),null;case 3:return s=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ya(pn),Qe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(po(i)?Za(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qp())),Qt(i),null;case 26:return s=i.memoizedState,t===null?(Za(i),s!==null?(Qt(i),u_(i,s)):(Qt(i),i.flags&=-16777217)):s?s!==t.memoizedState?(Za(i),Qt(i),u_(i,s)):(Qt(i),i.flags&=-16777217):(t.memoizedProps!==o&&Za(i),Qt(i),i.flags&=-16777217),null;case 27:We(i),s=ge.current;var d=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Za(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return Qt(i),null}t=Ee.current,po(i)?Up(i):(t=uy(d,o,s),i.stateNode=t,Za(i))}return Qt(i),null;case 5:if(We(i),s=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&Za(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return Qt(i),null}if(t=Ee.current,po(i))Up(i);else{switch(d=Tc(ge.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?d.createElement("select",{is:o.is}):d.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?d.createElement(s,{is:o.is}):d.createElement(s)}}t[Xt]=i,t[It]=o;e:for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i.stateNode=t;e:switch(Pn(t,s,o),s){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Za(i)}}return Qt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&Za(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(t=ge.current,po(i)){if(t=i.stateNode,s=i.memoizedProps,o=null,d=ei,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}t[Xt]=i,t=!!(t.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||ny(t.nodeValue,s)),t||Ns(i)}else t=Tc(t).createTextNode(o),t[Xt]=i,i.stateNode=t}return Qt(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=po(i),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Xt]=i}else go(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Qt(i),d=!1}else d=qp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?($a(i),i):($a(i),null)}if($a(i),(i.flags&128)!==0)return i.lanes=s,i;if(s=o!==null,t=t!==null&&t.memoizedState!==null,s){o=i.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var m=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==d&&(o.flags|=2048)}return s!==t&&s&&(i.child.flags|=8192),cc(i,i.updateQueue),Qt(i),null;case 4:return Qe(),t===null&&ch(i.stateNode.containerInfo),Qt(i),null;case 10:return Ya(i.type),Qt(i),null;case 19:if(Se(gn),d=i.memoizedState,d===null)return Qt(i),null;if(o=(i.flags&128)!==0,m=d.rendering,m===null)if(o)Do(d,!1);else{if(Jt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(m=rc(t),m!==null){for(i.flags|=128,Do(d,!1),t=m.updateQueue,i.updateQueue=t,cc(i,t),i.subtreeFlags=0,t=s,s=i.child;s!==null;)Lp(s,t),s=s.sibling;return de(gn,gn.current&1|2),i.child}t=t.sibling}d.tail!==null&&zt()>hc&&(i.flags|=128,o=!0,Do(d,!1),i.lanes=4194304)}else{if(!o)if(t=rc(m),t!==null){if(i.flags|=128,o=!0,t=t.updateQueue,i.updateQueue=t,cc(i,t),Do(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!vt)return Qt(i),null}else 2*zt()-d.renderingStartTime>hc&&s!==536870912&&(i.flags|=128,o=!0,Do(d,!1),i.lanes=4194304);d.isBackwards?(m.sibling=i.child,i.child=m):(t=d.last,t!==null?t.sibling=m:i.child=m,d.last=m)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=zt(),i.sibling=null,t=gn.current,de(gn,o?t&1|2:t&1),i):(Qt(i),null);case 22:case 23:return $a(i),ff(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(s&536870912)!==0&&(i.flags&128)===0&&(Qt(i),i.subtreeFlags&6&&(i.flags|=8192)):Qt(i),s=i.updateQueue,s!==null&&cc(i,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==s&&(i.flags|=2048),t!==null&&Se(Ps),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Ya(pn),Qt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function ES(t,i){switch(Zd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ya(pn),Qe(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return We(i),null;case 13:if($a(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));go()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Se(gn),null;case 4:return Qe(),null;case 10:return Ya(i.type),null;case 22:case 23:return $a(i),ff(),t!==null&&Se(Ps),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ya(pn),null;case 25:return null;default:return null}}function c_(t,i){switch(Zd(i),i.tag){case 3:Ya(pn),Qe();break;case 26:case 27:case 5:We(i);break;case 4:Qe();break;case 13:$a(i);break;case 19:Se(gn);break;case 10:Ya(i.type);break;case 22:case 23:$a(i),ff(),t!==null&&Se(Ps);break;case 24:Ya(pn)}}function Oo(t,i){try{var s=i.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var d=o.next;s=d;do{if((s.tag&t)===t){o=void 0;var m=s.create,w=s.inst;o=m(),w.destroy=o}s=s.next}while(s!==d)}}catch(I){Ot(i,i.return,I)}}function Mr(t,i,s){try{var o=i.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var m=d.next;o=m;do{if((o.tag&t)===t){var w=o.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,d=i;var j=s,$=I;try{$()}catch(se){Ot(d,j,se)}}}o=o.next}while(o!==m)}}catch(se){Ot(i,i.return,se)}}function d_(t){var i=t.updateQueue;if(i!==null){var s=t.stateNode;try{Wp(i,s)}catch(o){Ot(t,t.return,o)}}}function f_(t,i,s){s.props=Vs(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(o){Ot(t,i,o)}}function Po(t,i){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof s=="function"?t.refCleanup=s(o):s.current=o}}catch(d){Ot(t,i,d)}}function Ca(t,i){var s=t.ref,o=t.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(d){Ot(t,i,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){Ot(t,i,d)}else s.current=null}function h_(t){var i=t.type,s=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(d){Ot(t,t.return,d)}}function Bf(t,i,s){try{var o=t.stateNode;zS(o,t.type,s,i),o[It]=i}catch(d){Ot(t,t.return,d)}}function m_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hr(t.type)||t.tag===4}function qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||m_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zf(t,i,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(t),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Sc));else if(o!==4&&(o===27&&Hr(t.type)&&(s=t.stateNode,i=null),t=t.child,t!==null))for(zf(t,i,s),t=t.sibling;t!==null;)zf(t,i,s),t=t.sibling}function dc(t,i,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(o!==4&&(o===27&&Hr(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(dc(t,i,s),t=t.sibling;t!==null;)dc(t,i,s),t=t.sibling}function p_(t){var i=t.stateNode,s=t.memoizedProps;try{for(var o=t.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);Pn(i,o,s),i[Xt]=t,i[It]=s}catch(m){Ot(t,t.return,m)}}var Wa=!1,an=!1,Hf=!1,g_=typeof WeakSet=="function"?WeakSet:Set,wn=null;function SS(t,i){if(t=t.containerInfo,hh=Rc,t=xp(t),Bd(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var d=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var w=0,I=-1,j=-1,$=0,se=0,fe=t,W=null;t:for(;;){for(var ee;fe!==s||d!==0&&fe.nodeType!==3||(I=w+d),fe!==m||o!==0&&fe.nodeType!==3||(j=w+o),fe.nodeType===3&&(w+=fe.nodeValue.length),(ee=fe.firstChild)!==null;)W=fe,fe=ee;for(;;){if(fe===t)break t;if(W===s&&++$===d&&(I=w),W===m&&++se===o&&(j=w),(ee=fe.nextSibling)!==null)break;fe=W,W=fe.parentNode}fe=ee}s=I===-1||j===-1?null:{start:I,end:j}}else s=null}s=s||{start:0,end:0}}else s=null;for(mh={focusedElem:t,selectionRange:s},Rc=!1,wn=i;wn!==null;)if(i=wn,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,wn=t;else for(;wn!==null;){switch(i=wn,m=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,s=i,d=m.memoizedProps,m=m.memoizedState,o=s.stateNode;try{var Fe=Vs(s.type,d,s.elementType===s.type);t=o.getSnapshotBeforeUpdate(Fe,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(je){Ot(s,s.return,je)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,s=t.nodeType,s===9)_h(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":_h(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,wn=t;break}wn=i.return}}function __(t,i,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:Vr(t,s),o&4&&Oo(5,s);break;case 1:if(Vr(t,s),o&4)if(t=s.stateNode,i===null)try{t.componentDidMount()}catch(w){Ot(s,s.return,w)}else{var d=Vs(s.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(d,i,t.__reactInternalSnapshotBeforeUpdate)}catch(w){Ot(s,s.return,w)}}o&64&&d_(s),o&512&&Po(s,s.return);break;case 3:if(Vr(t,s),o&64&&(t=s.updateQueue,t!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{Wp(t,i)}catch(w){Ot(s,s.return,w)}}break;case 27:i===null&&o&4&&p_(s);case 26:case 5:Vr(t,s),i===null&&o&4&&h_(s),o&512&&Po(s,s.return);break;case 12:Vr(t,s);break;case 13:Vr(t,s),o&4&&b_(t,s),o&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=NS.bind(null,s),$S(t,s))));break;case 22:if(o=s.memoizedState!==null||Wa,!o){i=i!==null&&i.memoizedState!==null||an,d=Wa;var m=an;Wa=o,(an=i)&&!m?Lr(t,s,(s.subtreeFlags&8772)!==0):Vr(t,s),Wa=d,an=m}break;case 30:break;default:Vr(t,s)}}function y_(t){var i=t.alternate;i!==null&&(t.alternate=null,y_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ha(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Gt=null,ui=!1;function Ja(t,i,s){for(s=s.child;s!==null;)v_(t,i,s),s=s.sibling}function v_(t,i,s){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(jt,s)}catch{}switch(s.tag){case 26:an||Ca(s,i),Ja(t,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:an||Ca(s,i);var o=Gt,d=ui;Hr(s.type)&&(Gt=s.stateNode,ui=!1),Ja(t,i,s),Ho(s.stateNode),Gt=o,ui=d;break;case 5:an||Ca(s,i);case 6:if(o=Gt,d=ui,Gt=null,Ja(t,i,s),Gt=o,ui=d,Gt!==null)if(ui)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(s.stateNode)}catch(m){Ot(s,i,m)}else try{Gt.removeChild(s.stateNode)}catch(m){Ot(s,i,m)}break;case 18:Gt!==null&&(ui?(t=Gt,ly(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Zo(t)):ly(Gt,s.stateNode));break;case 4:o=Gt,d=ui,Gt=s.stateNode.containerInfo,ui=!0,Ja(t,i,s),Gt=o,ui=d;break;case 0:case 11:case 14:case 15:an||Mr(2,s,i),an||Mr(4,s,i),Ja(t,i,s);break;case 1:an||(Ca(s,i),o=s.stateNode,typeof o.componentWillUnmount=="function"&&f_(s,i,o)),Ja(t,i,s);break;case 21:Ja(t,i,s);break;case 22:an=(o=an)||s.memoizedState!==null,Ja(t,i,s),an=o;break;default:Ja(t,i,s)}}function b_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Zo(t)}catch(s){Ot(i,i.return,s)}}function TS(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new g_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new g_),i;default:throw Error(r(435,t.tag))}}function Ff(t,i){var s=TS(t);i.forEach(function(o){var d=DS.bind(null,t,o);s.has(o)||(s.add(o),o.then(d,d))})}function Ei(t,i){var s=i.deletions;if(s!==null)for(var o=0;o<s.length;o++){var d=s[o],m=t,w=i,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(Hr(I.type)){Gt=I.stateNode,ui=!1;break e}break;case 5:Gt=I.stateNode,ui=!1;break e;case 3:case 4:Gt=I.stateNode.containerInfo,ui=!0;break e}I=I.return}if(Gt===null)throw Error(r(160));v_(m,w,d),Gt=null,ui=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)E_(i,t),i=i.sibling}var ea=null;function E_(t,i){var s=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ei(i,t),Si(t),o&4&&(Mr(3,t,t.return),Oo(3,t),Mr(5,t,t.return));break;case 1:Ei(i,t),Si(t),o&512&&(an||s===null||Ca(s,s.return)),o&64&&Wa&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var d=ea;if(Ei(i,t),Si(t),o&512&&(an||s===null||Ca(s,s.return)),o&4){var m=s!==null?s.memoizedState:null;if(o=t.memoizedState,s===null)if(o===null)if(t.stateNode===null){e:{o=t.type,s=t.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":m=d.getElementsByTagName("title")[0],(!m||m[fa]||m[Xt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(o),d.head.insertBefore(m,d.querySelector("head > title"))),Pn(m,o,s),m[Xt]=t,Ht(m),o=m;break e;case"link":var w=py("link","href",d).get(o+(s.href||""));if(w){for(var I=0;I<w.length;I++)if(m=w[I],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){w.splice(I,1);break t}}m=d.createElement(o),Pn(m,o,s),d.head.appendChild(m);break;case"meta":if(w=py("meta","content",d).get(o+(s.content||""))){for(I=0;I<w.length;I++)if(m=w[I],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){w.splice(I,1);break t}}m=d.createElement(o),Pn(m,o,s),d.head.appendChild(m);break;default:throw Error(r(468,o))}m[Xt]=t,Ht(m),o=m}t.stateNode=o}else gy(d,t.type,t.stateNode);else t.stateNode=my(d,o,t.memoizedProps);else m!==o?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,o===null?gy(d,t.type,t.stateNode):my(d,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Bf(t,t.memoizedProps,s.memoizedProps)}break;case 27:Ei(i,t),Si(t),o&512&&(an||s===null||Ca(s,s.return)),s!==null&&o&4&&Bf(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Ei(i,t),Si(t),o&512&&(an||s===null||Ca(s,s.return)),t.flags&32){d=t.stateNode;try{Un(d,"")}catch(ee){Ot(t,t.return,ee)}}o&4&&t.stateNode!=null&&(d=t.memoizedProps,Bf(t,d,s!==null?s.memoizedProps:d)),o&1024&&(Hf=!0);break;case 6:if(Ei(i,t),Si(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,s=t.stateNode;try{s.nodeValue=o}catch(ee){Ot(t,t.return,ee)}}break;case 3:if(Cc=null,d=ea,ea=wc(i.containerInfo),Ei(i,t),ea=d,Si(t),o&4&&s!==null&&s.memoizedState.isDehydrated)try{Zo(i.containerInfo)}catch(ee){Ot(t,t.return,ee)}Hf&&(Hf=!1,S_(t));break;case 4:o=ea,ea=wc(t.stateNode.containerInfo),Ei(i,t),Si(t),ea=o;break;case 12:Ei(i,t),Si(t);break;case 13:Ei(i,t),Si(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Xf=zt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ff(t,o)));break;case 22:d=t.memoizedState!==null;var j=s!==null&&s.memoizedState!==null,$=Wa,se=an;if(Wa=$||d,an=se||j,Ei(i,t),an=se,Wa=$,Si(t),o&8192)e:for(i=t.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(s===null||j||Wa||an||Ls(t)),s=null,i=t;;){if(i.tag===5||i.tag===26){if(s===null){j=s=i;try{if(m=j.stateNode,d)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=j.stateNode;var fe=j.memoizedProps.style,W=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;I.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(ee){Ot(j,j.return,ee)}}}else if(i.tag===6){if(s===null){j=i;try{j.stateNode.nodeValue=d?"":j.memoizedProps}catch(ee){Ot(j,j.return,ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,Ff(t,s))));break;case 19:Ei(i,t),Si(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Ff(t,o)));break;case 30:break;case 21:break;default:Ei(i,t),Si(t)}}function Si(t){var i=t.flags;if(i&2){try{for(var s,o=t.return;o!==null;){if(m_(o)){s=o;break}o=o.return}if(s==null)throw Error(r(160));switch(s.tag){case 27:var d=s.stateNode,m=qf(t);dc(t,m,d);break;case 5:var w=s.stateNode;s.flags&32&&(Un(w,""),s.flags&=-33);var I=qf(t);dc(t,I,w);break;case 3:case 4:var j=s.stateNode.containerInfo,$=qf(t);zf(t,$,j);break;default:throw Error(r(161))}}catch(se){Ot(t,t.return,se)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function S_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;S_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Vr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)__(t,i.alternate,i),i=i.sibling}function Ls(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Mr(4,i,i.return),Ls(i);break;case 1:Ca(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&f_(i,i.return,s),Ls(i);break;case 27:Ho(i.stateNode);case 26:case 5:Ca(i,i.return),Ls(i);break;case 22:i.memoizedState===null&&Ls(i);break;case 30:Ls(i);break;default:Ls(i)}t=t.sibling}}function Lr(t,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,d=t,m=i,w=m.flags;switch(m.tag){case 0:case 11:case 15:Lr(d,m,s),Oo(4,m);break;case 1:if(Lr(d,m,s),o=m,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch($){Ot(o,o.return,$)}if(o=m,d=o.updateQueue,d!==null){var I=o.stateNode;try{var j=d.shared.hiddenCallbacks;if(j!==null)for(d.shared.hiddenCallbacks=null,d=0;d<j.length;d++)Zp(j[d],I)}catch($){Ot(o,o.return,$)}}s&&w&64&&d_(m),Po(m,m.return);break;case 27:p_(m);case 26:case 5:Lr(d,m,s),s&&o===null&&w&4&&h_(m),Po(m,m.return);break;case 12:Lr(d,m,s);break;case 13:Lr(d,m,s),s&&w&4&&b_(d,m);break;case 22:m.memoizedState===null&&Lr(d,m,s),Po(m,m.return);break;case 30:break;default:Lr(d,m,s)}i=i.sibling}}function Gf(t,i){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&vo(s))}function Kf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&vo(t))}function xa(t,i,s,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)T_(t,i,s,o),i=i.sibling}function T_(t,i,s,o){var d=i.flags;switch(i.tag){case 0:case 11:case 15:xa(t,i,s,o),d&2048&&Oo(9,i);break;case 1:xa(t,i,s,o);break;case 3:xa(t,i,s,o),d&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&vo(t)));break;case 12:if(d&2048){xa(t,i,s,o),t=i.stateNode;try{var m=i.memoizedProps,w=m.id,I=m.onPostCommit;typeof I=="function"&&I(w,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){Ot(i,i.return,j)}}else xa(t,i,s,o);break;case 13:xa(t,i,s,o);break;case 23:break;case 22:m=i.stateNode,w=i.alternate,i.memoizedState!==null?m._visibility&2?xa(t,i,s,o):Mo(t,i):m._visibility&2?xa(t,i,s,o):(m._visibility|=2,Il(t,i,s,o,(i.subtreeFlags&10256)!==0)),d&2048&&Gf(w,i);break;case 24:xa(t,i,s,o),d&2048&&Kf(i.alternate,i);break;default:xa(t,i,s,o)}}function Il(t,i,s,o,d){for(d=d&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=t,w=i,I=s,j=o,$=w.flags;switch(w.tag){case 0:case 11:case 15:Il(m,w,I,j,d),Oo(8,w);break;case 23:break;case 22:var se=w.stateNode;w.memoizedState!==null?se._visibility&2?Il(m,w,I,j,d):Mo(m,w):(se._visibility|=2,Il(m,w,I,j,d)),d&&$&2048&&Gf(w.alternate,w);break;case 24:Il(m,w,I,j,d),d&&$&2048&&Kf(w.alternate,w);break;default:Il(m,w,I,j,d)}i=i.sibling}}function Mo(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=t,o=i,d=o.flags;switch(o.tag){case 22:Mo(s,o),d&2048&&Gf(o.alternate,o);break;case 24:Mo(s,o),d&2048&&Kf(o.alternate,o);break;default:Mo(s,o)}i=i.sibling}}var Vo=8192;function Rl(t){if(t.subtreeFlags&Vo)for(t=t.child;t!==null;)w_(t),t=t.sibling}function w_(t){switch(t.tag){case 26:Rl(t),t.flags&Vo&&t.memoizedState!==null&&oT(ea,t.memoizedState,t.memoizedProps);break;case 5:Rl(t);break;case 3:case 4:var i=ea;ea=wc(t.stateNode.containerInfo),Rl(t),ea=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Vo,Vo=16777216,Rl(t),Vo=i):Rl(t));break;default:Rl(t)}}function A_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Lo(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var o=i[s];wn=o,x_(o,t)}A_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)C_(t),t=t.sibling}function C_(t){switch(t.tag){case 0:case 11:case 15:Lo(t),t.flags&2048&&Mr(9,t,t.return);break;case 3:Lo(t);break;case 12:Lo(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,fc(t)):Lo(t);break;default:Lo(t)}}function fc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var o=i[s];wn=o,x_(o,t)}A_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Mr(8,i,i.return),fc(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,fc(i));break;default:fc(i)}t=t.sibling}}function x_(t,i){for(;wn!==null;){var s=wn;switch(s.tag){case 0:case 11:case 15:Mr(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:vo(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,wn=o;else e:for(s=t;wn!==null;){o=wn;var d=o.sibling,m=o.return;if(y_(o),o===s){wn=null;break e}if(d!==null){d.return=m,wn=d;break e}wn=m}}}var wS={getCacheForType:function(t){var i=Hn(pn),s=i.data.get(t);return s===void 0&&(s=t(),i.data.set(t,s)),s}},AS=typeof WeakMap=="function"?WeakMap:Map,At=0,Vt=null,rt=null,ft=0,Ct=0,Ti=null,jr=!1,kl=!1,Yf=!1,er=0,Jt=0,Ur=0,js=0,Qf=0,Ui=0,Nl=0,jo=null,ci=null,$f=!1,Xf=0,hc=1/0,mc=null,Br=null,On=0,qr=null,Dl=null,Ol=0,Zf=0,Wf=null,I_=null,Uo=0,Jf=null;function wi(){if((At&2)!==0&&ft!==0)return ft&-ft;if(ae.T!==null){var t=bl;return t!==0?t:sh()}return Yt()}function R_(){Ui===0&&(Ui=(ft&536870912)===0||vt?hr():536870912);var t=ji.current;return t!==null&&(t.flags|=32),Ui}function Ai(t,i,s){(t===Vt&&(Ct===2||Ct===9)||t.cancelPendingCommit!==null)&&(Pl(t,0),zr(t,ft,Ui,!1)),Xn(t,s),((At&2)===0||t!==Vt)&&(t===Vt&&((At&2)===0&&(js|=s),Jt===4&&zr(t,ft,Ui,!1)),Ia(t))}function k_(t,i,s){if((At&6)!==0)throw Error(r(327));var o=!s&&(i&124)===0&&(i&t.expiredLanes)===0||ua(t,i),d=o?IS(t,i):nh(t,i,!0),m=o;do{if(d===0){kl&&!o&&zr(t,i,0,!1);break}else{if(s=t.current.alternate,m&&!CS(s)){d=nh(t,i,!1),m=!1;continue}if(d===2){if(m=i,t.errorRecoveryDisabledLanes&m)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var I=t;d=jo;var j=I.current.memoizedState.isDehydrated;if(j&&(Pl(I,w).flags|=256),w=nh(I,w,!1),w!==2){if(Yf&&!j){I.errorRecoveryDisabledLanes|=m,js|=m,d=4;break e}m=ci,ci=d,m!==null&&(ci===null?ci=m:ci.push.apply(ci,m))}d=w}if(m=!1,d!==2)continue}}if(d===1){Pl(t,0),zr(t,i,0,!0);break}e:{switch(o=t,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:zr(o,i,Ui,!jr);break e;case 2:ci=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(d=Xf+300-zt(),10<d)){if(zr(o,i,Ui,!jr),fr(o,0,!0)!==0)break e;o.timeoutHandle=ry(N_.bind(null,o,s,ci,mc,$f,i,Ui,js,Nl,jr,m,2,-0,0),d);break e}N_(o,s,ci,mc,$f,i,Ui,js,Nl,jr,m,0,-0,0)}}break}while(!0);Ia(t)}function N_(t,i,s,o,d,m,w,I,j,$,se,fe,W,ee){if(t.timeoutHandle=-1,fe=i.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(Ko={stylesheets:null,count:0,unsuspend:lT},w_(i),fe=uT(),fe!==null)){t.cancelPendingCommit=fe(j_.bind(null,t,i,m,s,o,d,w,I,j,se,1,W,ee)),zr(t,m,w,!$);return}j_(t,i,m,s,o,d,w,I,j)}function CS(t){for(var i=t;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var d=s[o],m=d.getSnapshot;d=d.value;try{if(!vi(m(),d))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zr(t,i,s,o){i&=~Qf,i&=~js,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var d=i;0<d;){var m=31-Kt(d),w=1<<m;o[m]=-1,d&=~w}s!==0&&hn(t,s,i)}function pc(){return(At&6)===0?(Bo(0),!1):!0}function eh(){if(rt!==null){if(Ct===0)var t=rt.return;else t=rt,Ka=Ds=null,_f(t),Cl=null,ko=0,t=rt;for(;t!==null;)c_(t.alternate,t),t=t.return;rt=null}}function Pl(t,i){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,FS(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),eh(),Vt=t,rt=s=Ha(t.current,null),ft=i,Ct=0,Ti=null,jr=!1,kl=ua(t,i),Yf=!1,Nl=Ui=Qf=js=Ur=Jt=0,ci=jo=null,$f=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var d=31-Kt(o),m=1<<d;i|=t[d],o&=~m}return er=i,Lu(),s}function D_(t,i){nt=null,ae.H=nc,i===Eo||i===Ku?(i=$p(),Ct=3):i===Kp?(i=$p(),Ct=4):Ct=i===Xg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ti=i,rt===null&&(Jt=1,lc(t,Pi(i,t.current)))}function O_(){var t=ae.H;return ae.H=nc,t===null?nc:t}function P_(){var t=ae.A;return ae.A=wS,t}function th(){Jt=4,jr||(ft&4194048)!==ft&&ji.current!==null||(kl=!0),(Ur&134217727)===0&&(js&134217727)===0||Vt===null||zr(Vt,ft,Ui,!1)}function nh(t,i,s){var o=At;At|=2;var d=O_(),m=P_();(Vt!==t||ft!==i)&&(mc=null,Pl(t,i)),i=!1;var w=Jt;e:do try{if(Ct!==0&&rt!==null){var I=rt,j=Ti;switch(Ct){case 8:eh(),w=6;break e;case 3:case 2:case 9:case 6:ji.current===null&&(i=!0);var $=Ct;if(Ct=0,Ti=null,Ml(t,I,j,$),s&&kl){w=0;break e}break;default:$=Ct,Ct=0,Ti=null,Ml(t,I,j,$)}}xS(),w=Jt;break}catch(se){D_(t,se)}while(!0);return i&&t.shellSuspendCounter++,Ka=Ds=null,At=o,ae.H=d,ae.A=m,rt===null&&(Vt=null,ft=0,Lu()),w}function xS(){for(;rt!==null;)M_(rt)}function IS(t,i){var s=At;At|=2;var o=O_(),d=P_();Vt!==t||ft!==i?(mc=null,hc=zt()+500,Pl(t,i)):kl=ua(t,i);e:do try{if(Ct!==0&&rt!==null){i=rt;var m=Ti;t:switch(Ct){case 1:Ct=0,Ti=null,Ml(t,i,m,1);break;case 2:case 9:if(Yp(m)){Ct=0,Ti=null,V_(i);break}i=function(){Ct!==2&&Ct!==9||Vt!==t||(Ct=7),Ia(t)},m.then(i,i);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:Yp(m)?(Ct=0,Ti=null,V_(i)):(Ct=0,Ti=null,Ml(t,i,m,7));break;case 5:var w=null;switch(rt.tag){case 26:w=rt.memoizedState;case 5:case 27:var I=rt;if(!w||_y(w)){Ct=0,Ti=null;var j=I.sibling;if(j!==null)rt=j;else{var $=I.return;$!==null?(rt=$,gc($)):rt=null}break t}}Ct=0,Ti=null,Ml(t,i,m,5);break;case 6:Ct=0,Ti=null,Ml(t,i,m,6);break;case 8:eh(),Jt=6;break e;default:throw Error(r(462))}}RS();break}catch(se){D_(t,se)}while(!0);return Ka=Ds=null,ae.H=o,ae.A=d,At=s,rt!==null?0:(Vt=null,ft=0,Lu(),Jt)}function RS(){for(;rt!==null&&!$n();)M_(rt)}function M_(t){var i=o_(t.alternate,t,er);t.memoizedProps=t.pendingProps,i===null?gc(t):rt=i}function V_(t){var i=t,s=i.alternate;switch(i.tag){case 15:case 0:i=n_(s,i,i.pendingProps,i.type,void 0,ft);break;case 11:i=n_(s,i,i.pendingProps,i.type.render,i.ref,ft);break;case 5:_f(i);default:c_(s,i),i=rt=Lp(i,er),i=o_(s,i,er)}t.memoizedProps=t.pendingProps,i===null?gc(t):rt=i}function Ml(t,i,s,o){Ka=Ds=null,_f(i),Cl=null,ko=0;var d=i.return;try{if(yS(t,d,i,s,ft)){Jt=1,lc(t,Pi(s,t.current)),rt=null;return}}catch(m){if(d!==null)throw rt=d,m;Jt=1,lc(t,Pi(s,t.current)),rt=null;return}i.flags&32768?(vt||o===1?t=!0:kl||(ft&536870912)!==0?t=!1:(jr=t=!0,(o===2||o===9||o===3||o===6)&&(o=ji.current,o!==null&&o.tag===13&&(o.flags|=16384))),L_(i,t)):gc(i)}function gc(t){var i=t;do{if((i.flags&32768)!==0){L_(i,jr);return}t=i.return;var s=bS(i.alternate,i,er);if(s!==null){rt=s;return}if(i=i.sibling,i!==null){rt=i;return}rt=i=t}while(i!==null);Jt===0&&(Jt=5)}function L_(t,i){do{var s=ES(t.alternate,t);if(s!==null){s.flags&=32767,rt=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(t=t.sibling,t!==null)){rt=t;return}rt=t=s}while(t!==null);Jt=6,rt=null}function j_(t,i,s,o,d,m,w,I,j){t.cancelPendingCommit=null;do _c();while(On!==0);if((At&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=Gd,ps(t,s,m,w,I,j),t===Vt&&(rt=Vt=null,ft=0),Dl=i,qr=t,Ol=s,Zf=m,Wf=d,I_=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,OS(ct,function(){return H_(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=ae.T,ae.T=null,d=Te.p,Te.p=2,w=At,At|=4;try{SS(t,i,s)}finally{At=w,Te.p=d,ae.T=o}}On=1,U_(),B_(),q_()}}function U_(){if(On===1){On=0;var t=qr,i=Dl,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=ae.T,ae.T=null;var o=Te.p;Te.p=2;var d=At;At|=4;try{E_(i,t);var m=mh,w=xp(t.containerInfo),I=m.focusedElem,j=m.selectionRange;if(w!==I&&I&&I.ownerDocument&&Cp(I.ownerDocument.documentElement,I)){if(j!==null&&Bd(I)){var $=j.start,se=j.end;if(se===void 0&&(se=$),"selectionStart"in I)I.selectionStart=$,I.selectionEnd=Math.min(se,I.value.length);else{var fe=I.ownerDocument||document,W=fe&&fe.defaultView||window;if(W.getSelection){var ee=W.getSelection(),Fe=I.textContent.length,je=Math.min(j.start,Fe),Dt=j.end===void 0?je:Math.min(j.end,Fe);!ee.extend&&je>Dt&&(w=Dt,Dt=je,je=w);var F=Ap(I,je),z=Ap(I,Dt);if(F&&z&&(ee.rangeCount!==1||ee.anchorNode!==F.node||ee.anchorOffset!==F.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var Q=fe.createRange();Q.setStart(F.node,F.offset),ee.removeAllRanges(),je>Dt?(ee.addRange(Q),ee.extend(z.node,z.offset)):(Q.setEnd(z.node,z.offset),ee.addRange(Q))}}}}for(fe=[],ee=I;ee=ee.parentNode;)ee.nodeType===1&&fe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<fe.length;I++){var ce=fe[I];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Rc=!!hh,mh=hh=null}finally{At=d,Te.p=o,ae.T=s}}t.current=i,On=2}}function B_(){if(On===2){On=0;var t=qr,i=Dl,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=ae.T,ae.T=null;var o=Te.p;Te.p=2;var d=At;At|=4;try{__(t,i.alternate,i)}finally{At=d,Te.p=o,ae.T=s}}On=3}}function q_(){if(On===4||On===3){On=0,fn();var t=qr,i=Dl,s=Ol,o=I_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?On=5:(On=0,Dl=qr=null,z_(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Br=null),ca(s),i=i.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(jt,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=ae.T,d=Te.p,Te.p=2,ae.T=null;try{for(var m=t.onRecoverableError,w=0;w<o.length;w++){var I=o[w];m(I.value,{componentStack:I.stack})}}finally{ae.T=i,Te.p=d}}(Ol&3)!==0&&_c(),Ia(t),d=t.pendingLanes,(s&4194090)!==0&&(d&42)!==0?t===Jf?Uo++:(Uo=0,Jf=t):Uo=0,Bo(0)}}function z_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,vo(i)))}function _c(t){return U_(),B_(),q_(),H_()}function H_(){if(On!==5)return!1;var t=qr,i=Zf;Zf=0;var s=ca(Ol),o=ae.T,d=Te.p;try{Te.p=32>s?32:s,ae.T=null,s=Wf,Wf=null;var m=qr,w=Ol;if(On=0,Dl=qr=null,Ol=0,(At&6)!==0)throw Error(r(331));var I=At;if(At|=4,C_(m.current),T_(m,m.current,w,s),At=I,Bo(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(jt,m)}catch{}return!0}finally{Te.p=d,ae.T=o,z_(t,i)}}function F_(t,i,s){i=Pi(s,i),i=Nf(t.stateNode,i,2),t=Nr(t,i,2),t!==null&&(Xn(t,2),Ia(t))}function Ot(t,i,s){if(t.tag===3)F_(t,t,s);else for(;i!==null;){if(i.tag===3){F_(i,t,s);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Br===null||!Br.has(o))){t=Pi(s,t),s=Qg(2),o=Nr(i,s,2),o!==null&&($g(s,o,i,t),Xn(o,2),Ia(o));break}}i=i.return}}function ih(t,i,s){var o=t.pingCache;if(o===null){o=t.pingCache=new AS;var d=new Set;o.set(i,d)}else d=o.get(i),d===void 0&&(d=new Set,o.set(i,d));d.has(s)||(Yf=!0,d.add(s),t=kS.bind(null,t,i,s),i.then(t,t))}function kS(t,i,s){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,Vt===t&&(ft&s)===s&&(Jt===4||Jt===3&&(ft&62914560)===ft&&300>zt()-Xf?(At&2)===0&&Pl(t,0):Qf|=s,Nl===ft&&(Nl=0)),Ia(t)}function G_(t,i){i===0&&(i=Va()),t=gl(t,i),t!==null&&(Xn(t,i),Ia(t))}function NS(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),G_(t,s)}function DS(t,i){var s=0;switch(t.tag){case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),G_(t,s)}function OS(t,i){return ke(t,i)}var yc=null,Vl=null,ah=!1,vc=!1,rh=!1,Us=0;function Ia(t){t!==Vl&&t.next===null&&(Vl===null?yc=Vl=t:Vl=Vl.next=t),vc=!0,ah||(ah=!0,MS())}function Bo(t,i){if(!rh&&vc){rh=!0;do for(var s=!1,o=yc;o!==null;){if(t!==0){var d=o.pendingLanes;if(d===0)var m=0;else{var w=o.suspendedLanes,I=o.pingedLanes;m=(1<<31-Kt(42|t)+1)-1,m&=d&~(w&~I),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,$_(o,m))}else m=ft,m=fr(o,o===Vt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||ua(o,m)||(s=!0,$_(o,m));o=o.next}while(s);rh=!1}}function PS(){K_()}function K_(){vc=ah=!1;var t=0;Us!==0&&(HS()&&(t=Us),Us=0);for(var i=zt(),s=null,o=yc;o!==null;){var d=o.next,m=Y_(o,i);m===0?(o.next=null,s===null?yc=d:s.next=d,d===null&&(Vl=s)):(s=o,(t!==0||(m&3)!==0)&&(vc=!0)),o=d}Bo(t)}function Y_(t,i){for(var s=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var w=31-Kt(m),I=1<<w,j=d[w];j===-1?((I&s)===0||(I&o)!==0)&&(d[w]=Xe(I,i)):j<=i&&(t.expiredLanes|=I),m&=~I}if(i=Vt,s=ft,s=fr(t,t===i?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,s===0||t===i&&(Ct===2||Ct===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ut(o),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ua(t,s)){if(i=s&-s,i===t.callbackPriority)return i;switch(o!==null&&ut(o),ca(s)){case 2:case 8:s=qe;break;case 32:s=ct;break;case 268435456:s=Ii;break;default:s=ct}return o=Q_.bind(null,t),s=ke(s,o),t.callbackPriority=i,t.callbackNode=s,i}return o!==null&&o!==null&&ut(o),t.callbackPriority=2,t.callbackNode=null,2}function Q_(t,i){if(On!==0&&On!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(_c()&&t.callbackNode!==s)return null;var o=ft;return o=fr(t,t===Vt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(k_(t,o,i),Y_(t,zt()),t.callbackNode!=null&&t.callbackNode===s?Q_.bind(null,t):null)}function $_(t,i){if(_c())return null;k_(t,i,!0)}function MS(){GS(function(){(At&6)!==0?ke(mt,PS):K_()})}function sh(){return Us===0&&(Us=hr()),Us}function X_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ri(""+t)}function Z_(t,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,t.id&&s.setAttribute("form",t.id),i.parentNode.insertBefore(s,i),t=new FormData(t),s.parentNode.removeChild(s),t}function VS(t,i,s,o,d){if(i==="submit"&&s&&s.stateNode===d){var m=X_((d[It]||null).action),w=o.submitter;w&&(i=(i=w[It]||null)?X_(i.formAction):w.getAttribute("formAction"),i!==null&&(m=i,w=null));var I=new U("action","action",null,o,d);t.push({event:I,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Us!==0){var j=w?Z_(d,w):new FormData(d);Cf(s,{pending:!0,data:j,method:d.method,action:m},null,j)}}else typeof m=="function"&&(I.preventDefault(),j=w?Z_(d,w):new FormData(d),Cf(s,{pending:!0,data:j,method:d.method,action:m},m,j))},currentTarget:d}]})}}for(var lh=0;lh<Fd.length;lh++){var oh=Fd[lh],LS=oh.toLowerCase(),jS=oh[0].toUpperCase()+oh.slice(1);Ji(LS,"on"+jS)}Ji(kp,"onAnimationEnd"),Ji(Np,"onAnimationIteration"),Ji(Dp,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(tS,"onTransitionRun"),Ji(nS,"onTransitionStart"),Ji(iS,"onTransitionCancel"),Ji(Op,"onTransitionEnd"),pi("onMouseEnter",["mouseout","mouseover"]),pi("onMouseLeave",["mouseout","mouseover"]),pi("onPointerEnter",["pointerout","pointerover"]),pi("onPointerLeave",["pointerout","pointerover"]),jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),US=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qo));function W_(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var o=t[s],d=o.event;o=o.listeners;e:{var m=void 0;if(i)for(var w=o.length-1;0<=w;w--){var I=o[w],j=I.instance,$=I.currentTarget;if(I=I.listener,j!==m&&d.isPropagationStopped())break e;m=I,d.currentTarget=$;try{m(d)}catch(se){sc(se)}d.currentTarget=null,m=j}else for(w=0;w<o.length;w++){if(I=o[w],j=I.instance,$=I.currentTarget,I=I.listener,j!==m&&d.isPropagationStopped())break e;m=I,d.currentTarget=$;try{m(d)}catch(se){sc(se)}d.currentTarget=null,m=j}}}}function st(t,i){var s=i[vn];s===void 0&&(s=i[vn]=new Set);var o=t+"__bubble";s.has(o)||(J_(i,t,2,!1),s.add(o))}function uh(t,i,s){var o=0;i&&(o|=4),J_(s,t,o,i)}var bc="_reactListening"+Math.random().toString(36).slice(2);function ch(t){if(!t[bc]){t[bc]=!0,ma.forEach(function(s){s!=="selectionchange"&&(US.has(s)||uh(s,!1,t),uh(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[bc]||(i[bc]=!0,uh("selectionchange",!1,i))}}function J_(t,i,s,o){switch(Ty(i)){case 2:var d=fT;break;case 8:d=hT;break;default:d=wh}s=d.bind(null,i,s,t),d=void 0,!Rn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),o?d!==void 0?t.addEventListener(i,s,{capture:!0,passive:d}):t.addEventListener(i,s,!0):d!==void 0?t.addEventListener(i,s,{passive:d}):t.addEventListener(i,s,!1)}function dh(t,i,s,o,d){var m=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var w=o.tag;if(w===3||w===4){var I=o.stateNode.containerInfo;if(I===d)break;if(w===4)for(w=o.return;w!==null;){var j=w.tag;if((j===3||j===4)&&w.stateNode.containerInfo===d)return;w=w.return}for(;I!==null;){if(w=Ut(I),w===null)return;if(j=w.tag,j===5||j===6||j===26||j===27){o=m=w;continue e}I=I.parentNode}}o=o.return}Ne(function(){var $=m,se=Zt(s),fe=[];e:{var W=Pp.get(t);if(W!==void 0){var ee=U,Fe=t;switch(t){case"keypress":if(_i(s)===0)break e;case"keydown":case"keyup":ee=Ar;break;case"focusin":Fe="focus",ee=br;break;case"focusout":Fe="blur",ee=br;break;case"beforeblur":case"afterblur":ee=br;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=yt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=co;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=ol;break;case kp:case Np:case Dp:ee=Sr;break;case Op:ee=ul;break;case"scroll":case"scrollend":ee=oe;break;case"wheel":ee=Cr;break;case"copy":case"cut":case"paste":ee=Tr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Ts;break;case"toggle":case"beforetoggle":ee=dl}var je=(i&4)!==0,Dt=!je&&(t==="scroll"||t==="scrollend"),F=je?W!==null?W+"Capture":null:W;je=[];for(var z=$,Q;z!==null;){var ce=z;if(Q=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Q===null||F===null||(ce=va(z,F),ce!=null&&je.push(zo(z,ce,Q))),Dt)break;z=z.return}0<je.length&&(W=new ee(W,Fe,null,s,se),fe.push({event:W,listeners:je}))}}if((i&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",W&&s!==gi&&(Fe=s.relatedTarget||s.fromElement)&&(Ut(Fe)||Fe[Zn]))break e;if((ee||W)&&(W=se.window===se?se:(W=se.ownerDocument)?W.defaultView||W.parentWindow:window,ee?(Fe=s.relatedTarget||s.toElement,ee=$,Fe=Fe?Ut(Fe):null,Fe!==null&&(Dt=u(Fe),je=Fe.tag,Fe!==Dt||je!==5&&je!==27&&je!==6)&&(Fe=null)):(ee=null,Fe=$),ee!==Fe)){if(je=yt,ce="onMouseLeave",F="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(je=Ts,ce="onPointerLeave",F="onPointerEnter",z="pointer"),Dt=ee==null?W:ki(ee),Q=Fe==null?W:ki(Fe),W=new je(ce,z+"leave",ee,s,se),W.target=Dt,W.relatedTarget=Q,ce=null,Ut(se)===$&&(je=new je(F,z+"enter",Fe,s,se),je.target=Q,je.relatedTarget=Dt,ce=je),Dt=ce,ee&&Fe)t:{for(je=ee,F=Fe,z=0,Q=je;Q;Q=Ll(Q))z++;for(Q=0,ce=F;ce;ce=Ll(ce))Q++;for(;0<z-Q;)je=Ll(je),z--;for(;0<Q-z;)F=Ll(F),Q--;for(;z--;){if(je===F||F!==null&&je===F.alternate)break t;je=Ll(je),F=Ll(F)}je=null}else je=null;ee!==null&&ey(fe,W,ee,je,!1),Fe!==null&&Dt!==null&&ey(fe,Dt,Fe,je,!0)}}e:{if(W=$?ki($):window,ee=W.nodeName&&W.nodeName.toLowerCase(),ee==="select"||ee==="input"&&W.type==="file")var Ie=Ta;else if(Ye(W))if(Vu)Ie=WE;else{Ie=XE;var at=$E}else ee=W.nodeName,!ee||ee.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?$&&bs($.elementType)&&(Ie=Ta):Ie=ZE;if(Ie&&(Ie=Ie(t,$))){tn(fe,Ie,s,se);break e}at&&at(t,W,$),t==="focusout"&&$&&W.type==="number"&&$.memoizedProps.value!=null&&ai(W,"number",W.value)}switch(at=$?ki($):window,t){case"focusin":(Ye(at)||at.contentEditable==="true")&&(hl=at,qd=$,mo=null);break;case"focusout":mo=qd=hl=null;break;case"mousedown":zd=!0;break;case"contextmenu":case"mouseup":case"dragend":zd=!1,Ip(fe,s,se);break;case"selectionchange":if(eS)break;case"keydown":case"keyup":Ip(fe,s,se)}var Oe;if(yi)e:{switch(t){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else ne?te(t,s)&&(ze="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(ze="onCompositionStart");ze&&(T&&s.locale!=="ko"&&(ne||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ne&&(Oe=Ea()):(zn=se,li="value"in zn?zn.value:zn.textContent,ne=!0)),at=Ec($,ze),0<at.length&&(ze=new Ss(ze,t,null,s,se),fe.push({event:ze,listeners:at}),Oe?ze.data=Oe:(Oe=V(s),Oe!==null&&(ze.data=Oe)))),(Oe=y?Ae(t,s):we(t,s))&&(ze=Ec($,"onBeforeInput"),0<ze.length&&(at=new Ss("onBeforeInput","beforeinput",null,s,se),fe.push({event:at,listeners:ze}),at.data=Oe)),VS(fe,t,$,s,se)}W_(fe,i)})}function zo(t,i,s){return{instance:t,listener:i,currentTarget:s}}function Ec(t,i){for(var s=i+"Capture",o=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=va(t,s),d!=null&&o.unshift(zo(t,d,m)),d=va(t,i),d!=null&&o.push(zo(t,d,m))),t.tag===3)return o;t=t.return}return[]}function Ll(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ey(t,i,s,o,d){for(var m=i._reactName,w=[];s!==null&&s!==o;){var I=s,j=I.alternate,$=I.stateNode;if(I=I.tag,j!==null&&j===o)break;I!==5&&I!==26&&I!==27||$===null||(j=$,d?($=va(s,m),$!=null&&w.unshift(zo(s,$,j))):d||($=va(s,m),$!=null&&w.push(zo(s,$,j)))),s=s.return}w.length!==0&&t.push({event:i,listeners:w})}var BS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function ty(t){return(typeof t=="string"?t:""+t).replace(BS,`
`).replace(qS,"")}function ny(t,i){return i=ty(i),ty(t)===i}function Sc(){}function Nt(t,i,s,o,d,m){switch(s){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||Un(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&Un(t,""+o);break;case"className":Jn(t,"class",o);break;case"tabIndex":Jn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(t,s,o);break;case"style":Ba(t,o,m);break;case"data":if(i!=="object"){Jn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||s!=="href")){t.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=ri(""+o),t.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(i!=="input"&&Nt(t,i,"name",d.name,d,null),Nt(t,i,"formEncType",d.formEncType,d,null),Nt(t,i,"formMethod",d.formMethod,d,null),Nt(t,i,"formTarget",d.formTarget,d,null)):(Nt(t,i,"encType",d.encType,d,null),Nt(t,i,"method",d.method,d,null),Nt(t,i,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=ri(""+o),t.setAttribute(s,o);break;case"onClick":o!=null&&(t.onclick=Sc);break;case"onScroll":o!=null&&st("scroll",t);break;case"onScrollEnd":o!=null&&st("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(s=o.__html,s!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}s=ri(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""+o):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":o===!0?t.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,o):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(s,o):t.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(s):t.setAttribute(s,o);break;case"popover":st("beforetoggle",t),st("toggle",t),Ki(t,"popover",o);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ki(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=_r.get(s)||s,Ki(t,s,o))}}function fh(t,i,s,o,d,m){switch(s){case"style":Ba(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(s=o.__html,s!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"children":typeof o=="string"?Un(t,o):(typeof o=="number"||typeof o=="bigint")&&Un(t,""+o);break;case"onScroll":o!=null&&st("scroll",t);break;case"onScrollEnd":o!=null&&st("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Sc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!In.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),i=s.slice(2,d?s.length-7:void 0),m=t[It]||null,m=m!=null?m[s]:null,typeof m=="function"&&t.removeEventListener(i,m,d),typeof o=="function")){typeof m!="function"&&m!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(i,o,d);break e}s in t?t[s]=o:o===!0?t.setAttribute(s,""):Ki(t,s,o)}}}function Pn(t,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",t),st("load",t);var o=!1,d=!1,m;for(m in s)if(s.hasOwnProperty(m)){var w=s[m];if(w!=null)switch(m){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Nt(t,i,m,w,s,null)}}d&&Nt(t,i,"srcSet",s.srcSet,s,null),o&&Nt(t,i,"src",s.src,s,null);return;case"input":st("invalid",t);var I=m=w=d=null,j=null,$=null;for(o in s)if(s.hasOwnProperty(o)){var se=s[o];if(se!=null)switch(o){case"name":d=se;break;case"type":w=se;break;case"checked":j=se;break;case"defaultChecked":$=se;break;case"value":m=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,i));break;default:Nt(t,i,o,se,s,null)}}Di(t,m,I,j,$,w,d,!1),pt(t);return;case"select":st("invalid",t),o=w=m=null;for(d in s)if(s.hasOwnProperty(d)&&(I=s[d],I!=null))switch(d){case"value":m=I;break;case"defaultValue":w=I;break;case"multiple":o=I;default:Nt(t,i,d,I,s,null)}i=m,s=w,t.multiple=!!o,i!=null?Zi(t,!!o,i,!1):s!=null&&Zi(t,!!o,s,!0);return;case"textarea":st("invalid",t),m=d=o=null;for(w in s)if(s.hasOwnProperty(w)&&(I=s[w],I!=null))switch(w){case"value":o=I;break;case"defaultValue":d=I;break;case"children":m=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Nt(t,i,w,I,s,null)}_a(t,o,d,m),pt(t);return;case"option":for(j in s)if(s.hasOwnProperty(j)&&(o=s[j],o!=null))switch(j){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Nt(t,i,j,o,s,null)}return;case"dialog":st("beforetoggle",t),st("toggle",t),st("cancel",t),st("close",t);break;case"iframe":case"object":st("load",t);break;case"video":case"audio":for(o=0;o<qo.length;o++)st(qo[o],t);break;case"image":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"embed":case"source":case"link":st("error",t),st("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in s)if(s.hasOwnProperty($)&&(o=s[$],o!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Nt(t,i,$,o,s,null)}return;default:if(bs(i)){for(se in s)s.hasOwnProperty(se)&&(o=s[se],o!==void 0&&fh(t,i,se,o,s,void 0));return}}for(I in s)s.hasOwnProperty(I)&&(o=s[I],o!=null&&Nt(t,i,I,o,s,null))}function zS(t,i,s,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,w=null,I=null,j=null,$=null,se=null;for(ee in s){var fe=s[ee];if(s.hasOwnProperty(ee)&&fe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":j=fe;default:o.hasOwnProperty(ee)||Nt(t,i,ee,null,o,fe)}}for(var W in o){var ee=o[W];if(fe=s[W],o.hasOwnProperty(W)&&(ee!=null||fe!=null))switch(W){case"type":m=ee;break;case"name":d=ee;break;case"checked":$=ee;break;case"defaultChecked":se=ee;break;case"value":w=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,i));break;default:ee!==fe&&Nt(t,i,W,ee,o,fe)}}En(t,w,I,j,$,se,m,d);return;case"select":ee=w=I=W=null;for(m in s)if(j=s[m],s.hasOwnProperty(m)&&j!=null)switch(m){case"value":break;case"multiple":ee=j;default:o.hasOwnProperty(m)||Nt(t,i,m,null,o,j)}for(d in o)if(m=o[d],j=s[d],o.hasOwnProperty(d)&&(m!=null||j!=null))switch(d){case"value":W=m;break;case"defaultValue":I=m;break;case"multiple":w=m;default:m!==j&&Nt(t,i,d,m,o,j)}i=I,s=w,o=ee,W!=null?Zi(t,!!s,W,!1):!!o!=!!s&&(i!=null?Zi(t,!!s,i,!0):Zi(t,!!s,s?[]:"",!1));return;case"textarea":ee=W=null;for(I in s)if(d=s[I],s.hasOwnProperty(I)&&d!=null&&!o.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Nt(t,i,I,null,o,d)}for(w in o)if(d=o[w],m=s[w],o.hasOwnProperty(w)&&(d!=null||m!=null))switch(w){case"value":W=d;break;case"defaultValue":ee=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&Nt(t,i,w,d,o,m)}Et(t,W,ee);return;case"option":for(var Fe in s)if(W=s[Fe],s.hasOwnProperty(Fe)&&W!=null&&!o.hasOwnProperty(Fe))switch(Fe){case"selected":t.selected=!1;break;default:Nt(t,i,Fe,null,o,W)}for(j in o)if(W=o[j],ee=s[j],o.hasOwnProperty(j)&&W!==ee&&(W!=null||ee!=null))switch(j){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Nt(t,i,j,W,o,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in s)W=s[je],s.hasOwnProperty(je)&&W!=null&&!o.hasOwnProperty(je)&&Nt(t,i,je,null,o,W);for($ in o)if(W=o[$],ee=s[$],o.hasOwnProperty($)&&W!==ee&&(W!=null||ee!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:Nt(t,i,$,W,o,ee)}return;default:if(bs(i)){for(var Dt in s)W=s[Dt],s.hasOwnProperty(Dt)&&W!==void 0&&!o.hasOwnProperty(Dt)&&fh(t,i,Dt,void 0,o,W);for(se in o)W=o[se],ee=s[se],!o.hasOwnProperty(se)||W===ee||W===void 0&&ee===void 0||fh(t,i,se,W,o,ee);return}}for(var F in s)W=s[F],s.hasOwnProperty(F)&&W!=null&&!o.hasOwnProperty(F)&&Nt(t,i,F,null,o,W);for(fe in o)W=o[fe],ee=s[fe],!o.hasOwnProperty(fe)||W===ee||W==null&&ee==null||Nt(t,i,fe,W,o,ee)}var hh=null,mh=null;function Tc(t){return t.nodeType===9?t:t.ownerDocument}function iy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ay(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function ph(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gh=null;function HS(){var t=window.event;return t&&t.type==="popstate"?t===gh?!1:(gh=t,!0):(gh=null,!1)}var ry=typeof setTimeout=="function"?setTimeout:void 0,FS=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,GS=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(t){return sy.resolve(null).then(t).catch(KS)}:ry;function KS(t){setTimeout(function(){throw t})}function Hr(t){return t==="head"}function ly(t,i){var s=i,o=0,d=0;do{var m=s.nextSibling;if(t.removeChild(s),m&&m.nodeType===8)if(s=m.data,s==="/$"){if(0<o&&8>o){s=o;var w=t.ownerDocument;if(s&1&&Ho(w.documentElement),s&2&&Ho(w.body),s&4)for(s=w.head,Ho(s),w=s.firstChild;w;){var I=w.nextSibling,j=w.nodeName;w[fa]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&w.rel.toLowerCase()==="stylesheet"||s.removeChild(w),w=I}}if(d===0){t.removeChild(m),Zo(i);return}d--}else s==="$"||s==="$?"||s==="$!"?d++:o=s.charCodeAt(0)-48;else o=0;s=m}while(s);Zo(i)}function _h(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":_h(s),ha(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function YS(t,i,s,o){for(;t.nodeType===1;){var d=s;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[fa])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ta(t.nextSibling),t===null)break}return null}function QS(t,i,s){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ta(t.nextSibling),t===null))return null;return t}function yh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function $S(t,i){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")i();else{var o=function(){i(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function ta(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var vh=null;function oy(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}function uy(t,i,s){switch(i=Tc(s),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Ho(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ha(t)}var Bi=new Map,cy=new Set;function wc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var tr=Te.d;Te.d={f:XS,r:ZS,D:WS,C:JS,L:eT,m:tT,X:iT,S:nT,M:aT};function XS(){var t=tr.f(),i=pc();return t||i}function ZS(t){var i=mi(t);i!==null&&i.tag===5&&i.type==="form"?kg(i):tr.r(t)}var jl=typeof document>"u"?null:document;function dy(t,i,s){var o=jl;if(o&&typeof i=="string"&&i){var d=Bt(i);d='link[rel="'+t+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),cy.has(d)||(cy.add(d),t={rel:t,crossOrigin:s,href:i},o.querySelector(d)===null&&(i=o.createElement("link"),Pn(i,"link",t),Ht(i),o.head.appendChild(i)))}}function WS(t){tr.D(t),dy("dns-prefetch",t,null)}function JS(t,i){tr.C(t,i),dy("preconnect",t,i)}function eT(t,i,s){tr.L(t,i,s);var o=jl;if(o&&t&&i){var d='link[rel="preload"][as="'+Bt(i)+'"]';i==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+Bt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+Bt(s.imageSizes)+'"]')):d+='[href="'+Bt(t)+'"]';var m=d;switch(i){case"style":m=Ul(t);break;case"script":m=Bl(t)}Bi.has(m)||(t=S({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:t,as:i},s),Bi.set(m,t),o.querySelector(d)!==null||i==="style"&&o.querySelector(Fo(m))||i==="script"&&o.querySelector(Go(m))||(i=o.createElement("link"),Pn(i,"link",t),Ht(i),o.head.appendChild(i)))}}function tT(t,i){tr.m(t,i);var s=jl;if(s&&t){var o=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+Bt(o)+'"][href="'+Bt(t)+'"]',m=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Bl(t)}if(!Bi.has(m)&&(t=S({rel:"modulepreload",href:t},i),Bi.set(m,t),s.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Go(m)))return}o=s.createElement("link"),Pn(o,"link",t),Ht(o),s.head.appendChild(o)}}}function nT(t,i,s){tr.S(t,i,s);var o=jl;if(o&&t){var d=mn(o).hoistableStyles,m=Ul(t);i=i||"default";var w=d.get(m);if(!w){var I={loading:0,preload:null};if(w=o.querySelector(Fo(m)))I.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},s),(s=Bi.get(m))&&bh(t,s);var j=w=o.createElement("link");Ht(j),Pn(j,"link",t),j._p=new Promise(function($,se){j.onload=$,j.onerror=se}),j.addEventListener("load",function(){I.loading|=1}),j.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Ac(w,i,o)}w={type:"stylesheet",instance:w,count:1,state:I},d.set(m,w)}}}function iT(t,i){tr.X(t,i);var s=jl;if(s&&t){var o=mn(s).hoistableScripts,d=Bl(t),m=o.get(d);m||(m=s.querySelector(Go(d)),m||(t=S({src:t,async:!0},i),(i=Bi.get(d))&&Eh(t,i),m=s.createElement("script"),Ht(m),Pn(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function aT(t,i){tr.M(t,i);var s=jl;if(s&&t){var o=mn(s).hoistableScripts,d=Bl(t),m=o.get(d);m||(m=s.querySelector(Go(d)),m||(t=S({src:t,async:!0,type:"module"},i),(i=Bi.get(d))&&Eh(t,i),m=s.createElement("script"),Ht(m),Pn(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function fy(t,i,s,o){var d=(d=ge.current)?wc(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=Ul(s.href),s=mn(d).hoistableStyles,o=s.get(i),o||(o={type:"style",instance:null,count:0,state:null},s.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ul(s.href);var m=mn(d).hoistableStyles,w=m.get(t);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,w),(m=d.querySelector(Fo(t)))&&!m._p&&(w.instance=m,w.state.loading=5),Bi.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Bi.set(t,s),m||rT(d,t,s,w.state))),i&&o===null)throw Error(r(528,""));return w}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Bl(s),s=mn(d).hoistableScripts,o=s.get(i),o||(o={type:"script",instance:null,count:0,state:null},s.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ul(t){return'href="'+Bt(t)+'"'}function Fo(t){return'link[rel="stylesheet"]['+t+"]"}function hy(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function rT(t,i,s,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Pn(i,"link",s),Ht(i),t.head.appendChild(i))}function Bl(t){return'[src="'+Bt(t)+'"]'}function Go(t){return"script[async]"+t}function my(t,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+Bt(s.href)+'"]');if(o)return i.instance=o,Ht(o),o;var d=S({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Ht(o),Pn(o,"style",d),Ac(o,s.precedence,t),i.instance=o;case"stylesheet":d=Ul(s.href);var m=t.querySelector(Fo(d));if(m)return i.state.loading|=4,i.instance=m,Ht(m),m;o=hy(s),(d=Bi.get(d))&&bh(o,d),m=(t.ownerDocument||t).createElement("link"),Ht(m);var w=m;return w._p=new Promise(function(I,j){w.onload=I,w.onerror=j}),Pn(m,"link",o),i.state.loading|=4,Ac(m,s.precedence,t),i.instance=m;case"script":return m=Bl(s.src),(d=t.querySelector(Go(m)))?(i.instance=d,Ht(d),d):(o=s,(d=Bi.get(m))&&(o=S({},s),Eh(o,d)),t=t.ownerDocument||t,d=t.createElement("script"),Ht(d),Pn(d,"link",o),t.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Ac(o,s.precedence,t));return i.instance}function Ac(t,i,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,m=d,w=0;w<o.length;w++){var I=o[w];if(I.dataset.precedence===i)m=I;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(t,i.firstChild))}function bh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Eh(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Cc=null;function py(t,i,s){if(Cc===null){var o=new Map,d=Cc=new Map;d.set(s,o)}else d=Cc,o=d.get(s),o||(o=new Map,d.set(s,o));if(o.has(t))return o;for(o.set(t,null),s=s.getElementsByTagName(t),d=0;d<s.length;d++){var m=s[d];if(!(m[fa]||m[Xt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(i)||"";w=t+w;var I=o.get(w);I?I.push(m):o.set(w,[m])}}return o}function gy(t,i,s){t=t.ownerDocument||t,t.head.insertBefore(s,i==="title"?t.querySelector("head > title"):null)}function sT(t,i,s){if(s===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function _y(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ko=null;function lT(){}function oT(t,i,s){if(Ko===null)throw Error(r(475));var o=Ko;if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=Ul(s.href),m=t.querySelector(Fo(d));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=xc.bind(o),t.then(o,o)),i.state.loading|=4,i.instance=m,Ht(m);return}m=t.ownerDocument||t,s=hy(s),(d=Bi.get(d))&&bh(s,d),m=m.createElement("link"),Ht(m);var w=m;w._p=new Promise(function(I,j){w.onload=I,w.onerror=j}),Pn(m,"link",s),i.instance=m}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(o.count++,i=xc.bind(o),t.addEventListener("load",i),t.addEventListener("error",i))}}function uT(){if(Ko===null)throw Error(r(475));var t=Ko;return t.stylesheets&&t.count===0&&Sh(t,t.stylesheets),0<t.count?function(i){var s=setTimeout(function(){if(t.stylesheets&&Sh(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(s)}}:null}function xc(){if(this.count--,this.count===0){if(this.stylesheets)Sh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ic=null;function Sh(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ic=new Map,i.forEach(cT,t),Ic=null,xc.call(t))}function cT(t,i){if(!(i.state.loading&4)){var s=Ic.get(t);if(s)var o=s.get(null);else{s=new Map,Ic.set(t,s);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var w=d[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(s.set(w.dataset.precedence,w),o=w)}o&&s.set(null,o)}d=i.instance,w=d.getAttribute("data-precedence"),m=s.get(w)||o,m===o&&s.set(null,d),s.set(w,d),this.count++,o=xc.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),i.state.loading|=4}}var Yo={$$typeof:ve,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function dT(t,i,s,o,d,m,w,I){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function yy(t,i,s,o,d,m,w,I,j,$,se,fe){return t=new dT(t,i,s,w,I,j,$,fe),i=1,m===!0&&(i|=24),m=bi(3,null,null,i),t.current=m,m.stateNode=t,i=nf(),i.refCount++,t.pooledCache=i,i.refCount++,m.memoizedState={element:o,isDehydrated:s,cache:i},lf(m),t}function vy(t){return t?(t=_l,t):_l}function by(t,i,s,o,d,m){d=vy(d),o.context===null?o.context=d:o.pendingContext=d,o=kr(i),o.payload={element:s},m=m===void 0?null:m,m!==null&&(o.callback=m),s=Nr(t,o,i),s!==null&&(Ai(s,t,i),To(s,t,i))}function Ey(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function Th(t,i){Ey(t,i),(t=t.alternate)&&Ey(t,i)}function Sy(t){if(t.tag===13){var i=gl(t,67108864);i!==null&&Ai(i,t,67108864),Th(t,67108864)}}var Rc=!0;function fT(t,i,s,o){var d=ae.T;ae.T=null;var m=Te.p;try{Te.p=2,wh(t,i,s,o)}finally{Te.p=m,ae.T=d}}function hT(t,i,s,o){var d=ae.T;ae.T=null;var m=Te.p;try{Te.p=8,wh(t,i,s,o)}finally{Te.p=m,ae.T=d}}function wh(t,i,s,o){if(Rc){var d=Ah(o);if(d===null)dh(t,i,o,kc,s),wy(t,o);else if(pT(d,t,i,s,o))o.stopPropagation();else if(wy(t,o),i&4&&-1<mT.indexOf(t)){for(;d!==null;){var m=mi(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=hi(m.pendingLanes);if(w!==0){var I=m;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var j=1<<31-Kt(w);I.entanglements[1]|=j,w&=~j}Ia(m),(At&6)===0&&(hc=zt()+500,Bo(0))}}break;case 13:I=gl(m,2),I!==null&&Ai(I,m,2),pc(),Th(m,2)}if(m=Ah(o),m===null&&dh(t,i,o,kc,s),m===d)break;d=m}d!==null&&o.stopPropagation()}else dh(t,i,o,null,s)}}function Ah(t){return t=Zt(t),Ch(t)}var kc=null;function Ch(t){if(kc=null,t=Ut(t),t!==null){var i=u(t);if(i===null)t=null;else{var s=i.tag;if(s===13){if(t=f(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return kc=t,null}function Ty(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case mt:return 2;case qe:return 8;case ct:case bt:return 32;case Ii:return 268435456;default:return 32}default:return 32}}var xh=!1,Fr=null,Gr=null,Kr=null,Qo=new Map,$o=new Map,Yr=[],mT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wy(t,i){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Qo.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":$o.delete(i.pointerId)}}function Xo(t,i,s,o,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:i,domEventName:s,eventSystemFlags:o,nativeEvent:m,targetContainers:[d]},i!==null&&(i=mi(i),i!==null&&Sy(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function pT(t,i,s,o,d){switch(i){case"focusin":return Fr=Xo(Fr,t,i,s,o,d),!0;case"dragenter":return Gr=Xo(Gr,t,i,s,o,d),!0;case"mouseover":return Kr=Xo(Kr,t,i,s,o,d),!0;case"pointerover":var m=d.pointerId;return Qo.set(m,Xo(Qo.get(m)||null,t,i,s,o,d)),!0;case"gotpointercapture":return m=d.pointerId,$o.set(m,Xo($o.get(m)||null,t,i,s,o,d)),!0}return!1}function Ay(t){var i=Ut(t.target);if(i!==null){var s=u(i);if(s!==null){if(i=s.tag,i===13){if(i=f(s),i!==null){t.blockedOn=i,da(t.priority,function(){if(s.tag===13){var o=wi();o=be(o);var d=gl(s,o);d!==null&&Ai(d,s,o),Th(s,o)}});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=Ah(t.nativeEvent);if(s===null){s=t.nativeEvent;var o=new s.constructor(s.type,s);gi=o,s.target.dispatchEvent(o),gi=null}else return i=mi(s),i!==null&&Sy(i),t.blockedOn=s,!1;i.shift()}return!0}function Cy(t,i,s){Nc(t)&&s.delete(i)}function gT(){xh=!1,Fr!==null&&Nc(Fr)&&(Fr=null),Gr!==null&&Nc(Gr)&&(Gr=null),Kr!==null&&Nc(Kr)&&(Kr=null),Qo.forEach(Cy),$o.forEach(Cy)}function Dc(t,i){t.blockedOn===i&&(t.blockedOn=null,xh||(xh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,gT)))}var Oc=null;function xy(t){Oc!==t&&(Oc=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Oc===t&&(Oc=null);for(var i=0;i<t.length;i+=3){var s=t[i],o=t[i+1],d=t[i+2];if(typeof o!="function"){if(Ch(o||s)===null)continue;break}var m=mi(s);m!==null&&(t.splice(i,3),i-=3,Cf(m,{pending:!0,data:d,method:s.method,action:o},o,d))}}))}function Zo(t){function i(j){return Dc(j,t)}Fr!==null&&Dc(Fr,t),Gr!==null&&Dc(Gr,t),Kr!==null&&Dc(Kr,t),Qo.forEach(i),$o.forEach(i);for(var s=0;s<Yr.length;s++){var o=Yr[s];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Yr.length&&(s=Yr[0],s.blockedOn===null);)Ay(s),s.blockedOn===null&&Yr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var d=s[o],m=s[o+1],w=d[It]||null;if(typeof m=="function")w||xy(s);else if(w){var I=null;if(m&&m.hasAttribute("formAction")){if(d=m,w=m[It]||null)I=w.formAction;else if(Ch(d)!==null)continue}else I=w.action;typeof I=="function"?s[o+1]=I:(s.splice(o,3),o-=3),xy(s)}}}function Ih(t){this._internalRoot=t}Pc.prototype.render=Ih.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var s=i.current,o=wi();by(s,o,t,i,null,null)},Pc.prototype.unmount=Ih.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;by(t.current,2,null,t,null,null),pc(),i[Zn]=null}};function Pc(t){this._internalRoot=t}Pc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Yt();t={blockedOn:null,target:t,priority:i};for(var s=0;s<Yr.length&&i!==0&&i<Yr[s].priority;s++);Yr.splice(s,0,t),s===0&&Ay(t)}};var Iy=e.version;if(Iy!=="19.1.0")throw Error(r(527,Iy,"19.1.0"));Te.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=v(i),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var _T={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{jt=Mc.inject(_T),dt=Mc}catch{}}return Jo.createRoot=function(t,i){if(!l(t))throw Error(r(299));var s=!1,o="",d=Fg,m=Gg,w=Kg,I=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(I=i.unstable_transitionCallbacks)),i=yy(t,1,!1,null,null,s,o,d,m,w,I,null),t[Zn]=i.current,ch(t),new Ih(i)},Jo.hydrateRoot=function(t,i,s){if(!l(t))throw Error(r(299));var o=!1,d="",m=Fg,w=Gg,I=Kg,j=null,$=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(I=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(j=s.unstable_transitionCallbacks),s.formState!==void 0&&($=s.formState)),i=yy(t,1,!0,i,s??null,o,d,m,w,I,j,$),i.context=vy(null),s=i.current,o=wi(),o=be(o),d=kr(o),d.callback=null,Nr(s,d,o),s=o,i.current.lanes=s,Xn(i,s),Ia(i),t[Zn]=i.current,ch(t),new Pc(i)},Jo.version="19.1.0",Jo}var jy;function RT(){if(jy)return Nh.exports;jy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Nh.exports=IT(),Nh.exports}var kT=RT();const NT=Tm(kT),DT=()=>{};var Uy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=function(a){const e=[];let n=0;for(let r=0;r<a.length;r++){let l=a.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<a.length&&(a.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},OT=function(a){const e=[];let n=0,r=0;for(;n<a.length;){const l=a[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const u=a[n++];e[r++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=a[n++],f=a[n++],g=a[n++],v=((l&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const u=a[n++],f=a[n++];e[r++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return e.join("")},y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<a.length;l+=3){const u=a[l],f=l+1<a.length,g=f?a[l+1]:0,v=l+2<a.length,p=v?a[l+2]:0,S=u>>2,A=(u&3)<<4|g>>4;let N=(g&15)<<2|p>>6,L=p&63;v||(L=64,f||(N=64)),r.push(n[S],n[A],n[N],n[L])}return r.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(_0(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):OT(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<a.length;){const u=n[a.charAt(l++)],g=l<a.length?n[a.charAt(l)]:0;++l;const p=l<a.length?n[a.charAt(l)]:64;++l;const A=l<a.length?n[a.charAt(l)]:64;if(++l,u==null||g==null||p==null||A==null)throw new PT;const N=u<<2|g>>4;if(r.push(N),p!==64){const L=g<<4&240|p>>2;if(r.push(L),A!==64){const X=p<<6&192|A;r.push(X)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class PT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MT=function(a){const e=_0(a);return y0.encodeByteArray(e,!0)},ed=function(a){return MT(a).replace(/\./g,"")},v0=function(a){try{return y0.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=()=>VT().__FIREBASE_DEFAULTS__,jT=()=>{if(typeof process>"u"||typeof Uy>"u")return;const a=Uy.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},UT=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&v0(a[1]);return e&&JSON.parse(e)},Sd=()=>{try{return DT()||LT()||jT()||UT()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},b0=a=>{var e,n;return(n=(e=Sd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[a]},BT=a=>{const e=b0(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},E0=()=>{var a;return(a=Sd())===null||a===void 0?void 0:a.config},S0=a=>{var e;return(e=Sd())===null||e===void 0?void 0:e[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(a){return a.endsWith(".cloudworkstations.dev")}async function T0(a){return(await fetch(a,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=a.iat||0,u=a.sub||a.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},a);return[ed(JSON.stringify(n)),ed(JSON.stringify(f)),""].join(".")}const lu={};function HT(){const a={prod:[],emulator:[]};for(const e of Object.keys(lu))lu[e]?a.emulator.push(e):a.prod.push(e);return a}function FT(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let By=!1;function w0(a,e){if(typeof window>"u"||typeof document>"u"||!Au(window.location.host)||lu[a]===e||lu[a]||By)return;lu[a]=e;function n(N){return`__firebase__banner__${N}`}const r="__firebase__banner",u=HT().prod.length>0;function f(){const N=document.getElementById(r);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function v(N,L){N.setAttribute("width","24"),N.setAttribute("id",L),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function p(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{By=!0,f()},N}function S(N,L){N.setAttribute("id",L),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function A(){const N=FT(r),L=n("text"),X=document.getElementById(L)||document.createElement("span"),Y=n("learnmore"),Z=document.getElementById(Y)||document.createElement("a"),re=n("preprendIcon"),he=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ve=N.element;g(ve),S(Z,Y);const ie=p();v(he,re),ve.append(he,X,Z,ie),document.body.appendChild(ve)}u?(X.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function KT(){var a;const e=(a=Sd())===null||a===void 0?void 0:a.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QT(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function $T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XT(){const a=Qn();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function ZT(){return!KT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WT(){try{return typeof indexedDB=="object"}catch{return!1}}function JT(){return new Promise((a,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),a(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=e1,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cu.prototype.create)}}class Cu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],f=u?t1(u,r):"Error",g=`${this.serviceName}: ${f} (${l}).`;return new dr(l,g,r)}}function t1(a,e){return a.replace(n1,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const n1=/\{\$([^}]+)}/g;function i1(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function Hs(a,e){if(a===e)return!0;const n=Object.keys(a),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const u=a[l],f=e[l];if(qy(u)&&qy(f)){if(!Hs(u,f))return!1}else if(u!==f)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function qy(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(a){const e=[];for(const[n,r]of Object.entries(a))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nu(a){const e={};return a.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,u]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function iu(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function a1(a,e){const n=new r1(a,e);return n.subscribe.bind(n)}class r1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");s1(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=Mh),l.error===void 0&&(l.error=Mh),l.complete===void 0&&(l.complete=Mh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s1(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function Mh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(a){return a&&a._delegate?a._delegate:a}class Fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),l=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(l)return null;throw u}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u1(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});r.resolve(u)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&f.resolve(l)}return l}onInit(e,n){var r;const l=this.normalizeInstanceIdentifier(n),u=(r=this.onInitCallbacks.get(l))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(l,u);const f=this.instances.get(l);return f&&e(f,l),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o1(a){return a===Bs?void 0:a}function u1(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(lt||(lt={}));const d1={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},f1=lt.INFO,h1={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},m1=(a,e,...n)=>{if(e<a.logLevel)return;const r=new Date().toISOString(),l=h1[e];if(l)console[l](`[${r}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=f1,this._logHandler=m1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const p1=(a,e)=>e.some(n=>a instanceof n);let zy,Hy;function g1(){return zy||(zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _1(){return Hy||(Hy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A0=new WeakMap,Xh=new WeakMap,C0=new WeakMap,Vh=new WeakMap,Cm=new WeakMap;function y1(a){const e=new Promise((n,r)=>{const l=()=>{a.removeEventListener("success",u),a.removeEventListener("error",f)},u=()=>{n(ts(a.result)),l()},f=()=>{r(a.error),l()};a.addEventListener("success",u),a.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&A0.set(n,a)}).catch(()=>{}),Cm.set(e,a),e}function v1(a){if(Xh.has(a))return;const e=new Promise((n,r)=>{const l=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",f),a.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{r(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",u),a.addEventListener("error",f),a.addEventListener("abort",f)});Xh.set(a,e)}let Zh={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return Xh.get(a);if(e==="objectStoreNames")return a.objectStoreNames||C0.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ts(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function b1(a){Zh=a(Zh)}function E1(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=a.call(Lh(this),e,...n);return C0.set(r,e.sort?e.sort():[e]),ts(r)}:_1().includes(a)?function(...e){return a.apply(Lh(this),e),ts(A0.get(this))}:function(...e){return ts(a.apply(Lh(this),e))}}function S1(a){return typeof a=="function"?E1(a):(a instanceof IDBTransaction&&v1(a),p1(a,g1())?new Proxy(a,Zh):a)}function ts(a){if(a instanceof IDBRequest)return y1(a);if(Vh.has(a))return Vh.get(a);const e=S1(a);return e!==a&&(Vh.set(a,e),Cm.set(e,a)),e}const Lh=a=>Cm.get(a);function T1(a,e,{blocked:n,upgrade:r,blocking:l,terminated:u}={}){const f=indexedDB.open(a,e),g=ts(f);return r&&f.addEventListener("upgradeneeded",v=>{r(ts(f.result),v.oldVersion,v.newVersion,ts(f.transaction),v)}),n&&f.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),g.then(v=>{u&&v.addEventListener("close",()=>u()),l&&v.addEventListener("versionchange",p=>l(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const w1=["get","getKey","getAll","getAllKeys","count"],A1=["put","add","delete","clear"],jh=new Map;function Fy(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(jh.get(e))return jh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=A1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||w1.includes(n)))return;const u=async function(f,...g){const v=this.transaction(f,l?"readwrite":"readonly");let p=v.store;return r&&(p=p.index(g.shift())),(await Promise.all([p[n](...g),l&&v.done]))[0]};return jh.set(e,u),u}b1(a=>({...a,get:(e,n,r)=>Fy(e,n)||a.get(e,n,r),has:(e,n)=>!!Fy(e,n)||a.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(x1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function x1(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wh="@firebase/app",Gy="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new Am("@firebase/app"),I1="@firebase/app-compat",R1="@firebase/analytics-compat",k1="@firebase/analytics",N1="@firebase/app-check-compat",D1="@firebase/app-check",O1="@firebase/auth",P1="@firebase/auth-compat",M1="@firebase/database",V1="@firebase/data-connect",L1="@firebase/database-compat",j1="@firebase/functions",U1="@firebase/functions-compat",B1="@firebase/installations",q1="@firebase/installations-compat",z1="@firebase/messaging",H1="@firebase/messaging-compat",F1="@firebase/performance",G1="@firebase/performance-compat",K1="@firebase/remote-config",Y1="@firebase/remote-config-compat",Q1="@firebase/storage",$1="@firebase/storage-compat",X1="@firebase/firestore",Z1="@firebase/ai",W1="@firebase/firestore-compat",J1="firebase",ew="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="[DEFAULT]",tw={[Wh]:"fire-core",[I1]:"fire-core-compat",[k1]:"fire-analytics",[R1]:"fire-analytics-compat",[D1]:"fire-app-check",[N1]:"fire-app-check-compat",[O1]:"fire-auth",[P1]:"fire-auth-compat",[M1]:"fire-rtdb",[V1]:"fire-data-connect",[L1]:"fire-rtdb-compat",[j1]:"fire-fn",[U1]:"fire-fn-compat",[B1]:"fire-iid",[q1]:"fire-iid-compat",[z1]:"fire-fcm",[H1]:"fire-fcm-compat",[F1]:"fire-perf",[G1]:"fire-perf-compat",[K1]:"fire-rc",[Y1]:"fire-rc-compat",[Q1]:"fire-gcs",[$1]:"fire-gcs-compat",[X1]:"fire-fst",[W1]:"fire-fst-compat",[Z1]:"fire-vertex","fire-js":"fire-js",[J1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Map,nw=new Map,em=new Map;function Ky(a,e){try{a.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function Xl(a){const e=a.name;if(em.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;em.set(e,a);for(const n of td.values())Ky(n,a);for(const n of nw.values())Ky(n,a);return!0}function xm(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function Ci(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new Cu("app","Firebase",iw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=ew;function x0(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jh,automaticDataCollectionEnabled:!0},e),l=r.name;if(typeof l!="string"||!l)throw ns.create("bad-app-name",{appName:String(l)});if(n||(n=E0()),!n)throw ns.create("no-options");const u=td.get(l);if(u){if(Hs(n,u.options)&&Hs(r,u.config))return u;throw ns.create("duplicate-app",{appName:l})}const f=new c1(l);for(const v of em.values())f.addComponent(v);const g=new aw(n,r,f);return td.set(l,g),g}function I0(a=Jh){const e=td.get(a);if(!e&&a===Jh&&E0())return x0();if(!e)throw ns.create("no-app",{appName:a});return e}function is(a,e,n){var r;let l=(r=tw[a])!==null&&r!==void 0?r:a;n&&(l+=`-${n}`);const u=l.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const g=[`Unable to register library "${l}" with version "${e}":`];u&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),u&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(g.join(" "));return}Xl(new Fs(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="firebase-heartbeat-database",sw=1,mu="firebase-heartbeat-store";let Uh=null;function R0(){return Uh||(Uh=T1(rw,sw,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(a=>{throw ns.create("idb-open",{originalErrorMessage:a.message})})),Uh}async function lw(a){try{const n=(await R0()).transaction(mu),r=await n.objectStore(mu).get(k0(a));return await n.done,r}catch(e){if(e instanceof dr)lr.warn(e.message);else{const n=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lr.warn(n.message)}}}async function Yy(a,e){try{const r=(await R0()).transaction(mu,"readwrite");await r.objectStore(mu).put(e,k0(a)),await r.done}catch(n){if(n instanceof dr)lr.warn(n.message);else{const r=ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lr.warn(r.message)}}}function k0(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=1024,uw=30;class cw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Qy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats.length>uw){const f=hw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qy(),{heartbeatsToSend:r,unsentEntries:l}=dw(this._heartbeatsCache.heartbeats),u=ed(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return lr.warn(n),""}}}function Qy(){return new Date().toISOString().substring(0,10)}function dw(a,e=ow){const n=[];let r=a.slice();for(const l of a){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),$y(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),$y(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WT()?JT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return Yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function $y(a){return ed(JSON.stringify({version:2,heartbeats:a})).length}function hw(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let r=1;r<a.length;r++)a[r].date<n&&(n=a[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(a){Xl(new Fs("platform-logger",e=>new C1(e),"PRIVATE")),Xl(new Fs("heartbeat",e=>new cw(e),"PRIVATE")),is(Wh,Gy,a),is(Wh,Gy,"esm2017"),is("fire-js","")}mw("");var pw="firebase",gw="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(pw,gw,"app");function Im(a,e){var n={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&e.indexOf(r)<0&&(n[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(a);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(a,r[l])&&(n[r[l]]=a[r[l]]);return n}function N0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _w=N0,D0=new Cu("auth","Firebase",N0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Am("@firebase/auth");function yw(a,...e){nd.logLevel<=lt.WARN&&nd.warn(`Auth (${ao}): ${a}`,...e)}function Fc(a,...e){nd.logLevel<=lt.ERROR&&nd.error(`Auth (${ao}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(a,...e){throw km(a,...e)}function ra(a,...e){return km(a,...e)}function Rm(a,e,n){const r=Object.assign(Object.assign({},_w()),{[e]:n});return new Cu("auth","Firebase",r).create(e,{appName:a.name})}function rr(a){return Rm(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vw(a,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Hi(a,"argument-error"),Rm(a,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function km(a,...e){if(typeof a!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=a.name),a._errorFactory.create(n,...r)}return D0.create(a,...e)}function He(a,e,...n){if(!a)throw km(e,...n)}function ir(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Fc(e),new Error(e)}function or(a,e){a||ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.href)||""}function bw(){return Xy()==="http:"||Xy()==="https:"}function Xy(){var a;return typeof self<"u"&&((a=self.location)===null||a===void 0?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bw()||QT()||"connection"in navigator)?navigator.onLine:!0}function Sw(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=GT()||$T()}get(){return Ew()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(a,e){or(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Aw=new Iu(3e4,6e4);function fs(a,e){return a.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:a.tenantId}):e}async function hs(a,e,n,r,l={}){return P0(a,l,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const g=xu(Object.assign({key:a.config.apiKey},f)).slice(1),v=await a._getAdditionalHeaders();v["Content-Type"]="application/json",a.languageCode&&(v["X-Firebase-Locale"]=a.languageCode);const p=Object.assign({method:e,headers:v},u);return YT()||(p.referrerPolicy="no-referrer"),a.emulatorConfig&&Au(a.emulatorConfig.host)&&(p.credentials="include"),O0.fetch()(await M0(a,a.config.apiHost,n,g),p)})}async function P0(a,e,n){a._canInitEmulator=!1;const r=Object.assign(Object.assign({},Tw),e);try{const l=new xw(a),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Vc(a,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[v,p]=g.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vc(a,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw Vc(a,"email-already-in-use",f);if(v==="USER_DISABLED")throw Vc(a,"user-disabled",f);const S=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Rm(a,S,p);Hi(a,S)}}catch(l){if(l instanceof dr)throw l;Hi(a,"network-request-failed",{message:String(l)})}}async function Ru(a,e,n,r,l={}){const u=await hs(a,e,n,r,l);return"mfaPendingCredential"in u&&Hi(a,"multi-factor-auth-required",{_serverResponse:u}),u}async function M0(a,e,n,r){const l=`${e}${n}?${r}`,u=a,f=u.config.emulator?Nm(a.config,l):`${a.config.apiScheme}://${l}`;return ww.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function Cw(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ra(this.auth,"network-request-failed")),Aw.get())})}}function Vc(a,e,n){const r={appName:a.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=ra(a,e,r);return l.customData._tokenResponse=n,l}function Zy(a){return a!==void 0&&a.enterprise!==void 0}class Iw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Cw(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Rw(a,e){return hs(a,"GET","/v2/recaptchaConfig",fs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(a,e){return hs(a,"POST","/v1/accounts:delete",e)}async function id(a,e){return hs(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Nw(a,e=!1){const n=xi(a),r=await n.getIdToken(e),l=Dm(r);He(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:l,token:r,authTime:ou(Bh(l.auth_time)),issuedAtTime:ou(Bh(l.iat)),expirationTime:ou(Bh(l.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Bh(a){return Number(a)*1e3}function Dm(a){const[e,n,r]=a.split(".");if(e===void 0||n===void 0||r===void 0)return Fc("JWT malformed, contained fewer than 3 sections"),null;try{const l=v0(n);return l?JSON.parse(l):(Fc("Failed to decode base64 JWT payload"),null)}catch(l){return Fc("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Wy(a){const e=Dm(a);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(a,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&Dw(r)&&a.auth.currentUser===a&&await a.auth.signOut(),r}}function Dw({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(a){var e;const n=a.auth,r=await a.getIdToken(),l=await pu(a,id(n,{idToken:r}));He(l==null?void 0:l.users.length,n,"internal-error");const u=l.users[0];a._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?V0(u.providerUserInfo):[],g=Mw(a.providerData,f),v=a.isAnonymous,p=!(a.email&&u.passwordHash)&&!(g!=null&&g.length),S=v?p:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:g,metadata:new nm(u.createdAt,u.lastLoginAt),isAnonymous:S};Object.assign(a,A)}async function Pw(a){const e=xi(a);await ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Mw(a,e){return[...a.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function V0(a){return a.map(e=>{var{providerId:n}=e,r=Im(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(a,e){const n=await P0(a,{},async()=>{const r=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=a.config,f=await M0(a,l,"/v1/token",`key=${u}`),g=await a._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",O0.fetch()(f,{method:"POST",headers:g,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Lw(a,e){return hs(a,"POST","/v2/accounts:revokeToken",fs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){He(e.length!==0,"internal-error");const n=Wy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:u}=await Vw(e,n);this.updateTokensAndExpiration(r,l,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:u}=n,f=new Kl;return r&&(He(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(He(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),u&&(He(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(a,e){He(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class ia{constructor(e){var{uid:n,auth:r,stsTokenManager:l}=e,u=Im(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ow(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new nm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await pu(this,this.stsTokenManager.getToken(this.auth,e));return He(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Nw(this,e)}reload(){return Pw(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ia(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ad(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await pu(this,kw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,l,u,f,g,v,p,S;const A=(r=n.displayName)!==null&&r!==void 0?r:void 0,N=(l=n.email)!==null&&l!==void 0?l:void 0,L=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,X=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Y=(g=n.tenantId)!==null&&g!==void 0?g:void 0,Z=(v=n._redirectEventId)!==null&&v!==void 0?v:void 0,re=(p=n.createdAt)!==null&&p!==void 0?p:void 0,he=(S=n.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:ve,emailVerified:ie,isAnonymous:H,providerData:ue,stsTokenManager:C}=n;He(ve&&C,e,"internal-error");const k=Kl.fromJSON(this.name,C);He(typeof ve=="string",e,"internal-error"),$r(A,e.name),$r(N,e.name),He(typeof ie=="boolean",e,"internal-error"),He(typeof H=="boolean",e,"internal-error"),$r(L,e.name),$r(X,e.name),$r(Y,e.name),$r(Z,e.name),$r(re,e.name),$r(he,e.name);const O=new ia({uid:ve,auth:e,email:N,emailVerified:ie,displayName:A,isAnonymous:H,photoURL:X,phoneNumber:L,tenantId:Y,stsTokenManager:k,createdAt:re,lastLoginAt:he});return ue&&Array.isArray(ue)&&(O.providerData=ue.map(x=>Object.assign({},x))),Z&&(O._redirectEventId=Z),O}static async _fromIdTokenResponse(e,n,r=!1){const l=new Kl;l.updateFromServerResponse(n);const u=new ia({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await ad(u),u}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];He(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?V0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(u!=null&&u.length),g=new Kl;g.updateFromIdToken(r);const v=new ia({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:f}),p={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new nm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(u!=null&&u.length)};return Object.assign(v,p),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=new Map;function ar(a){or(a instanceof Function,"Expected a class definition");let e=Jy.get(a);return e?(or(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,Jy.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}L0.type="NONE";const ev=L0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(a,e,n){return`firebase:${a}:${e}:${n}`}class Yl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:u}=this.auth;this.fullUserKey=Gc(this.userKey,l.apiKey,u),this.fullPersistenceKey=Gc("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await id(this.auth,{idToken:e}).catch(()=>{});return n?ia._fromGetAccountInfoResponse(this.auth,n,e):null}return ia._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yl(ar(ev),e,r);const l=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=l[0]||ar(ev);const f=Gc(r,e.config.apiKey,e.name);let g=null;for(const p of n)try{const S=await p._get(f);if(S){let A;if(typeof S=="string"){const N=await id(e,{idToken:S}).catch(()=>{});if(!N)break;A=await ia._fromGetAccountInfoResponse(e,N,S)}else A=ia._fromJSON(e,S);p!==u&&(g=A),u=p;break}}catch{}const v=l.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!v.length?new Yl(u,e,r):(u=v[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(f)}catch{}})),new Yl(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(j0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H0(e))return"Blackberry";if(F0(e))return"Webos";if(U0(e))return"Safari";if((e.includes("chrome/")||B0(e))&&!e.includes("edge/"))return"Chrome";if(z0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=a.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function j0(a=Qn()){return/firefox\//i.test(a)}function U0(a=Qn()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function B0(a=Qn()){return/crios\//i.test(a)}function q0(a=Qn()){return/iemobile/i.test(a)}function z0(a=Qn()){return/android/i.test(a)}function H0(a=Qn()){return/blackberry/i.test(a)}function F0(a=Qn()){return/webos/i.test(a)}function Om(a=Qn()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function jw(a=Qn()){var e;return Om(a)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Uw(){return XT()&&document.documentMode===10}function G0(a=Qn()){return Om(a)||z0(a)||F0(a)||H0(a)||/windows phone/i.test(a)||q0(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(a,e=[]){let n;switch(a){case"Browser":n=tv(Qn());break;case"Worker":n=`${tv(Qn())}-${a}`;break;default:n=a}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,g)=>{try{const v=e(u);f(v)}catch(v){g(v)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(a,e={}){return hs(a,"GET","/v2/passwordPolicy",fs(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw=6;class Hw{constructor(e){var n,r,l,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:zw,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,l,u,f,g;const v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,v),this.validatePasswordCharacterOptions(e,v),v.isValid&&(v.isValid=(n=v.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),v.isValid&&(v.isValid=(r=v.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),v.isValid&&(v.isValid=(l=v.containsLowercaseLetter)!==null&&l!==void 0?l:!0),v.isValid&&(v.isValid=(u=v.containsUppercaseLetter)!==null&&u!==void 0?u:!0),v.isValid&&(v.isValid=(f=v.containsNumericCharacter)!==null&&f!==void 0?f:!0),v.isValid&&(v.isValid=(g=v.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),v}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nv(this),this.idTokenSubscription=new nv(this),this.beforeStateQueue=new Bw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(async()=>{var r,l,u;if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await id(this,{idToken:e}),r=await ia._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ci(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let l=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=l==null?void 0:l._redirectEventId,v=await this.tryRedirectSignIn(e);(!f||f===g)&&(v!=null&&v.user)&&(l=v.user,u=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(l)}catch(f){l=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ad(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Sw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(rr(this));const n=e?xi(e):null;return n&&He(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qw(this),n=new Hw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Lw(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ar(e)||this._popupRedirectResolver;He(n,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const v=e.addObserver(n,r,l);return()=>{f=!0,v()}}else{const v=e.addObserver(n);return()=>{f=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=K0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var e;if(Ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&yw(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ms(a){return xi(a)}class nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=a1(n=>this.observer=n)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gw(a){Td=a}function Y0(a){return Td.loadJS(a)}function Kw(){return Td.recaptchaEnterpriseScript}function Yw(){return Td.gapiScript}function Qw(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class $w{constructor(){this.enterprise=new Xw}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Xw{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Zw="recaptcha-enterprise",Q0="NO_RECAPTCHA";class Ww{constructor(e){this.type=Zw,this.auth=ms(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,g)=>{Rw(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const p=new Iw(v);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,f(p.siteKey)}}).catch(v=>{g(v)})})}function l(u,f,g){const v=window.grecaptcha;Zy(v)?v.enterprise.ready(()=>{v.enterprise.execute(u,{action:e}).then(p=>{f(p)}).catch(()=>{f(Q0)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $w().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(g=>{if(!n&&Zy(window.grecaptcha))l(g,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let v=Kw();v.length!==0&&(v+=g),Y0(v).then(()=>{l(g,u,f)}).catch(p=>{f(p)})}}).catch(g=>{f(g)})})}}async function iv(a,e,n,r=!1,l=!1){const u=new Ww(a);let f;if(l)f=Q0;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const g=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const v=g.phoneEnrollmentInfo.phoneNumber,p=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:p,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const v=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function im(a,e,n,r,l){var u;if(!((u=a._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await iv(a,e,n,n==="getOobCode");return r(a,f)}else return r(a,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const g=await iv(a,e,n,n==="getOobCode");return r(a,g)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(a,e){const n=xm(a,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Hs(u,e??{}))return l;Hi(l,"already-initialized")}return n.initialize({options:e})}function eA(a,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ar);e!=null&&e.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tA(a,e,n){const r=ms(a);He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,u=$0(e),{host:f,port:g}=nA(e),v=g===null?"":`:${g}`,p={url:`${u}//${f}${v}/`},S=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){He(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),He(Hs(p,r.config.emulator)&&Hs(S,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=S,r.settings.appVerificationDisabledForTesting=!0,Au(f)?(T0(`${u}//${f}${v}`),w0("Auth",!0)):iA()}function $0(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function nA(a){const e=$0(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const u=l[1];return{host:u,port:av(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:av(f)}}}function av(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function iA(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ir("not implemented")}_getIdTokenResponse(e){return ir("not implemented")}_linkToIdToken(e,n){return ir("not implemented")}_getReauthenticationResolver(e){return ir("not implemented")}}async function aA(a,e){return hs(a,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(a,e){return Ru(a,"POST","/v1/accounts:signInWithPassword",fs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(a,e){return Ru(a,"POST","/v1/accounts:signInWithEmailLink",fs(a,e))}async function lA(a,e){return Ru(a,"POST","/v1/accounts:signInWithEmailLink",fs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Pm{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new gu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new gu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,n,"signInWithPassword",rA);case"emailLink":return sA(e,{email:this._email,oobCode:this._password});default:Hi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,r,"signUpPassword",aA);case"emailLink":return lA(e,{idToken:n,email:this._email,oobCode:this._password});default:Hi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ql(a,e){return Ru(a,"POST","/v1/accounts:signInWithIdp",fs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="http://localhost";class Gs extends Pm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l}=n,u=Im(n,["providerId","signInMethod"]);if(!r||!l)return null;const f=new Gs(r,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Ql(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ql(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ql(e,n)}buildRequest(){const e={requestUri:oA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cA(a){const e=nu(iu(a)).link,n=e?nu(iu(e)).deep_link_id:null,r=nu(iu(a)).deep_link_id;return(r?nu(iu(r)).link:null)||r||n||e||a}class Mm{constructor(e){var n,r,l,u,f,g;const v=nu(iu(e)),p=(n=v.apiKey)!==null&&n!==void 0?n:null,S=(r=v.oobCode)!==null&&r!==void 0?r:null,A=uA((l=v.mode)!==null&&l!==void 0?l:null);He(p&&S&&A,"argument-error"),this.apiKey=p,this.operation=A,this.code=S,this.continueUrl=(u=v.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=v.lang)!==null&&f!==void 0?f:null,this.tenantId=(g=v.tenantId)!==null&&g!==void 0?g:null}static parseLink(e){const n=cA(e);try{return new Mm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.providerId=ro.PROVIDER_ID}static credential(e,n){return gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Mm.parseLink(n);return He(r,"argument-error"),gu._fromEmailAndCode(e,r.code,r.tenantId)}}ro.PROVIDER_ID="password";ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Vm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends ku{constructor(){super("facebook.com")}static credential(e){return Gs._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gs._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return nr.credential(n,r)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends ku{constructor(){super("github.com")}static credential(e){return Gs._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends ku{constructor(){super("twitter.com")}static credential(e,n){return Gs._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Jr.credential(n,r)}catch{return null}}}Jr.TWITTER_SIGN_IN_METHOD="twitter.com";Jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(a,e){return Ru(a,"POST","/v1/accounts:signUp",fs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const u=await ia._fromIdTokenResponse(e,r,l),f=rv(r);return new Ks({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=rv(r);return new Ks({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function rv(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends dr{constructor(e,n,r,l){var u;super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new rd(e,n,r,l)}}function X0(a,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(a,u,e,r):u})}async function fA(a,e,n=!1){const r=await pu(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return Ks._forOperation(a,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(a,e,n=!1){const{auth:r}=a;if(Ci(r.app))return Promise.reject(rr(r));const l="reauthenticate";try{const u=await pu(a,X0(r,l,e,a),n);He(u.idToken,r,"internal-error");const f=Dm(u.idToken);He(f,r,"internal-error");const{sub:g}=f;return He(a.uid===g,r,"user-mismatch"),Ks._forOperation(a,l,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Hi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z0(a,e,n=!1){if(Ci(a.app))return Promise.reject(rr(a));const r="signIn",l=await X0(a,r,e),u=await Ks._fromIdTokenResponse(a,r,l);return n||await a._updateCurrentUser(u.user),u}async function mA(a,e){return Z0(ms(a),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0(a){const e=ms(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pA(a,e,n){if(Ci(a.app))return Promise.reject(rr(a));const r=ms(a),f=await im(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dA).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&W0(a),v}),g=await Ks._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(g.user),g}function gA(a,e,n){return Ci(a.app)?Promise.reject(rr(a)):mA(xi(a),ro.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&W0(a),r})}function _A(a,e,n,r){return xi(a).onIdTokenChanged(e,n,r)}function yA(a,e,n){return xi(a).beforeAuthStateChanged(e,n)}function vA(a,e,n,r){return xi(a).onAuthStateChanged(e,n,r)}function bA(a){return xi(a).signOut()}const sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sd,"1"),this.storage.removeItem(sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=1e3,SA=10;class eb extends J0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,v)=>{this.notifyListeners(f,v)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);Uw()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,SA):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},EA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eb.type="LOCAL";const TA=eb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb extends J0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tb.type="SESSION";const nb=tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new wd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const g=Array.from(f).map(async p=>p(n.origin,u)),v=await wA(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:v})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(a="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return a+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((g,v)=>{const p=Lm("",20);l.port1.start();const S=setTimeout(()=>{v(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(A){const N=A;if(N.data.eventId===p)switch(N.data.status){case"ack":clearTimeout(S),u=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(N.data.response);break;default:clearTimeout(S),clearTimeout(u),v(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(){return window}function CA(a){ka().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return typeof ka().WorkerGlobalScope<"u"&&typeof ka().importScripts=="function"}async function xA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IA(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)===null||a===void 0?void 0:a.controller)||null}function RA(){return ib()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="firebaseLocalStorageDb",kA=1,ld="firebaseLocalStorage",rb="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ad(a,e){return a.transaction([ld],e?"readwrite":"readonly").objectStore(ld)}function NA(){const a=indexedDB.deleteDatabase(ab);return new Nu(a).toPromise()}function am(){const a=indexedDB.open(ab,kA);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const r=a.result;try{r.createObjectStore(ld,{keyPath:rb})}catch(l){n(l)}}),a.addEventListener("success",async()=>{const r=a.result;r.objectStoreNames.contains(ld)?e(r):(r.close(),await NA(),e(await am()))})})}async function sv(a,e,n){const r=Ad(a,!0).put({[rb]:e,value:n});return new Nu(r).toPromise()}async function DA(a,e){const n=Ad(a,!1).get(e),r=await new Nu(n).toPromise();return r===void 0?null:r.value}function lv(a,e){const n=Ad(a,!0).delete(e);return new Nu(n).toPromise()}const OA=800,PA=3;class sb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>PA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ib()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance(RA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xA(),!this.activeServiceWorker)return;this.sender=new AA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await sv(e,sd,"1"),await lv(e,sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>DA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Ad(l,!1).getAll();return new Nu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sb.type="LOCAL";const MA=sb;new Iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(a,e){return e?ar(e):(He(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends Pm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ql(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ql(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ql(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VA(a){return Z0(a.auth,new jm(a),a.bypassAuthState)}function LA(a){const{auth:e,user:n}=a;return He(n,e,"internal-error"),hA(n,new jm(a),a.bypassAuthState)}async function jA(a){const{auth:e,user:n}=a;return He(n,e,"internal-error"),fA(n,new jm(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n,r,l,u=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(v))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VA;case"linkViaPopup":case"linkViaRedirect":return jA;case"reauthViaPopup":case"reauthViaRedirect":return LA;default:Hi(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new Iu(2e3,1e4);async function BA(a,e,n){if(Ci(a.app))return Promise.reject(ra(a,"operation-not-supported-in-this-environment"));const r=ms(a);vw(a,e,Vm);const l=lb(r,n);return new qs(r,"signInViaPopup",e,l).executeNotNull()}class qs extends ob{constructor(e,n,r,l,u){super(e,n,l,u),this.provider=r,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=Lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ra(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ra(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ra(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UA.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="pendingRedirect",Kc=new Map;class zA extends ob{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Kc.get(this.auth._key());if(!e){try{const r=await HA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Kc.set(this.auth._key(),e)}return this.bypassAuthState||Kc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HA(a,e){const n=KA(e),r=GA(a);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function FA(a,e){Kc.set(a._key(),e)}function GA(a){return ar(a._redirectPersistence)}function KA(a){return Gc(qA,a.config.apiKey,a.name)}async function YA(a,e,n=!1){if(Ci(a.app))return Promise.reject(rr(a));const r=ms(a),l=lb(r,e),f=await new zA(r,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=10*60*1e3;class $A{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ub(e)){const l=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ra(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QA&&this.cachedEventUids.clear(),this.cachedEventUids.has(ov(e))}saveEventToCache(e){this.cachedEventUids.add(ov(e)),this.lastProcessedEventTime=Date.now()}}function ov(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function ub({type:a,error:e}){return a==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XA(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ub(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(a,e={}){return hs(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JA=/^https?/;async function eC(a){if(a.config.emulator)return;const{authorizedDomains:e}=await ZA(a);for(const n of e)try{if(tC(n))return}catch{}Hi(a,"unauthorized-domain")}function tC(a){const e=tm(),{protocol:n,hostname:r}=new URL(e);if(a.startsWith("chrome-extension://")){const f=new URL(a);return f.hostname===""&&r===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!JA.test(n))return!1;if(WA.test(a))return r===a;const l=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=new Iu(3e4,6e4);function uv(){const a=ka().___jsl;if(a!=null&&a.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function iC(a){return new Promise((e,n)=>{var r,l,u;function f(){uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uv(),n(ra(a,"network-request-failed"))},timeout:nC.get()})}if(!((l=(r=ka().gapi)===null||r===void 0?void 0:r.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((u=ka().gapi)===null||u===void 0)&&u.load)f();else{const g=Qw("iframefcb");return ka()[g]=()=>{gapi.load?f():n(ra(a,"network-request-failed"))},Y0(`${Yw()}?onload=${g}`).catch(v=>n(v))}}).catch(e=>{throw Yc=null,e})}let Yc=null;function aC(a){return Yc=Yc||iC(a),Yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Iu(5e3,15e3),sC="__/auth/iframe",lC="emulator/auth/iframe",oC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cC(a){const e=a.config;He(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?Nm(e,lC):`https://${a.config.authDomain}/${sC}`,r={apiKey:e.apiKey,appName:a.name,v:ao},l=uC.get(a.config.apiHost);l&&(r.eid=l);const u=a._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${xu(r).slice(1)}`}async function dC(a){const e=await aC(a),n=ka().gapi;return He(n,a,"internal-error"),e.open({where:document.body,url:cC(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oC,dontclear:!0},r=>new Promise(async(l,u)=>{await r.restyle({setHideOnLeave:!1});const f=ra(a,"network-request-failed"),g=ka().setTimeout(()=>{u(f)},rC.get());function v(){ka().clearTimeout(g),l(r)}r.ping(v).then(v,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hC=500,mC=600,pC="_blank",gC="http://localhost";class cv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _C(a,e,n,r=hC,l=mC){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const v=Object.assign(Object.assign({},fC),{width:r.toString(),height:l.toString(),top:u,left:f}),p=Qn().toLowerCase();n&&(g=B0(p)?pC:n),j0(p)&&(e=e||gC,v.scrollbars="yes");const S=Object.entries(v).reduce((N,[L,X])=>`${N}${L}=${X},`,"");if(jw(p)&&g!=="_self")return yC(e||"",g),new cv(null);const A=window.open(e||"",g,S);He(A,a,"popup-blocked");try{A.focus()}catch{}return new cv(A)}function yC(a,e){const n=document.createElement("a");n.href=a,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="__/auth/handler",bC="emulator/auth/handler",EC=encodeURIComponent("fac");async function dv(a,e,n,r,l,u){He(a.config.authDomain,a,"auth-domain-config-required"),He(a.config.apiKey,a,"invalid-api-key");const f={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:r,v:ao,eventId:l};if(e instanceof Vm){e.setDefaultLanguage(a.languageCode),f.providerId=e.providerId||"",i1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,A]of Object.entries({}))f[S]=A}if(e instanceof ku){const S=e.getScopes().filter(A=>A!=="");S.length>0&&(f.scopes=S.join(","))}a.tenantId&&(f.tid=a.tenantId);const g=f;for(const S of Object.keys(g))g[S]===void 0&&delete g[S];const v=await a._getAppCheckToken(),p=v?`#${EC}=${encodeURIComponent(v)}`:"";return`${SC(a)}?${xu(g).slice(1)}${p}`}function SC({config:a}){return a.emulator?Nm(a,bC):`https://${a.authDomain}/${vC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="webStorageSupport";class TC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nb,this._completeRedirectFn=YA,this._overrideRedirectResult=FA}async _openPopup(e,n,r,l){var u;or((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await dv(e,n,r,tm(),l);return _C(e,f,Lm())}async _openRedirect(e,n,r,l){await this._originValidation(e);const u=await dv(e,n,r,tm(),l);return CA(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(or(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dC(e),r=new $A(e);return n.register("authEvent",l=>(He(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qh,{type:qh},l=>{var u;const f=(u=l==null?void 0:l[0])===null||u===void 0?void 0:u[qh];f!==void 0&&n(!!f),Hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return G0()||U0()||Om()}}const wC=TC;var fv="@firebase/auth",hv="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xC(a){Xl(new Fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;He(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:f,authDomain:g,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K0(a)},p=new Fw(r,l,u,v);return eA(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xl(new Fs("auth-internal",e=>{const n=ms(e.getProvider("auth").getImmediate());return(r=>new AC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(fv,hv,CC(a)),is(fv,hv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=5*60,RC=S0("authIdTokenMaxAge")||IC;let mv=null;const kC=a=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RC)return;const l=n==null?void 0:n.token;mv!==l&&(mv=l,await fetch(a,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function NC(a=I0()){const e=xm(a,"auth");if(e.isInitialized())return e.getImmediate();const n=Jw(a,{popupRedirectResolver:wC,persistence:[MA,TA,nb]}),r=S0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=kC(u.toString());yA(n,f,()=>f(n.currentUser)),_A(n,g=>f(g))}}const l=b0("auth");return l&&tA(n,`http://${l}`),n}function DC(){var a,e;return(e=(a=document.getElementsByTagName("head"))===null||a===void 0?void 0:a[0])!==null&&e!==void 0?e:document}Gw({loadJS(a){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",a),r.onload=e,r.onerror=l=>{const u=ra("internal-error");u.customData=l,n(u)},r.type="text/javascript",r.charset="UTF-8",DC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xC("Browser");const pv={apiKey:"AIzaSyDXB3bjk1McDcet8e4O7Dq24e650Gt857U",authDomain:"dokkanpatchmakerauth.firebaseapp.com",projectId:"dokkanpatchmakerauth",storageBucket:"dokkanpatchmakerauth.firebasestorage.app",messagingSenderId:"266207236647",appId:"1:266207236647:web:d84a1117c169c75c90b402"};let uu,fi,od;const cb=()=>{if(!pv.apiKey){console.warn("Firebase API key is missing. Firebase features are disabled. Please ensure VITE_FIREBASE_API_KEY and other VITE_FIREBASE_* environment variables are set in your .env.local file.");return}try{uu=x0(pv),fi=NC(uu),od=new nr,console.log("Firebase initialized successfully.")}catch(a){console.error("Firebase initialization error:",a),uu=void 0,fi=void 0,od=void 0}return fi},OC=a=>!fi&&(console.warn("Firebase auth not initialized when onAuthChange called. Attempting late initialization."),cb(),!fi)?(console.error("Critical: Firebase auth could not be initialized for onAuthChange."),a(null),()=>{}):vA(fi,a),PC=(a,e)=>fi?pA(fi,a,e).then(n=>n.user):Promise.reject(new Error("Firebase not initialized")),MC=(a,e)=>fi?gA(fi,a,e).then(n=>n.user):Promise.reject(new Error("Firebase not initialized")),VC=()=>!fi||!od?Promise.reject(new Error("Firebase or Google Provider not initialized")):BA(fi,od).then(a=>a.user),LC=()=>fi?bA(fi):Promise.reject(new Error("Firebase not initialized"));var gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,db;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,k){function O(){}O.prototype=k.prototype,C.D=k.prototype,C.prototype=new O,C.prototype.constructor=C,C.C=function(x,M,q){for(var P=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)P[Ke-2]=arguments[Ke];return k.prototype[M].apply(x,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(C,k,O){O||(O=0);var x=Array(16);if(typeof k=="string")for(var M=0;16>M;++M)x[M]=k.charCodeAt(O++)|k.charCodeAt(O++)<<8|k.charCodeAt(O++)<<16|k.charCodeAt(O++)<<24;else for(M=0;16>M;++M)x[M]=k[O++]|k[O++]<<8|k[O++]<<16|k[O++]<<24;k=C.g[0],O=C.g[1],M=C.g[2];var q=C.g[3],P=k+(q^O&(M^q))+x[0]+3614090360&4294967295;k=O+(P<<7&4294967295|P>>>25),P=q+(M^k&(O^M))+x[1]+3905402710&4294967295,q=k+(P<<12&4294967295|P>>>20),P=M+(O^q&(k^O))+x[2]+606105819&4294967295,M=q+(P<<17&4294967295|P>>>15),P=O+(k^M&(q^k))+x[3]+3250441966&4294967295,O=M+(P<<22&4294967295|P>>>10),P=k+(q^O&(M^q))+x[4]+4118548399&4294967295,k=O+(P<<7&4294967295|P>>>25),P=q+(M^k&(O^M))+x[5]+1200080426&4294967295,q=k+(P<<12&4294967295|P>>>20),P=M+(O^q&(k^O))+x[6]+2821735955&4294967295,M=q+(P<<17&4294967295|P>>>15),P=O+(k^M&(q^k))+x[7]+4249261313&4294967295,O=M+(P<<22&4294967295|P>>>10),P=k+(q^O&(M^q))+x[8]+1770035416&4294967295,k=O+(P<<7&4294967295|P>>>25),P=q+(M^k&(O^M))+x[9]+2336552879&4294967295,q=k+(P<<12&4294967295|P>>>20),P=M+(O^q&(k^O))+x[10]+4294925233&4294967295,M=q+(P<<17&4294967295|P>>>15),P=O+(k^M&(q^k))+x[11]+2304563134&4294967295,O=M+(P<<22&4294967295|P>>>10),P=k+(q^O&(M^q))+x[12]+1804603682&4294967295,k=O+(P<<7&4294967295|P>>>25),P=q+(M^k&(O^M))+x[13]+4254626195&4294967295,q=k+(P<<12&4294967295|P>>>20),P=M+(O^q&(k^O))+x[14]+2792965006&4294967295,M=q+(P<<17&4294967295|P>>>15),P=O+(k^M&(q^k))+x[15]+1236535329&4294967295,O=M+(P<<22&4294967295|P>>>10),P=k+(M^q&(O^M))+x[1]+4129170786&4294967295,k=O+(P<<5&4294967295|P>>>27),P=q+(O^M&(k^O))+x[6]+3225465664&4294967295,q=k+(P<<9&4294967295|P>>>23),P=M+(k^O&(q^k))+x[11]+643717713&4294967295,M=q+(P<<14&4294967295|P>>>18),P=O+(q^k&(M^q))+x[0]+3921069994&4294967295,O=M+(P<<20&4294967295|P>>>12),P=k+(M^q&(O^M))+x[5]+3593408605&4294967295,k=O+(P<<5&4294967295|P>>>27),P=q+(O^M&(k^O))+x[10]+38016083&4294967295,q=k+(P<<9&4294967295|P>>>23),P=M+(k^O&(q^k))+x[15]+3634488961&4294967295,M=q+(P<<14&4294967295|P>>>18),P=O+(q^k&(M^q))+x[4]+3889429448&4294967295,O=M+(P<<20&4294967295|P>>>12),P=k+(M^q&(O^M))+x[9]+568446438&4294967295,k=O+(P<<5&4294967295|P>>>27),P=q+(O^M&(k^O))+x[14]+3275163606&4294967295,q=k+(P<<9&4294967295|P>>>23),P=M+(k^O&(q^k))+x[3]+4107603335&4294967295,M=q+(P<<14&4294967295|P>>>18),P=O+(q^k&(M^q))+x[8]+1163531501&4294967295,O=M+(P<<20&4294967295|P>>>12),P=k+(M^q&(O^M))+x[13]+2850285829&4294967295,k=O+(P<<5&4294967295|P>>>27),P=q+(O^M&(k^O))+x[2]+4243563512&4294967295,q=k+(P<<9&4294967295|P>>>23),P=M+(k^O&(q^k))+x[7]+1735328473&4294967295,M=q+(P<<14&4294967295|P>>>18),P=O+(q^k&(M^q))+x[12]+2368359562&4294967295,O=M+(P<<20&4294967295|P>>>12),P=k+(O^M^q)+x[5]+4294588738&4294967295,k=O+(P<<4&4294967295|P>>>28),P=q+(k^O^M)+x[8]+2272392833&4294967295,q=k+(P<<11&4294967295|P>>>21),P=M+(q^k^O)+x[11]+1839030562&4294967295,M=q+(P<<16&4294967295|P>>>16),P=O+(M^q^k)+x[14]+4259657740&4294967295,O=M+(P<<23&4294967295|P>>>9),P=k+(O^M^q)+x[1]+2763975236&4294967295,k=O+(P<<4&4294967295|P>>>28),P=q+(k^O^M)+x[4]+1272893353&4294967295,q=k+(P<<11&4294967295|P>>>21),P=M+(q^k^O)+x[7]+4139469664&4294967295,M=q+(P<<16&4294967295|P>>>16),P=O+(M^q^k)+x[10]+3200236656&4294967295,O=M+(P<<23&4294967295|P>>>9),P=k+(O^M^q)+x[13]+681279174&4294967295,k=O+(P<<4&4294967295|P>>>28),P=q+(k^O^M)+x[0]+3936430074&4294967295,q=k+(P<<11&4294967295|P>>>21),P=M+(q^k^O)+x[3]+3572445317&4294967295,M=q+(P<<16&4294967295|P>>>16),P=O+(M^q^k)+x[6]+76029189&4294967295,O=M+(P<<23&4294967295|P>>>9),P=k+(O^M^q)+x[9]+3654602809&4294967295,k=O+(P<<4&4294967295|P>>>28),P=q+(k^O^M)+x[12]+3873151461&4294967295,q=k+(P<<11&4294967295|P>>>21),P=M+(q^k^O)+x[15]+530742520&4294967295,M=q+(P<<16&4294967295|P>>>16),P=O+(M^q^k)+x[2]+3299628645&4294967295,O=M+(P<<23&4294967295|P>>>9),P=k+(M^(O|~q))+x[0]+4096336452&4294967295,k=O+(P<<6&4294967295|P>>>26),P=q+(O^(k|~M))+x[7]+1126891415&4294967295,q=k+(P<<10&4294967295|P>>>22),P=M+(k^(q|~O))+x[14]+2878612391&4294967295,M=q+(P<<15&4294967295|P>>>17),P=O+(q^(M|~k))+x[5]+4237533241&4294967295,O=M+(P<<21&4294967295|P>>>11),P=k+(M^(O|~q))+x[12]+1700485571&4294967295,k=O+(P<<6&4294967295|P>>>26),P=q+(O^(k|~M))+x[3]+2399980690&4294967295,q=k+(P<<10&4294967295|P>>>22),P=M+(k^(q|~O))+x[10]+4293915773&4294967295,M=q+(P<<15&4294967295|P>>>17),P=O+(q^(M|~k))+x[1]+2240044497&4294967295,O=M+(P<<21&4294967295|P>>>11),P=k+(M^(O|~q))+x[8]+1873313359&4294967295,k=O+(P<<6&4294967295|P>>>26),P=q+(O^(k|~M))+x[15]+4264355552&4294967295,q=k+(P<<10&4294967295|P>>>22),P=M+(k^(q|~O))+x[6]+2734768916&4294967295,M=q+(P<<15&4294967295|P>>>17),P=O+(q^(M|~k))+x[13]+1309151649&4294967295,O=M+(P<<21&4294967295|P>>>11),P=k+(M^(O|~q))+x[4]+4149444226&4294967295,k=O+(P<<6&4294967295|P>>>26),P=q+(O^(k|~M))+x[11]+3174756917&4294967295,q=k+(P<<10&4294967295|P>>>22),P=M+(k^(q|~O))+x[2]+718787259&4294967295,M=q+(P<<15&4294967295|P>>>17),P=O+(q^(M|~k))+x[9]+3951481745&4294967295,C.g[0]=C.g[0]+k&4294967295,C.g[1]=C.g[1]+(M+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+q&4294967295}r.prototype.u=function(C,k){k===void 0&&(k=C.length);for(var O=k-this.blockSize,x=this.B,M=this.h,q=0;q<k;){if(M==0)for(;q<=O;)l(this,C,q),q+=this.blockSize;if(typeof C=="string"){for(;q<k;)if(x[M++]=C.charCodeAt(q++),M==this.blockSize){l(this,x),M=0;break}}else for(;q<k;)if(x[M++]=C[q++],M==this.blockSize){l(this,x),M=0;break}}this.h=M,this.o+=k},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var k=1;k<C.length-8;++k)C[k]=0;var O=8*this.o;for(k=C.length-8;k<C.length;++k)C[k]=O&255,O/=256;for(this.u(C),C=Array(16),k=O=0;4>k;++k)for(var x=0;32>x;x+=8)C[O++]=this.g[k]>>>x&255;return C};function u(C,k){var O=g;return Object.prototype.hasOwnProperty.call(O,C)?O[C]:O[C]=k(C)}function f(C,k){this.h=k;for(var O=[],x=!0,M=C.length-1;0<=M;M--){var q=C[M]|0;x&&q==k||(O[M]=q,x=!1)}this.g=O}var g={};function v(C){return-128<=C&&128>C?u(C,function(k){return new f([k|0],0>k?-1:0)}):new f([C|0],0>C?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return A;if(0>C)return Z(p(-C));for(var k=[],O=1,x=0;C>=O;x++)k[x]=C/O|0,O*=4294967296;return new f(k,0)}function S(C,k){if(C.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(C.charAt(0)=="-")return Z(S(C.substring(1),k));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=p(Math.pow(k,8)),x=A,M=0;M<C.length;M+=8){var q=Math.min(8,C.length-M),P=parseInt(C.substring(M,M+q),k);8>q?(q=p(Math.pow(k,q)),x=x.j(q).add(p(P))):(x=x.j(O),x=x.add(p(P)))}return x}var A=v(0),N=v(1),L=v(16777216);a=f.prototype,a.m=function(){if(Y(this))return-Z(this).m();for(var C=0,k=1,O=0;O<this.g.length;O++){var x=this.i(O);C+=(0<=x?x:4294967296+x)*k,k*=4294967296}return C},a.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(X(this))return"0";if(Y(this))return"-"+Z(this).toString(C);for(var k=p(Math.pow(C,6)),O=this,x="";;){var M=ie(O,k).g;O=re(O,M.j(k));var q=((0<O.g.length?O.g[0]:O.h)>>>0).toString(C);if(O=M,X(O))return q+x;for(;6>q.length;)q="0"+q;x=q+x}},a.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function X(C){if(C.h!=0)return!1;for(var k=0;k<C.g.length;k++)if(C.g[k]!=0)return!1;return!0}function Y(C){return C.h==-1}a.l=function(C){return C=re(this,C),Y(C)?-1:X(C)?0:1};function Z(C){for(var k=C.g.length,O=[],x=0;x<k;x++)O[x]=~C.g[x];return new f(O,~C.h).add(N)}a.abs=function(){return Y(this)?Z(this):this},a.add=function(C){for(var k=Math.max(this.g.length,C.g.length),O=[],x=0,M=0;M<=k;M++){var q=x+(this.i(M)&65535)+(C.i(M)&65535),P=(q>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);x=P>>>16,q&=65535,P&=65535,O[M]=P<<16|q}return new f(O,O[O.length-1]&-2147483648?-1:0)};function re(C,k){return C.add(Z(k))}a.j=function(C){if(X(this)||X(C))return A;if(Y(this))return Y(C)?Z(this).j(Z(C)):Z(Z(this).j(C));if(Y(C))return Z(this.j(Z(C)));if(0>this.l(L)&&0>C.l(L))return p(this.m()*C.m());for(var k=this.g.length+C.g.length,O=[],x=0;x<2*k;x++)O[x]=0;for(x=0;x<this.g.length;x++)for(var M=0;M<C.g.length;M++){var q=this.i(x)>>>16,P=this.i(x)&65535,Ke=C.i(M)>>>16,_t=C.i(M)&65535;O[2*x+2*M]+=P*_t,he(O,2*x+2*M),O[2*x+2*M+1]+=q*_t,he(O,2*x+2*M+1),O[2*x+2*M+1]+=P*Ke,he(O,2*x+2*M+1),O[2*x+2*M+2]+=q*Ke,he(O,2*x+2*M+2)}for(x=0;x<k;x++)O[x]=O[2*x+1]<<16|O[2*x];for(x=k;x<2*k;x++)O[x]=0;return new f(O,0)};function he(C,k){for(;(C[k]&65535)!=C[k];)C[k+1]+=C[k]>>>16,C[k]&=65535,k++}function ve(C,k){this.g=C,this.h=k}function ie(C,k){if(X(k))throw Error("division by zero");if(X(C))return new ve(A,A);if(Y(C))return k=ie(Z(C),k),new ve(Z(k.g),Z(k.h));if(Y(k))return k=ie(C,Z(k)),new ve(Z(k.g),k.h);if(30<C.g.length){if(Y(C)||Y(k))throw Error("slowDivide_ only works with positive integers.");for(var O=N,x=k;0>=x.l(C);)O=H(O),x=H(x);var M=ue(O,1),q=ue(x,1);for(x=ue(x,2),O=ue(O,2);!X(x);){var P=q.add(x);0>=P.l(C)&&(M=M.add(O),q=P),x=ue(x,1),O=ue(O,1)}return k=re(C,M.j(k)),new ve(M,k)}for(M=A;0<=C.l(k);){for(O=Math.max(1,Math.floor(C.m()/k.m())),x=Math.ceil(Math.log(O)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),q=p(O),P=q.j(k);Y(P)||0<P.l(C);)O-=x,q=p(O),P=q.j(k);X(q)&&(q=N),M=M.add(q),C=re(C,P)}return new ve(M,C)}a.A=function(C){return ie(this,C).h},a.and=function(C){for(var k=Math.max(this.g.length,C.g.length),O=[],x=0;x<k;x++)O[x]=this.i(x)&C.i(x);return new f(O,this.h&C.h)},a.or=function(C){for(var k=Math.max(this.g.length,C.g.length),O=[],x=0;x<k;x++)O[x]=this.i(x)|C.i(x);return new f(O,this.h|C.h)},a.xor=function(C){for(var k=Math.max(this.g.length,C.g.length),O=[],x=0;x<k;x++)O[x]=this.i(x)^C.i(x);return new f(O,this.h^C.h)};function H(C){for(var k=C.g.length+1,O=[],x=0;x<k;x++)O[x]=C.i(x)<<1|C.i(x-1)>>>31;return new f(O,C.h)}function ue(C,k){var O=k>>5;k%=32;for(var x=C.g.length-O,M=[],q=0;q<x;q++)M[q]=0<k?C.i(q+O)>>>k|C.i(q+O+1)<<32-k:C.i(q+O);return new f(M,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,db=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=S,as=f}).apply(typeof gv<"u"?gv:typeof self<"u"?self:typeof window<"u"?window:{});var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fb,au,hb,Qc,rm,mb,pb,gb;(function(){var a,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,T){return c==Array.prototype||c==Object.prototype||(c[y]=T.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lc=="object"&&Lc];for(var y=0;y<c.length;++y){var T=c[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function l(c,y){if(y)e:{var T=r;c=c.split(".");for(var D=0;D<c.length-1;D++){var K=c[D];if(!(K in T))break e;T=T[K]}c=c[c.length-1],D=T[c],y=y(D),y!=D&&y!=null&&e(T,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var T=0,D=!1,K={next:function(){if(!D&&T<c.length){var te=T++;return{value:y(te,c[te]),done:!1}}return D=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}l("Array.prototype.values",function(c){return c||function(){return u(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function v(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function S(c,y,T){return c.call.apply(c.bind,arguments)}function A(c,y,T){if(!c)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,D),c.apply(y,K)}}return function(){return c.apply(y,arguments)}}function N(c,y,T){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:A,N.apply(null,arguments)}function L(c,y){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),c.apply(this,D)}}function X(c,y){function T(){}T.prototype=y.prototype,c.aa=y.prototype,c.prototype=new T,c.prototype.constructor=c,c.Qb=function(D,K,te){for(var V=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)V[ne-2]=arguments[ne];return y.prototype[K].apply(D,V)}}function Y(c){const y=c.length;if(0<y){const T=Array(y);for(let D=0;D<y;D++)T[D]=c[D];return T}return[]}function Z(c,y){for(let T=1;T<arguments.length;T++){const D=arguments[T];if(v(D)){const K=c.length||0,te=D.length||0;c.length=K+te;for(let V=0;V<te;V++)c[K+V]=D[V]}else c.push(D)}}class re{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function he(c){return/^[\s\xa0]*$/.test(c)}function ve(){var c=g.navigator;return c&&(c=c.userAgent)?c:""}function ie(c){return ie[" "](c),c}ie[" "]=function(){};var H=ve().indexOf("Gecko")!=-1&&!(ve().toLowerCase().indexOf("webkit")!=-1&&ve().indexOf("Edge")==-1)&&!(ve().indexOf("Trident")!=-1||ve().indexOf("MSIE")!=-1)&&ve().indexOf("Edge")==-1;function ue(c,y,T){for(const D in c)y.call(T,c[D],D,c)}function C(c,y){for(const T in c)y.call(void 0,c[T],T,c)}function k(c){const y={};for(const T in c)y[T]=c[T];return y}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(c,y){let T,D;for(let K=1;K<arguments.length;K++){D=arguments[K];for(T in D)c[T]=D[T];for(let te=0;te<O.length;te++)T=O[te],Object.prototype.hasOwnProperty.call(D,T)&&(c[T]=D[T])}}function M(c){var y=1;c=c.split(":");const T=[];for(;0<y&&c.length;)T.push(c.shift()),y--;return c.length&&T.push(c.join(":")),T}function q(c){g.setTimeout(()=>{throw c},0)}function P(){var c=tt;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ke{constructor(){this.h=this.g=null}add(y,T){const D=_t.get();D.set(y,T),this.h?this.h.next=D:this.g=D,this.h=D}}var _t=new re(()=>new ae,c=>c.reset());class ae{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,Re=!1,tt=new Ke,B=()=>{const c=g.Promise.resolve(void 0);Te=()=>{c.then(me)}};var me=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(T){q(T)}var y=_t;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}Re=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const T=()=>{};g.addEventListener("test",T,y),g.removeEventListener("test",T,y)}catch{}return c}();function G(c,y){if(de.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var T=this.type=c.type,D=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(H){e:{try{ie(y.nodeName);var K=!0;break e}catch{}K=!1}K||(y=null)}}else T=="mouseover"?y=c.fromElement:T=="mouseout"&&(y=c.toElement);this.relatedTarget=y,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ge[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&G.aa.h.call(this)}}X(G,de);var ge={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),Me=0;function Qe(c,y,T,D,K){this.listener=c,this.proxy=null,this.src=y,this.type=T,this.capture=!!D,this.ha=K,this.key=++Me,this.da=this.fa=!1}function Lt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function We(c){this.src=c,this.g={},this.h=0}We.prototype.add=function(c,y,T,D,K){var te=c.toString();c=this.g[te],c||(c=this.g[te]=[],this.h++);var V=ke(c,y,D,K);return-1<V?(y=c[V],T||(y.fa=!1)):(y=new Qe(y,this.src,te,!!D,K),y.fa=T,c.push(y)),y};function wt(c,y){var T=y.type;if(T in c.g){var D=c.g[T],K=Array.prototype.indexOf.call(D,y,void 0),te;(te=0<=K)&&Array.prototype.splice.call(D,K,1),te&&(Lt(y),c.g[T].length==0&&(delete c.g[T],c.h--))}}function ke(c,y,T,D){for(var K=0;K<c.length;++K){var te=c[K];if(!te.da&&te.listener==y&&te.capture==!!T&&te.ha==D)return K}return-1}var ut="closure_lm_"+(1e6*Math.random()|0),$n={};function fn(c,y,T,D,K){if(Array.isArray(y)){for(var te=0;te<y.length;te++)fn(c,y[te],T,D,K);return null}return T=Js(T),c&&c[Ce]?c.K(y,T,p(D)?!!D.capture:!1,K):zt(c,y,T,!1,D,K)}function zt(c,y,T,D,K,te){if(!y)throw Error("Invalid event type");var V=p(K)?!!K.capture:!!K,ne=Ii(c);if(ne||(c[ut]=ne=new We(c)),T=ne.add(y,T,D,V,te),T.proxy)return T;if(D=Fi(),T.proxy=D,D.src=c,D.listener=T,c.addEventListener)Ee||(K=V),K===void 0&&(K=!1),c.addEventListener(y.toString(),D,K);else if(c.attachEvent)c.attachEvent(ct(y.toString()),D);else if(c.addListener&&c.removeListener)c.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Fi(){function c(T){return y.call(c.src,c.listener,T)}const y=bt;return c}function mt(c,y,T,D,K){if(Array.isArray(y))for(var te=0;te<y.length;te++)mt(c,y[te],T,D,K);else D=p(D)?!!D.capture:!!D,T=Js(T),c&&c[Ce]?(c=c.i,y=String(y).toString(),y in c.g&&(te=c.g[y],T=ke(te,T,D,K),-1<T&&(Lt(te[T]),Array.prototype.splice.call(te,T,1),te.length==0&&(delete c.g[y],c.h--)))):c&&(c=Ii(c))&&(y=c.g[y.toString()],c=-1,y&&(c=ke(y,T,D,K)),(T=-1<c?y[c]:null)&&qe(T))}function qe(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Ce])wt(y.i,c);else{var T=c.type,D=c.proxy;y.removeEventListener?y.removeEventListener(T,D,c.capture):y.detachEvent?y.detachEvent(ct(T),D):y.addListener&&y.removeListener&&y.removeListener(D),(T=Ii(y))?(wt(T,c),T.h==0&&(T.src=null,y[ut]=null)):Lt(c)}}}function ct(c){return c in $n?$n[c]:$n[c]="on"+c}function bt(c,y){if(c.da)c=!0;else{y=new G(y,this);var T=c.listener,D=c.ha||c.src;c.fa&&qe(c),c=T.call(D,y)}return c}function Ii(c){return c=c[ut],c instanceof We?c:null}var sa="__closure_events_fn_"+(1e9*Math.random()>>>0);function Js(c){return typeof c=="function"?c:(c[sa]||(c[sa]=function(y){return c.handleEvent(y)}),c[sa])}function jt(){Se.call(this),this.i=new We(this),this.M=this,this.F=null}X(jt,Se),jt.prototype[Ce]=!0,jt.prototype.removeEventListener=function(c,y,T,D){mt(this,c,y,T,D)};function dt(c,y){var T,D=c.F;if(D)for(T=[];D;D=D.F)T.push(D);if(c=c.M,D=y.type||y,typeof y=="string")y=new de(y,c);else if(y instanceof de)y.target=y.target||c;else{var K=y;y=new de(D,c),x(y,K)}if(K=!0,T)for(var te=T.length-1;0<=te;te--){var V=y.g=T[te];K=xn(V,D,!0,y)&&K}if(V=y.g=c,K=xn(V,D,!0,y)&&K,K=xn(V,D,!1,y)&&K,T)for(te=0;te<T.length;te++)V=y.g=T[te],K=xn(V,D,!1,y)&&K}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var T=c.g[y],D=0;D<T.length;D++)Lt(T[D]);delete c.g[y],c.h--}}this.F=null},jt.prototype.K=function(c,y,T,D){return this.i.add(String(c),y,!1,T,D)},jt.prototype.L=function(c,y,T,D){return this.i.add(String(c),y,!0,T,D)};function xn(c,y,T,D){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var K=!0,te=0;te<y.length;++te){var V=y[te];if(V&&!V.da&&V.capture==T){var ne=V.listener,Ae=V.ha||V.src;V.fa&&wt(c.i,V),K=ne.call(Ae,D)!==!1&&K}}return K&&!D.defaultPrevented}function Kt(c,y,T){if(typeof c=="function")T&&(c=N(c,T));else if(c&&typeof c.handleEvent=="function")c=N(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:g.setTimeout(c,y||0)}function Gi(c){c.g=Kt(()=>{c.g=null,c.i&&(c.i=!1,Gi(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class el extends Se{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Gi(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function la(c){Se.call(this),this.h=c,this.g={}}X(la,Se);var oa=[];function Ma(c){ue(c.g,function(y,T){this.g.hasOwnProperty(T)&&qe(y)},c),c.g={}}la.prototype.N=function(){la.aa.N.call(this),Ma(this)},la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hi=g.JSON.stringify,fr=g.JSON.parse,ua=class{stringify(c){return g.JSON.stringify(c,void 0)}parse(c){return g.JSON.parse(c,void 0)}};function Xe(){}Xe.prototype.h=null;function hr(c){return c.h||(c.h=c.i())}function Va(){}var Ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xn(){de.call(this,"d")}X(Xn,de);function ps(){de.call(this,"c")}X(ps,de);var hn={},mr=null;function be(){return mr=mr||new jt}hn.La="serverreachability";function ca(c){de.call(this,hn.La,c)}X(ca,de);function Yt(c){const y=be();dt(y,new ca(y))}hn.STAT_EVENT="statevent";function da(c,y){de.call(this,hn.STAT_EVENT,c),this.stat=y}X(da,de);function xt(c){const y=be();dt(y,new da(y,c))}hn.Ma="timingevent";function Xt(c,y){de.call(this,hn.Ma,c),this.size=y}X(Xt,de);function It(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){c()},y)}function Zn(){this.g=!0}Zn.prototype.xa=function(){this.g=!1};function vn(c,y,T,D,K,te){c.info(function(){if(c.g)if(te)for(var V="",ne=te.split("&"),Ae=0;Ae<ne.length;Ae++){var we=ne[Ae].split("=");if(1<we.length){var De=we[0];we=we[1];var Ye=De.split("_");V=2<=Ye.length&&Ye[1]=="type"?V+(De+"="+we+"&"):V+(De+"=redacted&")}}else V=null;else V=te;return"XMLHTTP REQ ("+D+") [attempt "+K+"]: "+y+`
`+T+`
`+V})}function tl(c,y,T,D,K,te,V){c.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+K+"]: "+y+`
`+T+`
`+te+" "+V})}function Wn(c,y,T,D){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+fa(c,T)+(D?" "+D:"")})}function gs(c,y){c.info(function(){return"TIMEOUT: "+y})}Zn.prototype.info=function(){};function fa(c,y){if(!c.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(c=0;c<T.length;c++)if(Array.isArray(T[c])){var D=T[c];if(!(2>D.length)){var K=D[1];if(Array.isArray(K)&&!(1>K.length)){var te=K[0];if(te!="noop"&&te!="stop"&&te!="close")for(var V=1;V<K.length;V++)K[V]=""}}}}return hi(T)}catch{return y}}var ha={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ut={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mi;function ki(){}X(ki,Xe),ki.prototype.g=function(){return new XMLHttpRequest},ki.prototype.i=function(){return{}},mi=new ki;function mn(c,y,T,D){this.j=c,this.i=y,this.l=T,this.R=D||1,this.U=new la(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ht}function Ht(){this.i=null,this.g="",this.h=!1}var ma={},In={};function jn(c,y,T){c.L=1,c.v=_a(En(y)),c.m=T,c.P=!0,pi(c,null)}function pi(c,y){c.F=Date.now(),pa(c),c.A=En(c.v);var T=c.A,D=c.R;Array.isArray(D)||(D=[String(D)]),vr(T.i,"t",D),c.C=0,T=c.j.J,c.h=new Ht,c.g=ul(c.j,T?y:null,!c.m),0<c.O&&(c.M=new el(N(c.Y,c,c.g),c.O)),y=c.U,T=c.g,D=c.ca;var K="readystatechange";Array.isArray(K)||(K&&(oa[0]=K.toString()),K=oa);for(var te=0;te<K.length;te++){var V=fn(T,K[te],D||y.handleEvent,!1,y.h||y);if(!V)break;y.g[V.key]=V}y=c.H?k(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),Yt(),vn(c.i,c.u,c.A,c.l,c.R,c.m)}mn.prototype.ca=function(c){c=c.target;const y=this.M;y&&yt(c)==3?y.j():this.Y(c)},mn.prototype.Y=function(c){try{if(c==this.g)e:{const Ye=yt(this.g);var y=this.g.Ba();const tn=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||Es(this.g)))){this.J||Ye!=4||y==7||(y==8||0>=tn?Yt(3):Yt(2)),Ki(this);var T=this.g.Z();this.X=T;t:if(_s(this)){var D=Es(this.g);c="";var K=D.length,te=yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),Jn(this);var V="";break t}this.h.i=new g.TextDecoder}for(y=0;y<K;y++)this.h.h=!0,c+=this.h.i.decode(D[y],{stream:!(te&&y==K-1)});D.length=0,this.h.g+=c,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=T==200,tl(this.i,this.u,this.A,this.l,this.R,Ye,T),this.o){if(this.T&&!this.K){t:{if(this.g){var ne,Ae=this.g;if((ne=Ae.g?Ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!he(ne)){var we=ne;break t}}we=null}if(T=we)Wn(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ii(this,T);else{this.o=!1,this.s=3,xt(12),ln(this),Jn(this);break e}}if(this.P){T=!0;let St;for(;!this.J&&this.C<V.length;)if(St=ys(this,V),St==In){Ye==4&&(this.s=4,xt(14),T=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(St==ma){this.s=4,xt(15),Wn(this.i,this.l,V,"[Invalid Chunk]"),T=!1;break}else Wn(this.i,this.l,St,null),ii(this,St);if(_s(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||V.length!=0||this.h.h||(this.s=1,xt(16),T=!1),this.o=this.o&&T,!T)Wn(this.i,this.l,V,"[Invalid Chunked Response]"),ln(this),Jn(this);else if(0<V.length&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.ba&&!De.M&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),za(De),De.M=!0,xt(11))}}else Wn(this.i,this.l,V,null),ii(this,V);Ye==4&&ln(this),this.o&&!this.J&&(Ye==4?ll(this.j,this):(this.o=!1,pa(this)))}else co(this.g),T==400&&0<V.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),ln(this),Jn(this)}}}catch{}finally{}};function _s(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ys(c,y){var T=c.C,D=y.indexOf(`
`,T);return D==-1?In:(T=Number(y.substring(T,D)),isNaN(T)?ma:(D+=1,D+T>y.length?In:(y=y.slice(D,D+T),c.C=D+T,y)))}mn.prototype.cancel=function(){this.J=!0,ln(this)};function pa(c){c.S=Date.now()+c.I,ga(c,c.I)}function ga(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=It(N(c.ba,c),y)}function Ki(c){c.B&&(g.clearTimeout(c.B),c.B=null)}mn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(gs(this.i,this.A),this.L!=2&&(Yt(),xt(17)),ln(this),this.s=2,Jn(this)):ga(this,this.S-c)};function Jn(c){c.j.G==0||c.J||ll(c.j,c)}function ln(c){Ki(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,Ma(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function ii(c,y){try{var T=c.j;if(T.G!=0&&(T.g==c||vs(T.h,c))){if(!c.K&&vs(T.h,c)&&T.G==3){try{var D=T.Da.g.parse(y)}catch{D=null}if(Array.isArray(D)&&D.length==3){var K=D;if(K[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<c.F)Ar(T),Sr(T);else break e;wr(T),xt(18)}}else T.za=K[1],0<T.za-T.T&&37500>K[2]&&T.F&&T.v==0&&!T.C&&(T.C=It(N(T.Za,T),6e3));if(1>=ja(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Wi(T,11)}else if((c.K||T.g==c)&&Ar(T),!he(y))for(K=T.Da.g.parse(y),y=0;y<K.length;y++){let we=K[y];if(T.T=we[0],we=we[1],T.G==2)if(we[0]=="c"){T.K=we[1],T.ia=we[2];const De=we[3];De!=null&&(T.la=De,T.j.info("VER="+T.la));const Ye=we[4];Ye!=null&&(T.Aa=Ye,T.j.info("SVER="+T.Aa));const tn=we[5];tn!=null&&typeof tn=="number"&&0<tn&&(D=1.5*tn,T.L=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const St=c.g;if(St){const Ft=St.g?St.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ft){var te=D.h;te.g||Ft.indexOf("spdy")==-1&&Ft.indexOf("quic")==-1&&Ft.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Ua(te,te.h),te.h=null))}if(D.D){const Nn=St.g?St.g.getResponseHeader("X-HTTP-Session-Id"):null;Nn&&(D.ya=Nn,Et(D.I,D.D,Nn))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-c.F,T.j.info("Handshake RTT: "+T.R+"ms")),D=T;var V=c;if(D.qa=ws(D,D.J?D.ia:null,D.W),V.K){bn(D.h,V);var ne=V,Ae=D.L;Ae&&(ne.I=Ae),ne.B&&(Ki(ne),pa(ne)),D.g=V}else rl(D);0<T.i.length&&Tr(T)}else we[0]!="stop"&&we[0]!="close"||Wi(T,7);else T.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Wi(T,7):Er(T):we[0]!="noop"&&T.l&&T.l.ta(we),T.v=0)}}Yt(4)}catch{}}var pr=class{constructor(c,y){this.g=c,this.map=y}};function Ni(c){this.l=c||10,g.PerformanceNavigationTiming?(c=g.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function La(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ja(c){return c.h?1:c.g?c.g.size:0}function vs(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ua(c,y){c.g?c.g.add(y):c.h=y}function bn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ni.prototype.cancel=function(){if(this.i=Yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Yi(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const T of c.g.values())y=y.concat(T.D);return y}return Y(c.i)}function nl(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(v(c)){for(var y=[],T=c.length,D=0;D<T;D++)y.push(c[D]);return y}y=[],T=0;for(D in c)y[T++]=c[D];return y}function pt(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(v(c)||typeof c=="string"){var y=[];c=c.length;for(var T=0;T<c;T++)y.push(T);return y}y=[],T=0;for(const D in c)y[T++]=D;return y}}}function Qi(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(v(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var T=pt(c),D=nl(c),K=D.length,te=0;te<K;te++)y.call(void 0,D[te],T&&T[te],c)}var $i=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xi(c,y){if(c){c=c.split("&");for(var T=0;T<c.length;T++){var D=c[T].indexOf("="),K=null;if(0<=D){var te=c[T].substring(0,D);K=c[T].substring(D+1)}else te=c[T];y(te,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Bt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Bt){this.h=c.h,Di(this,c.j),this.o=c.o,this.g=c.g,ai(this,c.s),this.l=c.l;var y=c.i,T=new gi;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),Zi(this,T),this.m=c.m}else c&&(y=String(c).match($i))?(this.h=!1,Di(this,y[1]||"",!0),this.o=Un(y[2]||""),this.g=Un(y[3]||"",!0),ai(this,y[4]),this.l=Un(y[5]||"",!0),Zi(this,y[6]||"",!0),this.m=Un(y[7]||"")):(this.h=!1,this.i=new gi(null,this.h))}Bt.prototype.toString=function(){var c=[],y=this.j;y&&c.push(ya(y,Ba,!0),":");var T=this.g;return(T||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ya(y,Ba,!0),"@"),c.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&c.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&c.push("/"),c.push(ya(T,T.charAt(0)=="/"?_r:bs,!0))),(T=this.i.toString())&&c.push("?",T),(T=this.m)&&c.push("#",ya(T,ri)),c.join("")};function En(c){return new Bt(c)}function Di(c,y,T){c.j=T?Un(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function ai(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Zi(c,y,T){y instanceof gi?(c.i=y,Ne(c.i,c.h)):(T||(y=ya(y,yr)),c.i=new gi(y,c.h))}function Et(c,y,T){c.i.set(y,T)}function _a(c){return Et(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Un(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ya(c,y,T){return typeof c=="string"?(c=encodeURI(c).replace(y,gr),T&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function gr(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ba=/[#\/\?@]/g,bs=/[#\?:]/g,_r=/[#\?]/g,yr=/[#\?@]/g,ri=/#/g;function gi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Zt(c){c.g||(c.g=new Map,c.h=0,c.i&&Xi(c.i,function(y,T){c.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}a=gi.prototype,a.add=function(c,y){Zt(this),this.i=null,c=Oi(this,c);var T=this.g.get(c);return T||this.g.set(c,T=[]),T.push(y),this.h+=1,this};function Bn(c,y){Zt(c),y=Oi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function si(c,y){return Zt(c),y=Oi(c,y),c.g.has(y)}a.forEach=function(c,y){Zt(this),this.g.forEach(function(T,D){T.forEach(function(K){c.call(y,K,D,this)},this)},this)},a.na=function(){Zt(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let D=0;D<y.length;D++){const K=c[D];for(let te=0;te<K.length;te++)T.push(y[D])}return T},a.V=function(c){Zt(this);let y=[];if(typeof c=="string")si(this,c)&&(y=y.concat(this.g.get(Oi(this,c))));else{c=Array.from(this.g.values());for(let T=0;T<c.length;T++)y=y.concat(c[T])}return y},a.set=function(c,y){return Zt(this),this.i=null,c=Oi(this,c),si(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},a.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function vr(c,y,T){Bn(c,y),0<T.length&&(c.i=null,c.g.set(Oi(c,y),Y(T)),c.h+=T.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var D=y[T];const te=encodeURIComponent(String(D)),V=this.V(D);for(D=0;D<V.length;D++){var K=te;V[D]!==""&&(K+="="+encodeURIComponent(String(V[D]))),c.push(K)}}return this.i=c.join("&")};function Oi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Ne(c,y){y&&!c.j&&(Zt(c),c.i=null,c.g.forEach(function(T,D){var K=D.toLowerCase();D!=K&&(Bn(this,D),vr(this,K,T))},c)),c.j=y}function va(c,y){const T=new Zn;if(g.Image){const D=new Image;D.onload=L(Rn,T,"TestLoadImage: loaded",!0,y,D),D.onerror=L(Rn,T,"TestLoadImage: error",!1,y,D),D.onabort=L(Rn,T,"TestLoadImage: abort",!1,y,D),D.ontimeout=L(Rn,T,"TestLoadImage: timeout",!1,y,D),g.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=c}else y(!1)}function qn(c,y){const T=new Zn,D=new AbortController,K=setTimeout(()=>{D.abort(),Rn(T,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:D.signal}).then(te=>{clearTimeout(K),te.ok?Rn(T,"TestPingServer: ok",!0,y):Rn(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(K),Rn(T,"TestPingServer: error",!1,y)})}function Rn(c,y,T,D,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),D(T)}catch{}}function ba(){this.g=new ua}function zn(c,y,T){const D=T||"";try{Qi(c,function(K,te){let V=K;p(K)&&(V=hi(K)),y.push(D+te+"="+encodeURIComponent(V))})}catch(K){throw y.push(D+"type="+encodeURIComponent("_badmap")),K}}function li(c){this.l=c.Ub||null,this.j=c.eb||!1}X(li,Xe),li.prototype.g=function(){return new Sn(this.l,this.j)},li.prototype.i=function(c){return function(){return c}}({});function Sn(c,y){jt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}X(Sn,jt),a=Sn.prototype,a.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,h(this)},a.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||g).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_i(this)),this.readyState=0},a.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,h(this)),this.g&&(this.readyState=3,h(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ea(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ea(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}a.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?_i(this):h(this),this.readyState==3&&Ea(this)}},a.Ra=function(c){this.g&&(this.response=this.responseText=c,_i(this))},a.Qa=function(c){this.g&&(this.response=c,_i(this))},a.ga=function(){this.g&&_i(this)};function _i(c){c.readyState=4,c.l=null,c.j=null,c.v=null,h(c)}a.setRequestHeader=function(c,y){this.u.append(c,y)},a.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,c.push(T[0]+": "+T[1]),T=y.next();return c.join(`\r
`)};function h(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _(c){let y="";return ue(c,function(T,D){y+=D,y+=":",y+=T,y+=`\r
`}),y}function b(c,y,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=_(T),typeof c=="string"?T!=null&&encodeURIComponent(String(T)):Et(c,y,T))}function R(c){jt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}X(R,jt);var U=/^https?$/i,J=["POST","PUT"];a=R.prototype,a.Ha=function(c){this.J=c},a.ea=function(c,y,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mi.g(),this.v=this.o?hr(this.o):hr(mi),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(te){oe(this,te);return}if(c=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var K in D)T.set(K,D[K]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())T.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(te=>te.toLowerCase()=="content-type"),K=g.FormData&&c instanceof g.FormData,!(0<=Array.prototype.indexOf.call(J,y,void 0))||D||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,V]of T)this.g.setRequestHeader(te,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rt(this),this.u=!0,this.g.send(c),this.u=!1}catch(te){oe(this,te)}};function oe(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Ve(c),Le(c)}function Ve(c){c.A||(c.A=!0,dt(c,"complete"),dt(c,"error"))}a.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,dt(this,"complete"),dt(this,"abort"),Le(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Le(this,!0)),R.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?et(this):this.bb())},a.bb=function(){et(this)};function et(c){if(c.h&&typeof f<"u"&&(!c.v[1]||yt(c)!=4||c.Z()!=2)){if(c.u&&yt(c)==4)Kt(c.Ea,0,c);else if(dt(c,"readystatechange"),yt(c)==4){c.h=!1;try{const V=c.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var D;if(D=V===0){var K=String(c.D).match($i)[1]||null;!K&&g.self&&g.self.location&&(K=g.self.location.protocol.slice(0,-1)),D=!U.test(K?K.toLowerCase():"")}T=D}if(T)dt(c,"complete"),dt(c,"success");else{c.m=6;try{var te=2<yt(c)?c.g.statusText:""}catch{te=""}c.l=te+" ["+c.Z()+"]",Ve(c)}}finally{Le(c)}}}}function Le(c,y){if(c.g){Rt(c);const T=c.g,D=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||dt(c,"ready");try{T.onreadystatechange=D}catch{}}}function Rt(c){c.I&&(g.clearTimeout(c.I),c.I=null)}a.isActive=function(){return!!this.g};function yt(c){return c.g?c.g.readyState:0}a.Z=function(){try{return 2<yt(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),fr(y)}};function Es(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function co(c){const y={};c=(c.g&&2<=yt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<c.length;D++){if(he(c[D]))continue;var T=M(c[D]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const te=y[K]||[];y[K]=te,te.push(T)}C(y,function(D){return D.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sa(c,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[c]||y}function br(c){this.Aa=0,this.i=[],this.j=new Zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sa("baseRetryDelayMs",5e3,c),this.cb=Sa("retryDelaySeedMs",1e4,c),this.Wa=Sa("forwardChannelMaxRetries",2,c),this.wa=Sa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(c&&c.concurrentRequestLimit),this.Da=new ba,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=br.prototype,a.la=8,a.G=1,a.connect=function(c,y,T,D){xt(0),this.W=c,this.H=y||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.I=ws(this,null,this.W),Tr(this)};function Er(c){if(il(c),c.G==3){var y=c.U++,T=En(c.I);if(Et(T,"SID",c.K),Et(T,"RID",y),Et(T,"TYPE","terminate"),qa(c,T),y=new mn(c,c.j,y),y.L=2,y.v=_a(En(T)),T=!1,g.navigator&&g.navigator.sendBeacon)try{T=g.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&g.Image&&(new Image().src=y.v,T=!0),T||(y.g=ul(y.j,null),y.g.ea(y.v)),y.F=Date.now(),pa(y)}ol(c)}function Sr(c){c.g&&(za(c),c.g.cancel(),c.g=null)}function il(c){Sr(c),c.u&&(g.clearTimeout(c.u),c.u=null),Ar(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&g.clearTimeout(c.s),c.s=null)}function Tr(c){if(!La(c.h)&&!c.s){c.s=!0;var y=c.Ga;Te||B(),Re||(Te(),Re=!0),tt.add(y,c),c.B=0}}function fo(c,y){return ja(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=It(N(c.Ga,c,y),Ts(c,c.B)),c.B++,!0)}a.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const K=new mn(this,this.j,c);let te=this.o;if(this.S&&(te?(te=k(te),x(te,this.S)):te=this.S),this.m!==null||this.O||(K.H=te,te=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(y+=D,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=al(this,K,y),T=En(this.I),Et(T,"RID",c),Et(T,"CVER",22),this.D&&Et(T,"X-HTTP-Session-Id",this.D),qa(this,T),te&&(this.O?y="headers="+encodeURIComponent(String(_(te)))+"&"+y:this.m&&b(T,this.m,te)),Ua(this.h,K),this.Ua&&Et(T,"TYPE","init"),this.P?(Et(T,"$req",y),Et(T,"SID","null"),K.T=!0,jn(K,T,null)):jn(K,T,y),this.G=2}}else this.G==3&&(c?Ss(this,c):this.i.length==0||La(this.h)||Ss(this))};function Ss(c,y){var T;y?T=y.l:T=c.U++;const D=En(c.I);Et(D,"SID",c.K),Et(D,"RID",T),Et(D,"AID",c.T),qa(c,D),c.m&&c.o&&b(D,c.m,c.o),T=new mn(c,c.j,T,c.B+1),c.m===null&&(T.H=c.o),y&&(c.i=y.D.concat(c.i)),y=al(c,T,1e3),T.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ua(c.h,T),jn(T,D,y)}function qa(c,y){c.H&&ue(c.H,function(T,D){Et(y,D,T)}),c.l&&Qi({},function(T,D){Et(y,D,T)})}function al(c,y,T){T=Math.min(c.i.length,T);var D=c.l?N(c.l.Na,c.l,c):null;e:{var K=c.i;let te=-1;for(;;){const V=["count="+T];te==-1?0<T?(te=K[0].g,V.push("ofs="+te)):te=0:V.push("ofs="+te);let ne=!0;for(let Ae=0;Ae<T;Ae++){let we=K[Ae].g;const De=K[Ae].map;if(we-=te,0>we)te=Math.max(0,K[Ae].g-100),ne=!1;else try{zn(De,V,"req"+we+"_")}catch{D&&D(De)}}if(ne){D=V.join("&");break e}}}return c=c.i.splice(0,T),y.D=c,D}function rl(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;Te||B(),Re||(Te(),Re=!0),tt.add(y,c),c.v=0}}function wr(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=It(N(c.Fa,c),Ts(c,c.v)),c.v++,!0)}a.Fa=function(){if(this.u=null,sl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=It(N(this.ab,this),c)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Sr(this),sl(this))};function za(c){c.A!=null&&(g.clearTimeout(c.A),c.A=null)}function sl(c){c.g=new mn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=En(c.qa);Et(y,"RID","rpc"),Et(y,"SID",c.K),Et(y,"AID",c.T),Et(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Et(y,"TO",c.ja),Et(y,"TYPE","xmlhttp"),qa(c,y),c.m&&c.o&&b(y,c.m,c.o),c.L&&(c.g.I=c.L);var T=c.g;c=c.ia,T.L=1,T.v=_a(En(y)),T.m=null,T.P=!0,pi(T,c)}a.Za=function(){this.C!=null&&(this.C=null,Sr(this),wr(this),xt(19))};function Ar(c){c.C!=null&&(g.clearTimeout(c.C),c.C=null)}function ll(c,y){var T=null;if(c.g==y){Ar(c),za(c),c.g=null;var D=2}else if(vs(c.h,y))T=y.D,bn(c.h,y),D=1;else return;if(c.G!=0){if(y.o)if(D==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var K=c.B;D=be(),dt(D,new Xt(D,T)),Tr(c)}else rl(c);else if(K=y.s,K==3||K==0&&0<y.X||!(D==1&&fo(c,y)||D==2&&wr(c)))switch(T&&0<T.length&&(y=c.h,y.i=y.i.concat(T)),K){case 1:Wi(c,5);break;case 4:Wi(c,10);break;case 3:Wi(c,6);break;default:Wi(c,2)}}}function Ts(c,y){let T=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(T*=2),T*y}function Wi(c,y){if(c.j.info("Error code "+y),y==2){var T=N(c.fb,c),D=c.Xa;const K=!D;D=new Bt(D||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Di(D,"https"),_a(D),K?va(D.toString(),T):qn(D.toString(),T)}else xt(2);c.G=0,c.l&&c.l.sa(y),ol(c),il(c)}a.fb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function ol(c){if(c.G=0,c.ka=[],c.l){const y=Yi(c.h);(y.length!=0||c.i.length!=0)&&(Z(c.ka,y),Z(c.ka,c.i),c.h.i.length=0,Y(c.i),c.i.length=0),c.l.ra()}}function ws(c,y,T){var D=T instanceof Bt?En(T):new Bt(T);if(D.g!="")y&&(D.g=y+"."+D.g),ai(D,D.s);else{var K=g.location;D=K.protocol,y=y?y+"."+K.hostname:K.hostname,K=+K.port;var te=new Bt(null);D&&Di(te,D),y&&(te.g=y),K&&ai(te,K),T&&(te.l=T),D=te}return T=c.D,y=c.ya,T&&y&&Et(D,T,y),Et(D,"VER",c.la),qa(c,D),D}function ul(c,y,T){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new R(new li({eb:T})):new R(c.pa),y.Ha(c.J),y}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function cl(){}a=cl.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function Cr(){}Cr.prototype.g=function(c,y){return new kn(c,y)};function kn(c,y){jt.call(this),this.g=new br(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!he(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!he(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new yi(this)}X(kn,jt),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Er(this.g)},kn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var T={};T.__data__=c,c=T}else this.u&&(T={},T.__data__=hi(c),c=T);y.i.push(new pr(y.Ya++,c)),y.G==3&&Tr(y)},kn.prototype.N=function(){this.g.l=null,delete this.j,Er(this.g),delete this.g,kn.aa.N.call(this)};function dl(c){Xn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const T in y){c=T;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}X(dl,Xn);function fl(){ps.call(this),this.status=1}X(fl,ps);function yi(c){this.g=c}X(yi,cl),yi.prototype.ua=function(){dt(this.g,"a")},yi.prototype.ta=function(c){dt(this.g,new dl(c))},yi.prototype.sa=function(c){dt(this.g,new fl)},yi.prototype.ra=function(){dt(this.g,"b")},Cr.prototype.createWebChannel=Cr.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,gb=function(){return new Cr},pb=function(){return be()},mb=hn,rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ha.NO_ERROR=0,ha.TIMEOUT=8,ha.HTTP_ERROR=6,Qc=ha,Ut.COMPLETE="complete",hb=Ut,Va.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",jt.prototype.listen=jt.prototype.K,au=Va,R.prototype.listenOnce=R.prototype.L,R.prototype.getLastError=R.prototype.Ka,R.prototype.getLastErrorCode=R.prototype.Ba,R.prototype.getStatus=R.prototype.Z,R.prototype.getResponseJson=R.prototype.Oa,R.prototype.getResponseText=R.prototype.oa,R.prototype.send=R.prototype.ea,R.prototype.setWithCredentials=R.prototype.Ha,fb=R}).apply(typeof Lc<"u"?Lc:typeof self<"u"?self:typeof window<"u"?window:{});const _v="@firebase/firestore",yv="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kn.UNAUTHENTICATED=new Kn(null),Kn.GOOGLE_CREDENTIALS=new Kn("google-credentials-uid"),Kn.FIRST_PARTY=new Kn("first-party-uid"),Kn.MOCK_USER=new Kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Am("@firebase/firestore");function ql(){return Ys.logLevel}function xe(a,...e){if(Ys.logLevel<=lt.DEBUG){const n=e.map(Um);Ys.debug(`Firestore (${so}): ${a}`,...n)}}function ur(a,...e){if(Ys.logLevel<=lt.ERROR){const n=e.map(Um);Ys.error(`Firestore (${so}): ${a}`,...n)}}function Zl(a,...e){if(Ys.logLevel<=lt.WARN){const n=e.map(Um);Ys.warn(`Firestore (${so}): ${a}`,...n)}}function Um(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(a,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,_b(a,r,n)}function _b(a,e,n){let r=`FIRESTORE (${so}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ur(r),new Error(r)}function Tt(a,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,a||_b(e,l,r)}function Ze(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kn.UNAUTHENTICATED))}shutdown(){}}class UC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BC{constructor(e){this.t=e,this.currentUser=Kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Tt(this.o===void 0,42304);let r=this.i;const l=v=>this.i!==r?(r=this.i,n(v)):Promise.resolve();let u=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new rs,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const v=u;e.enqueueRetryable(async()=>{await v.promise,await l(this.currentUser)})},g=v=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new rs)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new yb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new Kn(e)}}class qC{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new qC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Tt(this.o===void 0,3512);const r=u=>{u.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,xe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const l=u=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>l(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<a;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=FC(40);for(let u=0;u<l.length;++u)r.length<20&&l[u]<n&&(r+=e.charAt(l[u]%62))}return r}}function it(a,e){return a<e?-1:a>e?1:0}function sm(a,e){let n=0;for(;n<a.length&&n<e.length;){const r=a.codePointAt(n),l=e.codePointAt(n);if(r!==l){if(r<128&&l<128)return it(r,l);{const u=vb(),f=GC(u.encode(bv(a,n)),u.encode(bv(e,n)));return f!==0?f:it(r,l)}}n+=r>65535?2:1}return it(a.length,e.length)}function bv(a,e){return a.codePointAt(e)>65535?a.substring(e,e+2):a.substring(e,e+1)}function GC(a,e){for(let n=0;n<a.length&&n<e.length;++n)if(a[n]!==e[n])return it(a[n],e[n]);return it(a.length,e.length)}function Wl(a,e,n){return a.length===e.length&&a.every((r,l)=>n(r,e[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=-62135596800,Sv=1e6;class dn{static now(){return dn.fromMillis(Date.now())}static fromDate(e){return dn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Sv);return new dn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ev)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sv}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ev;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new dn(0,0))}static max(){return new $e(new dn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="__name__";class Ra{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ra.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ra?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const u=Ra.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return it(e.length,n.length)}static compareSegments(e,n){const r=Ra.isNumericId(e),l=Ra.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Ra.extractNumericId(e).compare(Ra.extractNumericId(n)):sm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class en extends Ra{construct(e,n,r){return new en(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(l=>l.length>0))}return new en(n)}static emptyPath(){return new en([])}}const KC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Ra{construct(e,n,r){return new Vn(e,n,r)}static isValidIdentifier(e){return KC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tv}static keyField(){return new Vn([Tv])}static fromServerFormat(e){const n=[];let r="",l=0;const u=()=>{if(r.length===0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new Ue(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[l+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ue(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,l+=2}else g==="`"?(f=!f,l++):g!=="."||f?(r+=g,l++):(u(),l++)}if(u(),f)throw new Ue(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(n)}static emptyPath(){return new Vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(en.fromString(e))}static fromName(e){return new Be(en.fromString(e).popFirst(5))}static empty(){return new Be(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&en.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return en.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new en(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;function YC(a,e){const n=a.toTimestamp().seconds,r=a.toTimestamp().nanoseconds+1,l=$e.fromTimestamp(r===1e9?new dn(n+1,0):new dn(n,r));return new ss(l,Be.empty(),e)}function QC(a){return new ss(a.readTime,a.key,_u)}class ss{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ss($e.min(),Be.empty(),_u)}static max(){return new ss($e.max(),Be.empty(),_u)}}function $C(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=Be.comparator(a.documentKey,e.documentKey),n!==0?n:it(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(a){if(a.code!==ye.FAILED_PRECONDITION||a.message!==XC)throw a;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe((r,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,l)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):pe.reject(n)}static resolve(e){return new pe((n,r)=>{n(e)})}static reject(e){return new pe((n,r)=>{r(e)})}static waitFor(e){return new pe((n,r)=>{let l=0,u=0,f=!1;e.forEach(g=>{++l,g.next(()=>{++u,f&&u===l&&n()},v=>r(v))}),f=!0,u===l&&n()})}static or(e){let n=pe.resolve(!1);for(const r of e)n=n.next(l=>l?pe.resolve(l):r());return n}static forEach(e,n){const r=[];return e.forEach((l,u)=>{r.push(n.call(this,l,u))}),this.waitFor(r)}static mapArray(e,n){return new pe((r,l)=>{const u=e.length,f=new Array(u);let g=0;for(let v=0;v<u;v++){const p=v;n(e[p]).next(S=>{f[p]=S,++g,g===u&&r(f)},S=>l(S))}})}static doWhile(e,n){return new pe((r,l)=>{const u=()=>{e()===!0?n().next(()=>{u()},l):r()};u()})}}function WC(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oo(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Cd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function xd(a){return a==null}function ud(a){return a===0&&1/a==-1/0}function JC(a){return typeof a=="number"&&Number.isInteger(a)&&!ud(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="";function ex(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=wv(e)),e=tx(a.get(n),e);return wv(e)}function tx(a,e){let n=e;const r=a.length;for(let l=0;l<r;l++){const u=a.charAt(l);switch(u){case"\0":n+="";break;case Eb:n+="";break;default:n+=u}}return n}function wv(a){return a+Eb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function $s(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function Sb(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new $t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jc(this.root,e,this.comparator,!0)}}class jc{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,n,r,l,u){this.key=e,this.value=n,this.color=r??Mn.RED,this.left=l??Mn.EMPTY,this.right=u??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,u){return new Mn(e??this.key,n??this.value,r??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const u=r(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,r),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Mn.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,n,r,l,u){return this}insert(e,n,r){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cv(this.data.getIterator())}getIteratorFrom(e){return new Cv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yn(this.comparator);return n.data=e,n}}class Cv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new aa([])}unionWith(e){let n=new yn(Vn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new aa(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Tb("Invalid base64 string: "+u):u}}(e);return new Ln(n)}static fromUint8Array(e){const n=function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u}(e);return new Ln(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const nx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(a){if(Tt(!!a,39018),typeof a=="string"){let e=0;const n=nx.exec(a);if(Tt(!!n,46558,{timestamp:a}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(a);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:sn(a.seconds),nanos:sn(a.nanos)}}function sn(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function os(a){return typeof a=="string"?Ln.fromBase64String(a):Ln.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="server_timestamp",Ab="__type__",Cb="__previous_value__",xb="__local_write_time__";function qm(a){var e,n;return((n=(((e=a==null?void 0:a.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ab])===null||n===void 0?void 0:n.stringValue)===wb}function Id(a){const e=a.mapValue.fields[Cb];return qm(e)?Id(e):e}function yu(a){const e=ls(a.mapValue.fields[xb].timestampValue);return new dn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,r,l,u,f,g,v,p,S){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=p,this.isUsingEmulator=S}}const cd="(default)";class vu{constructor(e,n){this.projectId=e,this.database=n||cd}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database===cd}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="__type__",ax="__max__",Uc={mapValue:{}},Rb="__vector__",dd="value";function us(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?qm(a)?4:sx(a)?9007199254740991:rx(a)?10:11:Ge(28295,{value:a})}function Oa(a,e){if(a===e)return!0;const n=us(a);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return yu(a).isEqual(yu(e));case 3:return function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=ls(l.timestampValue),g=ls(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return function(l,u){return os(l.bytesValue).isEqual(os(u.bytesValue))}(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return function(l,u){return sn(l.geoPointValue.latitude)===sn(u.geoPointValue.latitude)&&sn(l.geoPointValue.longitude)===sn(u.geoPointValue.longitude)}(a,e);case 2:return function(l,u){if("integerValue"in l&&"integerValue"in u)return sn(l.integerValue)===sn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=sn(l.doubleValue),g=sn(u.doubleValue);return f===g?ud(f)===ud(g):isNaN(f)&&isNaN(g)}return!1}(a,e);case 9:return Wl(a.arrayValue.values||[],e.arrayValue.values||[],Oa);case 10:case 11:return function(l,u){const f=l.mapValue.fields||{},g=u.mapValue.fields||{};if(Av(f)!==Av(g))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(g[v]===void 0||!Oa(f[v],g[v])))return!1;return!0}(a,e);default:return Ge(52216,{left:a})}}function bu(a,e){return(a.values||[]).find(n=>Oa(n,e))!==void 0}function Jl(a,e){if(a===e)return 0;const n=us(a),r=us(e);if(n!==r)return it(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return it(a.booleanValue,e.booleanValue);case 2:return function(u,f){const g=sn(u.integerValue||u.doubleValue),v=sn(f.integerValue||f.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1}(a,e);case 3:return xv(a.timestampValue,e.timestampValue);case 4:return xv(yu(a),yu(e));case 5:return sm(a.stringValue,e.stringValue);case 6:return function(u,f){const g=os(u),v=os(f);return g.compareTo(v)}(a.bytesValue,e.bytesValue);case 7:return function(u,f){const g=u.split("/"),v=f.split("/");for(let p=0;p<g.length&&p<v.length;p++){const S=it(g[p],v[p]);if(S!==0)return S}return it(g.length,v.length)}(a.referenceValue,e.referenceValue);case 8:return function(u,f){const g=it(sn(u.latitude),sn(f.latitude));return g!==0?g:it(sn(u.longitude),sn(f.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return Iv(a.arrayValue,e.arrayValue);case 10:return function(u,f){var g,v,p,S;const A=u.fields||{},N=f.fields||{},L=(g=A[dd])===null||g===void 0?void 0:g.arrayValue,X=(v=N[dd])===null||v===void 0?void 0:v.arrayValue,Y=it(((p=L==null?void 0:L.values)===null||p===void 0?void 0:p.length)||0,((S=X==null?void 0:X.values)===null||S===void 0?void 0:S.length)||0);return Y!==0?Y:Iv(L,X)}(a.mapValue,e.mapValue);case 11:return function(u,f){if(u===Uc.mapValue&&f===Uc.mapValue)return 0;if(u===Uc.mapValue)return 1;if(f===Uc.mapValue)return-1;const g=u.fields||{},v=Object.keys(g),p=f.fields||{},S=Object.keys(p);v.sort(),S.sort();for(let A=0;A<v.length&&A<S.length;++A){const N=sm(v[A],S[A]);if(N!==0)return N;const L=Jl(g[v[A]],p[S[A]]);if(L!==0)return L}return it(v.length,S.length)}(a.mapValue,e.mapValue);default:throw Ge(23264,{Pe:n})}}function xv(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return it(a,e);const n=ls(a),r=ls(e),l=it(n.seconds,r.seconds);return l!==0?l:it(n.nanos,r.nanos)}function Iv(a,e){const n=a.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const u=Jl(n[l],r[l]);if(u)return u}return it(n.length,r.length)}function eo(a){return lm(a)}function lm(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(n){const r=ls(n);return`time(${r.seconds},${r.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?function(n){return os(n).toBase64()}(a.bytesValue):"referenceValue"in a?function(n){return Be.fromName(n).toString()}(a.referenceValue):"geoPointValue"in a?function(n){return`geo(${n.latitude},${n.longitude})`}(a.geoPointValue):"arrayValue"in a?function(n){let r="[",l=!0;for(const u of n.values||[])l?l=!1:r+=",",r+=lm(u);return r+"]"}(a.arrayValue):"mapValue"in a?function(n){const r=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of r)u?u=!1:l+=",",l+=`${f}:${lm(n.fields[f])}`;return l+"}"}(a.mapValue):Ge(61005,{value:a})}function $c(a){switch(us(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Id(a);return e?16+$c(e):16;case 5:return 2*a.stringValue.length;case 6:return os(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((l,u)=>l+$c(u),0)}(a.arrayValue);case 10:case 11:return function(r){let l=0;return $s(r.fields,(u,f)=>{l+=u.length+$c(f)}),l}(a.mapValue);default:throw Ge(13486,{value:a})}}function om(a){return!!a&&"integerValue"in a}function zm(a){return!!a&&"arrayValue"in a}function Rv(a){return!!a&&"nullValue"in a}function kv(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Xc(a){return!!a&&"mapValue"in a}function rx(a){var e,n;return((n=(((e=a==null?void 0:a.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ib])===null||n===void 0?void 0:n.stringValue)===Rb}function cu(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return $s(a.mapValue.fields,(n,r)=>e.mapValue.fields[n]=cu(r)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cu(a.arrayValue.values[n]);return e}return Object.assign({},a)}function sx(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===ax}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.value=e}static empty(){return new qi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(n)}setAll(e){let n=Vn.emptyPath(),r={},l=[];e.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const v=this.getFieldsMap(n);this.applyChanges(v,r,l),r={},l=[],n=g.popLast()}f?r[g.lastSegment()]=cu(f):l.push(g.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,r,l)}delete(e){const n=this.field(e.popLast());Xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Oa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];Xc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){$s(n,(l,u)=>e[l]=u);for(const l of r)delete e[l]}clone(){return new qi(cu(this.value))}}function kb(a){const e=[];return $s(a.fields,(n,r)=>{const l=new Vn([n]);if(Xc(r)){const u=kb(r.mapValue).fields;if(u.length===0)e.push(l);else for(const f of u)e.push(l.child(f))}else e.push(l)}),new aa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r,l,u,f,g){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new Yn(e,0,$e.min(),$e.min(),$e.min(),qi.empty(),0)}static newFoundDocument(e,n,r,l){return new Yn(e,1,n,$e.min(),r,l,0)}static newNoDocument(e,n){return new Yn(e,2,n,$e.min(),$e.min(),qi.empty(),0)}static newUnknownDocument(e,n){return new Yn(e,3,n,$e.min(),$e.min(),qi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,n){this.position=e,this.inclusive=n}}function Nv(a,e,n){let r=0;for(let l=0;l<a.position.length;l++){const u=e[l],f=a.position[l];if(u.field.isKeyField()?r=Be.comparator(Be.fromName(f.referenceValue),n.key):r=Jl(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Dv(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Oa(a.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n="asc"){this.field=e,this.dir=n}}function lx(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{}class _n extends Nb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ux(e,n,r):n==="array-contains"?new fx(e,r):n==="in"?new hx(e,r):n==="not-in"?new mx(e,r):n==="array-contains-any"?new px(e,r):new _n(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cx(e,r):new dx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jl(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(Jl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pa extends Nb{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Pa(e,n)}matches(e){return Db(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Db(a){return a.op==="and"}function Ob(a){return ox(a)&&Db(a)}function ox(a){for(const e of a.filters)if(e instanceof Pa)return!1;return!0}function um(a){if(a instanceof _n)return a.field.canonicalString()+a.op.toString()+eo(a.value);if(Ob(a))return a.filters.map(e=>um(e)).join(",");{const e=a.filters.map(n=>um(n)).join(",");return`${a.op}(${e})`}}function Pb(a,e){return a instanceof _n?function(r,l){return l instanceof _n&&r.op===l.op&&r.field.isEqual(l.field)&&Oa(r.value,l.value)}(a,e):a instanceof Pa?function(r,l){return l instanceof Pa&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce((u,f,g)=>u&&Pb(f,l.filters[g]),!0):!1}(a,e):void Ge(19439)}function Mb(a){return a instanceof _n?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(a):a instanceof Pa?function(n){return n.op.toString()+" {"+n.getFilters().map(Mb).join(" ,")+"}"}(a):"Filter"}class ux extends _n{constructor(e,n,r){super(e,n,r),this.key=Be.fromName(r.referenceValue)}matches(e){const n=Be.comparator(e.key,this.key);return this.matchesComparison(n)}}class cx extends _n{constructor(e,n){super(e,"in",n),this.keys=Vb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dx extends _n{constructor(e,n){super(e,"not-in",n),this.keys=Vb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Vb(a,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Be.fromName(r.referenceValue))}class fx extends _n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zm(n)&&bu(n.arrayValue,this.value)}}class hx extends _n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bu(this.value.arrayValue,n)}}class mx extends _n{constructor(e,n){super(e,"not-in",n)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bu(this.value.arrayValue,n)}}class px extends _n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n=null,r=[],l=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=u,this.startAt=f,this.endAt=g,this.Ie=null}}function Ov(a,e=null,n=[],r=[],l=null,u=null,f=null){return new gx(a,e,n,r,l,u,f)}function Hm(a){const e=Ze(a);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>um(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),xd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eo(r)).join(",")),e.Ie=n}return e.Ie}function Fm(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!lx(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!Pb(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Dv(a.startAt,e.startAt)&&Dv(a.endAt,e.endAt)}function cm(a){return Be.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n=null,r=[],l=[],u=null,f="F",g=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=v,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function _x(a,e,n,r,l,u,f,g){return new Rd(a,e,n,r,l,u,f,g)}function Gm(a){return new Rd(a)}function Pv(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function yx(a){return a.collectionGroup!==null}function du(a){const e=Ze(a);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new yn(Vn.comparator);return f.filters.forEach(v=>{v.getFlattenedFilters().forEach(p=>{p.isInequality()&&(g=g.add(p.field))})}),g})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new hd(u,r))}),n.has(Vn.keyField().canonicalString())||e.Ee.push(new hd(Vn.keyField(),r))}return e.Ee}function Na(a){const e=Ze(a);return e.de||(e.de=vx(e,du(a))),e.de}function vx(a,e){if(a.limitType==="F")return Ov(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(l=>{const u=l.dir==="desc"?"asc":"desc";return new hd(l.field,u)});const n=a.endAt?new fd(a.endAt.position,a.endAt.inclusive):null,r=a.startAt?new fd(a.startAt.position,a.startAt.inclusive):null;return Ov(a.path,a.collectionGroup,e,a.filters,a.limit,n,r)}}function dm(a,e,n){return new Rd(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function kd(a,e){return Fm(Na(a),Na(e))&&a.limitType===e.limitType}function Lb(a){return`${Hm(Na(a))}|lt:${a.limitType}`}function zl(a){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(l=>Mb(l)).join(", ")}]`),xd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(l=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(l)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(l=>eo(l)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(l=>eo(l)).join(",")),`Target(${r})`}(Na(a))}; limitType=${a.limitType})`}function Nd(a,e){return e.isFoundDocument()&&function(r,l){const u=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Be.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(a,e)&&function(r,l){for(const u of du(r))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0}(a,e)&&function(r,l){for(const u of r.filters)if(!u.matches(l))return!1;return!0}(a,e)&&function(r,l){return!(r.startAt&&!function(f,g,v){const p=Nv(f,g,v);return f.inclusive?p<=0:p<0}(r.startAt,du(r),l)||r.endAt&&!function(f,g,v){const p=Nv(f,g,v);return f.inclusive?p>=0:p>0}(r.endAt,du(r),l))}(a,e)}function bx(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function jb(a){return(e,n)=>{let r=!1;for(const l of du(a)){const u=Ex(l,e,n);if(u!==0)return u;r=r||l.field.isKeyField()}return 0}}function Ex(a,e,n){const r=a.field.isKeyField()?Be.comparator(e.key,n.key):function(u,f,g){const v=f.data.field(u),p=g.data.field(u);return v!==null&&p!==null?Jl(v,p):Ge(42886)}(a.field,e,n);switch(a.dir){case"asc":return r;case"desc":return-1*r;default:return Ge(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,u]of r)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,(n,r)=>{for(const[l,u]of r)e(l,u)})}isEmpty(){return Sb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new $t(Be.comparator);function cr(){return Sx}const Ub=new $t(Be.comparator);function ru(...a){let e=Ub;for(const n of a)e=e.insert(n.key,n);return e}function Bb(a){let e=Ub;return a.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zs(){return fu()}function qb(){return fu()}function fu(){return new Xs(a=>a.toString(),(a,e)=>a.isEqual(e))}const Tx=new $t(Be.comparator),wx=new yn(Be.comparator);function ot(...a){let e=wx;for(const n of a)e=e.add(n);return e}const Ax=new yn(it);function Cx(){return Ax}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ud(e)?"-0":e}}function zb(a){return{integerValue:""+a}}function xx(a,e){return JC(e)?zb(e):Km(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(){this._=void 0}}function Ix(a,e,n){return a instanceof md?function(l,u){const f={fields:{[Ab]:{stringValue:wb},[xb]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&qm(u)&&(u=Id(u)),u&&(f.fields[Cb]=u),{mapValue:f}}(n,e):a instanceof Eu?Fb(a,e):a instanceof Su?Gb(a,e):function(l,u){const f=Hb(l,u),g=Mv(f)+Mv(l.Re);return om(f)&&om(l.Re)?zb(g):Km(l.serializer,g)}(a,e)}function Rx(a,e,n){return a instanceof Eu?Fb(a,e):a instanceof Su?Gb(a,e):n}function Hb(a,e){return a instanceof pd?function(r){return om(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class md extends Dd{}class Eu extends Dd{constructor(e){super(),this.elements=e}}function Fb(a,e){const n=Kb(e);for(const r of a.elements)n.some(l=>Oa(l,r))||n.push(r);return{arrayValue:{values:n}}}class Su extends Dd{constructor(e){super(),this.elements=e}}function Gb(a,e){let n=Kb(e);for(const r of a.elements)n=n.filter(l=>!Oa(l,r));return{arrayValue:{values:n}}}class pd extends Dd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Mv(a){return sn(a.integerValue||a.doubleValue)}function Kb(a){return zm(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function kx(a,e){return a.field.isEqual(e.field)&&function(r,l){return r instanceof Eu&&l instanceof Eu||r instanceof Su&&l instanceof Su?Wl(r.elements,l.elements,Oa):r instanceof pd&&l instanceof pd?Oa(r.Re,l.Re):r instanceof md&&l instanceof md}(a.transform,e.transform)}class Nx{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zc(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Od{}function Yb(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new $b(a.key,sr.none()):new Du(a.key,a.data,sr.none());{const n=a.data,r=qi.empty();let l=new yn(Vn.comparator);for(let u of e.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),l=l.add(u)}return new Zs(a.key,r,new aa(l.toArray()),sr.none())}}function Dx(a,e,n){a instanceof Du?function(l,u,f){const g=l.value.clone(),v=Lv(l.fieldTransforms,u,f.transformResults);g.setAll(v),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(a,e,n):a instanceof Zs?function(l,u,f){if(!Zc(l.precondition,u))return void u.convertToUnknownDocument(f.version);const g=Lv(l.fieldTransforms,u,f.transformResults),v=u.data;v.setAll(Qb(l)),v.setAll(g),u.convertToFoundDocument(f.version,v).setHasCommittedMutations()}(a,e,n):function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function hu(a,e,n,r){return a instanceof Du?function(u,f,g,v){if(!Zc(u.precondition,f))return g;const p=u.value.clone(),S=jv(u.fieldTransforms,v,f);return p.setAll(S),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(a,e,n,r):a instanceof Zs?function(u,f,g,v){if(!Zc(u.precondition,f))return g;const p=jv(u.fieldTransforms,v,f),S=f.data;return S.setAll(Qb(u)),S.setAll(p),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(A=>A.field))}(a,e,n,r):function(u,f,g){return Zc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(a,e,n)}function Ox(a,e){let n=null;for(const r of a.fieldTransforms){const l=e.data.field(r.field),u=Hb(r.transform,l||null);u!=null&&(n===null&&(n=qi.empty()),n.set(r.field,u))}return n||null}function Vv(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Wl(r,l,(u,f)=>kx(u,f))}(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class Du extends Od{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Zs extends Od{constructor(e,n,r,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Qb(a){const e=new Map;return a.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=a.data.field(n);e.set(n,r)}}),e}function Lv(a,e,n){const r=new Map;Tt(a.length===n.length,32656,{Ve:n.length,me:a.length});for(let l=0;l<n.length;l++){const u=a[l],f=u.transform,g=e.data.field(u.field);r.set(u.field,Rx(f,g,n[l]))}return r}function jv(a,e,n){const r=new Map;for(const l of a){const u=l.transform,f=n.data.field(l.field);r.set(l.field,Ix(u,f,e))}return r}class $b extends Od{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Px extends Od{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&Dx(u,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=qb();return this.mutations.forEach(l=>{const u=e.get(l.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(l.key)?null:g;const v=Yb(f,g);v!==null&&r.set(l.key,v),f.isValidDocument()||f.convertToNoDocument($e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ot())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,(n,r)=>Vv(n,r))&&Wl(this.baseMutations,e.baseMutations,(n,r)=>Vv(n,r))}}class Ym{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){Tt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let l=function(){return Tx}();const u=e.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,r[f].version);return new Ym(e,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,ht;function jx(a){switch(a){case ye.OK:return Ge(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return Ge(15467,{code:a})}}function Xb(a){if(a===void 0)return ur("GRPC error has no .code"),ye.UNKNOWN;switch(a){case cn.OK:return ye.OK;case cn.CANCELLED:return ye.CANCELLED;case cn.UNKNOWN:return ye.UNKNOWN;case cn.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case cn.INTERNAL:return ye.INTERNAL;case cn.UNAVAILABLE:return ye.UNAVAILABLE;case cn.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case cn.NOT_FOUND:return ye.NOT_FOUND;case cn.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case cn.ABORTED:return ye.ABORTED;case cn.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case cn.DATA_LOSS:return ye.DATA_LOSS;default:return Ge(39323,{code:a})}}(ht=cn||(cn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new as([4294967295,4294967295],0);function Uv(a){const e=vb().encode(a),n=new db;return n.update(e),new Uint8Array(n.digest())}function Bv(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new as([n,r],0),new as([l,u],0)]}class Qm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new su(`Invalid padding: ${n}`);if(r<0)throw new su(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new su(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=as.fromNumber(this.pe)}we(e,n,r){let l=e.add(n.multiply(as.fromNumber(r)));return l.compare(Ux)===1&&(l=new as([l.getBits(0),l.getBits(1)],0)),l.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Uv(e),[r,l]=Bv(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,l,u);if(!this.Se(f))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Qm(u,l,n);return r.forEach(g=>f.insert(g)),f}insert(e){if(this.pe===0)return;const n=Uv(e),[r,l]=Bv(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,l,u);this.be(f)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,r,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pd($e.min(),l,new $t(it),cr(),ot())}}class Ou{constructor(e,n,r,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ou(r,n,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n,r,l){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=l}}class Zb{constructor(e,n){this.targetId=e,this.Ce=n}}class Wb{constructor(e,n,r=Ln.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class qv{constructor(){this.Fe=0,this.Me=zv(),this.xe=Ln.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ot(),n=ot(),r=ot();return this.Me.forEach((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:Ge(38017,{changeType:u})}}),new Ou(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=zv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Tt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Bx{constructor(e){this.ze=e,this.je=new Map,this.He=cr(),this.Je=Bc(),this.Ye=Bc(),this.Ze=new $t(it)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,l)=>{this.it(l)&&n(l)})}ot(e){const n=e.targetId,r=e.Ce.count,l=this._t(n);if(l){const u=l.target;if(cm(u))if(r===0){const f=new Be(u.path);this.tt(n,f,Yn.newNoDocument(f,$e.min()))}else Tt(r===1,20013,{expectedCount:r});else{const f=this.ut(n);if(f!==r){const g=this.ct(e),v=g?this.lt(g,e,f):1;if(v!==0){this.st(n);const p=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,p)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:u=0}=n;let f,g;try{f=os(r).toUint8Array()}catch(v){if(v instanceof Tb)return Zl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new Qm(f,l,u)}catch(v){return Zl(v instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.pe===0?null:g}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let l=0;return r.forEach(u=>{const f=this.ze.Pt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.tt(n,u,null),l++)}),l}It(e){const n=new Map;this.je.forEach((u,f)=>{const g=this._t(f);if(g){if(u.current&&cm(g.target)){const v=new Be(g.target.path);this.Et(v).has(f)||this.dt(f,v)||this.tt(f,v,Yn.newNoDocument(v,e))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let r=ot();this.Ye.forEach((u,f)=>{let g=!0;f.forEachWhile(v=>{const p=this._t(v);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(r=r.add(u))}),this.He.forEach((u,f)=>f.setReadTime(e));const l=new Pd(e,n,this.Ze,this.He,r);return this.He=cr(),this.Je=Bc(),this.Ye=Bc(),this.Ze=new $t(it),l}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const l=this.rt(e);this.dt(e,n)?l.$e(n,1):l.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new qv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new yn(it),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new yn(it),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new qv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Bc(){return new $t(Be.comparator)}function zv(){return new $t(Be.comparator)}const qx={asc:"ASCENDING",desc:"DESCENDING"},zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hx={and:"AND",or:"OR"};class Fx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fm(a,e){return a.useProto3Json||xd(e)?e:{value:e}}function gd(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jb(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function Gx(a,e){return gd(a,e.toTimestamp())}function Da(a){return Tt(!!a,49232),$e.fromTimestamp(function(n){const r=ls(n);return new dn(r.seconds,r.nanos)}(a))}function $m(a,e){return hm(a,e).canonicalString()}function hm(a,e){const n=function(l){return new en(["projects",l.projectId,"databases",l.database])}(a).child("documents");return e===void 0?n:n.child(e)}function eE(a){const e=en.fromString(a);return Tt(rE(e),10190,{key:e.toString()}),e}function mm(a,e){return $m(a.databaseId,e.path)}function zh(a,e){const n=eE(e);if(n.get(1)!==a.databaseId.projectId)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Be(nE(n))}function tE(a,e){return $m(a.databaseId,e)}function Kx(a){const e=eE(a);return e.length===4?en.emptyPath():nE(e)}function pm(a){return new en(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function nE(a){return Tt(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function Hv(a,e,n){return{name:mm(a,e),fields:n.value.mapValue.fields}}function Yx(a,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ge(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=function(p,S){return p.useProto3Json?(Tt(S===void 0||typeof S=="string",58123),Ln.fromBase64String(S||"")):(Tt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Ln.fromUint8Array(S||new Uint8Array))}(a,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(p){const S=p.code===void 0?ye.UNKNOWN:Xb(p.code);return new Ue(S,p.message||"")}(f);n=new Wb(r,l,u,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=zh(a,r.document.name),u=Da(r.document.updateTime),f=r.document.createTime?Da(r.document.createTime):$e.min(),g=new qi({mapValue:{fields:r.document.fields}}),v=Yn.newFoundDocument(l,u,f,g),p=r.targetIds||[],S=r.removedTargetIds||[];n=new Wc(p,S,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=zh(a,r.document),u=r.readTime?Da(r.readTime):$e.min(),f=Yn.newNoDocument(l,u),g=r.removedTargetIds||[];n=new Wc([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=zh(a,r.document),u=r.removedTargetIds||[];n=new Wc([],u,l,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:u}=r,f=new Lx(l,u),g=r.targetId;n=new Zb(g,f)}}return n}function Qx(a,e){let n;if(e instanceof Du)n={update:Hv(a,e.key,e.value)};else if(e instanceof $b)n={delete:mm(a,e.key)};else if(e instanceof Zs)n={update:Hv(a,e.key,e.data),updateMask:i2(e.fieldMask)};else{if(!(e instanceof Px))return Ge(16599,{ft:e.type});n={verify:mm(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(u,f){const g=f.transform;if(g instanceof md)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Eu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Su)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof pd)return{fieldPath:f.field.canonicalString(),increment:g.Re};throw Ge(20930,{transform:f.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(l,u){return u.updateTime!==void 0?{updateTime:Gx(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ge(27497)}(a,e.precondition)),n}function $x(a,e){return a&&a.length>0?(Tt(e!==void 0,14353),a.map(n=>function(l,u){let f=l.updateTime?Da(l.updateTime):Da(u);return f.isEqual($e.min())&&(f=Da(u)),new Nx(f,l.transformResults||[])}(n,e))):[]}function Xx(a,e){return{documents:[tE(a,e.path)]}}function Zx(a,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tE(a,l);const u=function(p){if(p.length!==0)return aE(Pa.create(p,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(p){if(p.length!==0)return p.map(S=>function(N){return{field:Hl(N.field),direction:e2(N.dir)}}(S))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=fm(a,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:n,parent:l}}function Wx(a){let e=Kx(a.parent);const n=a.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){Tt(r===1,65062);const S=n.from[0];S.allDescendants?l=S.collectionId:e=e.child(S.collectionId)}let u=[];n.where&&(u=function(A){const N=iE(A);return N instanceof Pa&&Ob(N)?N.getFilters():[N]}(n.where));let f=[];n.orderBy&&(f=function(A){return A.map(N=>function(X){return new hd(Fl(X.field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(X.direction))}(N))}(n.orderBy));let g=null;n.limit&&(g=function(A){let N;return N=typeof A=="object"?A.value:A,xd(N)?null:N}(n.limit));let v=null;n.startAt&&(v=function(A){const N=!!A.before,L=A.values||[];return new fd(L,N)}(n.startAt));let p=null;return n.endAt&&(p=function(A){const N=!A.before,L=A.values||[];return new fd(L,N)}(n.endAt)),_x(e,l,f,u,g,"F",v,p)}function Jx(a,e){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:l})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iE(a){return a.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fl(n.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Fl(n.unaryFilter.field);return _n.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Fl(n.unaryFilter.field);return _n.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Fl(n.unaryFilter.field);return _n.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}}(a):a.fieldFilter!==void 0?function(n){return _n.create(Fl(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(a):a.compositeFilter!==void 0?function(n){return Pa.create(n.compositeFilter.filters.map(r=>iE(r)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}}(n.compositeFilter.op))}(a):Ge(30097,{filter:a})}function e2(a){return qx[a]}function t2(a){return zx[a]}function n2(a){return Hx[a]}function Hl(a){return{fieldPath:a.canonicalString()}}function Fl(a){return Vn.fromServerFormat(a.fieldPath)}function aE(a){return a instanceof _n?function(n){if(n.op==="=="){if(kv(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NAN"}};if(Rv(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kv(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NOT_NAN"}};if(Rv(n.value))return{unaryFilter:{field:Hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hl(n.field),op:t2(n.op),value:n.value}}}(a):a instanceof Pa?function(n){const r=n.getFilters().map(l=>aE(l));return r.length===1?r[0]:{compositeFilter:{op:n2(n.op),filters:r}}}(a):Ge(54877,{filter:a})}function i2(a){const e=[];return a.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rE(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,r,l,u=$e.min(),f=$e.min(),g=Ln.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.wt=e}}function r2(a){const e=Wx({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this.Cn=new l2}addToCollectionParentIndex(e,n){return this.Cn.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(ss.min())}updateCollectionGroup(e,n,r){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class l2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new yn(en.comparator),u=!l.has(r);return this.index[n]=l.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new yn(en.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sE=41943040;class di{static withCacheSize(e){return new di(e,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di.DEFAULT_COLLECTION_PERCENTILE=10,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,di.DEFAULT=new di(sE,di.DEFAULT_COLLECTION_PERCENTILE,di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),di.DISABLED=new di(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new to(0)}static lr(){return new to(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="LruGarbageCollector",o2=1048576;function Kv([a,e],[n,r]){const l=it(a,n);return l===0?it(e,r):l}class u2{constructor(e){this.Er=e,this.buffer=new yn(Kv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Kv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class c2{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){xe(Gv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oo(n)?xe(Gv,"Ignoring IndexedDB error during garbage collection: ",n):await lo(n)}await this.mr(3e5)})}}class d2{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(Cd.le);const r=new u2(n);return this.gr.forEachTarget(e,l=>r.Rr(l.sequenceNumber)).next(()=>this.gr.yr(e,l=>r.Rr(l))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Fv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,l,u,f,g,v,p;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,f=Date.now(),this.nthSequenceNumber(e,l))).next(A=>(r=A,g=Date.now(),this.removeTargets(e,r,n))).next(A=>(u=A,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(p=Date.now(),ql()<=lt.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${l} in `+(g-f)+`ms
	Removed ${u} targets in `+(v-g)+`ms
	Removed ${A} documents in `+(p-v)+`ms
Total Duration: ${p-S}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:A})))}}function f2(a,e){return new d2(a,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.changes=new Xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?pe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(l=>(r=l,this.remoteDocumentCache.getEntry(e,n))).next(l=>(r!==null&&hu(r.mutation,l,aa.empty(),dn.now()),l))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ot()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ot()){const l=zs();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,r).next(u=>{let f=ru();return u.forEach((g,v)=>{f=f.insert(g,v.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const r=zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ot()))}populateOverlays(e,n,r){const l=[];return r.forEach(u=>{n.has(u)||l.push(u)}),this.documentOverlayCache.getOverlays(e,l).next(u=>{u.forEach((f,g)=>{n.set(f,g)})})}computeViews(e,n,r,l){let u=cr();const f=fu(),g=function(){return fu()}();return n.forEach((v,p)=>{const S=r.get(p.key);l.has(p.key)&&(S===void 0||S.mutation instanceof Zs)?u=u.insert(p.key,p):S!==void 0?(f.set(p.key,S.mutation.getFieldMask()),hu(S.mutation,p,S.mutation.getFieldMask(),dn.now())):f.set(p.key,aa.empty())}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((p,S)=>f.set(p,S)),n.forEach((p,S)=>{var A;return g.set(p,new m2(S,(A=f.get(p))!==null&&A!==void 0?A:null))}),g))}recalculateAndSaveOverlays(e,n){const r=fu();let l=new $t((f,g)=>f-g),u=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const g of f)g.keys().forEach(v=>{const p=n.get(v);if(p===null)return;let S=r.get(v)||aa.empty();S=g.applyToLocalView(p,S),r.set(v,S);const A=(l.get(g.batchId)||ot()).add(v);l=l.insert(g.batchId,A)})}).next(()=>{const f=[],g=l.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),p=v.key,S=v.value,A=qb();S.forEach(N=>{if(!u.has(N)){const L=Yb(n.get(N),r.get(N));L!==null&&A.set(N,L),u=u.add(N)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,A))}return pe.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,l){return function(f){return Be.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next(u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-u.size):pe.resolve(zs());let g=_u,v=u;return f.next(p=>pe.forEach(p,(S,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),u.get(S)?pe.resolve():this.remoteDocumentCache.getEntry(e,S).next(N=>{v=v.insert(S,N)}))).next(()=>this.populateOverlays(e,p,u)).next(()=>this.computeViews(e,v,p,ot())).next(S=>({batchId:g,changes:Bb(S)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Be(n)).next(r=>{let l=ru();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l})}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const u=n.collectionGroup;let f=ru();return this.indexManager.getCollectionParents(e,u).next(g=>pe.forEach(g,v=>{const p=function(A,N){return new Rd(N,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(n,v.child(u));return this.getDocumentsMatchingCollectionQuery(e,p,r,l).next(S=>{S.forEach((A,N)=>{f=f.insert(A,N)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,r,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,l))).next(f=>{u.forEach((v,p)=>{const S=p.getKey();f.get(S)===null&&(f=f.insert(S,Yn.newInvalidDocument(S)))});let g=ru();return f.forEach((v,p)=>{const S=u.get(v);S!==void 0&&hu(S.mutation,p,aa.empty(),dn.now()),Nd(n,p)&&(g=g.insert(v,p))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return pe.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:Da(l.createTime)}}(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(l){return{name:l.name,query:r2(l.bundledQuery),readTime:Da(l.readTime)}}(n)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.overlays=new $t(Be.comparator),this.Qr=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zs();return pe.forEach(n,l=>this.getOverlay(e,l).next(u=>{u!==null&&r.set(l,u)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((l,u)=>{this.bt(e,n,u)}),pe.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.Qr.get(r);return l!==void 0&&(l.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),pe.resolve()}getOverlaysForCollection(e,n,r){const l=zs(),u=n.length+1,f=new Be(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const v=g.getNext().value,p=v.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&v.largestBatchId>r&&l.set(v.getKey(),v)}return pe.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let u=new $t((p,S)=>p-S);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let S=u.get(p.largestBatchId);S===null&&(S=zs(),u=u.insert(p.largestBatchId,S)),S.set(p.getKey(),p)}}const g=zs(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((p,S)=>g.set(p,S)),!(g.size()>=l)););return pe.resolve(g)}bt(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.Qr.get(l.largestBatchId).delete(r.key);this.Qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new Vx(n,r));let u=this.Qr.get(n);u===void 0&&(u=ot(),this.Qr.set(n,u)),this.Qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.sessionToken=Ln.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.$r=new yn(Cn.Ur),this.Kr=new yn(Cn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Cn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Cn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Be(new en([])),r=new Cn(n,e),l=new Cn(n,e+1),u=[];return this.Kr.forEachInRange([r,l],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Be(new en([])),r=new Cn(n,e),l=new Cn(n,e+1);let u=ot();return this.Kr.forEachInRange([r,l],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Cn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Cn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Be.comparator(e.key,n.key)||it(e.Zr,n.Zr)}static Wr(e,n){return it(e.Zr,n.Zr)||Be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new yn(Cn.Ur)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Mx(u,n,r,l);this.mutationQueue.push(f);for(const g of l)this.Xr=this.Xr.add(new Cn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return pe.resolve(f)}lookupMutationBatch(e,n){return pe.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ti(r),u=l<0?0:l;return pe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?Bm:this.nr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Cn(n,0),l=new Cn(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,l],f=>{const g=this.ei(f.Zr);u.push(g)}),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yn(it);return n.forEach(l=>{const u=new Cn(l,0),f=new Cn(l,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],g=>{r=r.add(g.Zr)})}),pe.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const f=new Cn(new Be(u),0);let g=new yn(it);return this.Xr.forEachWhile(v=>{const p=v.key.path;return!!r.isPrefixOf(p)&&(p.length===l&&(g=g.add(v.Zr)),!0)},f),pe.resolve(this.ni(g))}ni(e){const n=[];return e.forEach(r=>{const l=this.ei(r);l!==null&&n.push(l)}),n}removeMutationBatch(e,n){Tt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return pe.forEach(n.mutations,l=>{const u=new Cn(l.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Cn(n,0),l=this.Xr.firstAfterOrEqual(r);return pe.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.ii=e,this.docs=function(){return new $t(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),u=l?l.size:0,f=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return pe.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(l=>{const u=this.docs.get(l);r=r.insert(l,u?u.document.mutableCopy():Yn.newInvalidDocument(l))}),pe.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let u=cr();const f=n.path,g=new Be(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:p,value:{document:S}}=v.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||$C(QC(S),r)<=0||(l.has(S.key)||Nd(n,S))&&(u=u.insert(S.key,S.mutableCopy()))}return pe.resolve(u)}getAllFromCollectionGroup(e,n,r,l){Ge(9500)}si(e,n){return pe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new E2(this)}getSize(e){return pe.resolve(this.size)}}class E2 extends h2{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,l)=>{l.isValidDocument()?n.push(this.Br.addEntry(e,l)):this.Br.removeEntry(r)}),pe.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.persistence=e,this.oi=new Xs(n=>Hm(n),Fm),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this._i=0,this.ai=new Xm,this.targetCount=0,this.ui=to.cr()}forEachTarget(e,n){return this.oi.forEach((r,l)=>n(l)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),pe.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new to(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.Tr(n),pe.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,r){let l=0;const u=[];return this.oi.forEach((f,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)}),pe.waitFor(u).next(()=>l)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return pe.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),pe.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach(f=>{u.push(l.markPotentiallyOrphaned(e,f))}),pe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return pe.resolve(r)}containsKey(e,n){return pe.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.ci={},this.overlays={},this.li=new Cd(0),this.hi=!1,this.hi=!0,this.Pi=new y2,this.referenceDelegate=e(this),this.Ti=new S2(this),this.indexManager=new s2,this.remoteDocumentCache=function(l){return new b2(l)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new a2(n),this.Ei=new g2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new v2(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){xe("MemoryPersistence","Starting transaction:",e);const l=new T2(this.li.next());return this.referenceDelegate.di(),r(l).next(u=>this.referenceDelegate.Ai(l).next(()=>u)).toPromise().then(u=>(l.raiseOnCommittedEvent(),u))}Ri(e,n){return pe.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class T2 extends ZC{constructor(e){super(),this.currentSequenceNumber=e}}class Zm{constructor(e){this.persistence=e,this.Vi=new Xm,this.mi=null}static fi(e){return new Zm(e)}get gi(){if(this.mi)return this.mi;throw Ge(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),pe.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(l=>this.gi.add(l.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(l=>{l.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.gi,r=>{const l=Be.fromPath(r);return this.pi(e,l).next(u=>{u||n.removeEntry(l,$e.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return pe.or([()=>pe.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class _d{constructor(e,n){this.persistence=e,this.yi=new Xs(r=>ex(r.path),(r,l)=>r.isEqual(l)),this.garbageCollector=f2(this,n)}static fi(e,n){return new _d(e,n)}di(){}Ai(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(l=>r+l))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return pe.forEach(this.yi,(r,l)=>this.Dr(e,r,l).next(u=>u?pe.resolve():n(l)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.si(e,f=>this.Dr(e,f,n).next(g=>{g||(r++,u.removeEntry(f,$e.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),pe.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$c(e.data.value)),n}Dr(e,n,r){return pe.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.yi.get(n);return pe.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.ds=r,this.As=l}static Rs(e,n){let r=ot(),l=ot();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Wm(e,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return ZT()?8:WC(Qn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,l){const u={result:null};return this.ws(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.Ss(e,n,l,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new w2;return this.bs(e,n,f).next(g=>{if(u.result=g,this.fs)return this.Ds(e,n,f,g.size)})}).next(()=>u.result)}Ds(e,n,r,l){return r.documentReadCount<this.gs?(ql()<=lt.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",zl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),pe.resolve()):(ql()<=lt.DEBUG&&xe("QueryEngine","Query:",zl(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.ps*l?(ql()<=lt.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",zl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Na(n))):pe.resolve())}ws(e,n){if(Pv(n))return pe.resolve(null);let r=Na(n);return this.indexManager.getIndexType(e,r).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=dm(n,null,"F"),r=Na(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const f=ot(...u);return this.ys.getDocuments(e,f).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const p=this.vs(n,g);return this.Cs(n,p,f,v.readTime)?this.ws(e,dm(n,null,"F")):this.Fs(e,p,n,v)}))})))}Ss(e,n,r,l){return Pv(n)||l.isEqual($e.min())?pe.resolve(null):this.ys.getDocuments(e,r).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,r,l)?pe.resolve(null):(ql()<=lt.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),zl(n)),this.Fs(e,f,n,YC(l,_u)).next(g=>g))})}vs(e,n){let r=new yn(jb(e));return n.forEach((l,u)=>{Nd(e,u)&&(r=r.add(u))}),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}bs(e,n,r){return ql()<=lt.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",zl(n)),this.ys.getDocumentsMatchingQuery(e,n,ss.min(),r)}Fs(e,n,r,l){return this.ys.getDocumentsMatchingQuery(e,r,l).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",C2=3e8;class x2{constructor(e,n,r,l){this.persistence=e,this.Ms=n,this.serializer=l,this.xs=new $t(it),this.Os=new Xs(u=>Hm(u),Fm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p2(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function I2(a,e,n,r){return new x2(a,e,n,r)}async function oE(a,e){const n=Ze(a);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next(u=>(l=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],g=[];let v=ot();for(const p of l){f.push(p.batchId);for(const S of p.mutations)v=v.add(S.key)}for(const p of u){g.push(p.batchId);for(const S of p.mutations)v=v.add(S.key)}return n.localDocuments.getDocuments(r,v).next(p=>({ks:p,removedBatchIds:f,addedBatchIds:g}))})})}function R2(a,e){const n=Ze(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const l=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,v,p,S){const A=p.batch,N=A.keys();let L=pe.resolve();return N.forEach(X=>{L=L.next(()=>S.getEntry(v,X)).next(Y=>{const Z=p.docVersions.get(X);Tt(Z!==null,48541),Y.version.compareTo(Z)<0&&(A.applyToRemoteDocument(Y,p),Y.isValidDocument()&&(Y.setReadTime(p.commitVersion),S.addEntry(Y)))})}),L.next(()=>g.mutationQueue.removeMutationBatch(v,A))}(n,r,e,u).next(()=>u.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let v=ot();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(v=v.add(g.batch.mutations[p].key));return v}(e))).next(()=>n.localDocuments.getDocuments(r,l))})}function uE(a){const e=Ze(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function k2(a,e){const n=Ze(a),r=e.snapshotVersion;let l=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});l=n.xs;const g=[];e.targetChanges.forEach((S,A)=>{const N=l.get(A);if(!N)return;g.push(n.Ti.removeMatchingKeys(u,S.removedDocuments,A).next(()=>n.Ti.addMatchingKeys(u,S.addedDocuments,A)));let L=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?L=L.withResumeToken(Ln.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):S.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(S.resumeToken,r)),l=l.insert(A,L),function(Y,Z,re){return Y.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=C2?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(N,L,S)&&g.push(n.Ti.updateTargetData(u,L))});let v=cr(),p=ot();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,S))}),g.push(N2(u,f,e.documentUpdates).next(S=>{v=S.qs,p=S.Qs})),!r.isEqual($e.min())){const S=n.Ti.getLastRemoteSnapshotVersion(u).next(A=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(S)}return pe.waitFor(g).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,v,p)).next(()=>v)}).then(u=>(n.xs=l,u))}function N2(a,e,n){let r=ot(),l=ot();return n.forEach(u=>r=r.add(u)),e.getEntries(a,r).next(u=>{let f=cr();return n.forEach((g,v)=>{const p=u.get(g);v.isFoundDocument()!==p.isFoundDocument()&&(l=l.add(g)),v.isNoDocument()&&v.version.isEqual($e.min())?(e.removeEntry(g,v.readTime),f=f.insert(g,v)):!p.isValidDocument()||v.version.compareTo(p.version)>0||v.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(v),f=f.insert(g,v)):xe(Jm,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",v.version)}),{qs:f,Qs:l}})}function D2(a,e){const n=Ze(a);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Bm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function O2(a,e){const n=Ze(a);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let l;return n.Ti.getTargetData(r,e).next(u=>u?(l=u,pe.resolve(l)):n.Ti.allocateTargetId(r).next(f=>(l=new es(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,l).next(()=>l))))}).then(r=>{const l=n.xs.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function gm(a,e,n){const r=Ze(a),l=r.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,l))}catch(f){if(!oo(f))throw f;xe(Jm,`Failed to update sequence numbers for target ${e}: ${f}`)}r.xs=r.xs.remove(e),r.Os.delete(l.target)}function Yv(a,e,n){const r=Ze(a);let l=$e.min(),u=ot();return r.persistence.runTransaction("Execute query","readwrite",f=>function(v,p,S){const A=Ze(v),N=A.Os.get(S);return N!==void 0?pe.resolve(A.xs.get(N)):A.Ti.getTargetData(p,S)}(r,f,Na(e)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(f,g.targetId).next(v=>{u=v})}).next(()=>r.Ms.getDocumentsMatchingQuery(f,e,n?l:$e.min(),n?u:ot())).next(g=>(P2(r,bx(e),g),{documents:g,$s:u})))}function P2(a,e,n){let r=a.Ns.get(e)||$e.min();n.forEach((l,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),a.Ns.set(e,r)}class Qv{constructor(){this.activeTargetIds=Cx()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class M2{constructor(){this.xo=new Qv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Qv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="ConnectivityMonitor";class Xv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){xe($v,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){xe($v,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc=null;function _m(){return qc===null?qc=function(){return 268435456+Math.round(2147483648*Math.random())}():qc++,"0x"+qc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="RestConnection",L2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${l}`,this.Go=this.databaseId.database===cd?`project_id=${r}`:`project_id=${r}&database_id=${l}`}zo(e,n,r,l,u){const f=_m(),g=this.jo(e,n.toUriEncodedString());xe(Hh,`Sending RPC '${e}' ${f}:`,g,r);const v={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(v,l,u);const{host:p}=new URL(g),S=Au(p);return this.Jo(e,g,v,r,S).then(A=>(xe(Hh,`Received RPC '${e}' ${f}: `,A),A),A=>{throw Zl(Hh,`RPC '${e}' ${f} failed with error: `,A,"url: ",g,"request:",r),A})}Yo(e,n,r,l,u,f){return this.zo(e,n,r,l,u)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+so}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,u)=>e[u]=l),r&&r.headers.forEach((l,u)=>e[u]=l)}jo(e,n){const r=L2[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn="WebChannelConnection";class B2 extends j2{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,u){const f=_m();return new Promise((g,v)=>{const p=new fb;p.setWithCredentials(!0),p.listenOnce(hb.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Qc.NO_ERROR:const A=p.getResponseJson();xe(Gn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),g(A);break;case Qc.TIMEOUT:xe(Gn,`RPC '${e}' ${f} timed out`),v(new Ue(ye.DEADLINE_EXCEEDED,"Request time out"));break;case Qc.HTTP_ERROR:const N=p.getStatus();if(xe(Gn,`RPC '${e}' ${f} failed with status:`,N,"response text:",p.getResponseText()),N>0){let L=p.getResponseJson();Array.isArray(L)&&(L=L[0]);const X=L==null?void 0:L.error;if(X&&X.status&&X.message){const Y=function(re){const he=re.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(he)>=0?he:ye.UNKNOWN}(X.status);v(new Ue(Y,X.message))}else v(new Ue(ye.UNKNOWN,"Server responded with status "+p.getStatus()))}else v(new Ue(ye.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{xe(Gn,`RPC '${e}' ${f} completed.`)}});const S=JSON.stringify(l);xe(Gn,`RPC '${e}' ${f} sending request:`,l),p.send(n,"POST",S,r,15)})}T_(e,n,r){const l=_m(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=gb(),g=pb(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(v.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Ho(v.initMessageHeaders,n,r),v.encodeInitMessageHeaders=!0;const S=u.join("");xe(Gn,`Creating RPC '${e}' stream ${l}: ${S}`,v);const A=f.createWebChannel(S,v);let N=!1,L=!1;const X=new U2({Zo:Z=>{L?xe(Gn,`Not sending because RPC '${e}' stream ${l} is closed:`,Z):(N||(xe(Gn,`Opening RPC '${e}' stream ${l} transport.`),A.open(),N=!0),xe(Gn,`RPC '${e}' stream ${l} sending:`,Z),A.send(Z))},Xo:()=>A.close()}),Y=(Z,re,he)=>{Z.listen(re,ve=>{try{he(ve)}catch(ie){setTimeout(()=>{throw ie},0)}})};return Y(A,au.EventType.OPEN,()=>{L||(xe(Gn,`RPC '${e}' stream ${l} transport opened.`),X.__())}),Y(A,au.EventType.CLOSE,()=>{L||(L=!0,xe(Gn,`RPC '${e}' stream ${l} transport closed`),X.u_())}),Y(A,au.EventType.ERROR,Z=>{L||(L=!0,Zl(Gn,`RPC '${e}' stream ${l} transport errored. Name:`,Z.name,"Message:",Z.message),X.u_(new Ue(ye.UNAVAILABLE,"The operation could not be completed")))}),Y(A,au.EventType.MESSAGE,Z=>{var re;if(!L){const he=Z.data[0];Tt(!!he,16349);const ve=he,ie=(ve==null?void 0:ve.error)||((re=ve[0])===null||re===void 0?void 0:re.error);if(ie){xe(Gn,`RPC '${e}' stream ${l} received error:`,ie);const H=ie.status;let ue=function(O){const x=cn[O];if(x!==void 0)return Xb(x)}(H),C=ie.message;ue===void 0&&(ue=ye.INTERNAL,C="Unknown error status: "+H+" with message "+ie.message),L=!0,X.u_(new Ue(ue,C)),A.close()}else xe(Gn,`RPC '${e}' stream ${l} received:`,he),X.c_(he)}}),Y(g,mb.STAT_EVENT,Z=>{Z.stat===rm.PROXY?xe(Gn,`RPC '${e}' stream ${l} detected buffering proxy`):Z.stat===rm.NOPROXY&&xe(Gn,`RPC '${e}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{X.a_()},0),X}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(a){return new Fx(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r=1e3,l=1.5,u=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=l,this.d_=u,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),l=Math.max(0,n-r);l>0&&xe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,l,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="PersistentStream";class dE{constructor(e,n,r,l,u,f,g,v){this.xi=e,this.y_=r,this.w_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new cE(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,l])=>{this.S_===n&&this.K_(r,l)},r=>{e(()=>{const l=new Ue(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(l)})})}K_(e,n){const r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(l=>{r(()=>this.W_(l))}),this.stream.onMessage(l=>{r(()=>++this.v_==1?this.z_(l):this.onNext(l))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return xe(Zv,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(xe(Zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class q2 extends dE{constructor(e,n,r,l,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=Yx(this.serializer,e),r=function(u){if(!("targetChange"in u))return $e.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?$e.min():f.readTime?Da(f.readTime):$e.min()}(e);return this.listener.j_(n,r)}H_(e){const n={};n.database=pm(this.serializer),n.addTarget=function(u,f){let g;const v=f.target;if(g=cm(v)?{documents:Xx(u,v)}:{query:Zx(u,v).gt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=Jb(u,f.resumeToken);const p=fm(u,f.expectedCount);p!==null&&(g.expectedCount=p)}else if(f.snapshotVersion.compareTo($e.min())>0){g.readTime=gd(u,f.snapshotVersion.toTimestamp());const p=fm(u,f.expectedCount);p!==null&&(g.expectedCount=p)}return g}(this.serializer,e);const r=Jx(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){const n={};n.database=pm(this.serializer),n.removeTarget=e,this.L_(n)}}class z2 extends dE{constructor(e,n,r,l,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,f),this.serializer=u}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=$x(e.writeResults,e.commitTime),r=Da(e.commitTime);return this.listener.ea(r,n)}ta(){const e={};e.database=pm(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Qx(this.serializer,r))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{}class F2 extends H2{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.na=!1}ra(){if(this.na)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,l){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(e,hm(n,r),l,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ue(ye.UNKNOWN,u.toString())})}Yo(e,n,r,l,u){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Yo(e,hm(n,r),l,f,g,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ue(ye.UNKNOWN,f.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class G2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(ur(n),this.oa=!1):xe("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class K2{constructor(e,n,r,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=u,this.Ea.No(f=>{r.enqueueAndForget(async()=>{Ws(this)&&(xe(Qs,"Restarting streams for network reachability change."),await async function(v){const p=Ze(v);p.Ta.add(4),await Pu(p),p.da.set("Unknown"),p.Ta.delete(4),await Vd(p)}(this))})}),this.da=new G2(r,l)}}async function Vd(a){if(Ws(a))for(const e of a.Ia)await e(!0)}async function Pu(a){for(const e of a.Ia)await e(!1)}function fE(a,e){const n=Ze(a);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),ip(n)?np(n):uo(n).M_()&&tp(n,e))}function ep(a,e){const n=Ze(a),r=uo(n);n.Pa.delete(e),r.M_()&&hE(n,e),n.Pa.size===0&&(r.M_()?r.N_():Ws(n)&&n.da.set("Unknown"))}function tp(a,e){if(a.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(a).H_(e)}function hE(a,e){a.Aa.Ke(e),uo(a).J_(e)}function np(a){a.Aa=new Bx({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>a.Pa.get(e)||null,Pt:()=>a.datastore.serializer.databaseId}),uo(a).start(),a.da._a()}function ip(a){return Ws(a)&&!uo(a).F_()&&a.Pa.size>0}function Ws(a){return Ze(a).Ta.size===0}function mE(a){a.Aa=void 0}async function Y2(a){a.da.set("Online")}async function Q2(a){a.Pa.forEach((e,n)=>{tp(a,e)})}async function $2(a,e){mE(a),ip(a)?(a.da.ca(e),np(a)):a.da.set("Unknown")}async function X2(a,e,n){if(a.da.set("Online"),e instanceof Wb&&e.state===2&&e.cause)try{await async function(l,u){const f=u.cause;for(const g of u.targetIds)l.Pa.has(g)&&(await l.remoteSyncer.rejectListen(g,f),l.Pa.delete(g),l.Aa.removeTarget(g))}(a,e)}catch(r){xe(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yd(a,r)}else if(e instanceof Wc?a.Aa.Xe(e):e instanceof Zb?a.Aa.ot(e):a.Aa.nt(e),!n.isEqual($e.min()))try{const r=await uE(a.localStore);n.compareTo(r)>=0&&await function(u,f){const g=u.Aa.It(f);return g.targetChanges.forEach((v,p)=>{if(v.resumeToken.approximateByteSize()>0){const S=u.Pa.get(p);S&&u.Pa.set(p,S.withResumeToken(v.resumeToken,f))}}),g.targetMismatches.forEach((v,p)=>{const S=u.Pa.get(v);if(!S)return;u.Pa.set(v,S.withResumeToken(Ln.EMPTY_BYTE_STRING,S.snapshotVersion)),hE(u,v);const A=new es(S.target,v,p,S.sequenceNumber);tp(u,A)}),u.remoteSyncer.applyRemoteEvent(g)}(a,n)}catch(r){xe(Qs,"Failed to raise snapshot:",r),await yd(a,r)}}async function yd(a,e,n){if(!oo(e))throw e;a.Ta.add(1),await Pu(a),a.da.set("Offline"),n||(n=()=>uE(a.localStore)),a.asyncQueue.enqueueRetryable(async()=>{xe(Qs,"Retrying IndexedDB access"),await n(),a.Ta.delete(1),await Vd(a)})}function pE(a,e){return e().catch(n=>yd(a,n,e))}async function Ld(a){const e=Ze(a),n=cs(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:Bm;for(;Z2(e);)try{const l=await D2(e.localStore,r);if(l===null){e.ha.length===0&&n.N_();break}r=l.batchId,W2(e,l)}catch(l){await yd(e,l)}gE(e)&&_E(e)}function Z2(a){return Ws(a)&&a.ha.length<10}function W2(a,e){a.ha.push(e);const n=cs(a);n.M_()&&n.Y_&&n.Z_(e.mutations)}function gE(a){return Ws(a)&&!cs(a).F_()&&a.ha.length>0}function _E(a){cs(a).start()}async function J2(a){cs(a).ta()}async function eI(a){const e=cs(a);for(const n of a.ha)e.Z_(n.mutations)}async function tI(a,e,n){const r=a.ha.shift(),l=Ym.from(r,e,n);await pE(a,()=>a.remoteSyncer.applySuccessfulWrite(l)),await Ld(a)}async function nI(a,e){e&&cs(a).Y_&&await async function(r,l){if(function(f){return jx(f)&&f!==ye.ABORTED}(l.code)){const u=r.ha.shift();cs(r).O_(),await pE(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,l)),await Ld(r)}}(a,e),gE(a)&&_E(a)}async function Wv(a,e){const n=Ze(a);n.asyncQueue.verifyOperationInProgress(),xe(Qs,"RemoteStore received new credentials");const r=Ws(n);n.Ta.add(3),await Pu(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await Vd(n)}async function iI(a,e){const n=Ze(a);e?(n.Ta.delete(2),await Vd(n)):e||(n.Ta.add(2),await Pu(n),n.da.set("Unknown"))}function uo(a){return a.Ra||(a.Ra=function(n,r,l){const u=Ze(n);return u.ra(),new q2(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)}(a.datastore,a.asyncQueue,{e_:Y2.bind(null,a),n_:Q2.bind(null,a),i_:$2.bind(null,a),j_:X2.bind(null,a)}),a.Ia.push(async e=>{e?(a.Ra.O_(),ip(a)?np(a):a.da.set("Unknown")):(await a.Ra.stop(),mE(a))})),a.Ra}function cs(a){return a.Va||(a.Va=function(n,r,l){const u=Ze(n);return u.ra(),new z2(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)}(a.datastore,a.asyncQueue,{e_:()=>Promise.resolve(),n_:J2.bind(null,a),i_:nI.bind(null,a),X_:eI.bind(null,a),ea:tI.bind(null,a)}),a.Ia.push(async e=>{e?(a.Va.O_(),await Ld(a)):(await a.Va.stop(),a.ha.length>0&&(xe(Qs,`Stopping write stream with ${a.ha.length} pending writes`),a.ha=[]))})),a.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=u,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,u){const f=Date.now()+r,g=new ap(e,n,f,l,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rp(a,e){if(ur("AsyncQueue",`${e}: ${a}`),oo(a))return new Ue(ye.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{static emptySet(e){return new $l(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Be.comparator(n.key,r.key):(n,r)=>Be.comparator(n.key,r.key),this.keyedMap=ru(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $l)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=r.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $l;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.ma=new $t(Be.comparator)}track(e){const n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):Ge(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}}class no{constructor(e,n,r,l,u,f,g,v,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,l,u){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new no(e,n,$l.emptySet(n),f,r,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class rI{constructor(){this.queries=e0(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const l=Ze(n),u=l.queries;l.queries=e0(),u.forEach((f,g)=>{for(const v of g.ya)v.onError(r)})})(this,new Ue(ye.ABORTED,"Firestore shutting down"))}}function e0(){return new Xs(a=>Lb(a),kd)}async function sI(a,e){const n=Ze(a);let r=3;const l=e.query;let u=n.queries.get(l);u?!u.wa()&&e.Sa()&&(r=2):(u=new aI,r=e.Sa()?0:1);try{switch(r){case 0:u.pa=await n.onListen(l,!0);break;case 1:u.pa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const g=rp(f,`Initialization of query '${zl(e.query)}' failed`);return void e.onError(g)}n.queries.set(l,u),u.ya.push(e),e.Da(n.onlineState),u.pa&&e.va(u.pa)&&sp(n)}async function lI(a,e){const n=Ze(a),r=e.query;let l=3;const u=n.queries.get(r);if(u){const f=u.ya.indexOf(e);f>=0&&(u.ya.splice(f,1),u.ya.length===0?l=e.Sa()?0:1:!u.wa()&&e.Sa()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oI(a,e){const n=Ze(a);let r=!1;for(const l of e){const u=l.query,f=n.queries.get(u);if(f){for(const g of f.ya)g.va(l)&&(r=!0);f.pa=l}}r&&sp(n)}function uI(a,e,n){const r=Ze(a),l=r.queries.get(e);if(l)for(const u of l.ya)u.onError(n);r.queries.delete(e)}function sp(a){a.ba.forEach(e=>{e.next()})}var ym,t0;(t0=ym||(ym={})).Ca="default",t0.Cache="cache";class cI{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new no(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=no.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e){this.key=e}}class vE{constructor(e){this.key=e}}class dI{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=ot(),this.mutatedKeys=ot(),this.Ha=jb(e),this.Ja=new $l(this.Ha)}get Ya(){return this.Ga}Za(e,n){const r=n?n.Xa:new Jv,l=n?n.Ja:this.Ja;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,g=!1;const v=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,p=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((S,A)=>{const N=l.get(S),L=Nd(this.query,A)?A:null,X=!!N&&this.mutatedKeys.has(N.key),Y=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let Z=!1;N&&L?N.data.isEqual(L.data)?X!==Y&&(r.track({type:3,doc:L}),Z=!0):this.eu(N,L)||(r.track({type:2,doc:L}),Z=!0,(v&&this.Ha(L,v)>0||p&&this.Ha(L,p)<0)&&(g=!0)):!N&&L?(r.track({type:0,doc:L}),Z=!0):N&&!L&&(r.track({type:1,doc:N}),Z=!0,(v||p)&&(g=!0)),Z&&(L?(f=f.add(L),u=Y?u.add(S):u.delete(S)):(f=f.delete(S),u=u.delete(S)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Ja:f,Xa:r,Cs:g,mutatedKeys:u}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const u=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const f=e.Xa.ga();f.sort((S,A)=>function(L,X){const Y=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:Z})}};return Y(L)-Y(X)}(S.type,A.type)||this.Ha(S.doc,A.doc)),this.tu(r),l=l!=null&&l;const g=n&&!l?this.nu():[],v=this.ja.size===0&&this.current&&!l?1:0,p=v!==this.za;return this.za=v,f.length!==0||p?{snapshot:new no(this.query,e.Ja,u,f,e.mutatedKeys,v===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:g}:{ru:g}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Jv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=ot(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new vE(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new yE(r))}),n}su(e){this.Ga=e.$s,this.ja=ot();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return no.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const lp="SyncEngine";class fI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hI{constructor(e){this.key=e,this._u=!1}}class mI{constructor(e,n,r,l,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.au={},this.uu=new Xs(g=>Lb(g),kd),this.cu=new Map,this.lu=new Set,this.hu=new $t(Be.comparator),this.Pu=new Map,this.Tu=new Xm,this.Iu={},this.Eu=new Map,this.du=to.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function pI(a,e,n=!0){const r=AE(a);let l;const u=r.uu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.ou()):l=await bE(r,e,n,!0),l}async function gI(a,e){const n=AE(a);await bE(n,e,!0,!1)}async function bE(a,e,n,r){const l=await O2(a.localStore,Na(e)),u=l.targetId,f=a.sharedClientState.addLocalQueryTarget(u,n);let g;return r&&(g=await _I(a,e,u,f==="current",l.resumeToken)),a.isPrimaryClient&&n&&fE(a.remoteStore,l),g}async function _I(a,e,n,r,l){a.Ru=(A,N,L)=>async function(Y,Z,re,he){let ve=Z.view.Za(re);ve.Cs&&(ve=await Yv(Y.localStore,Z.query,!1).then(({documents:C})=>Z.view.Za(C,ve)));const ie=he&&he.targetChanges.get(Z.targetId),H=he&&he.targetMismatches.get(Z.targetId)!=null,ue=Z.view.applyChanges(ve,Y.isPrimaryClient,ie,H);return i0(Y,Z.targetId,ue.ru),ue.snapshot}(a,A,N,L);const u=await Yv(a.localStore,e,!0),f=new dI(e,u.$s),g=f.Za(u.documents),v=Ou.createSynthesizedTargetChangeForCurrentChange(n,r&&a.onlineState!=="Offline",l),p=f.applyChanges(g,a.isPrimaryClient,v);i0(a,n,p.ru);const S=new fI(e,n,f);return a.uu.set(e,S),a.cu.has(n)?a.cu.get(n).push(e):a.cu.set(n,[e]),p.snapshot}async function yI(a,e,n){const r=Ze(a),l=r.uu.get(e),u=r.cu.get(l.targetId);if(u.length>1)return r.cu.set(l.targetId,u.filter(f=>!kd(f,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await gm(r.localStore,l.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(l.targetId),n&&ep(r.remoteStore,l.targetId),vm(r,l.targetId)}).catch(lo)):(vm(r,l.targetId),await gm(r.localStore,l.targetId,!0))}async function vI(a,e){const n=Ze(a),r=n.uu.get(e),l=n.cu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ep(n.remoteStore,r.targetId))}async function bI(a,e,n){const r=xI(a);try{const l=await function(f,g){const v=Ze(f),p=dn.now(),S=g.reduce((L,X)=>L.add(X.key),ot());let A,N;return v.persistence.runTransaction("Locally write mutations","readwrite",L=>{let X=cr(),Y=ot();return v.Bs.getEntries(L,S).next(Z=>{X=Z,X.forEach((re,he)=>{he.isValidDocument()||(Y=Y.add(re))})}).next(()=>v.localDocuments.getOverlayedDocuments(L,X)).next(Z=>{A=Z;const re=[];for(const he of g){const ve=Ox(he,A.get(he.key).overlayedDocument);ve!=null&&re.push(new Zs(he.key,ve,kb(ve.value.mapValue),sr.exists(!0)))}return v.mutationQueue.addMutationBatch(L,p,re,g)}).next(Z=>{N=Z;const re=Z.applyToLocalDocumentSet(A,Y);return v.documentOverlayCache.saveOverlays(L,Z.batchId,re)})}).then(()=>({batchId:N.batchId,changes:Bb(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),function(f,g,v){let p=f.Iu[f.currentUser.toKey()];p||(p=new $t(it)),p=p.insert(g,v),f.Iu[f.currentUser.toKey()]=p}(r,l.batchId,n),await Mu(r,l.changes),await Ld(r.remoteStore)}catch(l){const u=rp(l,"Failed to persist write");n.reject(u)}}async function EE(a,e){const n=Ze(a);try{const r=await k2(n.localStore,e);e.targetChanges.forEach((l,u)=>{const f=n.Pu.get(u);f&&(Tt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f._u=!0:l.modifiedDocuments.size>0?Tt(f._u,14607):l.removedDocuments.size>0&&(Tt(f._u,42227),f._u=!1))}),await Mu(n,r,e)}catch(r){await lo(r)}}function n0(a,e,n){const r=Ze(a);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.uu.forEach((u,f)=>{const g=f.view.Da(e);g.snapshot&&l.push(g.snapshot)}),function(f,g){const v=Ze(f);v.onlineState=g;let p=!1;v.queries.forEach((S,A)=>{for(const N of A.ya)N.Da(g)&&(p=!0)}),p&&sp(v)}(r.eventManager,e),l.length&&r.au.j_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EI(a,e,n){const r=Ze(a);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Pu.get(e),u=l&&l.key;if(u){let f=new $t(Be.comparator);f=f.insert(u,Yn.newNoDocument(u,$e.min()));const g=ot().add(u),v=new Pd($e.min(),new Map,new $t(it),f,g);await EE(r,v),r.hu=r.hu.remove(u),r.Pu.delete(e),op(r)}else await gm(r.localStore,e,!1).then(()=>vm(r,e,n)).catch(lo)}async function SI(a,e){const n=Ze(a),r=e.batch.batchId;try{const l=await R2(n.localStore,e);TE(n,r,null),SE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mu(n,l)}catch(l){await lo(l)}}async function TI(a,e,n){const r=Ze(a);try{const l=await function(f,g){const v=Ze(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let S;return v.mutationQueue.lookupMutationBatch(p,g).next(A=>(Tt(A!==null,37113),S=A.keys(),v.mutationQueue.removeMutationBatch(p,A))).next(()=>v.mutationQueue.performConsistencyCheck(p)).next(()=>v.documentOverlayCache.removeOverlaysForBatchId(p,S,g)).next(()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,S)).next(()=>v.localDocuments.getDocuments(p,S))})}(r.localStore,e);TE(r,e,n),SE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mu(r,l)}catch(l){await lo(l)}}function SE(a,e){(a.Eu.get(e)||[]).forEach(n=>{n.resolve()}),a.Eu.delete(e)}function TE(a,e,n){const r=Ze(a);let l=r.Iu[r.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),r.Iu[r.currentUser.toKey()]=l}}function vm(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const r of a.cu.get(e))a.uu.delete(r),n&&a.au.Vu(r,n);a.cu.delete(e),a.isPrimaryClient&&a.Tu.Hr(e).forEach(r=>{a.Tu.containsKey(r)||wE(a,r)})}function wE(a,e){a.lu.delete(e.path.canonicalString());const n=a.hu.get(e);n!==null&&(ep(a.remoteStore,n),a.hu=a.hu.remove(e),a.Pu.delete(n),op(a))}function i0(a,e,n){for(const r of n)r instanceof yE?(a.Tu.addReference(r.key,e),wI(a,r)):r instanceof vE?(xe(lp,"Document no longer in limbo: "+r.key),a.Tu.removeReference(r.key,e),a.Tu.containsKey(r.key)||wE(a,r.key)):Ge(19791,{mu:r})}function wI(a,e){const n=e.key,r=n.path.canonicalString();a.hu.get(n)||a.lu.has(r)||(xe(lp,"New document in limbo: "+n),a.lu.add(r),op(a))}function op(a){for(;a.lu.size>0&&a.hu.size<a.maxConcurrentLimboResolutions;){const e=a.lu.values().next().value;a.lu.delete(e);const n=new Be(en.fromString(e)),r=a.du.next();a.Pu.set(r,new hI(n)),a.hu=a.hu.insert(n,r),fE(a.remoteStore,new es(Na(Gm(n.path)),r,"TargetPurposeLimboResolution",Cd.le))}}async function Mu(a,e,n){const r=Ze(a),l=[],u=[],f=[];r.uu.isEmpty()||(r.uu.forEach((g,v)=>{f.push(r.Ru(v,e,n).then(p=>{var S;if((p||n)&&r.isPrimaryClient){const A=p?!p.fromCache:(S=n==null?void 0:n.targetChanges.get(v.targetId))===null||S===void 0?void 0:S.current;r.sharedClientState.updateQueryState(v.targetId,A?"current":"not-current")}if(p){l.push(p);const A=Wm.Rs(v.targetId,p);u.push(A)}}))}),await Promise.all(f),r.au.j_(l),await async function(v,p){const S=Ze(v);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>pe.forEach(p,N=>pe.forEach(N.ds,L=>S.persistence.referenceDelegate.addReference(A,N.targetId,L)).next(()=>pe.forEach(N.As,L=>S.persistence.referenceDelegate.removeReference(A,N.targetId,L)))))}catch(A){if(!oo(A))throw A;xe(Jm,"Failed to update sequence numbers: "+A)}for(const A of p){const N=A.targetId;if(!A.fromCache){const L=S.xs.get(N),X=L.snapshotVersion,Y=L.withLastLimboFreeSnapshotVersion(X);S.xs=S.xs.insert(N,Y)}}}(r.localStore,u))}async function AI(a,e){const n=Ze(a);if(!n.currentUser.isEqual(e)){xe(lp,"User change. New user:",e.toKey());const r=await oE(n.localStore,e);n.currentUser=e,function(u,f){u.Eu.forEach(g=>{g.forEach(v=>{v.reject(new Ue(ye.CANCELLED,f))})}),u.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mu(n,r.ks)}}function CI(a,e){const n=Ze(a),r=n.Pu.get(e);if(r&&r._u)return ot().add(r.key);{let l=ot();const u=n.cu.get(e);if(!u)return l;for(const f of u){const g=n.uu.get(f);l=l.unionWith(g.view.Ya)}return l}}function AE(a){const e=Ze(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=EE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EI.bind(null,e),e.au.j_=oI.bind(null,e.eventManager),e.au.Vu=uI.bind(null,e.eventManager),e}function xI(a){const e=Ze(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TI.bind(null,e),e}class vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Md(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return I2(this.persistence,new A2,e.initialUser,this.serializer)}yu(e){return new lE(Zm.fi,this.serializer)}pu(e){return new M2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vd.provider={build:()=>new vd};class II extends vd{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){Tt(this.persistence.referenceDelegate instanceof _d,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new c2(r,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?di.withCacheSize(this.cacheSizeBytes):di.DEFAULT;return new lE(r=>_d.fi(r,n),this.serializer)}}class bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AI.bind(null,this.syncEngine),await iI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new rI}()}createDatastore(e){const n=Md(e.databaseInfo.databaseId),r=function(u){return new B2(u)}(e.databaseInfo);return function(u,f,g,v){return new F2(u,f,g,v)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,l,u,f,g){return new K2(r,l,u,f,g)}(this.localStore,this.datastore,e.asyncQueue,n=>n0(this.syncEngine,n,0),function(){return Xv.C()?new Xv:new V2}())}createSyncEngine(e,n){return function(l,u,f,g,v,p,S){const A=new mI(l,u,f,g,v,p);return S&&(A.Au=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(l){const u=Ze(l);xe(Qs,"RemoteStore shutting down."),u.Ta.add(5),await Pu(u),u.Ea.shutdown(),u.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bm.provider={build:()=>new bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class kI{constructor(e,n,r,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=Kn.UNAUTHENTICATED,this.clientId=bb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{xe(ds,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(xe(ds,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gh(a,e){a.asyncQueue.verifyOperationInProgress(),xe(ds,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let r=n.initialUser;a.setCredentialChangeListener(async l=>{r.isEqual(l)||(await oE(e.localStore,l),r=l)}),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}async function a0(a,e){a.asyncQueue.verifyOperationInProgress();const n=await NI(a);xe(ds,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener(r=>Wv(e.remoteStore,r)),a.setAppCheckTokenChangeListener((r,l)=>Wv(e.remoteStore,l)),a._onlineComponents=e}async function NI(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){xe(ds,"Using user provided OfflineComponentProvider");try{await Gh(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(l){return l.name==="FirebaseError"?l.code===ye.FAILED_PRECONDITION||l.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;Zl("Error using user provided cache. Falling back to memory cache: "+n),await Gh(a,new vd)}}else xe(ds,"Using default OfflineComponentProvider"),await Gh(a,new II(void 0));return a._offlineComponents}async function CE(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(xe(ds,"Using user provided OnlineComponentProvider"),await a0(a,a._uninitializedComponentsProvider._online)):(xe(ds,"Using default OnlineComponentProvider"),await a0(a,new bm))),a._onlineComponents}function DI(a){return CE(a).then(e=>e.syncEngine)}async function OI(a){const e=await CE(a),n=e.eventManager;return n.onListen=pI.bind(null,e.syncEngine),n.onUnlisten=yI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vI.bind(null,e.syncEngine),n}function PI(a,e,n={}){const r=new rs;return a.asyncQueue.enqueueAndForget(async()=>function(u,f,g,v,p){const S=new RI({next:N=>{S.Cu(),f.enqueueAndForget(()=>lI(u,A));const L=N.docs.has(g);!L&&N.fromCache?p.reject(new Ue(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&v&&v.source==="server"?p.reject(new Ue(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(N)},error:N=>p.reject(N)}),A=new cI(Gm(g.path),S,{includeMetadataChanges:!0,La:!0});return sI(u,A)}(await OI(a),a.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(a,e,n){if(!n)throw new Ue(ye.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function VI(a,e,n,r){if(e===!0&&r===!0)throw new Ue(ye.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function s0(a){if(!Be.isDocumentKey(a))throw new Ue(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function up(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":Ge(12329,{type:typeof a})}function Tu(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Ue(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=up(a);throw new Ue(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="firestore.googleapis.com",l0=!0;class o0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IE,this.ssl=l0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:l0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o2)throw new Ue(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Ue(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Ue(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Ue(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,l){return r.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cp{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jC;switch(r.type){case"firstParty":return new zC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=r0.get(n);r&&(xe("ComponentProvider","Removing Datastore"),r0.delete(n),r.terminate())}(this),Promise.resolve()}}function LI(a,e,n,r={}){var l;a=Tu(a,cp);const u=Au(e),f=a._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:a._getEmulatorOptions()}),v=`${e}:${n}`;u&&(T0(`https://${v}`),w0("Firestore",!0)),f.host!==IE&&f.host!==v&&Zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},f),{host:v,ssl:u,emulatorOptions:r});if(!Hs(p,g)&&(a._setSettings(p),r.mockUserToken)){let S,A;if(typeof r.mockUserToken=="string")S=r.mockUserToken,A=Kn.MOCK_USER;else{S=zT(r.mockUserToken,(l=a._app)===null||l===void 0?void 0:l.options.projectId);const N=r.mockUserToken.sub||r.mockUserToken.user_id;if(!N)throw new Ue(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Kn(N)}a._authCredentials=new UC(new yb(S,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dp(this.firestore,e,this._query)}}class zi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zi(this.firestore,e,this._key)}}class wu extends dp{constructor(e,n,r){super(e,n,Gm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zi(this.firestore,null,new Be(e))}withConverter(e){return new wu(this.firestore,e,this._path)}}function fp(a,e,...n){if(a=xi(a),arguments.length===1&&(e=bb.newId()),MI("doc","path",e),a instanceof cp){const r=en.fromString(e,...n);return s0(r),new zi(a,null,new Be(r))}{if(!(a instanceof zi||a instanceof wu))throw new Ue(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=a._path.child(en.fromString(e,...n));return s0(r),new zi(a.firestore,a instanceof wu?a.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="AsyncQueue";class c0{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new cE(this,"async_queue_retry"),this.ec=()=>{const r=Fh();r&&xe(u0,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const n=Fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new rs;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!oo(e))throw e;xe(u0,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,ur("INTERNAL UNHANDLED ERROR: ",d0(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const l=ap.createAndSchedule(this,e,n,r,u=>this.oc(u));return this.Hu.push(l),l}nc(){this.Ju&&Ge(47125,{_c:d0(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function d0(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}class hp extends cp{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new c0,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c0(e),this._firestoreClient=void 0,await e}}}function jI(a,e){const n=typeof a=="object"?a:I0(),r=typeof a=="string"?a:cd,l=xm(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const u=BT("firestore");u&&LI(l,...u)}return l}function RE(a){if(a._terminated)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||UI(a),a._firestoreClient}function UI(a){var e,n,r;const l=a._freezeSettings(),u=function(g,v,p,S){return new ix(g,v,p,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,xE(S.experimentalLongPollingOptions),S.useFetchStreams,S.isUsingEmulator)}(a._databaseId,((e=a._app)===null||e===void 0?void 0:e.options.appId)||"",a._persistenceKey,l);a._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=l.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(a._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),a._firestoreClient=new kI(a._authCredentials,a._appCheckCredentials,a._queue,u,a._componentsProvider&&function(g){const v=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(v),_online:v}}(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new io(Ln.fromBase64String(e))}catch(n){throw new Ue(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new io(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ue(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,l){if(r.length!==l.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==l[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=/^__.*__$/;class qI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Du(e,this.data,n,this.fieldTransforms)}}function NE(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{hc:a})}}class _p{constructor(e,n,r,l,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,u===void 0&&this.Pc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new _p(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.Tc({path:r,Ec:!1});return l.dc(e),l}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),l=this.Tc({path:r,Ec:!1});return l.Pc(),l}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return bd(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(NE(this.hc)&&BI.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class zI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Md(e)}gc(e,n,r,l=!1){return new _p({hc:e,methodName:n,fc:r,path:Vn.emptyPath(),Ec:!1,mc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function HI(a){const e=a._freezeSettings(),n=Md(a._databaseId);return new zI(a._databaseId,!!e.ignoreUndefinedProperties,n)}function FI(a,e,n,r,l,u={}){const f=a.gc(u.merge||u.mergeFields?2:0,e,n,l);ME("Data must be an object, but it was:",f,r);const g=OE(r,f);let v,p;if(u.merge)v=new aa(f.fieldMask),p=f.fieldTransforms;else if(u.mergeFields){const S=[];for(const A of u.mergeFields){const N=GI(e,A,n);if(!f.contains(N))throw new Ue(ye.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);YI(S,N)||S.push(N)}v=new aa(S),p=f.fieldTransforms.filter(A=>v.covers(A.field))}else v=null,p=f.fieldTransforms;return new qI(new qi(g),v,p)}function DE(a,e){if(PE(a=xi(a)))return ME("Unsupported field value:",e,a),OE(a,e);if(a instanceof kE)return function(r,l){if(!NE(l.hc))throw l.Vc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Vc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(l);u&&l.fieldTransforms.push(u)}(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,l){const u=[];let f=0;for(const g of r){let v=DE(g,l.Rc(f));v==null&&(v={nullValue:"NULL_VALUE"}),u.push(v),f++}return{arrayValue:{values:u}}}(a,e)}return function(r,l){if((r=xi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xx(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=dn.fromDate(r);return{timestampValue:gd(l.serializer,u)}}if(r instanceof dn){const u=new dn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gd(l.serializer,u)}}if(r instanceof pp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof io)return{bytesValue:Jb(l.serializer,r._byteString)};if(r instanceof zi){const u=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw l.Vc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:$m(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof gp)return function(f,g){return{mapValue:{fields:{[Ib]:{stringValue:Rb},[dd]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw g.Vc("VectorValues must only contain numeric values.");return Km(g.serializer,p)})}}}}}}(r,l);throw l.Vc(`Unsupported field value: ${up(r)}`)}(a,e)}function OE(a,e){const n={};return Sb(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(a,(r,l)=>{const u=DE(l,e.Ic(r));u!=null&&(n[r]=u)}),{mapValue:{fields:n}}}function PE(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof dn||a instanceof pp||a instanceof io||a instanceof zi||a instanceof kE||a instanceof gp)}function ME(a,e,n){if(!PE(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const r=up(n);throw r==="an object"?e.Vc(a+" a custom object"):e.Vc(a+" "+r)}}function GI(a,e,n){if((e=xi(e))instanceof mp)return e._internalPath;if(typeof e=="string")return VE(a,e);throw bd("Field path arguments must be of type string or ",a,!1,void 0,n)}const KI=new RegExp("[~\\*/\\[\\]]");function VE(a,e,n){if(e.search(KI)>=0)throw bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new mp(...e.split("."))._internalPath}catch{throw bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function bd(a,e,n,r,l){const u=r&&!r.isEmpty(),f=l!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||f)&&(v+=" (found",u&&(v+=` in field ${r}`),f&&(v+=` in document ${l}`),v+=")"),new Ue(ye.INVALID_ARGUMENT,g+a+v)}function YI(a,e){return a.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n,r,l,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new zi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QI extends LE{data(){return super.data()}}function jE(a,e){return typeof e=="string"?VE(a,e):e instanceof mp?e._internalPath:e._delegate._internalPath}class $I{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $s(e,(l,u)=>{r[l]=this.convertValue(u,n)}),r}convertVectorValue(e){var n,r,l;const u=(l=(r=(n=e.fields)===null||n===void 0?void 0:n[dd].arrayValue)===null||r===void 0?void 0:r.values)===null||l===void 0?void 0:l.map(f=>sn(f.doubleValue));return new gp(u)}convertGeoPoint(e){return new pp(sn(e.latitude),sn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Id(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const n=ls(e);return new dn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=en.fromString(e);Tt(rE(r),9688,{name:e});const l=new vu(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return l.isEqual(n)||ur(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(a,e,n){let r;return r=a?a.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class UE extends LE{constructor(e,n,r,l,u,f){super(e,n,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new WI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class WI extends UE{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(a){a=Tu(a,zi);const e=Tu(a.firestore,hp);return PI(RE(e),a._key).then(n=>nR(e,a,n))}class JI extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new io(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zi(this.firestore,null,n)}}function eR(a,e,n){a=Tu(a,zi);const r=Tu(a.firestore,hp),l=XI(a.converter,e);return tR(r,[FI(HI(r),"setDoc",a._key,l,a.converter!==null,n).toMutation(a._key,sr.none())])}function tR(a,e){return function(r,l){const u=new rs;return r.asyncQueue.enqueueAndForget(async()=>bI(await DI(r),l,u)),u.promise}(RE(a),e)}function nR(a,e,n){const r=n.docs.get(e._key),l=new JI(a);return new UE(a,l,e._key,r,new ZI(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){so=l})(ao),Xl(new Fs("firestore",(r,{instanceIdentifier:l,options:u})=>{const f=r.getProvider("app").getImmediate(),g=new hp(new BC(r.getProvider("auth-internal")),new HC(f,r.getProvider("app-check-internal")),function(p,S){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ue(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(p.options.projectId,S)}(f,l),f);return u=Object.assign({useFetchStreams:n},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),is(_v,yv,e),is(_v,yv,"esm2017")})();let eu;const yp=()=>{if(eu)return eu;if(uu)try{return eu=jI(uu),console.log("Firestore initialized successfully via getDb."),eu}catch(a){console.error("Firestore initialization error via getDb:",a),eu=void 0;return}else{console.warn("Firebase App not initialized when getDb called, Firestore service will be disabled.");return}},iR=async(a,e,n)=>{const r=yp();if(!r)return Promise.reject(new Error("Firestore is not available. Patch not saved."));if(!a)return Promise.reject(new Error("User ID is missing. Cannot save patch state."));if(!e||e!=="slot1"&&e!=="slot2")return Promise.reject(new Error("Invalid slot ID provided."));const l=fp(r,"userPatches",a,"slots",e);try{const u=JSON.parse(JSON.stringify(n));await eR(l,{patchData:u,updatedAt:dn.fromDate(new Date)})}catch(u){throw console.error(`Error saving patch state to Firestore (Slot: ${e}):`,u),u instanceof Error?new Error(`Failed to save patch to ${e.replace("s","S")}: ${u.message}`):new Error(`An unknown error occurred while saving the patch to ${e.replace("s","S")}.`)}},Kh=async(a,e)=>{const n=yp();if(!n)return console.warn("Firestore is not available. Cannot load patch state."),null;if(!a)return console.warn("User ID is missing. Cannot load patch state."),null;if(!e||e!=="slot1"&&e!=="slot2")return console.warn("Invalid slot ID provided for loading."),null;const r=fp(n,"userPatches",a,"slots",e);try{const l=await BE(r);if(l.exists()){const u=l.data();return{patchData:u.patchData,updatedAt:u.updatedAt}}else return console.log(`No saved patch state found for user ${a} in ${e}.`),null}catch(l){return console.error(`Error loading patch state from Firestore (Slot: ${e}):`,l),null}},f0=async(a,e)=>{const n=yp();if(!n)return console.warn("Firestore is not available. Cannot get slot metadata."),{updatedAt:null,exists:!1};if(!a)return console.warn("User ID is missing. Cannot get slot metadata."),{updatedAt:null,exists:!1};if(!e||e!=="slot1"&&e!=="slot2")return console.warn("Invalid slot ID provided for metadata."),{updatedAt:null,exists:!1};const r=fp(n,"userPatches",a,"slots",e);try{const l=await BE(r);return l.exists()?{updatedAt:l.data().updatedAt||null,exists:!0}:{updatedAt:null,exists:!1}}catch(l){return console.error(`Error fetching metadata for slot ${e}:`,l),{updatedAt:null,exists:!1}}},qE={0:"AGL",1:"TEQ",2:"INT",3:"STR",4:"PHY",10:"Super AGL",11:"Super TEQ",12:"Super INT",13:"Super STR",14:"Super PHY",20:"Extreme AGL",21:"Extreme TEQ",22:"Extreme INT",23:"Extreme STR",24:"Extreme PHY"},zE=Object.entries(qE).map(([a,e])=>({label:e,value:parseInt(a)})).sort((a,e)=>a.value-e.value),HE={3:"SSR",4:"UR",5:"LR"},FE=Object.entries(HE).map(([a,e])=>({label:e,value:parseInt(a)})),aR={0:"Calc Plus",1:"Calc Minus",2:"Calc Percent Plus",3:"Calc Percent Minus",4:"Calc Equal"},rR=Object.entries(aR).map(([a,e])=>({label:e,value:parseInt(a)})),sR={1:"Start Round",2:"Link Skills",3:"Your Turn",4:"On Player Attack",5:"Enemy Turn",6:"Before Player Hit",7:"After Player Hit",8:"Battle Result Phase",9:"End Round",10:"Start Turn",11:"End of Puzzle Phase",12:"Start of Puzzle Phase",14:"After delivering a final blow",15:"Acquired Energy Ball",17:"Dokkan Field Efficacies",18:"Dokkan Field"},lR=Object.entries(sR).map(([a,e])=>({label:`${a}: ${e}`,value:parseInt(a)})),oR={0:"None",1:"Self",2:"Party All",3:"Enemy",4:"Enemy All",5:"Self And Target",6:"Party Race Type",7:"Party Exist Chara",8:"Target Excepct",9:"Target Party Enemy Attack Order",10:"Slot Attacker",11:"Party Slot Random",12:"Party Super Class",13:"Party Extreme Class",14:"Enemy Super Class",15:"Enemy Extreme Class",16:"Party All (self excluded)"},uR=Object.entries(oR).map(([a,e])=>({label:`${a}: ${e}`,value:parseInt(a)})),cR={1:{name:"Change Atk Param",params:["Atk Value"]},2:{name:"Change Def Param",params:["Def Value"]},3:{name:"Change Atk Def Param",params:["Atk Value","Def Value"]},4:{name:"Change Heal HP",params:["Hp Value"]},5:{name:"Change Energy Param",params:["Ki Value"]},8:{name:"Change Condition Delay",params:[]},9:{name:"Change Condition Stun",params:[]},11:{name:"Change Attack Order",params:[]},12:{name:"Change Pain Attack",params:[]},13:{name:"Change Resist Damage",params:["100-Reduction Value (%)"]},16:{name:"Change Element Type Atk",params:["ATK (Element) Value"]},17:{name:"Change Element Type Def",params:["DEF (Element) Value"]},18:{name:"Change Element Type Atk Def",params:["ATK (Element) Value","DEF (Element) Value"]},19:{name:"Change Element Type Hp Param",params:["HP (Element) Value"]},20:{name:"Change Element Type Energy Param",params:["KI (Element) Value"]},21:{name:"Change Recovery",params:[]},22:{name:"Change Condition Heal",params:[]},24:{name:"Change Guard Break",params:[]},26:{name:"Change Absorb Special Energy",params:[]},27:{name:"Change Resist Special Damage",params:["100-Reduction Value"]},28:{name:"Change Absorb Deal Damage",params:["Recovery Value (%)"]},34:{name:"Change Dokkan Gauge Bonus",params:[]},35:{name:"Change Heal Bonus",params:[]},36:{name:"Change Special Bonus",params:[]},37:{name:"Change Energy Bonus",params:[]},38:{name:"Change Link Skill Bonus",params:["Link Effect Value Boost (%)"]},39:{name:"Change Element Type Energy Bonus",params:[]},40:{name:"Change Element Type Linkage Bonus",params:[]},43:{name:"Change Hp Atk",params:["HP Value","ATK Value"]},44:{name:"Change Element Type Hp Atk",params:["Element Value","HP Value","ATK Value"]},46:{name:"Change Passive Probability Bonus",params:[]},47:{name:"Change Condition Psychic",params:[]},48:{name:"Change Condition Seal",params:[]},50:{name:"Change Invalid Bad Condition",params:[]},51:{name:"Change Energy Ball Color",params:["Change KI Orb (Element ID)","Target KI Orb (Element ID)"]},52:{name:"Change Resurrection",params:[]},53:{name:"Ignore Enemy Defense",params:[]},54:{name:"Change Invalid Combination Attack Bonus",params:[]},55:{name:"Change Target Def And Self Atk",params:["Target DEF Debuff","Self ATK Buff"]},56:{name:"Change Target Def And Self Def",params:["Target DEF Debuff","Self DEF Buff"]},57:{name:"Change Target Def And Self Energy",params:["Target DEF Debuff","Self Ki Buff"]},58:{name:"Change Energy Ball Heal",params:["Heal per Orb"]},59:{name:"Change Energy Ball Proportional Atk",params:["ATK Value per Orb"]},60:{name:"Change Energy Ball Proportional Def",params:["DEF Value per Orb"]},61:{name:"Change Energy Ball Proportional Atk Def",params:["ATK Value per Orb","DEF Value per Orb"]},63:{name:"Change Special Energy Cost",params:["Ki Cost Change"]},64:{name:"Change Element Type Energy Ball Proportional Atk",params:["Element Value (0-4)","ATK Boost Value (%)","Element Value (0-4)"]},65:{name:"Change Element Type Energy Ball Proportional Def",params:["Element Value (0-4)","DEF Boost Value (%)","Element Value (0-4)"]},66:{name:"Change Element Type Energy Ball Proportional Atk Def",params:["Element Value (0-4)","ATK & DEF Boost Value (%)","Element Value (0-4)"]},67:{name:"Change Energy Ball Color Bitpattern",params:["Target Ki Orb Bitset","Change To Ki Orb Bitset"]},68:{name:"Change Energy Ball Proportional Bitpattern",params:["Energy Ball Bitset","Stat (1:ATK,2:HP,3:DEF,4:Crit,5:Eva,6:DR)","Value"]},69:{name:"Change Energy Ball Color Specify Random",params:["Change All Orbs to (Element ID)","Insert 1","Insert 1"]},70:{name:"Change Energy Ball Color Specify Random Without Obstacles",params:[]},71:{name:"Change Hp Range Atk",params:["ATK Boost At MIN HP (%)","ATK Boost At MAX HP (%)","Always 1100"]},72:{name:"Change Hp Range Def",params:["DEF Boost At MIN HP (%)","DEF Boost At MAX HP (%)","Always 1100"]},73:{name:"Change Hp Range Atk Def",params:["ATK & DEF Boost At MIN HP (%)","ATK & DEF Boost At MAX HP (%)","Always 1100"]},74:{name:"Change Hp Range Ball Heal",params:[]},75:{name:"Change Condition Disable Swap",params:[]},76:{name:"Change Condition Super Effective Atk",params:[]},77:{name:"Change Reset Ball Color",params:[]},78:{name:"Guard Against All Attacks",params:[]},79:{name:"Metamorphic Transformation (Rage, Giant Ape, etc.)",params:["Transform Card Id","battle_params Set #1","battle_params Set #2"]},80:{name:"Change Counter Attack",params:["Dmg Reduction % (Optional)","Counter Multiplier","Lua Script #"]},81:{name:"Change Extra Attack",params:["Unused","Prob Second Attack","Prob of Super Attack"]},82:{name:"Change Element Type Hp Atk Def",params:["Type Bitset","Boost Value"]},83:{name:"Change Element Type Energy Bitpattern",params:["Type Bitset","Boost Value"]},84:{name:"Change Suicide Attack",params:[]},85:{name:"Change Step Extra Attack",params:[]},86:{name:"Change Special Atk Rate",params:[]},87:{name:"Change Element Type Attack Coef",params:[]},88:{name:"Change Element Type Defense Coef",params:[]},89:{name:"Change Element Type Attack Defense Coef",params:[]},90:{name:"Change Critical Attack",params:["Probability"]},91:{name:"Change Dodge",params:["Probability"]},92:{name:"Change Always Hit",params:[]},93:{name:"Change Element Type Bitpattern Hp",params:[]},94:{name:"Change Invalidate Stun",params:[]},95:{name:"Change Dodge Counter Attack",params:["battle_params param_no","Counter Multiplier","Lua Script #"]},96:{name:"Change Energy Ball Additional Point",params:["Energy Ball Bitset","Ki Value"]},97:{name:"Change Absorb Special",params:["Recover HP %?","Special Category Raw Attribute","Animation ID"]},98:{name:"Change Incremental Param",params:["Increase Value","Max Value","Stat (0:Atk,1:Def,2:Crit,3:Dodge,4:DR,5:Ki)"]},99:{name:"Change Invalidate Status Down",params:[]},100:{name:"Change Invalidate Astute",params:[]},101:{name:"Change Prediction",params:[]},102:{name:"Change Metamorphic Probability Count Limit",params:[]},103:{name:"Transformation",params:["Transform Card Id","Turn Req.","battle_params param_no"]},104:{name:"Change HP Atk Def",params:["HP Value","ATK Value","DEF Value"]},105:{name:"Replace Energy Ball",params:["Energy Ball Bitset","Unknown","Unknown"]},106:{name:"Potential Heal",params:["Unknown","Unknown","Unknown"]},107:{name:"Change Condition Stackable Delay",params:["Delay turn count","0","0"]},108:{name:"Add Potential Skill Variable Parameter (nullptr)",params:["Unknown","Unknown","Unknown"]},109:{name:"Revival Skill",params:["HP% to heal","effect_pack Row","BGM ID"],efficacy_values:'{"priority":int}'},110:{name:"Remove Ability Efficacy Info And Inactive Ability Status",params:["Skill Types Table ID","Skill ID","Skill Category Types Table ID"]},111:{name:"Change Condition Attack Break",params:[]},112:{name:"Change Invalidate Attack Break",params:[]},113:{name:"Threshold Damage",params:[]},114:{name:"Cannot Attack (nullptr)",params:[],efficacy_values:'{"text":string,"script_path":string}'},115:{name:"Update Standby Mode",params:[],efficacy_values:'{"type":string,"is_active":bool}'},116:{name:"Charge Start",params:[],efficacy_values:'{"type":string,"gauge_value":int array,"count_multiplier":int,"max_effect_value":int,"ball_type_multiplier":int array}'},117:{name:"End Transformation",params:[]},118:{name:"Add Special Atk Rate By Charge Count",params:[]},119:{name:"Counter Attack Behaviour (nullptr)",params:["Unknown"]},120:{name:"Counter Attack (Same as 80)",params:["Dmg Reduction % (Optional)","Counter Multiplier","Lua Script #"]},121:{name:"Unknown (nullptr)",params:[]},122:{name:"Increased Received Damage",params:["Received Damage Value %"]},123:{name:"Target Focus",params:[]},124:{name:"Incremental Critical Probability For Enemy",params:["Unknown","Unknown","Unknown"]},125:{name:"Hp Damage",params:["Damage Value"]},126:{name:"Reflect Damage",params:["Damage Value"],efficacy_values:'{"text":string,"script_path":string}'},127:{name:"Set Plug In On Energy Ball With Bitpattern",params:["Unknown","Unknown","Unknown"]},128:{name:"Dodge Counter Attack Behaviour",params:["Unknown","Unknown","Unknown"]},129:{name:"Change Invalidate Always Hit",params:["Unknown","Unknown","Unknown"]},131:{name:"Transform/Exchange",params:["Target Card ID","Condition Turn (0 = no turn limit)","Passive Skill Effect ID for transition animation (optional)"]}},dR=Object.entries(cR).map(([a,e])=>({label:`${a}: ${e.name}`,value:parseInt(a)})),fR={0:{name:"isNoneRule",params:[]},1:{name:"isOverHpRate",params:["HP Percent"]},2:{name:"isUnderHpRate",params:["HP Percent"]},3:{name:"isOverEnergy",params:["Ki Amount"]},4:{name:"isUnderEnergy",params:["Ki Amount"]},5:{name:"isElapsedTurn",params:["Turn"]},6:{name:"isPartyRaceType",params:["Link Skill ID"]},7:{name:"isEnemyRaceType",params:["Link Skill ID"]},8:{name:"isOverFightingPower",params:["Attack","Defense"]},9:{name:"isUnderFightingPower",params:["Attack","Defense"]},10:{name:"isOverHpRateOverEnergy",params:["HP Percent","Ki Amount"]},11:{name:"isOverHpRateUnderEnergy",params:["HP Percent","Ki Amount"]},12:{name:"isUnderHpRateOverEnergy",params:["HP Percent","Ki Amount"]},13:{name:"isUnderHpRateUnderEnergy",params:["HP Percent","Ki Amount"]},14:{name:"isFirstAttack",params:[]},15:{name:"isOverTargetNum",params:["Number of Enemies"]},16:{name:"isUnderTargetNum",params:["Number of Enemies"]},17:{name:"isOverTargetHpRate",params:["HP Percent"]},18:{name:"isUnderTargetHpRate",params:["HP Percent"]},19:{name:"isAttackOrder",params:["Slot (0, 1, 2)"]},20:{name:"isOverEnergyCondition",params:["Ki Percent"]},21:{name:"isUnderEnergyCondition",params:["Ki Percent"]},22:{name:"isPartyExistChara",params:["Card Unique Info ID"]},23:{name:"isLinkNum",params:["Number of links"]},24:{name:"isHitDamaged",params:[]},25:{name:"isTargetKill",params:[]},26:{name:"isOverHpRateEnableSpecial",params:["HP Percent"]},27:{name:"isUnderHpRateEnableSpecial",params:["HP Percent"]},28:{name:"isSlotElementType",params:["Element Type"]},29:{name:"isEnemyExistChara",params:["Card Unique Info ID"]},30:{name:"isGuardSuccess",params:[]},31:{name:"isCombinationAttack",params:[]},32:{name:"isChangeEnergyBallColor",params:["Ki Type"]},33:{name:"isBetweenHpRate",params:["HP Percent Lower","HP Percent Higher"]},34:{name:"isOverTeamCategoryNum",params:["Target (0:deck,1:enemy,2:ally in turn)","Category ID","Amount"]},35:{name:"hasAllElementBitpatternCards",params:["Element Bitset"]},36:{name:"isOverHpRateAndElapsedTurn",params:["HP Percent","Turn"]},37:{name:"isUnderHpRateAndElapsedTurn",params:["HP Percent","Turn"]},38:{name:"isTargetEnemyCondition",params:["Status Effect Flags","Unknown"]},39:{name:"isTargetElementTypeBitPattern",params:["Element Bitset"]},40:{name:"isSpecialAttack",params:[]},41:{name:"isOverTeamUniqueCardNum",params:["Unknown","Card Unique Info ID","Unknown"]},42:{name:"isEnergyBallGetNum",params:["Energy Ball Bitset","Ki Amount"]},43:{name:"isDodgeSuccess",params:["Unknown","Unknown","Unknown"]},44:{name:"isCountUp",params:["Action (1:SA,2:Attack,3:DmgRecv,4:Guard,5:Evade)","Amount"]},45:{name:"isContainsCardByCategoryAndUniqueInfo",params:["Target","Category ID","card_unique_info_set_relations ID"]},46:{name:"isContainsSpecifiedElemenets",params:["Target (0:deck,1:enemy,2:ally in turn)","Type Bitset","Amount"]},47:{name:"isExecutedRevivalSkill",params:[]},48:{name:"isAttackedByEnemyWhichTakeSpecialDamage",params:["special_categories.raw_attribute"]},49:{name:"isAttackedBySpecialCategory",params:["special_categories.raw_attribute","Unknown","Unknown"]},50:{name:"hasPlayedPassiveSkillEffect",params:["Unknown","Unknown","Unknown"]},51:{name:"isUnderTurnCountFromApperance",params:["Turn count"]},52:{name:"chargeCount",params:["Unknown","Unknown","Unknown"]},53:{name:"inStandbyMode",params:["Unknown (usually 0)"]},54:{name:"isPartyExecutedRevivalSkill",params:[]},55:{name:"isOverTurnCountFromApperance",params:["Turn count"]},56:{name:"isNormalAttack",params:["Unknown","Unknown","Unknown"]},57:{name:"isInSpecifiedDokkanField",params:["dokkan_field.id"]},58:{name:"isInDokkanField",params:["0=no, 1=yes"]},59:{name:"isSameAwakeningElementType",params:["Super Class=1, Extreme Class=2"]},60:{name:"isInSubTargetTypeSet",params:["SubTargetTypeSet ID"]},61:{name:"isReceivedAttackDuringTurn",params:[]},62:{name:"isAttackerElementTypeBitPattern",params:["Element Bitset"]},63:{name:"isElapsedTurnPerRound",params:["Turn","Round ID?"]}};Object.entries(fR).map(([a,e])=>({label:`${a}: ${e.name}`,value:parseInt(a)}));const vp=()=>({id:"",name:"",character_id:"",card_unique_info_id:"",cost:0,rarity:4,hp_init:0,hp_max:0,atk_init:0,atk_max:0,def_init:0,def_max:0,element:0,lv_max:120,skill_lv_max:10,grow_type:0,price:0,exp_type:0,training_exp:0,special_motion:0,passive_skill_set_id:"",leader_skill_set_id:"",link_skill_ids:Array(7).fill(""),category_ids:[],eball_mod_min:0,eball_mod_num100:0,eball_mod_mid:0,eball_mod_mid_num:0,eball_mod_max:0,eball_mod_max_num:0,max_level_reward_id:"1",max_level_reward_type:"1",collectable_type:1,face_x:0,face_y:0,aura_id:null,is_selling_only:0,awakening_element_type:null,potential_board_id:null,active_skill_set_id_ref:"",standby_skill_set_id_ref:""}),hR=()=>({id:"",name:"",description:"",exec_timing_type:1,efficacy_type:1,target_type:1,calc_option:2,turn:1,is_once:0,probability:100,causality_conditions:null,eff_value1:0,eff_value2:0,eff_value3:0,efficacy_values:"{}",sub_target_type_set_id:null,passive_skill_effect_id:null}),mR=()=>({id:"",leader_skill_set_id:"",exec_timing_type:1,target_type:2,efficacy_type:5,efficacy_values:"[3,0,0]",calc_option:0,sub_target_type_set_id:null,causality_conditions:null}),pR=()=>({id:"",special_set_id:"",type:"Special::NormalEfficacySpecial",efficacy_type:1,target_type:3,calc_option:2,turn:1,prob:100,causality_conditions:null,eff_value1:0,eff_value2:0,eff_value3:0}),gR=()=>({id:"",active_skill_set_id:"",target_type:1,efficacy_type:1,calc_option:2,eff_val1:0,eff_val2:0,eff_val3:0,efficacy_values:"{}",sub_target_type_set_id:null,thumb_effect_id:null,effect_se_id:null}),Mt={CARD_UNIQUE_INFO:"70",PASSIVE_SKILL_SET:"71",LEADER_SKILL_SET:"72",ACTIVE_SKILL_SET:"73",SPECIAL_SET:"74",OPTIMAL_AWAKENING_GROWTH_ID:"75",OPTIMAL_AWAKENING_GROWTH_TYPE_ID:"oag_type_",STANDBY_SKILL_SET:"77",FINISH_SKILL_SET:"78",FINISH_SPECIAL:"79",BATTLE_PARAM:"bp_"},_R=Object.values(Mt),Em=7e6,Sm=7999999;let h0=0;const ni=()=>{const a=Em+h0;return a>Sm&&console.warn("Local ID counter has exceeded the defined range. This may lead to issues."),h0++,String(a)},na=a=>{if(!a||typeof a!="string")return!1;const e=Number(a);if(!isNaN(e)&&e>=Em&&e<=Sm)return!0;for(const n of _R)if(a.startsWith(n)){const r=a.substring(n.length);if(r){const l=Number(r);if(!isNaN(l)&&l>=Em&&l<=Sm)return!0}}return!1},Ed=(a,e)=>({id:ni(),card_id:a,special_set_id:e||"",priority:0,style:"Normal",lv_start:1,eball_num_start:12,view_id:0,card_costume_condition_id:0,special_bonus_id1:0,special_bonus_lv1:0,bonus_view_id1:0,special_bonus_id2:0,special_bonus_lv2:0,bonus_view_id2:0,causality_conditions:null,special_asset_id:null}),yR=a=>({id:ni(),standby_skill_set_id:a,target_type:1,target_type_values:"{}",sub_target_type_set_id:null,turn:1,efficacy_type:1,calc_option:null,efficacy_values:"{}",thumb_effect_id:null,effect_se_id:null}),vR=()=>{const a=ni();return{id:Mt.STANDBY_SKILL_SET+a,name:`New Standby Skill Set ${a}`,ingame_icon_path:"",effect_description:"",condition_description:"",exec_limit:1,causality_conditions:null,special_view_id:null,costume_special_view_id:0,bgm_id:null,skills:[],finishSkillSetRelations:[]}},bR=a=>({id:ni(),finish_skill_set_id:a,target_type:3,target_type_values:"{}",sub_target_type_set_id:null,turn:1,efficacy_type:1,calc_option:null,efficacy_values:"{}",thumb_effect_id:null,effect_se_id:null}),ER=()=>{const a=ni();return{id:Mt.FINISH_SKILL_SET+a,name:`New Finish Skill Set ${a}`,effect_description:"",condition_description:"",dialog_order:0,dialog_images:null,exec_timing_type:0,exec_limit:1,causality_conditions:null,finish_special_id:null,special_view_id:null,costume_special_view_id:0,bgm_id:null,is_dialog_view_visible:1,skills:[]}},SR=(a,e)=>({id:`${a}_${e}_${ni()}`,standby_skill_set_id:a,finish_skill_set_id:e}),TR=()=>{const a=ni();return{id:Mt.FINISH_SPECIAL+a,increase_rate:180,aim_target:0}},m0=(a,e)=>({id:Mt.BATTLE_PARAM+`${a}_${e}_${ni()}`,param_no:a,idx:e,value:0}),wR={cards:["id","name","character_id","card_unique_info_id","cost","rarity","hp_init","hp_max","atk_init","atk_max","def_init","def_max","element","lv_max","skill_lv_max","grow_type","optimal_awakening_grow_type","price","exp_type","training_exp","special_motion","passive_skill_set_id","leader_skill_set_id","link_skill1_id","link_skill2_id","link_skill3_id","link_skill4_id","link_skill5_id","link_skill6_id","link_skill7_id","eball_mod_min","eball_mod_num100","eball_mod_mid","eball_mod_mid_num","eball_mod_max","eball_mod_max_num","max_level_reward_id","max_level_reward_type","collectable_type","face_x","face_y","aura_id","aura_scale","aura_offset_x","aura_offset_y","is_aura_front","is_selling_only","awakening_number","resource_id","bg_effect_id","selling_exchange_point","awakening_element_type","potential_board_id","open_at","created_at","updated_at"],card_unique_infos:["id","name","kana","created_at","updated_at"],card_card_categories:["id","card_id","card_category_id","num","created_at","updated_at"],leader_skill_sets:["id","name","description","created_at","updated_at"],leader_skills:["id","leader_skill_set_id","exec_timing_type","target_type","sub_target_type_set_id","causality_conditions","efficacy_type","efficacy_values","calc_option","created_at","updated_at"],passive_skill_sets:["id","name","description","itemized_description","created_at","updated_at"],passive_skills:["id","name","description","exec_timing_type","efficacy_type","target_type","sub_target_type_set_id","passive_skill_effect_id","calc_option","turn","is_once","probability","causality_conditions","eff_value1","eff_value2","eff_value3","efficacy_values","created_at","updated_at"],passive_skill_set_relations:["id","passive_skill_set_id","passive_skill_id","created_at","updated_at"],special_sets:["id","name","description","causality_description","aim_target","increase_rate","lv_bonus","is_inactive","created_at","updated_at"],specials:["id","special_set_id","type","efficacy_type","target_type","calc_option","turn","prob","causality_conditions","eff_value1","eff_value2","eff_value3","created_at","updated_at"],card_specials:["id","card_id","special_set_id","priority","style","lv_start","eball_num_start","view_id","card_costume_condition_id","special_bonus_id1","special_bonus_lv1","bonus_view_id1","special_bonus_id2","special_bonus_lv2","bonus_view_id2","causality_conditions","special_asset_id","created_at","updated_at"],passive_skill_effects:["id","script_name","lite_flicker_rate","bgm_id","created_at","updated_at"],effect_packs:["id","category","name","pack_name","scene_name","red","green","blue","alpha","lite_flicker_rate","created_at","updated_at"],active_skill_sets:["id","name","effect_description","condition_description","turn","exec_limit","causality_conditions","ultimate_special_id","special_view_id","costume_special_view_id","bgm_id","created_at","updated_at"],active_skills:["id","active_skill_set_id","target_type","sub_target_type_set_id","calc_option","efficacy_type","eff_val1","eff_val2","eff_val3","efficacy_values","thumb_effect_id","effect_se_id","created_at","updated_at"],card_active_skills:["id","card_id","active_skill_set_id","created_at","updated_at"],optimal_awakening_growths:["id","optimal_awakening_grow_type","step","lv_max","skill_lv_max","passive_skill_set_id","leader_skill_set_id","created_at","updated_at"],standby_skill_sets:["id","name","ingame_icon_path","effect_description","condition_description","exec_limit","causality_conditions","special_view_id","costume_special_view_id","bgm_id","created_at","updated_at"],standby_skills:["id","standby_skill_set_id","target_type","target_type_values","sub_target_type_set_id","turn","efficacy_type","calc_option","efficacy_values","thumb_effect_id","effect_se_id","created_at","updated_at"],card_standby_skill_set_relations:["id","card_id","standby_skill_set_id","created_at","updated_at"],finish_skill_sets:["id","name","effect_description","condition_description","dialog_order","dialog_images","exec_timing_type","exec_limit","causality_conditions","finish_special_id","special_view_id","costume_special_view_id","bgm_id","is_dialog_view_visible","created_at","updated_at"],finish_skills:["id","finish_skill_set_id","target_type","target_type_values","sub_target_type_set_id","turn","efficacy_type","calc_option","efficacy_values","thumb_effect_id","effect_se_id","created_at","updated_at"],standby_skill_set_finish_skill_set_relations:["id","standby_skill_set_id","finish_skill_set_id","created_at","updated_at"],finish_specials:["id","increase_rate","aim_target","created_at","updated_at"],battle_params:["id","param_no","idx","value","created_at","updated_at"]},GE=[{id:"34",name:"DB Saga"},{id:"86",name:"Saiyan Saga"},{id:"14",name:"Planet Namek Saga"},{id:"38",name:"Androids/Cell Saga"},{id:"9",name:"Majin Buu Saga"},{id:"19",name:"Future Saga"},{id:"6",name:"Universe Survival Saga"},{id:"2",name:"Shadow Dragon Saga"},{id:"17",name:"Pure Saiyans"},{id:"5",name:"Hybrid Saiyans"},{id:"51",name:"Earthlings"},{id:"18",name:"Namekians"},{id:"21",name:"Androids"},{id:"32",name:"Artificial Life Forms"},{id:"30",name:"Goku's Family"},{id:"31",name:"Vegeta's Family"},{id:"24",name:"Wicked Bloodline"},{id:"33",name:"Youth"},{id:"4",name:"Peppy Gals"},{id:"36",name:"Super Saiyans"},{id:"45",name:"Super Saiyan 2"},{id:"12",name:"Super Saiyan 3"},{id:"84",name:"Power Beyond Super Saiyan"},{id:"1",name:"Fusion"},{id:"10",name:"Potara"},{id:"85",name:"Fused Fighters"},{id:"13",name:"Giant Form"},{id:"23",name:"Transformation Boost"},{id:"59",name:"Power Absorption"},{id:"39",name:"Kamehameha"},{id:"8",name:"Realm of Gods"},{id:"20",name:"Full Power"},{id:"60",name:"Giant Ape Power"},{id:"53",name:"Majin Power"},{id:"94",name:"Uncontrollable Power"},{id:"67",name:"Powerful Comeback"},{id:"90",name:"Power of Wishes"},{id:"93",name:"Demonic Power"},{id:"66",name:"Miraculous Awakening"},{id:"64",name:"Corroded Body and Mind"},{id:"54",name:"Rapid Growth"},{id:"76",name:"Mastered Evolution"},{id:"75",name:"Time Limit"},{id:"46",name:"Final Trump Card"},{id:"37",name:"Worthy Rivals"},{id:"78",name:"Sworn Enemies"},{id:"28",name:"Joined Forces"},{id:"87",name:"Bond of Parent and Child"},{id:"35",name:"Siblings' Bond"},{id:"79",name:"Bond of Friendship"},{id:"40",name:"Bond of Master and Disciple"},{id:"15",name:"Ginyu Force"},{id:"49",name:"Team Bardock"},{id:"27",name:"Universe 6"},{id:"22",name:"Representatives of Universe 7"},{id:"56",name:"Universe 11"},{id:"72",name:"GT Heroes"},{id:"73",name:"GT Bosses"},{id:"88",name:"Super Heroes"},{id:"92",name:"Super Bosses"},{id:"29",name:"Movie Heroes"},{id:"16",name:"Movie Bosses"},{id:"65",name:"Turtle School"},{id:"3",name:"World Tournament"},{id:"91",name:"Tournament Participants"},{id:"89",name:"Earth-Bred Fighters"},{id:"11",name:"Low-Class Warrior"},{id:"68",name:"Gifted Warriors"},{id:"44",name:"Otherworld Warriors"},{id:"7",name:"Resurrected Warriors"},{id:"62",name:"Space-Traveling Warriors"},{id:"26",name:"Time Travelers"},{id:"25",name:"Dragon Ball Seekers"},{id:"96",name:"Successors"},{id:"71",name:"Storied Figures"},{id:"77",name:"Legendary Existence"},{id:"57",name:"Saviors"},{id:"70",name:"Defenders of Justice"},{id:"95",name:"Earth-Protecting Heroes"},{id:"48",name:"Revenge"},{id:"43",name:"Target: Goku"},{id:"41",name:"Terrifying Conquerors"},{id:"50",name:"Inhuman Deeds"},{id:"69",name:"Planetary Destruction"},{id:"47",name:"Exploding Rage"},{id:"63",name:"Connected Hope"},{id:"81",name:"Entrusted Will"},{id:"55",name:"All-Out Struggle"},{id:"58",name:"Battle of Wits"},{id:"80",name:"Accelerated Battle"},{id:"83",name:"Battle of Fate"},{id:"74",name:"Heavenly Events"},{id:"52",name:"Special Pose"},{id:"82",name:"Worldwide Chaos"},{id:"61",name:"Crossover"},{id:"42",name:"Dragon Ball Heroes"}],KE=GE.map(a=>({label:`${a.name} (ID: ${a.id})`,value:a.id}));KE.sort((a,e)=>a.label.localeCompare(e.label));const AR=[{id:"23",name:"All in the Family"},{id:"35",name:"Android Assault"},{id:"33",name:"Attack of the Clones"},{id:"105",name:"Auto Regeneration"},{id:"64",name:"Battlefield Diva"},{id:"49",name:"Berserker"},{id:"50",name:"Big Bad Bosses"},{id:"1000",name:"Blazing Battle"},{id:"57",name:"Bombardment"},{id:"8",name:"Brainiacs"},{id:"18",name:"Brutal Beatdown"},{id:"82",name:"Budding Warrior"},{id:"44",name:"Champion's Strength"},{id:"39",name:"Cold Judgment"},{id:"79",name:"Connoisseur"},{id:"92",name:"Cooler's Armored Squad"},{id:"91",name:"Cooler's Underling"},{id:"2",name:"Courage"},{id:"32",name:"Coward"},{id:"5",name:"Crane School"},{id:"107",name:"Deficit Boost"},{id:"7",name:"Demonic Power"},{id:"6",name:"Demonic Ways"},{id:"98",name:"Destroyer of the Universe"},{id:"66",name:"Dismal Future"},{id:"46",name:"Dodon Ray"},{id:"81",name:"Energy Absorption"},{id:"11",name:"Evil Autocrats"},{id:"30",name:"Experienced Fighters"},{id:"61",name:"Family Ties"},{id:"120",name:"Fear and Faith"},{id:"109",name:"Fierce Battle"},{id:"12",name:"Flee"},{id:"111",name:"Formidable Enemy"},{id:"101",name:"Fortuneteller Babas Fighter"},{id:"51",name:"Frieza's Army"},{id:"43",name:"Frieza's Minion"},{id:"112",name:"Fused Fighter"},{id:"106",name:"Fusion"},{id:"113",name:"Fusion Failure"},{id:"95",name:"GT"},{id:"75",name:"Galactic Visitor"},{id:"88",name:"Galactic Warriors"},{id:"56",name:"Gaze of Respect"},{id:"17",name:"Gentleman"},{id:"80",name:"Godly Power"},{id:"9",name:"Golden Warrior"},{id:"1002",name:"Golden Z-Fighter"},{id:"102",name:"Guidance of the Dragon Balls"},{id:"104",name:"Hardened Grudge"},{id:"115",name:"Hatred of Saiyans"},{id:"15",name:"Hero"},{id:"93",name:"Hero of Justice"},{id:"1",name:"High Compatibility"},{id:"42",name:"Infighter"},{id:"110",name:"Infinite Energy"},{id:"96",name:"Infinite Regeneration"},{id:"47",name:"Kamehameha"},{id:"125",name:"Legendary Power"},{id:"116",name:"Limit-Breaking Form"},{id:"73",name:"Loyalty"},{id:"83",name:"Majin"},{id:"77",name:"Majin Resurrection Plan"},{id:"76",name:"Master of Magic"},{id:"38",name:"Mechanical Menaces"},{id:"19",name:"Messenger from the Future"},{id:"28",name:"Metamorphosis"},{id:"10",name:"Money Money Money"},{id:"14",name:"More Than Meets the Eye"},{id:"48",name:"Namekians"},{id:"21",name:"New"},{id:"72",name:"New Frieza Army"},{id:"119",name:"Nightmare"},{id:"67",name:"Organic Upgrade"},{id:"129",name:"Otherworld Warriors"},{id:"58",name:"Over 9000"},{id:"89",name:"Over in a Flash"},{id:"69",name:"Patrol"},{id:"128",name:"Penguin Village Adventure"},{id:"103",name:"Power Bestowed by God"},{id:"97",name:"Prepared for Battle"},{id:"26",name:"Prodigies"},{id:"55",name:"RR Army"},{id:"25",name:"Respect"},{id:"68",name:"Resurrection 'F'"},{id:"65",name:"Revival"},{id:"40",name:"Royal Lineage"},{id:"63",name:"Saiyan Pride"},{id:"124",name:"Saiyan Roar"},{id:"22",name:"Saiyan Warrior Race"},{id:"114",name:"Scientist"},{id:"127",name:"Shadow Dragons"},{id:"118",name:"Shattering the Limit"},{id:"60",name:"Shocking Speed"},{id:"94",name:"Signature Pose"},{id:"37",name:"Solid Support"},{id:"1001",name:"Soul vs Soul"},{id:"53",name:"Speedy Retribution"},{id:"84",name:"Strength in Unity"},{id:"85",name:"Strongest Clan in Space"},{id:"29",name:"Super Saiyan"},{id:"122",name:"Super Strike"},{id:"71",name:"Super-God Combat"},{id:"1003",name:"Supreme Power"},{id:"16",name:"Supreme Warrior"},{id:"54",name:"Tag Team of Terror"},{id:"62",name:"Team Bardock"},{id:"100",name:"Team Turles"},{id:"13",name:"Telekinesis"},{id:"24",name:"Telepathy"},{id:"117",name:"The First Awakened"},{id:"41",name:"The Ginyu Force"},{id:"87",name:"The Hera Clan"},{id:"90",name:"The Incredible Adventure"},{id:"4",name:"The Innocents"},{id:"34",name:"The Saiyan Lineage"},{id:"3",name:"The Students"},{id:"1004",name:"The Wall Standing Tall"},{id:"86",name:"Thirst for Conquest"},{id:"52",name:"Tough as Nails"},{id:"130",name:"Tournament of Power"},{id:"123",name:"Transform"},{id:"36",name:"Turtle School"},{id:"31",name:"Twin Terrors"},{id:"108",name:"Ultimate Lifeform"},{id:"74",name:"Unbreakable Bond"},{id:"59",name:"Universes Most Malevolent"},{id:"70",name:"Warrior Gods"},{id:"126",name:"Warriors of Universe 6"},{id:"27",name:"World Tournament Champion"},{id:"20",name:"World Tournament Reborn"},{id:"121",name:"Xenoverse"},{id:"45",name:"Z Fighters"}],Jc=AR.map(a=>({label:`${a.name} (ID: ${a.id})`,value:a.id}));Jc.sort((a,e)=>a.label.localeCompare(e.label));const zc="custom_category_id_input",Hc="custom_link_id_input",_e=({label:a,value:e,onChange:n,type:r="text",placeholder:l,disabled:u,helpText:f,className:g,min:v,max:p,onBlur:S})=>E.jsxs("div",{className:`mb-1 ${g}`,children:[E.jsx("label",{className:"block text-sm font-medium text-orange-300 mb-1 font-rajdhani",children:a}),E.jsx("input",{type:r,value:e,onChange:A=>n(A.target.value),onBlur:S,placeholder:l,disabled:u,min:v,max:p,className:`w-full bg-indigo-700 bg-opacity-50 border border-indigo-500 text-indigo-100 rounded-md shadow-sm py-2 px-3 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all duration-150 ease-in-out placeholder-indigo-400 ${u?"opacity-60 cursor-not-allowed":""}`}),f&&E.jsx("p",{className:"mt-1 text-xs text-indigo-300 opacity-80",children:f})]}),rn=({label:a,value:e,onChange:n,options:r,disabled:l,helpText:u,className:f,allowCustom:g,customLabel:v,isOptional:p})=>E.jsxs("div",{className:`mb-1 ${f}`,children:[E.jsx("label",{className:"block text-sm font-medium text-orange-300 mb-1 font-rajdhani",children:a}),E.jsxs("select",{value:e,onChange:S=>n(S.target.value),disabled:l,className:`w-full bg-indigo-700 bg-opacity-50 border border-indigo-500 text-indigo-100 rounded-md shadow-sm py-2 px-3 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all duration-150 ease-in-out ${l?"opacity-60 cursor-not-allowed":""}`,children:[p&&E.jsx("option",{value:"",children:"-- None --"}),r.map(S=>E.jsx("option",{value:S.value,className:"bg-indigo-700 text-indigo-100",children:S.label},S.value)),g&&E.jsx("option",{value:"custom_id",className:"bg-indigo-700 text-indigo-100",children:v||"Enter Custom ID..."})]}),u&&E.jsx("p",{className:"mt-1 text-xs text-indigo-300 opacity-80",children:u})]}),ti=({label:a,value:e,onChange:n,rows:r=3,placeholder:l,disabled:u,helpText:f,className:g})=>E.jsxs("div",{className:`mb-1 ${g}`,children:[E.jsx("label",{className:"block text-sm font-medium text-orange-300 mb-1 font-rajdhani",children:a}),E.jsx("textarea",{value:e,onChange:v=>n(v.target.value),rows:r,placeholder:l,disabled:u,className:`w-full bg-indigo-700 bg-opacity-50 border border-indigo-500 text-indigo-100 rounded-md shadow-sm py-2 px-3 focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition-all duration-150 ease-in-out placeholder-indigo-400 ${u?"opacity-60 cursor-not-allowed":""}`}),f&&E.jsx("p",{className:"mt-1 text-xs text-indigo-300 opacity-80",children:f})]}),bp=({label:a,checked:e,onChange:n,disabled:r,helpText:l,className:u})=>E.jsxs("div",{className:`mb-1 flex items-center ${u}`,children:[E.jsx("input",{type:"checkbox",checked:e,onChange:f=>n(f.target.checked),disabled:r,className:`h-4 w-4 text-orange-500 border-indigo-500 rounded bg-indigo-700 bg-opacity-50 focus:ring-orange-400 focus:ring-offset-indigo-800 ${r?"opacity-60 cursor-not-allowed":""}`}),E.jsx("label",{className:"ml-2 block text-sm text-indigo-100 font-rajdhani",children:a}),l&&E.jsx("p",{className:"ml-2 text-xs text-indigo-300 opacity-80",children:l})]}),CR=({formIndex:a,cardForm:e,updateCardForm:n,removeCardForm:r,patchState:l,setPatchState:u})=>{const[f,g]=Pe.useState(""),[v,p]=Pe.useState(""),[S,A]=Pe.useState(e.id);Pe.useEffect(()=>{e.id!==S&&A(e.id)},[e.id]);const N=Pe.useCallback((C,k)=>{n(a,{...e,[C]:k})},[e,a,n]),L=Pe.useCallback((C,k,O)=>{const M=[...e[C]||[]];M[k]=O,N(C,M)},[e,N]),X=Pe.useCallback(()=>{let C="";if(f===zc?C=v.trim():C=f,C&&!(e.category_ids||[]).includes(C)){const k=[...e.category_ids||[],C];N("category_ids",k)}g(""),p("")},[e.category_ids,v,f,N]),Y=Pe.useCallback(C=>{const k=(e.category_ids||[]).filter(O=>O!==C);N("category_ids",k)},[e.category_ids,N]),Z=Pe.useCallback((C,k)=>{const O=e.link_skill_ids[C]||"",x=Jc.some(M=>M.value===O&&O!=="");k===Hc?x&&L("link_skill_ids",C,""):L("link_skill_ids",C,k)},[e.link_skill_ids,L]),re=l.cardSpecials.filter(C=>C.card_id===e.id),he=()=>{const C=na(e.id)?Mt.SPECIAL_SET+e.id:void 0,k=Ed(e.id,C);u(O=>({...O,cardSpecials:[...O.cardSpecials,k]}))},ve=(C,k,O)=>{const x=l.cardSpecials.findIndex(M=>M.id===re[C].id);x!==-1&&u(M=>({...M,cardSpecials:M.cardSpecials.map((q,P)=>P===x?{...q,[k]:O}:q)}))},ie=C=>{const k=re[C].id;u(O=>({...O,cardSpecials:O.cardSpecials.filter(x=>x.id!==k)}))},H=C=>{const k=GE.find(O=>O.id===C);return k?`${k.name} (ID: ${C})`:`Custom ID: ${C}`},ue=[{label:"None / Clear",value:""},...Jc,{label:"Enter Custom ID...",value:Hc}];return E.jsxs("div",{className:"bg-indigo-800 bg-opacity-30 p-6 rounded-xl shadow-xl mb-8 border border-orange-500 border-opacity-50",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsxs("h3",{className:"text-2xl font-bold text-orange-400 font-rajdhani",children:["Card Form ",a+1,E.jsxs("span",{className:"text-sm text-indigo-300 ml-2 code-text",children:["(ID: ",e.id||"Not Set",")"]})]}),l.cardForms.length>1&&E.jsxs("button",{onClick:()=>r(a),className:"text-red-400 hover:text-red-500 transition-colors font-semibold py-1 px-3 rounded-md bg-red-900 bg-opacity-30 hover:bg-opacity-50 border border-red-500",children:[E.jsx("i",{className:"fas fa-trash-alt mr-1"})," Remove Form"]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4",children:[E.jsx(_e,{label:"Card ID",value:S,onChange:C=>A(C),onBlur:()=>{S!==e.id&&N("id",S)},placeholder:"e.g., 1070001",type:"text",className:"font-roboto-mono"}),E.jsx(_e,{label:"Name",value:e.name,onChange:C=>N("name",C)}),E.jsx(_e,{label:"Character ID",value:e.character_id,onChange:C=>N("character_id",C),className:"font-roboto-mono"}),E.jsx(_e,{label:"Card Unique Info ID",value:e.card_unique_info_id,onChange:C=>N("card_unique_info_id",C),className:"font-roboto-mono"}),E.jsx(_e,{label:"Cost",type:"number",value:e.cost,onChange:C=>N("cost",Number(C))}),E.jsx(rn,{label:"Rarity",value:e.rarity,onChange:C=>N("rarity",Number(C)),options:FE}),E.jsx(rn,{label:"Element",value:e.element,onChange:C=>N("element",Number(C)),options:zE}),E.jsx(_e,{label:"HP Init",type:"number",value:e.hp_init,onChange:C=>N("hp_init",Number(C))}),E.jsx(_e,{label:"HP Max",type:"number",value:e.hp_max,onChange:C=>N("hp_max",Number(C))}),E.jsx(_e,{label:"ATK Init",type:"number",value:e.atk_init,onChange:C=>N("atk_init",Number(C))}),E.jsx(_e,{label:"ATK Max",type:"number",value:e.atk_max,onChange:C=>N("atk_max",Number(C))}),E.jsx(_e,{label:"DEF Init",type:"number",value:e.def_init,onChange:C=>N("def_init",Number(C))}),E.jsx(_e,{label:"DEF Max",type:"number",value:e.def_max,onChange:C=>N("def_max",Number(C))}),E.jsx(_e,{label:"Max Level",type:"number",value:e.lv_max,onChange:C=>N("lv_max",Number(C))}),E.jsx(_e,{label:"Max Skill Level",type:"number",value:e.skill_lv_max,onChange:C=>N("skill_lv_max",Number(C))}),E.jsx(_e,{label:"Grow Type",type:"number",value:e.grow_type,onChange:C=>N("grow_type",Number(C))}),E.jsx(_e,{label:"Special Motion ID",type:"number",value:e.special_motion,onChange:C=>N("special_motion",Number(C))}),E.jsx(rn,{label:"Leader Skill Set ID",value:e.leader_skill_set_id,onChange:C=>N("leader_skill_set_id",C),options:(l.leaderSkillSets||[]).map(C=>({label:`${C.id} - ${C.name}`,value:C.id})),allowCustom:!0,customLabel:"Use Custom ID",className:"font-roboto-mono"}),E.jsx(rn,{label:"Passive Skill Set ID",value:e.passive_skill_set_id,onChange:C=>N("passive_skill_set_id",C),options:(l.passiveSkillSets||[]).map(C=>({label:`${C.id} - ${C.name}`,value:C.id})),allowCustom:!0,customLabel:"Use Custom ID",className:"font-roboto-mono"}),E.jsx(rn,{label:"Active Skill Set ID (Ref)",value:e.active_skill_set_id_ref||"",onChange:C=>N("active_skill_set_id_ref",C),options:(l.activeSkillSets||[]).map(C=>({label:`${C.id} - ${C.name}`,value:C.id})),allowCustom:!0,customLabel:"Use Custom ID",isOptional:!0,className:"font-roboto-mono"}),E.jsx(rn,{label:"Standby Skill Set ID (Ref)",value:e.standby_skill_set_id_ref||"",onChange:C=>N("standby_skill_set_id_ref",C),options:(l.standbySkillSets||[]).map(C=>({label:`${C.id} - ${C.name}`,value:C.id})),allowCustom:!0,customLabel:"Use Custom ID",isOptional:!0,className:"font-roboto-mono"})]}),E.jsxs("div",{className:"mt-8",children:[E.jsx("h4",{className:"text-xl font-semibold mb-3 text-orange-400 font-rajdhani",children:"Link Skills"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4",children:e.link_skill_ids.map((C,k)=>{const O=C||"",x=Jc.some(P=>P.value===O&&O!==""),M=O===""?"":x?O:Hc,q=M===Hc;return E.jsxs("div",{className:"space-y-1",children:[E.jsx(rn,{label:`Link Skill ${k+1}`,value:M,onChange:P=>Z(k,P),options:ue}),q&&E.jsx(_e,{label:`Custom Link ID ${k+1}`,value:O,onChange:P=>L("link_skill_ids",k,P),placeholder:"Enter Custom Link ID",className:"font-roboto-mono"})]},k)})})]}),E.jsxs("div",{className:"mt-8",children:[E.jsx("h4",{className:"text-xl font-semibold text-orange-400 font-rajdhani mb-3",children:"Categories"}),E.jsxs("div",{className:"flex items-end gap-x-3 mb-4",children:[E.jsx(rn,{label:"Select or Add Category",value:f,onChange:g,options:[{label:"Select Category...",value:""},...KE,{label:"Enter Custom ID...",value:zc}],className:"flex-grow"}),f===zc&&E.jsx(_e,{label:"Custom Category ID",value:v,onChange:p,placeholder:"Enter ID",className:"flex-grow font-roboto-mono"}),E.jsxs("button",{onClick:X,disabled:!f||f===zc&&!v.trim(),className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-3 rounded-md shadow-sm hover:shadow-md transition-all h-[42px] disabled:opacity-50 disabled:cursor-not-allowed",children:[E.jsx("i",{className:"fas fa-plus mr-1"})," Add"]})]}),E.jsxs("div",{className:"space-y-2",children:[(e.category_ids||[]).length===0&&E.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No categories added."}),(e.category_ids||[]).map(C=>E.jsxs("div",{className:"flex items-center justify-between p-2 bg-indigo-700 bg-opacity-30 rounded-md text-sm",children:[E.jsx("span",{className:"text-indigo-200",children:H(C)}),E.jsx("button",{onClick:()=>Y(C),className:"text-red-400 hover:text-red-500 text-xs p-1 bg-red-900 bg-opacity-20 hover:bg-opacity-40 rounded-full transition-colors",children:E.jsx("i",{className:"fas fa-times"})})]},C))]})]}),E.jsxs("div",{className:"mt-8",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h4",{className:"text-xl font-semibold text-orange-400 font-rajdhani",children:"Special Attacks (card_specials entries)"}),E.jsxs("button",{onClick:he,className:"bg-green-500 hover:bg-green-600 text-sm text-white font-semibold py-1.5 px-3 rounded-md shadow-sm hover:shadow-md transition-all",children:[E.jsx("i",{className:"fas fa-plus mr-1"})," Add Special Attack"]})]}),re.length===0&&E.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No special attacks defined for this card form."}),re.map((C,k)=>E.jsxs("div",{className:"bg-indigo-700 bg-opacity-40 p-4 rounded-lg shadow-md mb-4 border border-indigo-600",children:[E.jsxs("div",{className:"flex justify-between items-center mb-3",children:[E.jsxs("p",{className:"text-md font-medium text-orange-300 font-rajdhani",children:["Special Attack ",k+1," ",E.jsxs("span",{className:"text-xs text-indigo-300 font-roboto-mono",children:["(Row ID: ",C.id,")"]})]}),E.jsxs("button",{onClick:()=>ie(k),className:"text-red-300 hover:text-red-400 text-xs font-semibold py-1 px-2 rounded bg-red-700 bg-opacity-30 hover:bg-opacity-50 transition-colors",children:[E.jsx("i",{className:"fas fa-times mr-1"}),"Remove Special"]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-3",children:[E.jsx(_e,{label:"Row ID (card_specials)",value:C.id,onChange:O=>ve(k,"id",O),className:"font-roboto-mono"}),E.jsx(rn,{label:"Special Set ID",value:C.special_set_id,onChange:O=>ve(k,"special_set_id",O),options:(l.specialSets||[]).map(O=>({label:`${O.id} - ${O.name}`,value:O.id})),allowCustom:!0,customLabel:"Enter Custom Set ID",className:"font-roboto-mono"}),E.jsx(_e,{label:"Style (e.g. Normal, Hyper)",value:C.style,onChange:O=>ve(k,"style",O)}),E.jsx(_e,{label:"Priority",type:"number",value:C.priority,onChange:O=>ve(k,"priority",Number(O))}),E.jsx(_e,{label:"SA Lvl Start",type:"number",value:C.lv_start,onChange:O=>ve(k,"lv_start",Number(O))}),E.jsx(_e,{label:"Ki Required (eball_num_start)",type:"number",value:C.eball_num_start,onChange:O=>ve(k,"eball_num_start",Number(O))}),E.jsx(_e,{label:"View ID",type:"number",value:C.view_id,onChange:O=>ve(k,"view_id",Number(O))}),E.jsx(_e,{label:"Costume Condition ID",type:"number",value:C.card_costume_condition_id,onChange:O=>ve(k,"card_costume_condition_id",Number(O))}),E.jsx(_e,{label:"Bonus ID 1",type:"number",value:C.special_bonus_id1,onChange:O=>ve(k,"special_bonus_id1",Number(O))}),E.jsx(_e,{label:"Bonus Lvl 1",type:"number",value:C.special_bonus_lv1,onChange:O=>ve(k,"special_bonus_lv1",Number(O))}),E.jsx(ti,{label:"Causality Conditions (JSON)",value:C.causality_conditions||"",onChange:O=>ve(k,"causality_conditions",O||null),rows:2,className:"font-roboto-mono lg:col-span-3 md:col-span-2"})]})]},C.id))]})]})},xR=({sql:a})=>{const[e,n]=Pe.useState(!1),r=()=>{navigator.clipboard.writeText(a).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)}).catch(u=>{console.error("Failed to copy SQL: ",u),alert("Failed to copy SQL to clipboard.")})},l=()=>{const u=new Blob([a],{type:"text/sql"}),f=URL.createObjectURL(u),g=document.createElement("a");g.href=f,g.download=`dokkan_patch_${new Date().toISOString().slice(0,10)}.sql`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(f)};return a?E.jsxs("div",{className:"bg-indigo-800 bg-opacity-30 p-4 rounded-lg shadow-inner border border-indigo-700",children:[E.jsxs("div",{className:"flex justify-end mb-4 space-x-3",children:[E.jsxs("button",{onClick:r,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md text-sm transition-all duration-150 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-400",children:[E.jsx("i",{className:`fas ${e?"fa-check":"fa-copy"} mr-2`}),e?"Copied!":"Copy SQL"]}),E.jsxs("button",{onClick:l,className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-md text-sm transition-all duration-150 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-green-400",children:[E.jsx("i",{className:"fas fa-download mr-2"}),"Download .sql"]})]}),E.jsx("pre",{className:"bg-gray-900 bg-opacity-75 p-4 rounded-md text-sm text-indigo-200 whitespace-pre-wrap break-all overflow-x-auto h-96 max-h-[70vh] border border-indigo-600 font-roboto-mono shadow-inner",children:a})]}):E.jsx("p",{className:"text-center text-indigo-300 italic font-rajdhani text-lg",children:'No SQL generated yet. Fill in some data and click "Generate SQL Patch".'})},YE=()=>{const a=new Date,e=a.getFullYear(),n=(a.getMonth()+1).toString().padStart(2,"0"),r=a.getDate().toString().padStart(2,"0"),l=a.getHours().toString().padStart(2,"0"),u=a.getMinutes().toString().padStart(2,"0"),f=a.getSeconds().toString().padStart(2,"0"),v=(a.getMilliseconds().toString().padStart(3,"0")+"000").slice(0,6);return`${e}-${n}-${r} ${l}:${u}:${f}.${v}`},Xr=a=>a==null?"NULL":typeof a=="string"?`'${a.replace(/'/g,"''")}'`:typeof a=="boolean"?a?"1":"0":String(a),IR=(a,e,n)=>{if(n.hasOwnProperty(e)&&n[e]!==void 0&&n[e]!==null)return a==="cards"&&e.startsWith("link_skill")&&e.endsWith("_id")&&n[e]===""?null:n[e];if(e==="created_at"||e==="updated_at")return YE();if(e==="open_at"&&a==="cards")return 0;if(a==="cards"){if(e.startsWith("link_skill")&&e.endsWith("_id")){const r=n.link_skill_ids;if(r){const l=parseInt(e.replace("link_skill","").replace("_id",""))-1;if(l>=0&&l<r.length&&r[l]&&r[l]!=="")return r[l]}return null}if(["optimal_awakening_grow_type","aura_id","aura_scale","aura_offset_x","aura_offset_y","awakening_number","resource_id","bg_effect_id","awakening_element_type","potential_board_id"].includes(e))return null;if(e==="is_aura_front")return 0}if(a==="card_unique_infos"&&e==="kana"||["leader_skills","specials","active_skill_sets","standby_skill_sets","finish_skill_sets"].includes(a)&&e==="causality_conditions"||a==="leader_skills"&&e==="sub_target_type_set_id"||a==="passive_skill_sets"&&e==="itemized_description")return null;if(a==="passive_skills"){if(e==="efficacy_values")return"{}";if(["sub_target_type_set_id","passive_skill_effect_id","causality_conditions"].includes(e))return null}if(a==="special_sets"&&e==="causality_description")return null;if(a==="active_skill_sets"){if(e==="costume_special_view_id")return 0;if(["ultimate_special_id","special_view_id","bgm_id"].includes(e))return null}if(a==="active_skills"){if(e==="efficacy_values")return"{}";if(["sub_target_type_set_id","thumb_effect_id","effect_se_id"].includes(e))return null}if(a==="card_specials"&&["causality_conditions","special_asset_id"].includes(e)||a==="passive_skill_effects"&&e==="bgm_id")return null;if(a==="standby_skill_sets"){if(e==="costume_special_view_id")return 0;if(["special_view_id","bgm_id"].includes(e))return null}if(a==="standby_skills"){if(["target_type_values","sub_target_type_set_id","calc_option","thumb_effect_id","effect_se_id"].includes(e))return null;if(e==="efficacy_values")return"{}"}if(a==="finish_skill_sets"){if(e==="dialog_order"||e==="exec_timing_type"||e==="costume_special_view_id")return 0;if(e==="is_dialog_view_visible")return 1;if(["dialog_images","finish_special_id","special_view_id","bgm_id"].includes(e))return null}if(a==="finish_skills"){if(["target_type_values","sub_target_type_set_id","calc_option","thumb_effect_id","effect_se_id"].includes(e))return null;if(e==="efficacy_values")return"{}"}},qt=(a,e)=>{const n=wR[a];if(!n)return console.warn(`WARN: No column definition for table ${a}. Could not generate SQL for: ${JSON.stringify(e)}`),`-- WARN: No column definition for table ${a}. Could not generate SQL for: ${JSON.stringify(e)}
`;const r=n.map(u=>`"${u}"`).join(", "),l=n.map(u=>{let f=IR(a,u,e);return Xr(f)}).join(", ");return`INSERT OR REPLACE INTO "main"."${a}" (${r}) VALUES (${l});
`},RR=a=>{let e=`-- Dokkan Battle Patch Generated --

`;e+=`-- cards
`;const n=[];a.cardForms.forEach(l=>{e+=qt("cards",l),(l.category_ids||[]).forEach((u,f)=>{if(u&&u.trim()!==""){const g=`${l.id}${(f+1).toString().padStart(3,"0")}`;n.push({id:g,card_id:l.id,card_category_id:u,num:f+1})}})}),e+=`
`,e+=`-- card_unique_infos
`,a.cardUniqueInfos.forEach(l=>{e+=qt("card_unique_infos",l)}),e+=`
`,a.isEZA&&a.optimalAwakeningGrowth&&(e+=`-- optimal_awakening_growths (EZA)
`,e+=qt("optimal_awakening_growths",a.optimalAwakeningGrowth),e+=`
`),n.length>0&&(e+=`-- card_card_categories
`,n.forEach(l=>{e+=qt("card_card_categories",l)}),e+=`
`),e+=`-- leader_skill_sets
`,a.leaderSkillSets.forEach(l=>{e+=qt("leader_skill_sets",{id:l.id,name:l.name,description:l.description}),e+="-- leader_skills for set "+l.id+`
`,l.skills.forEach(u=>{const f={...u,leader_skill_set_id:l.id};e+=qt("leader_skills",f)})}),e+=`
`,e+=`-- passive_skill_sets
`;const r=[];if(a.passiveSkillSets.forEach(l=>{e+=qt("passive_skill_sets",{id:l.id,name:l.name,description:l.description,itemized_description:l.itemized_description}),e+="-- passive_skills for set "+l.id+`
`,l.skills.forEach((u,f)=>{e+=qt("passive_skills",u),r.push({id:`${l.id}${f.toString().padStart(4,"0")}`,passive_skill_set_id:l.id,passive_skill_id:u.id})})}),e+=`
`,r.length>0&&(e+=`-- passive_skill_set_relations
`,r.forEach(l=>{e+=qt("passive_skill_set_relations",l)}),e+=`
`),e+=`-- special_sets
`,a.specialSets.forEach(l=>{e+=qt("special_sets",{id:l.id,name:l.name,description:l.description,causality_description:l.causality_description,aim_target:l.aim_target,increase_rate:l.increase_rate,lv_bonus:l.lv_bonus,is_inactive:l.is_inactive}),e+="-- specials for set "+l.id+`
`,l.skills.forEach(u=>{const f={...u,special_set_id:l.id};e+=qt("specials",f)})}),e+=`
`,a.cardSpecials&&a.cardSpecials.length>0&&(e+=`-- card_specials
`,a.cardSpecials.forEach(l=>{e+=qt("card_specials",l)}),e+=`
`),a.passiveSkillEffects&&a.passiveSkillEffects.length>0&&(e+=`-- Passive Skill Effects
`,a.passiveSkillEffects.forEach(l=>{e+=qt("passive_skill_effects",l)}),e+=`
`),a.effectPacks&&a.effectPacks.length>0&&(e+=`-- effect_packs
`,a.effectPacks.forEach(l=>{e+=qt("effect_packs",l)}),e+=`
`),e+=`-- active_skill_sets
`,a.activeSkillSets.forEach(l=>{e+=qt("active_skill_sets",{id:l.id,name:l.name,effect_description:l.effect_description,condition_description:l.condition_description,turn:l.turn,exec_limit:l.exec_limit,causality_conditions:l.causality_conditions,ultimate_special_id:l.ultimate_special_id,special_view_id:l.special_view_id,costume_special_view_id:l.costume_special_view_id,bgm_id:l.bgm_id}),e+="-- active_skills for set "+l.id+`
`,l.skills.forEach(u=>{const f={...u,active_skill_set_id:l.id};e+=qt("active_skills",f)})}),e+=`
`,a.cardActiveSkills&&a.cardActiveSkills.length>0&&(e+=`-- card_active_skills
`,a.cardActiveSkills.forEach(l=>{e+=qt("card_active_skills",l)}),e+=`
`),a.standbySkillSets&&a.standbySkillSets.length>0&&(e+=`-- standby_skill_sets
`,a.standbySkillSets.forEach(l=>{const u={id:l.id,name:l.name,ingame_icon_path:l.ingame_icon_path,effect_description:l.effect_description,condition_description:l.condition_description,exec_limit:l.exec_limit,causality_conditions:l.causality_conditions,special_view_id:l.special_view_id,costume_special_view_id:l.costume_special_view_id,bgm_id:l.bgm_id};e+=qt("standby_skill_sets",u),e+="-- standby_skills for set "+l.id+`
`,l.skills.forEach(f=>{const g={...f,standby_skill_set_id:l.id};e+=qt("standby_skills",g)})}),e+=`
`),a.cardStandbySkills&&a.cardStandbySkills.length>0&&(e+=`-- card_standby_skill_set_relations
`,a.cardStandbySkills.forEach(l=>{e+=qt("card_standby_skill_set_relations",l)}),e+=`
`),a.finishSpecials&&a.finishSpecials.length>0&&(e+=`-- finish_specials
`,a.finishSpecials.forEach(l=>{e+=qt("finish_specials",l)}),e+=`
`),a.finishSkillSets&&a.finishSkillSets.length>0&&(e+=`-- finish_skill_sets
`,a.finishSkillSets.forEach(l=>{const u={id:l.id,name:l.name,effect_description:l.effect_description,condition_description:l.condition_description,dialog_order:l.dialog_order,dialog_images:l.dialog_images,exec_timing_type:l.exec_timing_type,exec_limit:l.exec_limit,causality_conditions:l.causality_conditions,finish_special_id:l.finish_special_id,special_view_id:l.special_view_id,costume_special_view_id:l.costume_special_view_id,bgm_id:l.bgm_id,is_dialog_view_visible:l.is_dialog_view_visible};e+=qt("finish_skill_sets",u),e+="-- finish_skills for set "+l.id+`
`,l.skills.forEach(f=>{const g={...f,finish_skill_set_id:l.id};e+=qt("finish_skills",g)})}),e+=`
`),a.standbySkillSetFinishSkillSetRelations&&a.standbySkillSetFinishSkillSetRelations.length>0&&(e+=`-- standby_skill_set_finish_skill_set_relations
`,a.standbySkillSetFinishSkillSetRelations.forEach(l=>{e+=qt("standby_skill_set_finish_skill_set_relations",l)}),e+=`
`),a.battleParams&&a.battleParams.length>0&&(e+=`-- battle_params
`,a.battleParams.forEach(l=>{e+=qt("battle_params",l)}),e+=`
`),a.isEZA&&a.optimalAwakeningGrowth&&a.baseCardIdForEZA){const l=a.optimalAwakeningGrowth;e+=`-- EZA Card Update
`,e+=`UPDATE "main"."cards" SET 
        "optimal_awakening_grow_type" = ${Xr(l.optimal_awakening_grow_type)},
        "lv_max" = ${Xr(l.lv_max)},
        "skill_lv_max" = ${Xr(l.skill_lv_max)},
        "passive_skill_set_id" = ${Xr(l.passive_skill_set_id)},
        "leader_skill_set_id" = ${Xr(l.leader_skill_set_id)},
        "updated_at" = ${Xr(YE())}
    WHERE "id" = ${Xr(a.baseCardIdForEZA)};

`}return e+=`-- End of Patch --
`,e},Gl=({skillSetId:a,skills:e,updateSkills:n,initialSkillFactory:r,skillName:l})=>{const u=()=>{const S=r(),A=e.length,N=String(a).replace(/\D/g,""),X=N.length>0?N:a;l==="Passive Effect"||l==="Special Effect"?A===0?S.id=String(X):S.id=String(A*100)+String(X):l==="Leader Skill Effect"?S.id=String(X)+String(A).padStart(2,"0"):l==="Active Skill Effect"?S.id=String(X)+String(A+1):S.id=ni(),"name"in S&&!S.name&&e.length>0&&"name"in e[0]&&e[0].name?S.name=e[0].name:"name"in S&&!S.name&&(S.name=`${l} Detail for ${a}`),"description"in S&&!S.description&&e.length>0&&"description"in e[0]&&e[0].description?S.description=e[0].description:"description"in S&&!S.description&&(S.description=`Detail for ${a}`),n([...e,S])},f=(S,A,N)=>{const L=e.map((X,Y)=>Y===S?{...X,[A]:N}:X);n(L)},g=S=>{n(e.filter((A,N)=>N!==S))},v=(S,A,N)=>E.jsxs(E.Fragment,{children:[E.jsx(_e,{label:"Effect ID",value:S.id,onChange:L=>f(A,"id",L),className:"font-roboto-mono"}),"name"in S&&E.jsx(_e,{label:"Effect Name (Internal)",value:S.name||"",onChange:L=>f(A,"name",L)}),"description"in S&&E.jsx(_e,{label:"Effect Description (Internal)",value:S.description||"",onChange:L=>f(A,"description",L)}),E.jsx("div",{className:N?"flex flex-col":"",children:E.jsx(rn,{label:"Efficacy Type",value:S.efficacy_type,onChange:L=>f(A,"efficacy_type",Number(L)),options:dR})}),E.jsx(_e,{label:"Eff Value 1",value:S.eff_value1??"",onChange:L=>f(A,"eff_value1",L)}),E.jsx(_e,{label:"Eff Value 2",value:S.eff_value2??"",onChange:L=>f(A,"eff_value2",L)}),E.jsx(_e,{label:"Eff Value 3",value:S.eff_value3??"",onChange:L=>f(A,"eff_value3",L)}),"efficacy_values"in S&&E.jsx(_e,{label:"Efficacy Values (JSON)",value:S.efficacy_values||"{}",onChange:L=>f(A,"efficacy_values",L),className:"font-roboto-mono"}),E.jsx(rn,{label:"Target Type",value:S.target_type,onChange:L=>f(A,"target_type",Number(L)),options:uR}),E.jsx(rn,{label:"Calc Option",value:S.calc_option??"",onChange:L=>f(A,"calc_option",L===""?null:Number(L)),options:rR}),"exec_timing_type"in S&&E.jsx(rn,{label:"Exec Timing Type",value:S.exec_timing_type,onChange:L=>f(A,"exec_timing_type",Number(L)),options:lR}),"turn"in S&&E.jsx(_e,{label:"Turn Duration",type:"number",value:S.turn,onChange:L=>f(A,"turn",Number(L))}),"probability"in S&&E.jsx(_e,{label:"Probability (%)",type:"number",value:S.probability,onChange:L=>f(A,"probability",Number(L)),min:0,max:100}),"prob"in S&&E.jsx(_e,{label:"Probability (%)",type:"number",value:S.prob,onChange:L=>f(A,"prob",Number(L)),min:0,max:100}),"is_once"in S&&E.jsx(bp,{label:"Is Once Only",checked:S.is_once===1,onChange:L=>f(A,"is_once",L?1:0)}),E.jsx(_e,{label:"Sub Target Type Set ID",value:S.sub_target_type_set_id||"",onChange:L=>f(A,"sub_target_type_set_id",L||null),className:"font-roboto-mono"}),"passive_skill_effect_id"in S&&E.jsx(_e,{label:"Passive Skill Effect ID",value:S.passive_skill_effect_id||"",onChange:L=>f(A,"passive_skill_effect_id",L||null),className:"font-roboto-mono"}),E.jsx("div",{className:N?"lg:col-span-3 md:col-span-2":"",children:E.jsx(ti,{label:"Causality Conditions (JSON)",value:S.causality_conditions||"",onChange:L=>f(A,"causality_conditions",L||null),rows:N?2:3,className:"font-roboto-mono"})}),"target_type_values"in S&&E.jsx(_e,{label:"Target Type Values (JSON)",value:S.target_type_values||"{}",onChange:L=>f(A,"target_type_values",L),className:"font-roboto-mono"}),"thumb_effect_id"in S&&E.jsx(_e,{label:"Thumb Effect ID",value:S.thumb_effect_id||"",onChange:L=>f(A,"thumb_effect_id",L||null),className:"font-roboto-mono"}),"effect_se_id"in S&&E.jsx(_e,{label:"Effect SE ID",value:S.effect_se_id||"",onChange:L=>f(A,"effect_se_id",L||null),className:"font-roboto-mono"})]}),p=l==="Passive Effect";return E.jsxs("div",{className:"mt-6",children:[E.jsxs("h5",{className:"text-xl font-semibold mb-3 text-orange-300 font-rajdhani",children:[l," Details:"]}),e.map((S,A)=>E.jsxs("div",{className:"mb-6 p-4 bg-indigo-700 bg-opacity-40 rounded-lg shadow-md border border-indigo-600",children:[E.jsxs("div",{className:"flex justify-between items-center mb-3",children:[E.jsxs("p",{className:"text-md font-medium text-orange-300 font-rajdhani",children:[l," ",A+1," ",E.jsxs("span",{className:"text-xs text-indigo-300 font-roboto-mono",children:["(ID: ",S.id,")"]})]}),E.jsxs("button",{onClick:()=>g(A),className:"text-red-300 hover:text-red-400 text-xs font-semibold py-1 px-2 rounded bg-red-700 bg-opacity-30 hover:bg-opacity-50 transition-colors",children:[E.jsx("i",{className:"fas fa-times mr-1"}),"Remove Effect"]})]}),E.jsxs("div",{className:`grid gap-x-6 gap-y-3 ${p?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1 sm:grid-cols-2"}`,children:[v(S,A,p),l==="Special Effect"&&E.jsx(_e,{label:"Type (e.g. Special::NormalEfficacySpecial)",value:S.type,onChange:N=>f(A,"type",N)})]})]},S.id||A)),e.length===0&&E.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No effects added yet."}),E.jsxs("button",{onClick:u,className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md text-sm shadow-md hover:shadow-lg transition-all",children:[E.jsx("i",{className:"fas fa-plus mr-2"})," Add ",l," Effect"]})]})},kR=({patchState:a,setPatchState:e})=>{const[n,r]=Pe.useState(null),l=p=>{const S=ni();let A;switch(p){case"passiveSkillSets":A={id:S,name:`New Global Passive ${a.passiveSkillSets.length+1}`,description:"",itemized_description:"",skills:[]};break;case"leaderSkillSets":A={id:S,name:`New Global Leader ${a.leaderSkillSets.length+1}`,description:"",skills:[]};break;case"specialSets":A={id:S,name:`New Global Special ${a.specialSets.length+1}`,description:"",skills:[],aim_target:0,increase_rate:180,lv_bonus:25,is_inactive:0};break;case"activeSkillSets":A={id:S,name:`New Global Active ${a.activeSkillSets.length+1}`,effect_description:"",condition_description:"",turn:1,exec_limit:1,skills:[],costume_special_view_id:0};break}A&&(e(N=>({...N,[p]:[...N[p],A]})),r({type:p,id:S}))},u=(p,S)=>{e(A=>({...A,[p]:A[p].map(N=>N.id===S.id?S:N)}))},f=(p,S)=>{window.confirm(`Are you sure you want to delete skill set ${S}? This might break Card Form references.`)&&(e(A=>({...A,[p]:A[p].filter(N=>N.id!==S)})),(n==null?void 0:n.id)===S&&r(null))},g=(p,S)=>E.jsxs("div",{className:"mb-8 p-4 bg-indigo-800 bg-opacity-40 rounded-lg shadow-lg border border-indigo-600",children:[E.jsx("h3",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani capitalize",children:p.replace(/([A-Z])/g," $1").replace("Skill Sets"," Skill Sets")}),E.jsxs("button",{onClick:()=>l(p),className:"mb-4 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-md text-sm shadow-md hover:shadow-lg transition-all",children:[E.jsx("i",{className:"fas fa-plus mr-2"})," Add New ",p.replace("SkillSets"," Skill Set").replace("Sets"," Set")]}),E.jsxs("ul",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:[S.map(A=>E.jsxs("li",{className:`p-3 rounded-md cursor-pointer flex justify-between items-center transition-all duration-150 ease-in-out shadow-sm hover:shadow-md font-rajdhani
                          ${(n==null?void 0:n.type)===p&&(n==null?void 0:n.id)===A.id?"bg-orange-500 text-white ring-2 ring-orange-300":"bg-indigo-700 hover:bg-indigo-600 hover:text-orange-300"}`,onClick:()=>r({type:p,id:A.id}),children:[E.jsxs("span",{className:"truncate",children:[E.jsx("span",{className:"font-roboto-mono text-xs opacity-75",children:A.id})," - ",A.name]}),E.jsx("button",{onClick:N=>{N.stopPropagation(),f(p,A.id)},className:"text-red-300 hover:text-red-500 hover:bg-red-700 hover:bg-opacity-50 rounded-full p-1 text-xs transition-colors",children:E.jsx("i",{className:"fas fa-trash"})})]},A.id)),S.length===0&&E.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No sets defined yet."})]})]}),v=()=>{if(!n)return E.jsx("p",{className:"text-center text-indigo-300 font-rajdhani text-lg italic mt-10",children:"Select a skill set to edit or create a new one."});const{type:p,id:S}=n,A=a[p].find(L=>L.id===S);if(!A)return r(null),E.jsx("p",{className:"text-red-400",children:"Error: Skill set not found."});const N=E.jsxs(E.Fragment,{children:[E.jsx(_e,{label:"ID",value:A.id,onChange:L=>u(p,{...A,id:L}),className:"font-roboto-mono"}),E.jsx(_e,{label:"Name",value:A.name,onChange:L=>u(p,{...A,name:L})})]});switch(p){case"passiveSkillSets":const L=A;return E.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[E.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Passive Skill Set: ",E.jsx("span",{className:"text-indigo-200",children:L.name})]}),N,E.jsx(ti,{label:"Description (Player-facing)",value:L.description,onChange:re=>u(p,{...L,description:re}),rows:4}),E.jsx(ti,{label:"Itemized Description",value:L.itemized_description||"",onChange:re=>u(p,{...L,itemized_description:re}),rows:6}),E.jsx(Gl,{skillSetId:L.id,skills:L.skills,updateSkills:re=>u(p,{...L,skills:re}),initialSkillFactory:hR,skillName:"Passive Effect"})]});case"leaderSkillSets":const X=A;return E.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[E.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Leader Skill Set: ",E.jsx("span",{className:"text-indigo-200",children:X.name})]}),N,E.jsx(ti,{label:"Description (Player-facing)",value:X.description,onChange:re=>u(p,{...X,description:re}),rows:4}),E.jsx(Gl,{skillSetId:X.id,skills:X.skills,updateSkills:re=>u(p,{...X,skills:re}),initialSkillFactory:()=>({...mR(),leader_skill_set_id:X.id}),skillName:"Leader Skill Effect"})]});case"specialSets":const Y=A;return E.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[E.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Special Set: ",E.jsx("span",{className:"text-indigo-200",children:Y.name})]}),N,E.jsx(ti,{label:"Description",value:Y.description,onChange:re=>u(p,{...Y,description:re}),rows:3}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[E.jsx(_e,{label:"Aim Target",type:"number",value:Y.aim_target,onChange:re=>u(p,{...Y,aim_target:Number(re)})}),E.jsx(_e,{label:"Increase Rate",type:"number",value:Y.increase_rate,onChange:re=>u(p,{...Y,increase_rate:Number(re)})}),E.jsx(_e,{label:"Level Bonus",type:"number",value:Y.lv_bonus,onChange:re=>u(p,{...Y,lv_bonus:Number(re)})}),E.jsx(rn,{label:"Is Inactive",value:Y.is_inactive,onChange:re=>u(p,{...Y,is_inactive:Number(re)}),options:[{label:"Active",value:0},{label:"Inactive",value:1}]})]}),E.jsx(Gl,{skillSetId:Y.id,skills:Y.skills,updateSkills:re=>u(p,{...Y,skills:re}),initialSkillFactory:()=>({...pR(),special_set_id:Y.id}),skillName:"Special Effect"})]});case"activeSkillSets":const Z=A;return E.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[E.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Active Skill Set: ",E.jsx("span",{className:"text-indigo-200",children:Z.name})]}),N,E.jsx(ti,{label:"Effect Description",value:Z.effect_description,onChange:re=>u(p,{...Z,effect_description:re}),rows:3}),E.jsx(ti,{label:"Condition Description",value:Z.condition_description,onChange:re=>u(p,{...Z,condition_description:re}),rows:3}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[E.jsx(_e,{label:"Turn",type:"number",value:Z.turn,onChange:re=>u(p,{...Z,turn:Number(re)})}),E.jsx(_e,{label:"Execution Limit",type:"number",value:Z.exec_limit,onChange:re=>u(p,{...Z,exec_limit:Number(re)})}),E.jsx(_e,{label:"BGM ID",type:"number",value:Z.bgm_id??"",onChange:re=>u(p,{...Z,bgm_id:re?Number(re):null}),placeholder:"Optional BGM ID"}),E.jsx(_e,{label:"Ultimate Special ID",type:"number",value:Z.ultimate_special_id??"",onChange:re=>u(p,{...Z,ultimate_special_id:re?Number(re):null}),placeholder:"Optional"}),E.jsx(_e,{label:"Special View ID",type:"number",value:Z.special_view_id??"",onChange:re=>u(p,{...Z,special_view_id:re?Number(re):null}),placeholder:"Optional"}),E.jsx(_e,{label:"Costume Special View ID",type:"number",value:Z.costume_special_view_id??"",onChange:re=>u(p,{...Z,costume_special_view_id:re?Number(re):0}),placeholder:"Defaults to 0"})]}),E.jsx(Gl,{skillSetId:Z.id,skills:Z.skills,updateSkills:re=>u(p,{...Z,skills:re}),initialSkillFactory:()=>({...gR(),active_skill_set_id:Z.id}),skillName:"Active Skill Effect"})]});default:return null}};return E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[E.jsxs("div",{className:"space-y-6",children:[g("passiveSkillSets",a.passiveSkillSets),g("leaderSkillSets",a.leaderSkillSets)]}),E.jsxs("div",{className:"space-y-6",children:[g("specialSets",a.specialSets),g("activeSkillSets",a.activeSkillSets)]}),E.jsx("div",{className:"md:col-span-2 mt-4",children:v()})]})},NR=({patchState:a,setPatchState:e})=>{const[n,r]=Pe.useState(null),[l,u]=Pe.useState(null),[f,g]=Pe.useState(null),v=ie=>{let H,ue=ni();switch(ie){case"standbySkillSet":H=vR(),ue=H.id,e(x=>({...x,standbySkillSets:[...x.standbySkillSets||[],H]}));break;case"finishSkillSet":H=ER(),ue=H.id,e(x=>({...x,finishSkillSets:[...x.finishSkillSets||[],H]}));break;case"finishSpecial":H=TR(),ue=H.id,e(x=>({...x,finishSpecials:[...x.finishSpecials||[],H]}));break;case"battleParam":const C=(a.battleParams||[]).map(x=>x.param_no);let k=1;for(;C.includes(k);)k++;const O=m0(k,0);e(x=>({...x,battleParams:[...x.battleParams||[],O]})),ue=k,g(k),u(null),r("battleParam");return}r(ie),u(ue),g(null)},p=(ie,H)=>{r(ie),ie==="battleParam"?(g(H),u(null)):(u(H),g(null))},S=(ie,H)=>{e(ue=>{const k=(ue[ie]||[]).map(O=>O.id===H.id?H:O);return{...ue,[ie]:k}})},A=ie=>{e(H=>({...H,battleParams:(H.battleParams||[]).map(ue=>ue.id===ie.id?ie:ue)}))},N=ie=>{const H=(a.battleParams||[]).filter(k=>k.param_no===ie),ue=H.length>0?Math.max(...H.map(k=>k.idx))+1:0,C=m0(ie,ue);e(k=>({...k,battleParams:[...k.battleParams||[],C]}))},L=ie=>{e(H=>({...H,battleParams:(H.battleParams||[]).filter(ue=>ue.id!==ie)}))},X=(ie,H)=>{let ue=null;switch(ie){case"standbySkillSet":ue="standbySkillSets";break;case"finishSkillSet":ue="finishSkillSets";break;case"finishSpecial":ue="finishSpecials";break;case"battleParam":e(C=>({...C,battleParams:(C.battleParams||[]).filter(k=>k.param_no!==H)})),f===H&&(g(null),r(null));return}if(ue){const C=ue;e(k=>({...k,[C]:(k[C]||[]).filter(O=>O.id!==H)})),l===H&&(u(null),r(null))}},Y=(ie,H)=>{if(!H)return;if((a.standbySkillSetFinishSkillSetRelations||[]).some(k=>k.standby_skill_set_id===ie&&k.finish_skill_set_id===H)){alert("This Finish Skill Set is already linked.");return}const C=SR(ie,H);e(k=>({...k,standbySkillSetFinishSkillSetRelations:[...k.standbySkillSetFinishSkillSetRelations||[],C]}))},Z=ie=>{e(H=>({...H,standbySkillSetFinishSkillSetRelations:(H.standbySkillSetFinishSkillSetRelations||[]).filter(ue=>ue.id!==ie)}))},re=(ie,H,ue,C)=>E.jsxs("div",{className:"mb-6 p-4 bg-indigo-800 bg-opacity-40 rounded-lg shadow-lg border border-indigo-600",children:[E.jsx("h3",{className:"text-xl font-bold mb-3 text-orange-400 font-rajdhani",children:ie}),E.jsxs("button",{onClick:()=>v(H),className:"mb-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all",children:[E.jsx("i",{className:"fas fa-plus mr-1.5"})," Add New"]}),E.jsxs("ul",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[ue.map(k=>E.jsxs("li",{className:`p-2.5 rounded-md cursor-pointer flex justify-between items-center transition-all duration-150 ease-in-out shadow-sm hover:shadow-md font-rajdhani text-sm
                          ${n===H&&C===k.id?"bg-orange-500 text-white ring-1 ring-orange-300":"bg-indigo-700 hover:bg-indigo-600 hover:text-orange-300"}`,onClick:()=>p(H,k.id),children:[E.jsxs("span",{className:"truncate",children:[E.jsx("span",{className:"font-roboto-mono text-xs opacity-70 mr-1",children:k.id})," - ",k.name||"Unnamed"]}),E.jsx("button",{onClick:O=>{O.stopPropagation(),X(H,k.id)},className:"text-red-300 hover:text-red-500 hover:bg-red-700 hover:bg-opacity-40 rounded-full p-0.5 px-1.5 text-xs transition-colors",children:E.jsx("i",{className:"fas fa-trash"})})]},k.id)),ue.length===0&&E.jsx("p",{className:"text-xs text-indigo-300 italic",children:"No items yet."})]})]}),he=()=>{const ie=Array.from(new Set((a.battleParams||[]).map(H=>H.param_no))).sort((H,ue)=>H-ue);return E.jsxs("div",{className:"mb-6 p-4 bg-indigo-800 bg-opacity-40 rounded-lg shadow-lg border border-indigo-600",children:[E.jsx("h3",{className:"text-xl font-bold mb-3 text-orange-400 font-rajdhani",children:"Battle Param Sets (by param_no)"}),E.jsxs("button",{onClick:()=>v("battleParam"),className:"mb-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all",children:[E.jsx("i",{className:"fas fa-plus mr-1.5"})," Add New Param Set"]}),E.jsxs("ul",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1 custom-scrollbar",children:[ie.map(H=>E.jsxs("li",{className:`p-2.5 rounded-md cursor-pointer flex justify-between items-center transition-all duration-150 ease-in-out shadow-sm hover:shadow-md font-rajdhani text-sm
                                ${n==="battleParam"&&f===H?"bg-orange-500 text-white ring-1 ring-orange-300":"bg-indigo-700 hover:bg-indigo-600 hover:text-orange-300"}`,onClick:()=>p("battleParam",H),children:[E.jsxs("span",{children:["Param No: ",E.jsx("span",{className:"font-roboto-mono",children:H})," (",(a.battleParams||[]).filter(ue=>ue.param_no===H).length," entries)"]}),E.jsx("button",{onClick:ue=>{ue.stopPropagation(),X("battleParam",H)},className:"text-red-300 hover:text-red-500 hover:bg-red-700 hover:bg-opacity-40 rounded-full p-0.5 px-1.5 text-xs transition-colors",children:E.jsx("i",{className:"fas fa-trash"})})]},H)),ie.length===0&&E.jsx("p",{className:"text-xs text-indigo-300 italic",children:"No Battle Param sets yet."})]})]})},ve=()=>{if(!n||l===null&&f===null)return E.jsx("p",{className:"text-center text-indigo-300 font-rajdhani text-lg italic mt-10",children:"Select an item or create a new one to start editing."});let ie;if(!(n==="battleParam"&&f!==null)){if(l!==null)switch(n){case"standbySkillSet":ie=(a.standbySkillSets||[]).find(H=>H.id===l);break;case"finishSkillSet":ie=(a.finishSkillSets||[]).find(H=>H.id===l);break;case"finishSpecial":ie=(a.finishSpecials||[]).find(H=>H.id===l);break}}if(n!=="battleParam"&&!ie)return u(null),r(null),E.jsx("p",{className:"text-red-400",children:"Error: Selected item not found."});switch(n){case"standbySkillSet":const H=ie,ue=(a.standbySkillSetFinishSkillSetRelations||[]).filter(x=>x.standby_skill_set_id===H.id).map(x=>({relationId:x.id,finishSet:(a.finishSkillSets||[]).find(M=>M.id===x.finish_skill_set_id)})).filter(x=>x.finishSet);return E.jsxs("div",{className:"p-5 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[E.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Standby Skill Set: ",E.jsx("span",{className:"text-indigo-200",children:H.name})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mb-4",children:[E.jsx(_e,{label:"ID",value:H.id,onChange:x=>S("standbySkillSets",{...H,id:x}),className:"font-roboto-mono"}),E.jsx(_e,{label:"Name",value:H.name,onChange:x=>S("standbySkillSets",{...H,name:x})}),E.jsx(_e,{label:"Ingame Icon Path",value:H.ingame_icon_path,onChange:x=>S("standbySkillSets",{...H,ingame_icon_path:x})}),E.jsx(_e,{label:"Execution Limit",type:"number",value:H.exec_limit,onChange:x=>S("standbySkillSets",{...H,exec_limit:Number(x)})}),E.jsx(_e,{label:"Special View ID",type:"number",value:H.special_view_id??"",onChange:x=>S("standbySkillSets",{...H,special_view_id:x?Number(x):null}),placeholder:"Optional"}),E.jsx(_e,{label:"Costume Special View ID",type:"number",value:H.costume_special_view_id,onChange:x=>S("standbySkillSets",{...H,costume_special_view_id:Number(x)})}),E.jsx(_e,{label:"BGM ID",type:"number",value:H.bgm_id??"",onChange:x=>S("standbySkillSets",{...H,bgm_id:x?Number(x):null}),placeholder:"Optional",className:"font-roboto-mono"}),E.jsx(ti,{label:"Effect Description",value:H.effect_description,onChange:x=>S("standbySkillSets",{...H,effect_description:x}),rows:3,className:"md:col-span-2"}),E.jsx(ti,{label:"Condition Description",value:H.condition_description,onChange:x=>S("standbySkillSets",{...H,condition_description:x}),rows:3,className:"md:col-span-2"}),E.jsx(ti,{label:"Causality Conditions (JSON)",value:H.causality_conditions||"",onChange:x=>S("standbySkillSets",{...H,causality_conditions:x||null}),rows:2,className:"md:col-span-2 font-roboto-mono"})]}),E.jsx(Gl,{skillSetId:H.id,skills:H.skills||[],updateSkills:x=>S("standbySkillSets",{...H,skills:x}),initialSkillFactory:()=>yR(H.id),skillName:"Standby Skill Effect"}),E.jsxs("div",{className:"mt-6 pt-4 border-t border-indigo-600",children:[E.jsx("h5",{className:"text-lg font-semibold mb-2 text-orange-300 font-rajdhani",children:"Link Finish Skill Set"}),E.jsx("div",{className:"flex items-end gap-2 mb-3",children:E.jsx(rn,{label:"Available Finish Skill Sets",value:"",onChange:x=>Y(H.id,x),options:[{label:"Select Finish Set to Link...",value:""},...(a.finishSkillSets||[]).map(x=>({label:`${x.id} - ${x.name}`,value:x.id}))],className:"flex-grow"})}),ue.length>0&&E.jsx("p",{className:"text-sm text-indigo-200 mb-1",children:"Linked Sets:"}),E.jsx("ul",{className:"space-y-1",children:ue.map(x=>x.finishSet&&E.jsxs("li",{className:"flex justify-between items-center text-xs p-1.5 bg-indigo-700 bg-opacity-30 rounded",children:[E.jsxs("span",{children:[x.finishSet.id," - ",x.finishSet.name]}),E.jsx("button",{onClick:()=>Z(x.relationId),className:"text-red-400 hover:text-red-500 text-xs p-0.5",children:E.jsx("i",{className:"fas fa-unlink"})})]},x.relationId))})]})]});case"finishSkillSet":const C=ie;return E.jsxs("div",{className:"p-5 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[E.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Finish Skill Set: ",E.jsx("span",{className:"text-indigo-200",children:C.name})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mb-4",children:[E.jsx(_e,{label:"ID",value:C.id,onChange:x=>S("finishSkillSets",{...C,id:x}),className:"font-roboto-mono"}),E.jsx(_e,{label:"Name",value:C.name,onChange:x=>S("finishSkillSets",{...C,name:x})}),E.jsx(_e,{label:"Dialog Order",type:"number",value:C.dialog_order,onChange:x=>S("finishSkillSets",{...C,dialog_order:Number(x)})}),E.jsx(_e,{label:"Execution Timing Type",type:"number",value:C.exec_timing_type,onChange:x=>S("finishSkillSets",{...C,exec_timing_type:Number(x)})}),E.jsx(_e,{label:"Execution Limit",type:"number",value:C.exec_limit,onChange:x=>S("finishSkillSets",{...C,exec_limit:Number(x)})}),E.jsx(rn,{label:"Finish Special ID",value:C.finish_special_id||"",onChange:x=>S("finishSkillSets",{...C,finish_special_id:x||null}),options:[{label:"None",value:""},...(a.finishSpecials||[]).map(x=>({label:`${x.id} (Rate: ${x.increase_rate})`,value:x.id}))],className:"font-roboto-mono",isOptional:!0}),E.jsx(_e,{label:"Special View ID",type:"number",value:C.special_view_id??"",onChange:x=>S("finishSkillSets",{...C,special_view_id:x?Number(x):null}),placeholder:"Optional"}),E.jsx(_e,{label:"Costume Special View ID",type:"number",value:C.costume_special_view_id,onChange:x=>S("finishSkillSets",{...C,costume_special_view_id:Number(x)})}),E.jsx(_e,{label:"BGM ID",type:"number",value:C.bgm_id??"",onChange:x=>S("finishSkillSets",{...C,bgm_id:x?Number(x):null}),placeholder:"Optional",className:"font-roboto-mono"}),E.jsx(bp,{label:"Is Dialog View Visible",checked:C.is_dialog_view_visible===1,onChange:x=>S("finishSkillSets",{...C,is_dialog_view_visible:x?1:0})}),E.jsx(ti,{label:"Effect Description",value:C.effect_description,onChange:x=>S("finishSkillSets",{...C,effect_description:x}),rows:3,className:"md:col-span-2"}),E.jsx(ti,{label:"Condition Description",value:C.condition_description,onChange:x=>S("finishSkillSets",{...C,condition_description:x}),rows:3,className:"md:col-span-2"}),E.jsx(ti,{label:"Dialog Images (JSON)",value:C.dialog_images||"",onChange:x=>S("finishSkillSets",{...C,dialog_images:x||null}),rows:2,className:"md:col-span-2 font-roboto-mono"}),E.jsx(ti,{label:"Causality Conditions (JSON)",value:C.causality_conditions||"",onChange:x=>S("finishSkillSets",{...C,causality_conditions:x||null}),rows:2,className:"md:col-span-2 font-roboto-mono"})]}),E.jsx(Gl,{skillSetId:C.id,skills:C.skills||[],updateSkills:x=>S("finishSkillSets",{...C,skills:x}),initialSkillFactory:()=>bR(C.id),skillName:"Finish Skill Effect"})]});case"finishSpecial":const k=ie;return E.jsxs("div",{className:"p-5 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[E.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Finish Special: ",E.jsx("span",{className:"text-indigo-200",children:k.id})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[E.jsx(_e,{label:"ID",value:k.id,onChange:x=>S("finishSpecials",{...k,id:x}),className:"font-roboto-mono"}),E.jsx(_e,{label:"Increase Rate",type:"number",value:k.increase_rate,onChange:x=>S("finishSpecials",{...k,increase_rate:Number(x)})}),E.jsx(_e,{label:"Aim Target",type:"number",value:k.aim_target,onChange:x=>S("finishSpecials",{...k,aim_target:Number(x)})})]})]});case"battleParam":if(f===null)return E.jsx("p",{children:"Select a Battle Param Set number."});const O=(a.battleParams||[]).filter(x=>x.param_no===f).sort((x,M)=>x.idx-M.idx);return E.jsxs("div",{className:"p-5 bg-indigo-800 bg-opacity-50 rounded-xl shadow-xl border-2 border-orange-500",children:[E.jsxs("h4",{className:"text-2xl font-bold mb-4 text-orange-400 font-rajdhani",children:["Editing Battle Param Set: ",E.jsx("span",{className:"text-indigo-200 font-roboto-mono",children:f})]}),E.jsxs("button",{onClick:()=>N(f),className:"mb-4 bg-green-500 hover:bg-green-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all",children:[E.jsx("i",{className:"fas fa-plus mr-1.5"})," Add Param Entry"]}),O.map((x,M)=>E.jsxs("div",{className:"grid grid-cols-3 gap-x-4 gap-y-2 items-center mb-2 p-2 bg-indigo-700 bg-opacity-30 rounded",children:[E.jsx(_e,{label:`ID (Row ${M+1})`,value:x.id,onChange:q=>A({...x,id:q}),disabled:!0,className:"font-roboto-mono text-xs"}),E.jsx(_e,{label:"Index (idx)",type:"number",value:x.idx,onChange:q=>A({...x,idx:Number(q)})}),E.jsxs("div",{className:"flex items-end",children:[E.jsx(_e,{label:"Value",value:x.value,onChange:q=>A({...x,value:isNaN(Number(q))?q:Number(q)})}),E.jsx("button",{onClick:()=>L(x.id),className:"ml-2 text-red-400 hover:text-red-500 p-1.5 h-[38px] bg-red-700 bg-opacity-20 hover:bg-opacity-40 rounded",children:E.jsx("i",{className:"fas fa-times"})})]})]},x.id)),O.length===0&&E.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No parameters in this set yet."})]});default:return null}};return E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-6",children:[E.jsxs("div",{className:"md:col-span-1 space-y-4",children:[re("Standby Skill Sets","standbySkillSet",a.standbySkillSets||[],l),re("Finish Skill Sets","finishSkillSet",a.finishSkillSets||[],l),re("Finish Specials","finishSpecial",a.finishSpecials||[],l),he()]}),E.jsx("div",{className:"md:col-span-2",children:ve()})]})},DR=({patchState:a,setPatchState:e})=>{Pe.useEffect(()=>{a.isEZA&&a.baseCardIdForEZA&&na(a.baseCardIdForEZA)&&e(u=>{if(!u.optimalAwakeningGrowth)return u;const f=Mt.OPTIMAL_AWAKENING_GROWTH_ID+u.baseCardIdForEZA,g=Mt.OPTIMAL_AWAKENING_GROWTH_TYPE_ID+u.baseCardIdForEZA;let v=!1;const p={...u.optimalAwakeningGrowth};return na(p.id)&&p.id!==f&&(p.id=f,v=!0),na(p.optimal_awakening_grow_type)&&p.optimal_awakening_grow_type!==g&&(p.optimal_awakening_grow_type=g,v=!0),v?{...u,optimalAwakeningGrowth:p}:u})},[a.isEZA,a.baseCardIdForEZA,e]);const n=u=>{e(f=>{const g=f.baseCardIdForEZA||(f.cardForms.length>0?f.cardForms[0].id:ni()),v=Mt.OPTIMAL_AWAKENING_GROWTH_ID+g,p=Mt.OPTIMAL_AWAKENING_GROWTH_TYPE_ID+g;return{...f,isEZA:u,baseCardIdForEZA:u&&!f.baseCardIdForEZA?g:f.baseCardIdForEZA,optimalAwakeningGrowth:u?f.optimalAwakeningGrowth||{id:v,optimal_awakening_grow_type:p,step:7,lv_max:140,skill_lv_max:15,passive_skill_set_id:"",leader_skill_set_id:""}:void 0}})},r=u=>{e(f=>({...f,baseCardIdForEZA:u}))},l=(u,f)=>{e(g=>({...g,optimalAwakeningGrowth:g.optimalAwakeningGrowth?{...g.optimalAwakeningGrowth,[u]:f}:void 0}))};return E.jsxs("div",{className:"p-6 bg-indigo-800 bg-opacity-30 rounded-xl shadow-xl border border-indigo-700",children:[E.jsx("h2",{className:"text-3xl font-bold mb-8 text-orange-400 font-rajdhani border-b-2 border-orange-500 pb-2",children:"Extreme Z-Awakening (EZA) Details"}),E.jsx(bp,{label:"Is this an EZA patch?",checked:a.isEZA,onChange:n,className:"mb-6 text-lg"}),a.isEZA&&E.jsxs("div",{className:"mt-6 space-y-6",children:[E.jsx(_e,{label:"Base Card ID for EZA",value:a.baseCardIdForEZA||"",onChange:r,placeholder:"e.g., 1024061 (Original Card ID)",helpText:"The ID of the card that is being EZA'd. This is used in the `UPDATE cards ...` statement.",className:"font-roboto-mono"}),a.optimalAwakeningGrowth&&E.jsxs("div",{className:"p-6 border-2 border-orange-500 border-opacity-60 rounded-lg bg-indigo-700 bg-opacity-30 shadow-lg",children:[E.jsx("h3",{className:"text-2xl font-semibold mb-6 text-orange-300 font-rajdhani",children:"Optimal Awakening Growth Details"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[E.jsx(_e,{label:"Row ID (optimal_awakening_growths table PK)",value:a.optimalAwakeningGrowth.id,onChange:u=>l("id",u),placeholder:"e.g., 1025731 (often related to card ID)",className:"font-roboto-mono"}),E.jsx(_e,{label:"Growth Type Key (links to cards.optimal_awakening_grow_type)",value:a.optimalAwakeningGrowth.optimal_awakening_grow_type,onChange:u=>l("optimal_awakening_grow_type",u),placeholder:"e.g., 102573 or oag_type_XYZ",className:"font-roboto-mono"}),E.jsx(_e,{label:"Step (EZA Marker)",type:"number",value:a.optimalAwakeningGrowth.step,onChange:u=>l("step",Number(u)),helpText:"Typically 3 for LR EZA, 7 for TUR EZA."}),E.jsx(_e,{label:"New Max Level",type:"number",value:a.optimalAwakeningGrowth.lv_max,onChange:u=>l("lv_max",Number(u)),helpText:"e.g., 150 for LR EZA, 140 for TUR EZA."}),E.jsx(_e,{label:"New Max Skill Level",type:"number",value:a.optimalAwakeningGrowth.skill_lv_max,onChange:u=>l("skill_lv_max",Number(u)),helpText:"e.g., 25 for LR EZA, 15 for TUR EZA."}),E.jsx(rn,{label:"New Passive Skill Set ID",value:a.optimalAwakeningGrowth.passive_skill_set_id,onChange:u=>l("passive_skill_set_id",u),options:a.passiveSkillSets.map(u=>({label:`${u.id} - ${u.name}`,value:u.id})),allowCustom:!0,customLabel:"Enter Custom Passive Set ID",helpText:"Select or enter the ID of the new Passive Skill Set for the EZA.",className:"font-roboto-mono"}),E.jsx(rn,{label:"New/Existing Leader Skill Set ID",value:a.optimalAwakeningGrowth.leader_skill_set_id,onChange:u=>l("leader_skill_set_id",u),options:a.leaderSkillSets.map(u=>({label:`${u.id} - ${u.name}`,value:u.id})),allowCustom:!0,customLabel:"Enter Custom Leader Set ID",helpText:"Select or enter the ID of the Leader Skill Set (can be original or new).",className:"font-roboto-mono"})]})]})]})]})},OR=({patchState:a,setPatchState:e})=>{const n=(g,v)=>{e(p=>{const A=[...p[g]||[],v()];return{...p,[g]:A}})},r=(g,v,p,S)=>{e(A=>{const L=A[g].map((X,Y)=>Y===v?{...X,[p]:S}:X);return{...A,[g]:L}})},l=(g,v)=>{e(p=>{const A=p[g].filter((N,L)=>L!==v);return{...p,[g]:A}})},u=()=>({id:ni(),script_name:"",lite_flicker_rate:0,bgm_id:null}),f=()=>({id:ni(),category:1,name:"",pack_name:"",scene_name:"",red:255,green:255,blue:255,alpha:255,lite_flicker_rate:0});return E.jsxs("div",{className:"space-y-10",children:[E.jsx("h2",{className:"text-3xl font-bold text-orange-400 font-rajdhani border-b-2 border-orange-500 pb-2 mb-8",children:"Miscellaneous Table Entries"}),E.jsxs("section",{className:"p-6 bg-indigo-800 bg-opacity-30 rounded-xl shadow-xl border border-indigo-700",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h3",{className:"text-2xl font-semibold text-orange-300 font-rajdhani",children:"Passive Skill Effects (passive_skill_effects)"}),E.jsxs("button",{onClick:()=>n("passiveSkillEffects",u),className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-md hover:shadow-lg transition-all",children:[E.jsx("i",{className:"fas fa-plus mr-1"})," Add Effect"]})]}),a.passiveSkillEffects.map((g,v)=>E.jsxs("div",{className:"mb-4 p-4 bg-indigo-700 bg-opacity-40 rounded-lg grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-3 relative border border-indigo-600 shadow-sm",children:[E.jsx("button",{onClick:()=>l("passiveSkillEffects",v),className:"absolute top-2 right-2 text-red-300 hover:text-red-400 text-xs p-1 bg-red-700 bg-opacity-30 hover:bg-opacity-50 rounded-full transition-colors",children:E.jsx("i",{className:"fas fa-times"})}),E.jsx(_e,{label:"ID",value:g.id,onChange:p=>r("passiveSkillEffects",v,"id",p),className:"font-roboto-mono"}),E.jsx(_e,{label:"Script Name",value:g.script_name,onChange:p=>r("passiveSkillEffects",v,"script_name",p)}),E.jsx(_e,{label:"Lite Flicker Rate",type:"number",value:g.lite_flicker_rate,onChange:p=>r("passiveSkillEffects",v,"lite_flicker_rate",Number(p))}),E.jsx(_e,{label:"BGM ID (Optional)",type:"number",value:g.bgm_id??"",onChange:p=>r("passiveSkillEffects",v,"bgm_id",p?Number(p):null),className:"font-roboto-mono"})]},g.id||v)),a.passiveSkillEffects.length===0&&E.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No passive skill effects added."})]}),E.jsxs("section",{className:"p-6 bg-indigo-800 bg-opacity-30 rounded-xl shadow-xl border border-indigo-700",children:[E.jsxs("div",{className:"flex justify-between items-center mb-4",children:[E.jsx("h3",{className:"text-2xl font-semibold text-orange-300 font-rajdhani",children:"Effect Packs (effect_packs)"}),E.jsxs("button",{onClick:()=>n("effectPacks",f),className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-md text-sm shadow-md hover:shadow-lg transition-all",children:[E.jsx("i",{className:"fas fa-plus mr-1"})," Add Pack"]})]}),a.effectPacks.map((g,v)=>E.jsxs("div",{className:"mb-4 p-4 bg-indigo-700 bg-opacity-40 rounded-lg grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-x-6 gap-y-3 relative border border-indigo-600 shadow-sm",children:[E.jsx("button",{onClick:()=>l("effectPacks",v),className:"absolute top-2 right-2 text-red-300 hover:text-red-400 text-xs p-1 bg-red-700 bg-opacity-30 hover:bg-opacity-50 rounded-full transition-colors",children:E.jsx("i",{className:"fas fa-times"})}),E.jsx(_e,{label:"ID",value:g.id,onChange:p=>r("effectPacks",v,"id",p),className:"font-roboto-mono"}),E.jsx(_e,{label:"Category",type:"number",value:g.category,onChange:p=>r("effectPacks",v,"category",Number(p))}),E.jsx(_e,{label:"Name",value:g.name,onChange:p=>r("effectPacks",v,"name",p)}),E.jsx(_e,{label:"Pack Name",value:g.pack_name,onChange:p=>r("effectPacks",v,"pack_name",p)}),E.jsx(_e,{label:"Scene Name",value:g.scene_name,onChange:p=>r("effectPacks",v,"scene_name",p)}),E.jsx(_e,{label:"Red",type:"number",value:g.red,onChange:p=>r("effectPacks",v,"red",Number(p))}),E.jsx(_e,{label:"Green",type:"number",value:g.green,onChange:p=>r("effectPacks",v,"green",Number(p))}),E.jsx(_e,{label:"Blue",type:"number",value:g.blue,onChange:p=>r("effectPacks",v,"blue",Number(p))}),E.jsx(_e,{label:"Alpha",type:"number",value:g.alpha,onChange:p=>r("effectPacks",v,"alpha",Number(p))}),E.jsx(_e,{label:"Lite Flicker Rate",type:"number",value:g.lite_flicker_rate,onChange:p=>r("effectPacks",v,"lite_flicker_rate",Number(p))})]},g.id||v)),a.effectPacks.length===0&&E.jsx("p",{className:"text-sm text-indigo-300 italic",children:"No effect packs added."})]})]})};var Yh={exports:{}};const PR={},MR=Object.freeze(Object.defineProperty({__proto__:null,default:PR},Symbol.toStringTag,{value:"Module"})),Qh=vT(MR);var p0;function VR(){return p0||(p0=1,function(a,e){var n=void 0,r=function(l){return n||(n=new Promise(function(u,f){var g=typeof l<"u"?l:{},v=g.onAbort;g.onAbort=function(h){f(new Error(h)),v&&v(h)},g.postRun=g.postRun||[],g.postRun.push(function(){u(g)}),a=void 0;var p;p||(p=typeof g<"u"?g:{}),p.onRuntimeInitialized=function(){function h(V,ne){switch(typeof ne){case"boolean":T(V,ne?1:0);break;case"number":fl(V,ne);break;case"string":c(V,ne,-1,-1);break;case"object":if(ne===null)yi(V);else if(ne.length!=null){var Ae=yr(ne,_r);y(V,Ae,ne.length,-1),Rn(Ae)}else D(V,"Wrong API use : tried to return a value of an unknown type ("+ne+").",-1);break;default:yi(V)}}function _(V,ne){for(var Ae=[],we=0;we<V;we+=1){var De=fn(ne+4*we,"i32"),Ye=ul(De);if(Ye===1||Ye===2)De=dl(De);else if(Ye===3)De=Cr(De);else if(Ye===4){Ye=De,De=cl(Ye),Ye=kn(Ye);for(var tn=new Uint8Array(De),St=0;St<De;St+=1)tn[St]=x[Ye+St];De=tn}else De=null;Ae.push(De)}return Ae}function b(V,ne){this.La=V,this.db=ne,this.Ja=1,this.fb=[]}function R(V,ne){if(this.db=ne,ne=Kt(V)+1,this.Ya=qn(ne),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");Gi(V,M,this.Ya,ne),this.eb=this.Ya,this.Ua=this.ib=null}function U(V){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),V!=null){var ne=this.filename,Ae="/",we=ne;if(Ae&&(Ae=typeof Ae=="string"?Ae:da(Ae),we=ne?bt(Ae+"/"+ne):Ae),ne=hr(!0,!0),we=ma(we,(ne!==void 0?ne:438)&4095|32768,0),V){if(typeof V=="string"){Ae=Array(V.length);for(var De=0,Ye=V.length;De<Ye;++De)Ae[De]=V.charCodeAt(De);V=Ae}Jn(we,ne|146),Ae=ii(we,577),ja(Ae,V,0,V.length,0),pr(Ae),Jn(we,ne)}}this.handleError(Ve(this.filename,J)),this.db=fn(J,"i32"),te(this.db),this.Za={},this.Na={}}var J=Sn(4),oe=p.cwrap,Ve=oe("sqlite3_open","number",["string","number"]),et=oe("sqlite3_close_v2","number",["number"]),Le=oe("sqlite3_exec","number",["number","string","number","number","number"]),Rt=oe("sqlite3_changes","number",["number"]),yt=oe("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Es=oe("sqlite3_sql","string",["number"]),co=oe("sqlite3_normalized_sql","string",["number"]),Sa=oe("sqlite3_prepare_v2","number",["number","number","number","number","number"]),br=oe("sqlite3_bind_text","number",["number","number","number","number","number"]),Er=oe("sqlite3_bind_blob","number",["number","number","number","number","number"]),Sr=oe("sqlite3_bind_double","number",["number","number","number"]),il=oe("sqlite3_bind_int","number",["number","number","number"]),Tr=oe("sqlite3_bind_parameter_index","number",["number","string"]),fo=oe("sqlite3_step","number",["number"]),Ss=oe("sqlite3_errmsg","string",["number"]),qa=oe("sqlite3_column_count","number",["number"]),al=oe("sqlite3_data_count","number",["number"]),rl=oe("sqlite3_column_double","number",["number","number"]),wr=oe("sqlite3_column_text","string",["number","number"]),za=oe("sqlite3_column_blob","number",["number","number"]),sl=oe("sqlite3_column_bytes","number",["number","number"]),Ar=oe("sqlite3_column_type","number",["number","number"]),ll=oe("sqlite3_column_name","string",["number","number"]),Ts=oe("sqlite3_reset","number",["number"]),Wi=oe("sqlite3_clear_bindings","number",["number"]),ol=oe("sqlite3_finalize","number",["number"]),ws=oe("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),ul=oe("sqlite3_value_type","number",["number"]),cl=oe("sqlite3_value_bytes","number",["number"]),Cr=oe("sqlite3_value_text","string",["number"]),kn=oe("sqlite3_value_blob","number",["number"]),dl=oe("sqlite3_value_double","number",["number"]),fl=oe("sqlite3_result_double","",["number","number"]),yi=oe("sqlite3_result_null","",["number"]),c=oe("sqlite3_result_text","",["number","string","number","number"]),y=oe("sqlite3_result_blob","",["number","number","number","number"]),T=oe("sqlite3_result_int","",["number","number"]),D=oe("sqlite3_result_error","",["number","string","number"]),K=oe("sqlite3_aggregate_context","number",["number","number"]),te=oe("RegisterExtensionFunctions","number",["number"]);b.prototype.bind=function(V){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(V)?this.wb(V):V!=null&&typeof V=="object"?this.xb(V):!0},b.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var V=fo(this.La);switch(V){case 100:return!0;case 101:return!1;default:throw this.db.handleError(V)}},b.prototype.rb=function(V){return V==null&&(V=this.Ja,this.Ja+=1),rl(this.La,V)},b.prototype.Ab=function(V){if(V==null&&(V=this.Ja,this.Ja+=1),V=wr(this.La,V),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(V)},b.prototype.Bb=function(V){return V==null&&(V=this.Ja,this.Ja+=1),wr(this.La,V)},b.prototype.getBlob=function(V){V==null&&(V=this.Ja,this.Ja+=1);var ne=sl(this.La,V);V=za(this.La,V);for(var Ae=new Uint8Array(ne),we=0;we<ne;we+=1)Ae[we]=x[V+we];return Ae},b.prototype.get=function(V,ne){ne=ne||{},V!=null&&this.bind(V)&&this.step(),V=[];for(var Ae=al(this.La),we=0;we<Ae;we+=1)switch(Ar(this.La,we)){case 1:var De=ne.useBigInt?this.Ab(we):this.rb(we);V.push(De);break;case 2:V.push(this.rb(we));break;case 3:V.push(this.Bb(we));break;case 4:V.push(this.getBlob(we));break;default:V.push(null)}return V},b.prototype.getColumnNames=function(){for(var V=[],ne=qa(this.La),Ae=0;Ae<ne;Ae+=1)V.push(ll(this.La,Ae));return V},b.prototype.getAsObject=function(V,ne){V=this.get(V,ne),ne=this.getColumnNames();for(var Ae={},we=0;we<ne.length;we+=1)Ae[ne[we]]=V[we];return Ae},b.prototype.getSQL=function(){return Es(this.La)},b.prototype.getNormalizedSQL=function(){return co(this.La)},b.prototype.run=function(V){return V!=null&&this.bind(V),this.step(),this.reset()},b.prototype.nb=function(V,ne){ne==null&&(ne=this.Ja,this.Ja+=1),V=el(V);var Ae=yr(V,_r);this.fb.push(Ae),this.db.handleError(br(this.La,ne,Ae,V.length-1,0))},b.prototype.vb=function(V,ne){ne==null&&(ne=this.Ja,this.Ja+=1);var Ae=yr(V,_r);this.fb.push(Ae),this.db.handleError(Er(this.La,ne,Ae,V.length,0))},b.prototype.mb=function(V,ne){ne==null&&(ne=this.Ja,this.Ja+=1),this.db.handleError((V===(V|0)?il:Sr)(this.La,ne,V))},b.prototype.yb=function(V){V==null&&(V=this.Ja,this.Ja+=1),Er(this.La,V,0,0,0)},b.prototype.ob=function(V,ne){switch(ne==null&&(ne=this.Ja,this.Ja+=1),typeof V){case"string":this.nb(V,ne);return;case"number":this.mb(V,ne);return;case"bigint":this.nb(V.toString(),ne);return;case"boolean":this.mb(V+0,ne);return;case"object":if(V===null){this.yb(ne);return}if(V.length!=null){this.vb(V,ne);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+V+")."},b.prototype.xb=function(V){var ne=this;return Object.keys(V).forEach(function(Ae){var we=Tr(ne.La,Ae);we!==0&&ne.ob(V[Ae],we)}),!0},b.prototype.wb=function(V){for(var ne=0;ne<V.length;ne+=1)this.ob(V[ne],ne+1);return!0},b.prototype.reset=function(){return this.freemem(),Wi(this.La)===0&&Ts(this.La)===0},b.prototype.freemem=function(){for(var V;(V=this.fb.pop())!==void 0;)Rn(V)},b.prototype.free=function(){this.freemem();var V=ol(this.La)===0;return delete this.db.Za[this.La],this.La=0,V},R.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var V=zn(),ne=Sn(4);zt(J),zt(ne);try{this.db.handleError(Sa(this.db.db,this.eb,-1,J,ne)),this.eb=fn(ne,"i32");var Ae=fn(J,"i32");return Ae===0?(this.gb(),{done:!0}):(this.Ua=new b(Ae,this.db),this.db.Za[Ae]=this.Ua,{value:this.Ua,done:!1})}catch(we){throw this.ib=qe(this.eb),this.gb(),we}finally{li(V)}},R.prototype.gb=function(){Rn(this.Ya),this.Ya=null},R.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:qe(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(R.prototype[Symbol.iterator]=function(){return this}),U.prototype.run=function(V,ne){if(!this.db)throw"Database closed";if(ne){V=this.prepare(V,ne);try{V.step()}finally{V.free()}}else this.handleError(Le(this.db,V,0,0,J));return this},U.prototype.exec=function(V,ne,Ae){if(!this.db)throw"Database closed";var we=zn(),De=null;try{var Ye=Ba(V),tn=Sn(4);for(V=[];fn(Ye,"i8")!==0;){zt(J),zt(tn),this.handleError(Sa(this.db,Ye,-1,J,tn));var St=fn(J,"i32");if(Ye=fn(tn,"i32"),St!==0){var Ft=null;for(De=new b(St,this),ne!=null&&De.bind(ne);De.step();)Ft===null&&(Ft={columns:De.getColumnNames(),values:[]},V.push(Ft)),Ft.values.push(De.get(null,Ae));De.free()}}return V}catch(Nn){throw De&&De.free(),Nn}finally{li(we)}},U.prototype.each=function(V,ne,Ae,we,De){typeof ne=="function"&&(we=Ae,Ae=ne,ne=void 0),V=this.prepare(V,ne);try{for(;V.step();)Ae(V.getAsObject(null,De))}finally{V.free()}if(typeof we=="function")return we()},U.prototype.prepare=function(V,ne){if(zt(J),this.handleError(yt(this.db,V,-1,J,0)),V=fn(J,"i32"),V===0)throw"Nothing to prepare";var Ae=new b(V,this);return ne!=null&&Ae.bind(ne),this.Za[V]=Ae},U.prototype.iterateStatements=function(V){return new R(V,this)},U.prototype.export=function(){Object.values(this.Za).forEach(function(ne){ne.free()}),Object.values(this.Na).forEach(Bn),this.Na={},this.handleError(et(this.db));var V=vs(this.filename);return this.handleError(Ve(this.filename,J)),this.db=fn(J,"i32"),te(this.db),V},U.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(V){V.free()}),Object.values(this.Na).forEach(Bn),this.Na={},this.handleError(et(this.db)),ys("/"+this.filename),this.db=null)},U.prototype.handleError=function(V){if(V===0)return null;throw V=Ss(this.db),Error(V)},U.prototype.getRowsModified=function(){return Rt(this.db)},U.prototype.create_function=function(V,ne){Object.prototype.hasOwnProperty.call(this.Na,V)&&(Bn(this.Na[V]),delete this.Na[V]);var Ae=si(function(we,De,Ye){De=_(De,Ye);try{var tn=ne.apply(null,De)}catch(St){D(we,St,-1);return}h(we,tn)},"viii");return this.Na[V]=Ae,this.handleError(ws(this.db,V,ne.length,1,0,Ae,0,0,0)),this},U.prototype.create_aggregate=function(V,ne){var Ae=ne.init||function(){return null},we=ne.finalize||function(Ft){return Ft},De=ne.step;if(!De)throw"An aggregate function must have a step function in "+V;var Ye={};Object.hasOwnProperty.call(this.Na,V)&&(Bn(this.Na[V]),delete this.Na[V]),ne=V+"__finalize",Object.hasOwnProperty.call(this.Na,ne)&&(Bn(this.Na[ne]),delete this.Na[ne]);var tn=si(function(Ft,Nn,xr){var Ta=K(Ft,1);Object.hasOwnProperty.call(Ye,Ta)||(Ye[Ta]=Ae()),Nn=_(Nn,xr),Nn=[Ye[Ta]].concat(Nn);try{Ye[Ta]=De.apply(null,Nn)}catch(Vu){delete Ye[Ta],D(Ft,Vu,-1)}},"viii"),St=si(function(Ft){var Nn=K(Ft,1);try{var xr=we(Ye[Nn])}catch(Ta){delete Ye[Nn],D(Ft,Ta,-1);return}h(Ft,xr),delete Ye[Nn]},"vi");return this.Na[V]=tn,this.Na[ne]=St,this.handleError(ws(this.db,V,De.length-1,1,0,0,tn,St,0)),this},p.Database=U};var S=Object.assign({},p),A="./this.program",N=typeof window=="object",L=typeof importScripts=="function",X=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Y="",Z,re,he;if(X){var ve=Qh,ie=Qh;Y=L?ie.dirname(Y)+"/":__dirname+"/",Z=(h,_)=>(h=ge(h)?new URL(h):ie.normalize(h),ve.readFileSync(h,_?void 0:"utf8")),he=h=>(h=Z(h,!0),h.buffer||(h=new Uint8Array(h)),h),re=(h,_,b,R=!0)=>{h=ge(h)?new URL(h):ie.normalize(h),ve.readFile(h,R?void 0:"utf8",(U,J)=>{U?b(U):_(R?J.buffer:J)})},!p.thisProgram&&1<process.argv.length&&(A=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),a.exports=p,p.inspect=()=>"[Emscripten Module object]"}else(N||L)&&(L?Y=self.location.href:typeof document<"u"&&document.currentScript&&(Y=document.currentScript.src),Y=Y.indexOf("blob:")!==0?Y.substr(0,Y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",Z=h=>{var _=new XMLHttpRequest;return _.open("GET",h,!1),_.send(null),_.responseText},L&&(he=h=>{var _=new XMLHttpRequest;return _.open("GET",h,!1),_.responseType="arraybuffer",_.send(null),new Uint8Array(_.response)}),re=(h,_,b)=>{var R=new XMLHttpRequest;R.open("GET",h,!0),R.responseType="arraybuffer",R.onload=()=>{R.status==200||R.status==0&&R.response?_(R.response):b()},R.onerror=b,R.send(null)});var H=p.print||console.log.bind(console),ue=p.printErr||console.error.bind(console);Object.assign(p,S),S=null,p.thisProgram&&(A=p.thisProgram);var C;p.wasmBinary&&(C=p.wasmBinary),typeof WebAssembly!="object"&&Ee("no native wasm support detected");var k,O=!1,x,M,q,P,Ke,_t,ae;function Te(){var h=k.buffer;p.HEAP8=x=new Int8Array(h),p.HEAP16=q=new Int16Array(h),p.HEAPU8=M=new Uint8Array(h),p.HEAPU16=new Uint16Array(h),p.HEAP32=P=new Int32Array(h),p.HEAPU32=Ke=new Uint32Array(h),p.HEAPF32=_t=new Float32Array(h),p.HEAPF64=ae=new Float64Array(h)}var Re=[],tt=[],B=[];function me(){var h=p.preRun.shift();Re.unshift(h)}var Se=0,de=null;function Ee(h){var _;throw(_=p.onAbort)==null||_.call(p,h),h="Aborted("+h+")",ue(h),O=!0,new WebAssembly.RuntimeError(h+". Build with -sASSERTIONS for more info.")}var G=h=>h.startsWith("data:application/octet-stream;base64,"),ge=h=>h.startsWith("file://"),Ce;if(Ce="sql-wasm.wasm",!G(Ce)){var Me=Ce;Ce=p.locateFile?p.locateFile(Me,Y):Y+Me}function Qe(h){if(h==Ce&&C)return new Uint8Array(C);if(he)return he(h);throw"both async and sync fetching of the wasm failed"}function Lt(h){if(!C&&(N||L)){if(typeof fetch=="function"&&!ge(h))return fetch(h,{credentials:"same-origin"}).then(_=>{if(!_.ok)throw"failed to load wasm binary file at '"+h+"'";return _.arrayBuffer()}).catch(()=>Qe(h));if(re)return new Promise((_,b)=>{re(h,R=>_(new Uint8Array(R)),b)})}return Promise.resolve().then(()=>Qe(h))}function We(h,_,b){return Lt(h).then(R=>WebAssembly.instantiate(R,_)).then(R=>R).then(b,R=>{ue(`failed to asynchronously prepare wasm: ${R}`),Ee(R)})}function wt(h,_){var b=Ce;C||typeof WebAssembly.instantiateStreaming!="function"||G(b)||ge(b)||X||typeof fetch!="function"?We(b,h,_):fetch(b,{credentials:"same-origin"}).then(R=>WebAssembly.instantiateStreaming(R,h).then(_,function(U){return ue(`wasm streaming compile failed: ${U}`),ue("falling back to ArrayBuffer instantiation"),We(b,h,_)}))}var ke,ut,$n=h=>{for(;0<h.length;)h.shift()(p)};function fn(h,_="i8"){switch(_.endsWith("*")&&(_="*"),_){case"i1":return x[h>>0];case"i8":return x[h>>0];case"i16":return q[h>>1];case"i32":return P[h>>2];case"i64":Ee("to do getValue(i64) use WASM_BIGINT");case"float":return _t[h>>2];case"double":return ae[h>>3];case"*":return Ke[h>>2];default:Ee(`invalid type for getValue: ${_}`)}}function zt(h){var _="i32";switch(_.endsWith("*")&&(_="*"),_){case"i1":x[h>>0]=0;break;case"i8":x[h>>0]=0;break;case"i16":q[h>>1]=0;break;case"i32":P[h>>2]=0;break;case"i64":Ee("to do setValue(i64) use WASM_BIGINT");case"float":_t[h>>2]=0;break;case"double":ae[h>>3]=0;break;case"*":Ke[h>>2]=0;break;default:Ee(`invalid type for setValue: ${_}`)}}var Fi=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,mt=(h,_,b)=>{var R=_+b;for(b=_;h[b]&&!(b>=R);)++b;if(16<b-_&&h.buffer&&Fi)return Fi.decode(h.subarray(_,b));for(R="";_<b;){var U=h[_++];if(U&128){var J=h[_++]&63;if((U&224)==192)R+=String.fromCharCode((U&31)<<6|J);else{var oe=h[_++]&63;U=(U&240)==224?(U&15)<<12|J<<6|oe:(U&7)<<18|J<<12|oe<<6|h[_++]&63,65536>U?R+=String.fromCharCode(U):(U-=65536,R+=String.fromCharCode(55296|U>>10,56320|U&1023))}}else R+=String.fromCharCode(U)}return R},qe=(h,_)=>h?mt(M,h,_):"",ct=(h,_)=>{for(var b=0,R=h.length-1;0<=R;R--){var U=h[R];U==="."?h.splice(R,1):U===".."?(h.splice(R,1),b++):b&&(h.splice(R,1),b--)}if(_)for(;b;b--)h.unshift("..");return h},bt=h=>{var _=h.charAt(0)==="/",b=h.substr(-1)==="/";return(h=ct(h.split("/").filter(R=>!!R),!_).join("/"))||_||(h="."),h&&b&&(h+="/"),(_?"/":"")+h},Ii=h=>{var _=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(h).slice(1);return h=_[0],_=_[1],!h&&!_?".":(_&&(_=_.substr(0,_.length-1)),h+_)},sa=h=>{if(h==="/")return"/";h=bt(h),h=h.replace(/\/$/,"");var _=h.lastIndexOf("/");return _===-1?h:h.substr(_+1)},Js=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return b=>crypto.getRandomValues(b);if(X)try{var h=Qh;if(h.randomFillSync)return b=>h.randomFillSync(b);var _=h.randomBytes;return b=>(b.set(_(b.byteLength)),b)}catch{}Ee("initRandomDevice")},jt=h=>(jt=Js())(h);function dt(){for(var h="",_=!1,b=arguments.length-1;-1<=b&&!_;b--){if(_=0<=b?arguments[b]:"/",typeof _!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!_)return"";h=_+"/"+h,_=_.charAt(0)==="/"}return h=ct(h.split("/").filter(R=>!!R),!_).join("/"),(_?"/":"")+h||"."}var xn=[],Kt=h=>{for(var _=0,b=0;b<h.length;++b){var R=h.charCodeAt(b);127>=R?_++:2047>=R?_+=2:55296<=R&&57343>=R?(_+=4,++b):_+=3}return _},Gi=(h,_,b,R)=>{if(!(0<R))return 0;var U=b;R=b+R-1;for(var J=0;J<h.length;++J){var oe=h.charCodeAt(J);if(55296<=oe&&57343>=oe){var Ve=h.charCodeAt(++J);oe=65536+((oe&1023)<<10)|Ve&1023}if(127>=oe){if(b>=R)break;_[b++]=oe}else{if(2047>=oe){if(b+1>=R)break;_[b++]=192|oe>>6}else{if(65535>=oe){if(b+2>=R)break;_[b++]=224|oe>>12}else{if(b+3>=R)break;_[b++]=240|oe>>18,_[b++]=128|oe>>12&63}_[b++]=128|oe>>6&63}_[b++]=128|oe&63}}return _[b]=0,b-U};function el(h,_){var b=Array(Kt(h)+1);return h=Gi(h,b,0,b.length),_&&(b.length=h),b}var la=[];function oa(h,_){la[h]={input:[],output:[],Xa:_},mn(h,Ma)}var Ma={open(h){var _=la[h.node.rdev];if(!_)throw new be(43);h.tty=_,h.seekable=!1},close(h){h.tty.Xa.fsync(h.tty)},fsync(h){h.tty.Xa.fsync(h.tty)},read(h,_,b,R){if(!h.tty||!h.tty.Xa.sb)throw new be(60);for(var U=0,J=0;J<R;J++){try{var oe=h.tty.Xa.sb(h.tty)}catch{throw new be(29)}if(oe===void 0&&U===0)throw new be(6);if(oe==null)break;U++,_[b+J]=oe}return U&&(h.node.timestamp=Date.now()),U},write(h,_,b,R){if(!h.tty||!h.tty.Xa.jb)throw new be(60);try{for(var U=0;U<R;U++)h.tty.Xa.jb(h.tty,_[b+U])}catch{throw new be(29)}return R&&(h.node.timestamp=Date.now()),U}},hi={sb(){e:{if(!xn.length){var h=null;if(X){var _=Buffer.alloc(256),b=0,R=process.stdin.fd;try{b=ve.readSync(R,_)}catch(U){if(U.toString().includes("EOF"))b=0;else throw U}0<b?h=_.slice(0,b).toString("utf-8"):h=null}else typeof window<"u"&&typeof window.prompt=="function"?(h=window.prompt("Input: "),h!==null&&(h+=`
`)):typeof readline=="function"&&(h=readline(),h!==null&&(h+=`
`));if(!h){h=null;break e}xn=el(h,!0)}h=xn.shift()}return h},jb(h,_){_===null||_===10?(H(mt(h.output,0)),h.output=[]):_!=0&&h.output.push(_)},fsync(h){h.output&&0<h.output.length&&(H(mt(h.output,0)),h.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},fr={jb(h,_){_===null||_===10?(ue(mt(h.output,0)),h.output=[]):_!=0&&h.output.push(_)},fsync(h){h.output&&0<h.output.length&&(ue(mt(h.output,0)),h.output=[])}};function ua(h,_){var b=h.Ia?h.Ia.length:0;b>=_||(_=Math.max(_,b*(1048576>b?2:1.125)>>>0),b!=0&&(_=Math.max(_,256)),b=h.Ia,h.Ia=new Uint8Array(_),0<h.Ma&&h.Ia.set(b.subarray(0,h.Ma),0))}var Xe={Qa:null,Ra(){return Xe.createNode(null,"/",16895,0)},createNode(h,_,b,R){if((b&61440)===24576||(b&61440)===4096)throw new be(63);return Xe.Qa||(Xe.Qa={dir:{node:{Pa:Xe.Ga.Pa,Oa:Xe.Ga.Oa,lookup:Xe.Ga.lookup,ab:Xe.Ga.ab,rename:Xe.Ga.rename,unlink:Xe.Ga.unlink,rmdir:Xe.Ga.rmdir,readdir:Xe.Ga.readdir,symlink:Xe.Ga.symlink},stream:{Ta:Xe.Ha.Ta}},file:{node:{Pa:Xe.Ga.Pa,Oa:Xe.Ga.Oa},stream:{Ta:Xe.Ha.Ta,read:Xe.Ha.read,write:Xe.Ha.write,lb:Xe.Ha.lb,bb:Xe.Ha.bb,cb:Xe.Ha.cb}},link:{node:{Pa:Xe.Ga.Pa,Oa:Xe.Ga.Oa,readlink:Xe.Ga.readlink},stream:{}},pb:{node:{Pa:Xe.Ga.Pa,Oa:Xe.Ga.Oa},stream:ki}}),b=Zn(h,_,b,R),vn(b.mode)?(b.Ga=Xe.Qa.dir.node,b.Ha=Xe.Qa.dir.stream,b.Ia={}):(b.mode&61440)===32768?(b.Ga=Xe.Qa.file.node,b.Ha=Xe.Qa.file.stream,b.Ma=0,b.Ia=null):(b.mode&61440)===40960?(b.Ga=Xe.Qa.link.node,b.Ha=Xe.Qa.link.stream):(b.mode&61440)===8192&&(b.Ga=Xe.Qa.pb.node,b.Ha=Xe.Qa.pb.stream),b.timestamp=Date.now(),h&&(h.Ia[_]=b,h.timestamp=b.timestamp),b},Lb(h){return h.Ia?h.Ia.subarray?h.Ia.subarray(0,h.Ma):new Uint8Array(h.Ia):new Uint8Array(0)},Ga:{Pa(h){var _={};return _.dev=(h.mode&61440)===8192?h.id:1,_.ino=h.id,_.mode=h.mode,_.nlink=1,_.uid=0,_.gid=0,_.rdev=h.rdev,vn(h.mode)?_.size=4096:(h.mode&61440)===32768?_.size=h.Ma:(h.mode&61440)===40960?_.size=h.link.length:_.size=0,_.atime=new Date(h.timestamp),_.mtime=new Date(h.timestamp),_.ctime=new Date(h.timestamp),_.zb=4096,_.blocks=Math.ceil(_.size/_.zb),_},Oa(h,_){if(_.mode!==void 0&&(h.mode=_.mode),_.timestamp!==void 0&&(h.timestamp=_.timestamp),_.size!==void 0&&(_=_.size,h.Ma!=_))if(_==0)h.Ia=null,h.Ma=0;else{var b=h.Ia;h.Ia=new Uint8Array(_),b&&h.Ia.set(b.subarray(0,Math.min(_,h.Ma))),h.Ma=_}},lookup(){throw ca[44]},ab(h,_,b,R){return Xe.createNode(h,_,b,R)},rename(h,_,b){if(vn(h.mode)){try{var R=It(_,b)}catch{}if(R)for(var U in R.Ia)throw new be(55)}delete h.parent.Ia[h.name],h.parent.timestamp=Date.now(),h.name=b,_.Ia[b]=h,_.timestamp=h.parent.timestamp,h.parent=_},unlink(h,_){delete h.Ia[_],h.timestamp=Date.now()},rmdir(h,_){var b=It(h,_),R;for(R in b.Ia)throw new be(55);delete h.Ia[_],h.timestamp=Date.now()},readdir(h){var _=[".",".."],b;for(b of Object.keys(h.Ia))_.push(b);return _},symlink(h,_,b){return h=Xe.createNode(h,_,41471,0),h.link=b,h},readlink(h){if((h.mode&61440)!==40960)throw new be(28);return h.link}},Ha:{read(h,_,b,R,U){var J=h.node.Ia;if(U>=h.node.Ma)return 0;if(h=Math.min(h.node.Ma-U,R),8<h&&J.subarray)_.set(J.subarray(U,U+h),b);else for(R=0;R<h;R++)_[b+R]=J[U+R];return h},write(h,_,b,R,U,J){if(_.buffer===x.buffer&&(J=!1),!R)return 0;if(h=h.node,h.timestamp=Date.now(),_.subarray&&(!h.Ia||h.Ia.subarray)){if(J)return h.Ia=_.subarray(b,b+R),h.Ma=R;if(h.Ma===0&&U===0)return h.Ia=_.slice(b,b+R),h.Ma=R;if(U+R<=h.Ma)return h.Ia.set(_.subarray(b,b+R),U),R}if(ua(h,U+R),h.Ia.subarray&&_.subarray)h.Ia.set(_.subarray(b,b+R),U);else for(J=0;J<R;J++)h.Ia[U+J]=_[b+J];return h.Ma=Math.max(h.Ma,U+R),R},Ta(h,_,b){if(b===1?_+=h.position:b===2&&(h.node.mode&61440)===32768&&(_+=h.node.Ma),0>_)throw new be(28);return _},lb(h,_,b){ua(h.node,_+b),h.node.Ma=Math.max(h.node.Ma,_+b)},bb(h,_,b,R,U){if((h.node.mode&61440)!==32768)throw new be(43);if(h=h.node.Ia,U&2||h.buffer!==x.buffer){if((0<b||b+_<h.length)&&(h.subarray?h=h.subarray(b,b+_):h=Array.prototype.slice.call(h,b,b+_)),b=!0,_=65536*Math.ceil(_/65536),(U=ba(65536,_))?(M.fill(0,U,U+_),_=U):_=0,!_)throw new be(48);x.set(h,_)}else b=!1,_=h.byteOffset;return{Db:_,ub:b}},cb(h,_,b,R){return Xe.Ha.write(h,_,0,R,b,!1),0}}},hr=(h,_)=>{var b=0;return h&&(b|=365),_&&(b|=146),b},Va=null,Ri={},Xn=[],ps=1,hn=null,mr=!0,be=null,ca={};function Yt(h,_={}){if(h=dt(h),!h)return{path:"",node:null};if(_=Object.assign({qb:!0,kb:0},_),8<_.kb)throw new be(32);h=h.split("/").filter(oe=>!!oe);for(var b=Va,R="/",U=0;U<h.length;U++){var J=U===h.length-1;if(J&&_.parent)break;if(b=It(b,h[U]),R=bt(R+"/"+h[U]),b.Va&&(!J||J&&_.qb)&&(b=b.Va.root),!J||_.Sa){for(J=0;(b.mode&61440)===40960;)if(b=pa(R),R=dt(Ii(R),b),b=Yt(R,{kb:_.kb+1}).node,40<J++)throw new be(32)}}return{path:R,node:b}}function da(h){for(var _;;){if(h===h.parent)return h=h.Ra.tb,_?h[h.length-1]!=="/"?`${h}/${_}`:h+_:h;_=_?`${h.name}/${_}`:h.name,h=h.parent}}function xt(h,_){for(var b=0,R=0;R<_.length;R++)b=(b<<5)-b+_.charCodeAt(R)|0;return(h+b>>>0)%hn.length}function Xt(h){var _=xt(h.parent.id,h.name);if(hn[_]===h)hn[_]=h.Wa;else for(_=hn[_];_;){if(_.Wa===h){_.Wa=h.Wa;break}_=_.Wa}}function It(h,_){var b;if(b=(b=Wn(h,"x"))?b:h.Ga.lookup?0:2)throw new be(b,h);for(b=hn[xt(h.id,_)];b;b=b.Wa){var R=b.name;if(b.parent.id===h.id&&R===_)return b}return h.Ga.lookup(h,_)}function Zn(h,_,b,R){return h=new vr(h,_,b,R),_=xt(h.parent.id,h.name),h.Wa=hn[_],hn[_]=h}function vn(h){return(h&61440)===16384}function tl(h){var _=["r","w","rw"][h&3];return h&512&&(_+="w"),_}function Wn(h,_){if(mr)return 0;if(!_.includes("r")||h.mode&292){if(_.includes("w")&&!(h.mode&146)||_.includes("x")&&!(h.mode&73))return 2}else return 2;return 0}function gs(h,_){try{return It(h,_),20}catch{}return Wn(h,"wx")}function fa(h,_,b){try{var R=It(h,_)}catch(U){return U.Ka}if(h=Wn(h,"wx"))return h;if(b){if(!vn(R.mode))return 54;if(R===R.parent||da(R)==="/")return 10}else if(vn(R.mode))return 31;return 0}function ha(){for(var h=0;4096>=h;h++)if(!Xn[h])return h;throw new be(33)}function Ut(h){if(h=Xn[h],!h)throw new be(8);return h}function mi(h,_=-1){return Qi||(Qi=function(){this.$a={}},Qi.prototype={},Object.defineProperties(Qi.prototype,{object:{get(){return this.node},set(b){this.node=b}},flags:{get(){return this.$a.flags},set(b){this.$a.flags=b}},position:{get(){return this.$a.position},set(b){this.$a.position=b}}})),h=Object.assign(new Qi,h),_==-1&&(_=ha()),h.fd=_,Xn[_]=h}var ki={open(h){var _,b;h.Ha=Ri[h.node.rdev].Ha,(b=(_=h.Ha).open)==null||b.call(_,h)},Ta(){throw new be(70)}};function mn(h,_){Ri[h]={Ha:_}}function Ht(h,_){var b=_==="/",R=!_;if(b&&Va)throw new be(10);if(!b&&!R){var U=Yt(_,{qb:!1});if(_=U.path,U=U.node,U.Va)throw new be(10);if(!vn(U.mode))throw new be(54)}_={type:h,Pb:{},tb:_,Cb:[]},h=h.Ra(_),h.Ra=_,_.root=h,b?Va=h:U&&(U.Va=_,U.Ra&&U.Ra.Cb.push(_))}function ma(h,_,b){var R=Yt(h,{parent:!0}).node;if(h=sa(h),!h||h==="."||h==="..")throw new be(28);var U=gs(R,h);if(U)throw new be(U);if(!R.Ga.ab)throw new be(63);return R.Ga.ab(R,h,_,b)}function In(h,_){return ma(h,(_!==void 0?_:511)&1023|16384,0)}function jn(h,_,b){typeof b>"u"&&(b=_,_=438),ma(h,_|8192,b)}function pi(h,_){if(!dt(h))throw new be(44);var b=Yt(_,{parent:!0}).node;if(!b)throw new be(44);_=sa(_);var R=gs(b,_);if(R)throw new be(R);if(!b.Ga.symlink)throw new be(63);b.Ga.symlink(b,_,h)}function _s(h){var _=Yt(h,{parent:!0}).node;h=sa(h);var b=It(_,h),R=fa(_,h,!0);if(R)throw new be(R);if(!_.Ga.rmdir)throw new be(63);if(b.Va)throw new be(10);_.Ga.rmdir(_,h),Xt(b)}function ys(h){var _=Yt(h,{parent:!0}).node;if(!_)throw new be(44);h=sa(h);var b=It(_,h),R=fa(_,h,!1);if(R)throw new be(R);if(!_.Ga.unlink)throw new be(63);if(b.Va)throw new be(10);_.Ga.unlink(_,h),Xt(b)}function pa(h){if(h=Yt(h).node,!h)throw new be(44);if(!h.Ga.readlink)throw new be(28);return dt(da(h.parent),h.Ga.readlink(h))}function ga(h,_){if(h=Yt(h,{Sa:!_}).node,!h)throw new be(44);if(!h.Ga.Pa)throw new be(63);return h.Ga.Pa(h)}function Ki(h){return ga(h,!0)}function Jn(h,_){if(h=typeof h=="string"?Yt(h,{Sa:!0}).node:h,!h.Ga.Oa)throw new be(63);h.Ga.Oa(h,{mode:_&4095|h.mode&-4096,timestamp:Date.now()})}function ln(h,_){if(0>_)throw new be(28);if(h=typeof h=="string"?Yt(h,{Sa:!0}).node:h,!h.Ga.Oa)throw new be(63);if(vn(h.mode))throw new be(31);if((h.mode&61440)!==32768)throw new be(28);var b=Wn(h,"w");if(b)throw new be(b);h.Ga.Oa(h,{size:_,timestamp:Date.now()})}function ii(h,_,b){if(h==="")throw new be(44);if(typeof _=="string"){var R={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[_];if(typeof R>"u")throw Error(`Unknown file open mode: ${_}`);_=R}if(b=_&64?(typeof b>"u"?438:b)&4095|32768:0,typeof h=="object")var U=h;else{h=bt(h);try{U=Yt(h,{Sa:!(_&131072)}).node}catch{}}if(R=!1,_&64)if(U){if(_&128)throw new be(20)}else U=ma(h,b,0),R=!0;if(!U)throw new be(44);if((U.mode&61440)===8192&&(_&=-513),_&65536&&!vn(U.mode))throw new be(54);if(!R&&(b=U?(U.mode&61440)===40960?32:vn(U.mode)&&(tl(_)!=="r"||_&512)?31:Wn(U,tl(_)):44))throw new be(b);return _&512&&!R&&ln(U,0),_&=-131713,U=mi({node:U,path:da(U),flags:_,seekable:!0,position:0,Ha:U.Ha,Fb:[],error:!1}),U.Ha.open&&U.Ha.open(U),!p.logReadFiles||_&1||($i||($i={}),h in $i||($i[h]=1)),U}function pr(h){if(h.fd===null)throw new be(8);h.hb&&(h.hb=null);try{h.Ha.close&&h.Ha.close(h)}catch(_){throw _}finally{Xn[h.fd]=null}h.fd=null}function Ni(h,_,b){if(h.fd===null)throw new be(8);if(!h.seekable||!h.Ha.Ta)throw new be(70);if(b!=0&&b!=1&&b!=2)throw new be(28);h.position=h.Ha.Ta(h,_,b),h.Fb=[]}function La(h,_,b,R,U){if(0>R||0>U)throw new be(28);if(h.fd===null)throw new be(8);if((h.flags&2097155)===1)throw new be(8);if(vn(h.node.mode))throw new be(31);if(!h.Ha.read)throw new be(28);var J=typeof U<"u";if(!J)U=h.position;else if(!h.seekable)throw new be(70);return _=h.Ha.read(h,_,b,R,U),J||(h.position+=_),_}function ja(h,_,b,R,U){if(0>R||0>U)throw new be(28);if(h.fd===null)throw new be(8);if((h.flags&2097155)===0)throw new be(8);if(vn(h.node.mode))throw new be(31);if(!h.Ha.write)throw new be(28);h.seekable&&h.flags&1024&&Ni(h,0,2);var J=typeof U<"u";if(!J)U=h.position;else if(!h.seekable)throw new be(70);return _=h.Ha.write(h,_,b,R,U,void 0),J||(h.position+=_),_}function vs(h){var _,b=ii(h,b||0);h=ga(h).size;var R=new Uint8Array(h);return La(b,R,0,h,0),_=R,pr(b),_}function Ua(){be||(be=function(h,_){this.name="ErrnoError",this.node=_,this.Eb=function(b){this.Ka=b},this.Eb(h),this.message="FS error"},be.prototype=Error(),be.prototype.constructor=be,[44].forEach(h=>{ca[h]=new be(h),ca[h].stack="<generic error, no stack>"}))}var bn;function Yi(h,_,b){h=bt("/dev/"+h);var R=hr(!!_,!!b);nl||(nl=64);var U=nl++<<8|0;mn(U,{open(J){J.seekable=!1},close(){var J;(J=b==null?void 0:b.buffer)!=null&&J.length&&b(10)},read(J,oe,Ve,et){for(var Le=0,Rt=0;Rt<et;Rt++){try{var yt=_()}catch{throw new be(29)}if(yt===void 0&&Le===0)throw new be(6);if(yt==null)break;Le++,oe[Ve+Rt]=yt}return Le&&(J.node.timestamp=Date.now()),Le},write(J,oe,Ve,et){for(var Le=0;Le<et;Le++)try{b(oe[Ve+Le])}catch{throw new be(29)}return et&&(J.node.timestamp=Date.now()),Le}}),jn(h,R,U)}var nl,pt={},Qi,$i;function Xi(h,_,b){if(_.charAt(0)==="/")return _;if(h=h===-100?"/":Ut(h).path,_.length==0){if(!b)throw new be(44);return h}return bt(h+"/"+_)}function Bt(h,_,b){try{var R=h(_)}catch(J){if(J&&J.node&&bt(_)!==bt(da(J.node)))return-54;throw J}P[b>>2]=R.dev,P[b+4>>2]=R.mode,Ke[b+8>>2]=R.nlink,P[b+12>>2]=R.uid,P[b+16>>2]=R.gid,P[b+20>>2]=R.rdev,ut=[R.size>>>0,(ke=R.size,1<=+Math.abs(ke)?0<ke?+Math.floor(ke/4294967296)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],P[b+24>>2]=ut[0],P[b+28>>2]=ut[1],P[b+32>>2]=4096,P[b+36>>2]=R.blocks,h=R.atime.getTime(),_=R.mtime.getTime();var U=R.ctime.getTime();return ut=[Math.floor(h/1e3)>>>0,(ke=Math.floor(h/1e3),1<=+Math.abs(ke)?0<ke?+Math.floor(ke/4294967296)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],P[b+40>>2]=ut[0],P[b+44>>2]=ut[1],Ke[b+48>>2]=h%1e3*1e3,ut=[Math.floor(_/1e3)>>>0,(ke=Math.floor(_/1e3),1<=+Math.abs(ke)?0<ke?+Math.floor(ke/4294967296)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],P[b+56>>2]=ut[0],P[b+60>>2]=ut[1],Ke[b+64>>2]=_%1e3*1e3,ut=[Math.floor(U/1e3)>>>0,(ke=Math.floor(U/1e3),1<=+Math.abs(ke)?0<ke?+Math.floor(ke/4294967296)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],P[b+72>>2]=ut[0],P[b+76>>2]=ut[1],Ke[b+80>>2]=U%1e3*1e3,ut=[R.ino>>>0,(ke=R.ino,1<=+Math.abs(ke)?0<ke?+Math.floor(ke/4294967296)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],P[b+88>>2]=ut[0],P[b+92>>2]=ut[1],0}var En=void 0;function Di(){var h=P[+En>>2];return En+=4,h}var ai=(h,_)=>_+2097152>>>0<4194305-!!h?(h>>>0)+4294967296*_:NaN,Zi=[0,31,60,91,121,152,182,213,244,274,305,335],Et=[0,31,59,90,120,151,181,212,243,273,304,334],_a=h=>{var _=Kt(h)+1,b=qn(_);return b&&Gi(h,M,b,_),b},Un={},ya=()=>{if(!gr){var h={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},_;for(_ in Un)Un[_]===void 0?delete h[_]:h[_]=Un[_];var b=[];for(_ in h)b.push(`${_}=${h[_]}`);gr=b}return gr},gr,Ba=h=>{var _=Kt(h)+1,b=Sn(_);return Gi(h,M,b,_),b},bs=(h,_,b,R)=>{var U={string:Le=>{var Rt=0;return Le!=null&&Le!==0&&(Rt=Ba(Le)),Rt},array:Le=>{var Rt=Sn(Le.length);return x.set(Le,Rt),Rt}};h=p["_"+h];var J=[],oe=0;if(R)for(var Ve=0;Ve<R.length;Ve++){var et=U[b[Ve]];et?(oe===0&&(oe=zn()),J[Ve]=et(R[Ve])):J[Ve]=R[Ve]}return b=h.apply(null,J),b=function(Le){return oe!==0&&li(oe),_==="string"?Le?mt(M,Le):"":_==="boolean"?!!Le:Le}(b)},_r=0,yr=(h,_)=>(_=_==1?Sn(h.length):qn(h.length),h.subarray||h.slice||(h=new Uint8Array(h)),M.set(h,_),_),ri,gi=[],Zt,Bn=h=>{ri.delete(Zt.get(h)),Zt.set(h,null),gi.push(h)},si=(h,_)=>{if(!ri){ri=new WeakMap;var b=Zt.length;if(ri)for(var R=0;R<0+b;R++){var U=Zt.get(R);U&&ri.set(U,R)}}if(b=ri.get(h)||0)return b;if(gi.length)b=gi.pop();else{try{Zt.grow(1)}catch(Ve){throw Ve instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Ve}b=Zt.length-1}try{Zt.set(b,h)}catch(Ve){if(!(Ve instanceof TypeError))throw Ve;if(typeof WebAssembly.Function=="function"){R=WebAssembly.Function,U={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var J={parameters:[],results:_[0]=="v"?[]:[U[_[0]]]},oe=1;oe<_.length;++oe)J.parameters.push(U[_[oe]]);_=new R(J,h)}else{for(R=[1],U=_.slice(0,1),_=_.slice(1),J={i:127,p:127,j:126,f:125,d:124,e:111},R.push(96),oe=_.length,128>oe?R.push(oe):R.push(oe%128|128,oe>>7),oe=0;oe<_.length;++oe)R.push(J[_[oe]]);U=="v"?R.push(0):R.push(1,J[U]),_=[0,97,115,109,1,0,0,0,1],U=R.length,128>U?_.push(U):_.push(U%128|128,U>>7),_.push.apply(_,R),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),_=new WebAssembly.Module(new Uint8Array(_)),_=new WebAssembly.Instance(_,{e:{f:h}}).exports.f}Zt.set(b,_)}return ri.set(h,b),b};function vr(h,_,b,R){h||(h=this),this.parent=h,this.Ra=h.Ra,this.Va=null,this.id=ps++,this.name=_,this.mode=b,this.Ga={},this.Ha={},this.rdev=R}Object.defineProperties(vr.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(h){h?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(h){h?this.mode|=146:this.mode&=-147}}}),Ua(),hn=Array(4096),Ht(Xe,"/"),In("/tmp"),In("/home"),In("/home/web_user"),function(){In("/dev"),mn(259,{read:()=>0,write:(R,U,J,oe)=>oe}),jn("/dev/null",259),oa(1280,hi),oa(1536,fr),jn("/dev/tty",1280),jn("/dev/tty1",1536);var h=new Uint8Array(1024),_=0,b=()=>(_===0&&(_=jt(h).byteLength),h[--_]);Yi("random",b),Yi("urandom",b),In("/dev/shm"),In("/dev/shm/tmp")}(),function(){In("/proc");var h=In("/proc/self");In("/proc/self/fd"),Ht({Ra(){var _=Zn(h,"fd",16895,73);return _.Ga={lookup(b,R){var U=Ut(+R);return b={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>U.path}},b.parent=b}},_}},"/proc/self/fd")}();var Oi={a:(h,_,b,R)=>{Ee(`Assertion failed: ${h?mt(M,h):""}, at: `+[_?_?mt(M,_):"":"unknown filename",b,R?R?mt(M,R):"":"unknown function"])},h:function(h,_){try{return h=h?mt(M,h):"",Jn(h,_),0}catch(b){if(typeof pt>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},H:function(h,_,b){try{if(_=_?mt(M,_):"",_=Xi(h,_),b&-8)return-28;var R=Yt(_,{Sa:!0}).node;return R?(h="",b&4&&(h+="r"),b&2&&(h+="w"),b&1&&(h+="x"),h&&Wn(R,h)?-2:0):-44}catch(U){if(typeof pt>"u"||U.name!=="ErrnoError")throw U;return-U.Ka}},i:function(h,_){try{var b=Ut(h);return Jn(b.node,_),0}catch(R){if(typeof pt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},g:function(h){try{var _=Ut(h).node,b=typeof _=="string"?Yt(_,{Sa:!0}).node:_;if(!b.Ga.Oa)throw new be(63);return b.Ga.Oa(b,{timestamp:Date.now()}),0}catch(R){if(typeof pt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},b:function(h,_,b){En=b;try{var R=Ut(h);switch(_){case 0:var U=Di();if(0>U)return-28;for(;Xn[U];)U++;return mi(R,U).fd;case 1:case 2:return 0;case 3:return R.flags;case 4:return U=Di(),R.flags|=U,0;case 5:return U=Di(),q[U+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return P[va()>>2]=28,-1;default:return-28}}catch(J){if(typeof pt>"u"||J.name!=="ErrnoError")throw J;return-J.Ka}},f:function(h,_){try{var b=Ut(h);return Bt(ga,b.path,_)}catch(R){if(typeof pt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},n:function(h,_,b){_=ai(_,b);try{if(isNaN(_))return 61;var R=Ut(h);if((R.flags&2097155)===0)throw new be(28);return ln(R.node,_),0}catch(U){if(typeof pt>"u"||U.name!=="ErrnoError")throw U;return-U.Ka}},C:function(h,_){try{if(_===0)return-28;var b=Kt("/")+1;return _<b?-68:(Gi("/",M,h,_),b)}catch(R){if(typeof pt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},F:function(h,_){try{return h=h?mt(M,h):"",Bt(Ki,h,_)}catch(b){if(typeof pt>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},z:function(h,_,b){try{return _=_?mt(M,_):"",_=Xi(h,_),_=bt(_),_[_.length-1]==="/"&&(_=_.substr(0,_.length-1)),In(_,b),0}catch(R){if(typeof pt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},E:function(h,_,b,R){try{_=_?mt(M,_):"";var U=R&256;return _=Xi(h,_,R&4096),Bt(U?Ki:ga,_,b)}catch(J){if(typeof pt>"u"||J.name!=="ErrnoError")throw J;return-J.Ka}},y:function(h,_,b,R){En=R;try{_=_?mt(M,_):"",_=Xi(h,_);var U=R?Di():0;return ii(_,b,U).fd}catch(J){if(typeof pt>"u"||J.name!=="ErrnoError")throw J;return-J.Ka}},w:function(h,_,b,R){try{if(_=_?mt(M,_):"",_=Xi(h,_),0>=R)return-28;var U=pa(_),J=Math.min(R,Kt(U)),oe=x[b+J];return Gi(U,M,b,R+1),x[b+J]=oe,J}catch(Ve){if(typeof pt>"u"||Ve.name!=="ErrnoError")throw Ve;return-Ve.Ka}},v:function(h){try{return h=h?mt(M,h):"",_s(h),0}catch(_){if(typeof pt>"u"||_.name!=="ErrnoError")throw _;return-_.Ka}},G:function(h,_){try{return h=h?mt(M,h):"",Bt(ga,h,_)}catch(b){if(typeof pt>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},r:function(h,_,b){try{return _=_?mt(M,_):"",_=Xi(h,_),b===0?ys(_):b===512?_s(_):Ee("Invalid flags passed to unlinkat"),0}catch(R){if(typeof pt>"u"||R.name!=="ErrnoError")throw R;return-R.Ka}},q:function(h,_,b){try{if(_=_?mt(M,_):"",_=Xi(h,_,!0),b){var R=Ke[b>>2]+4294967296*P[b+4>>2],U=P[b+8>>2];J=1e3*R+U/1e6,b+=16,R=Ke[b>>2]+4294967296*P[b+4>>2],U=P[b+8>>2],oe=1e3*R+U/1e6}else var J=Date.now(),oe=J;h=J;var Ve=Yt(_,{Sa:!0}).node;return Ve.Ga.Oa(Ve,{timestamp:Math.max(h,oe)}),0}catch(et){if(typeof pt>"u"||et.name!=="ErrnoError")throw et;return-et.Ka}},l:function(h,_,b){h=new Date(1e3*ai(h,_)),P[b>>2]=h.getSeconds(),P[b+4>>2]=h.getMinutes(),P[b+8>>2]=h.getHours(),P[b+12>>2]=h.getDate(),P[b+16>>2]=h.getMonth(),P[b+20>>2]=h.getFullYear()-1900,P[b+24>>2]=h.getDay(),_=h.getFullYear(),P[b+28>>2]=(_%4!==0||_%100===0&&_%400!==0?Et:Zi)[h.getMonth()]+h.getDate()-1|0,P[b+36>>2]=-(60*h.getTimezoneOffset()),_=new Date(h.getFullYear(),6,1).getTimezoneOffset();var R=new Date(h.getFullYear(),0,1).getTimezoneOffset();P[b+32>>2]=(_!=R&&h.getTimezoneOffset()==Math.min(R,_))|0},j:function(h,_,b,R,U,J,oe,Ve){U=ai(U,J);try{if(isNaN(U))return 61;var et=Ut(R);if((_&2)!==0&&(b&2)===0&&(et.flags&2097155)!==2)throw new be(2);if((et.flags&2097155)===1)throw new be(2);if(!et.Ha.bb)throw new be(43);var Le=et.Ha.bb(et,h,U,_,b),Rt=Le.Db;return P[oe>>2]=Le.ub,Ke[Ve>>2]=Rt,0}catch(yt){if(typeof pt>"u"||yt.name!=="ErrnoError")throw yt;return-yt.Ka}},k:function(h,_,b,R,U,J,oe){J=ai(J,oe);try{if(isNaN(J))return 61;var Ve=Ut(U);if(b&2){if((Ve.node.mode&61440)!==32768)throw new be(43);if(!(R&2)){var et=M.slice(h,h+_);Ve.Ha.cb&&Ve.Ha.cb(Ve,et,J,_,R)}}}catch(Le){if(typeof pt>"u"||Le.name!=="ErrnoError")throw Le;return-Le.Ka}},s:(h,_,b)=>{function R(et){return(et=et.toTimeString().match(/\(([A-Za-z ]+)\)$/))?et[1]:"GMT"}var U=new Date().getFullYear(),J=new Date(U,0,1),oe=new Date(U,6,1);U=J.getTimezoneOffset();var Ve=oe.getTimezoneOffset();Ke[h>>2]=60*Math.max(U,Ve),P[_>>2]=+(U!=Ve),h=R(J),_=R(oe),h=_a(h),_=_a(_),Ve<U?(Ke[b>>2]=h,Ke[b+4>>2]=_):(Ke[b>>2]=_,Ke[b+4>>2]=h)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:h=>{var _=M.length;if(h>>>=0,2147483648<h)return!1;for(var b=1;4>=b;b*=2){var R=_*(1+.2/b);R=Math.min(R,h+100663296);var U=Math;R=Math.max(h,R);e:{U=(U.min.call(U,2147483648,R+(65536-R%65536)%65536)-k.buffer.byteLength+65535)/65536;try{k.grow(U),Te();var J=1;break e}catch{}J=void 0}if(J)return!0}return!1},A:(h,_)=>{var b=0;return ya().forEach((R,U)=>{var J=_+b;for(U=Ke[h+4*U>>2]=J,J=0;J<R.length;++J)x[U++>>0]=R.charCodeAt(J);x[U>>0]=0,b+=R.length+1}),0},B:(h,_)=>{var b=ya();Ke[h>>2]=b.length;var R=0;return b.forEach(U=>R+=U.length+1),Ke[_>>2]=R,0},e:function(h){try{var _=Ut(h);return pr(_),0}catch(b){if(typeof pt>"u"||b.name!=="ErrnoError")throw b;return b.Ka}},p:function(h,_){try{var b=Ut(h);return x[_>>0]=b.tty?2:vn(b.mode)?3:(b.mode&61440)===40960?7:4,q[_+2>>1]=0,ut=[0,(ke=0,1<=+Math.abs(ke)?0<ke?+Math.floor(ke/4294967296)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],P[_+8>>2]=ut[0],P[_+12>>2]=ut[1],ut=[0,(ke=0,1<=+Math.abs(ke)?0<ke?+Math.floor(ke/4294967296)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],P[_+16>>2]=ut[0],P[_+20>>2]=ut[1],0}catch(R){if(typeof pt>"u"||R.name!=="ErrnoError")throw R;return R.Ka}},x:function(h,_,b,R){try{e:{var U=Ut(h);h=_;for(var J,oe=_=0;oe<b;oe++){var Ve=Ke[h>>2],et=Ke[h+4>>2];h+=8;var Le=La(U,x,Ve,et,J);if(0>Le){var Rt=-1;break e}if(_+=Le,Le<et)break;typeof J<"u"&&(J+=Le)}Rt=_}return Ke[R>>2]=Rt,0}catch(yt){if(typeof pt>"u"||yt.name!=="ErrnoError")throw yt;return yt.Ka}},m:function(h,_,b,R,U){_=ai(_,b);try{if(isNaN(_))return 61;var J=Ut(h);return Ni(J,_,R),ut=[J.position>>>0,(ke=J.position,1<=+Math.abs(ke)?0<ke?+Math.floor(ke/4294967296)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],P[U>>2]=ut[0],P[U+4>>2]=ut[1],J.hb&&_===0&&R===0&&(J.hb=null),0}catch(oe){if(typeof pt>"u"||oe.name!=="ErrnoError")throw oe;return oe.Ka}},D:function(h){var b;try{var _=Ut(h);return(b=_.Ha)!=null&&b.fsync?_.Ha.fsync(_):0}catch(R){if(typeof pt>"u"||R.name!=="ErrnoError")throw R;return R.Ka}},u:function(h,_,b,R){try{e:{var U=Ut(h);h=_;for(var J,oe=_=0;oe<b;oe++){var Ve=Ke[h>>2],et=Ke[h+4>>2];h+=8;var Le=ja(U,x,Ve,et,J);if(0>Le){var Rt=-1;break e}_+=Le,typeof J<"u"&&(J+=Le)}Rt=_}return Ke[R>>2]=Rt,0}catch(yt){if(typeof pt>"u"||yt.name!=="ErrnoError")throw yt;return yt.Ka}}},Ne=function(){var b;function h(R){var U;return Ne=R.exports,k=Ne.I,Te(),Zt=Ne.Aa,tt.unshift(Ne.J),Se--,(U=p.monitorRunDependencies)==null||U.call(p,Se),Se==0&&de&&(R=de,de=null,R()),Ne}var _={a:Oi};if(Se++,(b=p.monitorRunDependencies)==null||b.call(p,Se),p.instantiateWasm)try{return p.instantiateWasm(_,h)}catch(R){return ue(`Module.instantiateWasm callback failed with error: ${R}`),!1}return wt(_,function(R){h(R.instance)}),{}}();p._sqlite3_free=h=>(p._sqlite3_free=Ne.K)(h),p._sqlite3_value_text=h=>(p._sqlite3_value_text=Ne.L)(h);var va=()=>(va=Ne.M)();p._sqlite3_prepare_v2=(h,_,b,R,U)=>(p._sqlite3_prepare_v2=Ne.N)(h,_,b,R,U),p._sqlite3_step=h=>(p._sqlite3_step=Ne.O)(h),p._sqlite3_reset=h=>(p._sqlite3_reset=Ne.P)(h),p._sqlite3_exec=(h,_,b,R,U)=>(p._sqlite3_exec=Ne.Q)(h,_,b,R,U),p._sqlite3_finalize=h=>(p._sqlite3_finalize=Ne.R)(h),p._sqlite3_column_name=(h,_)=>(p._sqlite3_column_name=Ne.S)(h,_),p._sqlite3_column_text=(h,_)=>(p._sqlite3_column_text=Ne.T)(h,_),p._sqlite3_column_type=(h,_)=>(p._sqlite3_column_type=Ne.U)(h,_),p._sqlite3_errmsg=h=>(p._sqlite3_errmsg=Ne.V)(h),p._sqlite3_clear_bindings=h=>(p._sqlite3_clear_bindings=Ne.W)(h),p._sqlite3_value_blob=h=>(p._sqlite3_value_blob=Ne.X)(h),p._sqlite3_value_bytes=h=>(p._sqlite3_value_bytes=Ne.Y)(h),p._sqlite3_value_double=h=>(p._sqlite3_value_double=Ne.Z)(h),p._sqlite3_value_int=h=>(p._sqlite3_value_int=Ne._)(h),p._sqlite3_value_type=h=>(p._sqlite3_value_type=Ne.$)(h),p._sqlite3_result_blob=(h,_,b,R)=>(p._sqlite3_result_blob=Ne.aa)(h,_,b,R),p._sqlite3_result_double=(h,_)=>(p._sqlite3_result_double=Ne.ba)(h,_),p._sqlite3_result_error=(h,_,b)=>(p._sqlite3_result_error=Ne.ca)(h,_,b),p._sqlite3_result_int=(h,_)=>(p._sqlite3_result_int=Ne.da)(h,_),p._sqlite3_result_int64=(h,_,b)=>(p._sqlite3_result_int64=Ne.ea)(h,_,b),p._sqlite3_result_null=h=>(p._sqlite3_result_null=Ne.fa)(h),p._sqlite3_result_text=(h,_,b,R)=>(p._sqlite3_result_text=Ne.ga)(h,_,b,R),p._sqlite3_aggregate_context=(h,_)=>(p._sqlite3_aggregate_context=Ne.ha)(h,_),p._sqlite3_column_count=h=>(p._sqlite3_column_count=Ne.ia)(h),p._sqlite3_data_count=h=>(p._sqlite3_data_count=Ne.ja)(h),p._sqlite3_column_blob=(h,_)=>(p._sqlite3_column_blob=Ne.ka)(h,_),p._sqlite3_column_bytes=(h,_)=>(p._sqlite3_column_bytes=Ne.la)(h,_),p._sqlite3_column_double=(h,_)=>(p._sqlite3_column_double=Ne.ma)(h,_),p._sqlite3_bind_blob=(h,_,b,R,U)=>(p._sqlite3_bind_blob=Ne.na)(h,_,b,R,U),p._sqlite3_bind_double=(h,_,b)=>(p._sqlite3_bind_double=Ne.oa)(h,_,b),p._sqlite3_bind_int=(h,_,b)=>(p._sqlite3_bind_int=Ne.pa)(h,_,b),p._sqlite3_bind_text=(h,_,b,R,U)=>(p._sqlite3_bind_text=Ne.qa)(h,_,b,R,U),p._sqlite3_bind_parameter_index=(h,_)=>(p._sqlite3_bind_parameter_index=Ne.ra)(h,_),p._sqlite3_sql=h=>(p._sqlite3_sql=Ne.sa)(h),p._sqlite3_normalized_sql=h=>(p._sqlite3_normalized_sql=Ne.ta)(h),p._sqlite3_changes=h=>(p._sqlite3_changes=Ne.ua)(h),p._sqlite3_close_v2=h=>(p._sqlite3_close_v2=Ne.va)(h),p._sqlite3_create_function_v2=(h,_,b,R,U,J,oe,Ve,et)=>(p._sqlite3_create_function_v2=Ne.wa)(h,_,b,R,U,J,oe,Ve,et),p._sqlite3_open=(h,_)=>(p._sqlite3_open=Ne.xa)(h,_);var qn=p._malloc=h=>(qn=p._malloc=Ne.ya)(h),Rn=p._free=h=>(Rn=p._free=Ne.za)(h);p._RegisterExtensionFunctions=h=>(p._RegisterExtensionFunctions=Ne.Ba)(h);var ba=(h,_)=>(ba=Ne.Ca)(h,_),zn=()=>(zn=Ne.Da)(),li=h=>(li=Ne.Ea)(h),Sn=h=>(Sn=Ne.Fa)(h);p.stackAlloc=Sn,p.stackSave=zn,p.stackRestore=li,p.cwrap=(h,_,b,R)=>{var U=!b||b.every(J=>J==="number"||J==="boolean");return _!=="string"&&U&&!R?p["_"+h]:function(){return bs(h,_,b,arguments)}},p.addFunction=si,p.removeFunction=Bn,p.UTF8ToString=qe,p.ALLOC_NORMAL=_r,p.allocate=yr,p.allocateUTF8OnStack=Ba;var Ea;de=function h(){Ea||_i(),Ea||(de=h)};function _i(){function h(){if(!Ea&&(Ea=!0,p.calledRun=!0,!O)){if(p.noFSInit||bn||(bn=!0,Ua(),p.stdin=p.stdin,p.stdout=p.stdout,p.stderr=p.stderr,p.stdin?Yi("stdin",p.stdin):pi("/dev/tty","/dev/stdin"),p.stdout?Yi("stdout",null,p.stdout):pi("/dev/tty","/dev/stdout"),p.stderr?Yi("stderr",null,p.stderr):pi("/dev/tty1","/dev/stderr"),ii("/dev/stdin",0),ii("/dev/stdout",1),ii("/dev/stderr",1)),mr=!1,$n(tt),p.onRuntimeInitialized&&p.onRuntimeInitialized(),p.postRun)for(typeof p.postRun=="function"&&(p.postRun=[p.postRun]);p.postRun.length;){var _=p.postRun.shift();B.unshift(_)}$n(B)}}if(!(0<Se)){if(p.preRun)for(typeof p.preRun=="function"&&(p.preRun=[p.preRun]);p.preRun.length;)me();$n(Re),0<Se||(p.setStatus?(p.setStatus("Running..."),setTimeout(function(){setTimeout(function(){p.setStatus("")},1),h()},1)):h())}}if(p.preInit)for(typeof p.preInit=="function"&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();return _i(),g}),n)};a.exports=r,a.exports.default=r}(Yh)),Yh.exports}var LR=VR();const jR=Tm(LR);let $h=null;const UR=async()=>{if(!$h)try{$h=await jR({locateFile:a=>`https://unpkg.com/sql.js@1.10.3/dist/${a}`})}catch(a){throw console.error("Failed to initialize sql.js:",a),new Error("Failed to initialize SQL.js. Check network connection or browser compatibility.")}return $h},BR=async a=>{const e=await UR(),n=await a.arrayBuffer();try{return new e.Database(new Uint8Array(n))}catch(r){throw console.error("Error creating database from file buffer:",r),new Error("Invalid or corrupted database file.")}},Pt=a=>{if(!a||a.length===0)return[];const{columns:e,values:n}=a[0];return n.map(r=>{const l={};return e.forEach((u,f)=>{l[u]=r[f]}),l})},qR=async(a,e,n,r,l)=>{if(!e.trim())return[];let u=`
    SELECT c.id, c.name, c.rarity, c.element 
    FROM cards c
    WHERE (c.name LIKE ? OR c.id LIKE ?)
  `;const f=[`%${e}%`,`${e}%`];if(n!==null){const g=n%10;n<10?(u+=" AND (c.element = ? OR c.element = ? OR c.element = ?)",f.push(g),f.push(g+10),f.push(g+20)):(u+=" AND c.element = ?",f.push(n))}r!==null&&(u+=" AND c.rarity = ?",f.push(r)),l==="base"?u+=" AND SUBSTR(c.id, 1, 1) = '1'":l==="transformed"&&(u+=" AND SUBSTR(c.id, 1, 1) != '1'"),u+=`
    ORDER BY c.name ASC, c.id ASC
    LIMIT 200; 
  `;try{const g=a.exec(u,f),v=Pt(g).map(A=>({id:String(A.id),name:String(A.name),rarity:Number(A.rarity),element:Number(A.element)})),p=new Map;for(const A of v){const N=A.id;if(N.length>1){const L=N.substring(0,N.length-1),X=N.substring(N.length-1);X==="1"?p.set(L,A):X==="0"?p.has(L)||p.set(L,A):p.has(N)||p.set(N,A)}else p.has(N)||p.set(N,A)}return Array.from(p.values()).sort((A,N)=>A.name<N.name?-1:A.name>N.name?1:A.id<N.id?-1:A.id>N.id?1:0).slice(0,50)}catch(g){throw console.error("DB search error:",g),new Error("Failed to search characters in the database.")}},le=(a,e)=>a??e,zR=a=>({id:String(a.id),name:le(a.name,""),description:le(a.description,""),exec_timing_type:le(a.exec_timing_type,0),efficacy_type:le(a.efficacy_type,0),target_type:le(a.target_type,0),sub_target_type_set_id:a.sub_target_type_set_id?String(a.sub_target_type_set_id):null,passive_skill_effect_id:a.passive_skill_effect_id?String(a.passive_skill_effect_id):null,calc_option:le(a.calc_option,0),turn:le(a.turn,0),is_once:le(a.is_once,0),probability:le(a.probability,100),causality_conditions:a.causality_conditions?String(a.causality_conditions):null,eff_value1:a.eff_value1,eff_value2:a.eff_value2,eff_value3:a.eff_value3,efficacy_values:le(a.efficacy_values,"{}")}),HR=(a,e)=>({id:String(a.id),leader_skill_set_id:e,exec_timing_type:le(a.exec_timing_type,0),target_type:le(a.target_type,0),sub_target_type_set_id:a.sub_target_type_set_id?String(a.sub_target_type_set_id):null,causality_conditions:a.causality_conditions?String(a.causality_conditions):null,efficacy_type:le(a.efficacy_type,0),efficacy_values:le(a.efficacy_values,"[]"),calc_option:le(a.calc_option,0)}),FR=(a,e)=>({id:String(a.id),special_set_id:e,type:le(a.type,"Special::NormalEfficacySpecial"),efficacy_type:le(a.efficacy_type,0),target_type:le(a.target_type,0),calc_option:le(a.calc_option,0),turn:le(a.turn,1),prob:le(a.prob,100),causality_conditions:a.causality_conditions?String(a.causality_conditions):null,eff_value1:a.eff_value1,eff_value2:a.eff_value2,eff_value3:a.eff_value3}),GR=(a,e)=>({id:String(a.id),active_skill_set_id:e,target_type:le(a.target_type,0),sub_target_type_set_id:a.sub_target_type_set_id?String(a.sub_target_type_set_id):null,calc_option:le(a.calc_option,0),efficacy_type:le(a.efficacy_type,0),eff_val1:a.eff_val1,eff_val2:a.eff_val2,eff_val3:a.eff_val3,efficacy_values:le(a.efficacy_values,"{}"),thumb_effect_id:a.thumb_effect_id?Number(a.thumb_effect_id):null,effect_se_id:a.effect_se_id?Number(a.effect_se_id):null}),KR=a=>({id:String(a.id),card_id:String(a.card_id),special_set_id:String(a.special_set_id),priority:le(a.priority,0),style:le(a.style,"Normal"),lv_start:le(a.lv_start,Ed("","").lv_start),eball_num_start:le(a.eball_num_start,Ed("","").eball_num_start),view_id:le(a.view_id,0),card_costume_condition_id:le(a.card_costume_condition_id,0),special_bonus_id1:le(a.special_bonus_id1,0),special_bonus_lv1:le(a.special_bonus_lv1,0),bonus_view_id1:le(a.bonus_view_id1,0),special_bonus_id2:le(a.special_bonus_id2,0),special_bonus_lv2:le(a.special_bonus_lv2,0),bonus_view_id2:le(a.bonus_view_id2,0),causality_conditions:a.causality_conditions?String(a.causality_conditions):null,special_asset_id:a.special_asset_id?String(a.special_asset_id):null}),YR=(a,e)=>({id:String(a.id),standby_skill_set_id:e,target_type:le(a.target_type,0),target_type_values:le(a.target_type_values,"{}"),sub_target_type_set_id:a.sub_target_type_set_id?String(a.sub_target_type_set_id):null,turn:le(a.turn,0),efficacy_type:le(a.efficacy_type,0),calc_option:a.calc_option?String(a.calc_option):null,efficacy_values:le(a.efficacy_values,"{}"),thumb_effect_id:a.thumb_effect_id?String(a.thumb_effect_id):null,effect_se_id:a.effect_se_id?String(a.effect_se_id):null}),QR=(a,e)=>({id:String(a.id),finish_skill_set_id:e,target_type:le(a.target_type,0),target_type_values:le(a.target_type_values,"{}"),sub_target_type_set_id:a.sub_target_type_set_id?String(a.sub_target_type_set_id):null,turn:le(a.turn,0),efficacy_type:le(a.efficacy_type,0),calc_option:a.calc_option?String(a.calc_option):null,efficacy_values:le(a.efficacy_values,"{}"),thumb_effect_id:a.thumb_effect_id?String(a.thumb_effect_id):null,effect_se_id:a.effect_se_id?String(a.effect_se_id):null}),$R=a=>({id:String(a.id),script_name:le(a.script_name,""),lite_flicker_rate:le(a.lite_flicker_rate,0),bgm_id:a.bgm_id?Number(a.bgm_id):null}),XR=a=>({id:String(a.id),category:le(a.category,0),name:le(a.name,""),pack_name:le(a.pack_name,""),scene_name:le(a.scene_name,""),red:le(a.red,0),green:le(a.green,0),blue:le(a.blue,0),alpha:le(a.alpha,0),lite_flicker_rate:le(a.lite_flicker_rate,0)}),ZR=async(a,e)=>{const n=a.exec("SELECT * FROM cards WHERE id = ?",[e]),r=Pt(n)[0];if(!r)return null;let l;if(r.card_unique_info_id){const S=a.exec("SELECT * FROM card_unique_infos WHERE id = ?",[r.card_unique_info_id]),A=Pt(S)[0];A?l={id:String(A.id),name:le(A.name,""),kana:A.kana?String(A.kana):null}:l={id:String(r.card_unique_info_id),name:String(r.name||`Unique Info for ${e}`)}}const u={...vp(),id:String(r.id),name:le(r.name,""),character_id:String(r.character_id),card_unique_info_id:String(r.card_unique_info_id),cost:le(r.cost,0),rarity:le(r.rarity,4),hp_init:le(r.hp_init,0),hp_max:le(r.hp_max,0),atk_init:le(r.atk_init,0),atk_max:le(r.atk_max,0),def_init:le(r.def_init,0),def_max:le(r.def_max,0),element:le(r.element,0),lv_max:le(r.lv_max,120),skill_lv_max:le(r.skill_lv_max,10),grow_type:le(r.grow_type,0),price:le(r.price,0),exp_type:le(r.exp_type,0),training_exp:le(r.training_exp,0),special_motion:le(r.special_motion,0),passive_skill_set_id:String(r.passive_skill_set_id||""),leader_skill_set_id:String(r.leader_skill_set_id||""),link_skill_ids:[r.link_skill1_id,r.link_skill2_id,r.link_skill3_id,r.link_skill4_id,r.link_skill5_id,r.link_skill6_id,r.link_skill7_id].map(S=>String(S||"")).filter(S=>S&&S!=="null"&&S.trim()!==""&&S.trim()!=="0"),category_ids:Pt(a.exec("SELECT card_category_id FROM card_card_categories WHERE card_id = ? ORDER BY num",[e])).map(S=>String(S.card_category_id)),eball_mod_min:le(r.eball_mod_min,0),eball_mod_num100:le(r.eball_mod_num100,0),eball_mod_mid:le(r.eball_mod_mid,0),eball_mod_mid_num:le(r.eball_mod_mid_num,0),eball_mod_max:le(r.eball_mod_max,0),eball_mod_max_num:le(r.eball_mod_max_num,0),max_level_reward_id:String(r.max_level_reward_id||"1"),max_level_reward_type:String(r.max_level_reward_type||"1"),collectable_type:le(r.collectable_type,1),face_x:le(r.face_x,0),face_y:le(r.face_y,0),aura_id:r.aura_id?String(r.aura_id):null,is_selling_only:le(r.is_selling_only,0),awakening_element_type:r.awakening_element_type,potential_board_id:r.potential_board_id?String(r.potential_board_id):null,active_skill_set_id_ref:"",standby_skill_set_id_ref:""},f={cardForms:[u],cardUniqueInfos:l?[l]:[],passiveSkillSets:[],leaderSkillSets:[],specialSets:[],activeSkillSets:[],cardSpecials:[],cardActiveSkills:[],cardStandbySkills:[],standbySkillSets:[],finishSkillSets:[],standbySkillSetFinishSkillSetRelations:[],finishSpecials:[],battleParams:[],passiveSkillEffects:[],effectPacks:[]};if(r.passive_skill_set_id){const S=a.exec("SELECT * FROM passive_skill_sets WHERE id = ?",[r.passive_skill_set_id]),A=Pt(S)[0];if(A){const N=Pt(a.exec("SELECT passive_skill_id FROM passive_skill_set_relations WHERE passive_skill_set_id = ? ORDER BY passive_skill_id",[A.id])).map(Y=>String(Y.passive_skill_id)),L=N.length?Pt(a.exec(`SELECT * FROM passive_skills WHERE id IN (${N.map(()=>"?").join(",")}) ORDER BY id`,N)).map(zR):[];f.passiveSkillSets.push({id:String(A.id),name:le(A.name,""),description:le(A.description,""),itemized_description:A.itemized_description?String(A.itemized_description):null,skills:L});const X=new Set;if(L.forEach(Y=>{Y.passive_skill_effect_id&&X.add(Y.passive_skill_effect_id),(Y.efficacy_type===103||Y.efficacy_type===131)&&Y.eff_value3&&String(Y.eff_value3).trim()!==""&&X.add(String(Y.eff_value3))}),X.size>0){const Y=Array.from(X),Z=[],re=[];Y.forEach(ie=>{const H=Number(ie);!isNaN(H)&&String(H)===ie?Z.push(H):ie&&ie.trim()!==""&&re.push(ie)});const he=[];if(Z.length>0){const ie=a.exec(`SELECT * FROM passive_skill_effects WHERE id IN (${Z.map(()=>"?").join(",")})`,Z);he.push(...Pt(ie))}if(re.length>0){const ie=a.exec(`SELECT * FROM passive_skill_effects WHERE id IN (${re.map(()=>"?").join(",")})`,re);he.push(...Pt(ie))}const ve=new Map;he.forEach(ie=>{ve.set(String(ie.id),ie)}),ve.forEach(ie=>{const H=String(ie.id);f.passiveSkillEffects.find(ue=>ue.id===H)||f.passiveSkillEffects.push($R(ie))})}}}if(r.leader_skill_set_id){const S=a.exec("SELECT * FROM leader_skill_sets WHERE id = ?",[r.leader_skill_set_id]),A=Pt(S)[0];if(A){const N=Pt(a.exec("SELECT * FROM leader_skills WHERE leader_skill_set_id = ? ORDER BY id",[A.id])).map(L=>HR(L,String(A.id)));f.leaderSkillSets.push({id:String(A.id),name:le(A.name,""),description:le(A.description,""),skills:N})}}const g=Pt(a.exec("SELECT * FROM card_specials WHERE card_id = ? ORDER BY priority, eball_num_start",[e]));for(const S of g){f.cardSpecials.push(KR(S));const A=String(S.special_set_id);if(A&&!f.specialSets.find(N=>N.id===A)){const N=a.exec("SELECT * FROM special_sets WHERE id = ?",[A]),L=Pt(N)[0];if(L){const X=Pt(a.exec("SELECT * FROM specials WHERE special_set_id = ? ORDER BY id",[A])).map(Y=>FR(Y,A));f.specialSets.push({id:A,name:le(L.name,""),description:le(L.description,""),causality_description:L.causality_description?String(L.causality_description):null,aim_target:le(L.aim_target,0),increase_rate:le(L.increase_rate,0),lv_bonus:le(L.lv_bonus,0),is_inactive:le(L.is_inactive,0),skills:X})}}}const v=Pt(a.exec("SELECT * FROM card_active_skills WHERE card_id = ? LIMIT 1",[e]))[0];if(v!=null&&v.active_skill_set_id){u.active_skill_set_id_ref=String(v.active_skill_set_id),f.cardActiveSkills.push({id:String(v.id),card_id:String(v.card_id),active_skill_set_id:String(v.active_skill_set_id)});const S=String(v.active_skill_set_id);if(!f.activeSkillSets.find(A=>A.id===S)){const A=a.exec("SELECT * FROM active_skill_sets WHERE id = ?",[S]),N=Pt(A)[0];if(N){const L=Pt(a.exec("SELECT * FROM active_skills WHERE active_skill_set_id = ? ORDER BY id",[S])).map(Y=>GR(Y,S));f.activeSkillSets.push({id:S,name:le(N.name,""),effect_description:le(N.effect_description,""),condition_description:le(N.condition_description,""),turn:le(N.turn,0),exec_limit:le(N.exec_limit,0),causality_conditions:N.causality_conditions?String(N.causality_conditions):null,ultimate_special_id:N.ultimate_special_id?Number(N.ultimate_special_id):null,special_view_id:N.special_view_id?Number(N.special_view_id):null,costume_special_view_id:le(N.costume_special_view_id,0),bgm_id:N.bgm_id?Number(N.bgm_id):null,skills:L});const X=new Set;if(L.forEach(Y=>{Y.efficacy_type===109&&Y.eff_val2&&String(Y.eff_val2).trim()!==""&&X.add(String(Y.eff_val2))}),X.size>0){const Y=Array.from(X),Z=[],re=[];Y.forEach(ie=>{const H=Number(ie);!isNaN(H)&&String(H)===ie?Z.push(H):ie&&ie.trim()!==""&&re.push(ie)});const he=[];if(Z.length>0){const ie=a.exec(`SELECT * FROM effect_packs WHERE id IN (${Z.map(()=>"?").join(",")})`,Z);he.push(...Pt(ie))}if(re.length>0){const ie=a.exec(`SELECT * FROM effect_packs WHERE id IN (${re.map(()=>"?").join(",")})`,re);he.push(...Pt(ie))}const ve=new Map;he.forEach(ie=>{ve.set(String(ie.id),ie)}),ve.forEach(ie=>{f.effectPacks.find(H=>H.id===String(ie.id))||f.effectPacks.push(XR(ie))})}}}}const p=Pt(a.exec("SELECT * FROM card_standby_skill_set_relations WHERE card_id = ? LIMIT 1",[e]))[0];if(p!=null&&p.standby_skill_set_id){u.standby_skill_set_id_ref=String(p.standby_skill_set_id),f.cardStandbySkills.push({id:String(p.id),card_id:String(p.card_id),standby_skill_set_id:String(p.standby_skill_set_id)});const S=String(p.standby_skill_set_id);if(!f.standbySkillSets.find(A=>A.id===S)){const A=a.exec("SELECT * FROM standby_skill_sets WHERE id = ?",[S]),N=Pt(A)[0];if(N){const L=Pt(a.exec("SELECT * FROM standby_skills WHERE standby_skill_set_id = ? ORDER BY id",[S])).map(Y=>YR(Y,S)),X=Pt(a.exec("SELECT * FROM standby_skill_set_finish_skill_set_relations WHERE standby_skill_set_id = ?",[S])).map(Y=>({id:String(Y.id),standby_skill_set_id:String(Y.standby_skill_set_id),finish_skill_set_id:String(Y.finish_skill_set_id)}));f.standbySkillSets.push({id:S,name:le(N.name,""),ingame_icon_path:le(N.ingame_icon_path,""),effect_description:le(N.effect_description,""),condition_description:le(N.condition_description,""),exec_limit:le(N.exec_limit,0),causality_conditions:N.causality_conditions?String(N.causality_conditions):null,special_view_id:N.special_view_id?Number(N.special_view_id):null,costume_special_view_id:le(N.costume_special_view_id,0),bgm_id:N.bgm_id?Number(N.bgm_id):null,skills:L,finishSkillSetRelations:X}),f.standbySkillSetFinishSkillSetRelations.push(...X);for(const Y of X){const Z=Y.finish_skill_set_id;if(!f.finishSkillSets.find(re=>re.id===Z)){const re=a.exec("SELECT * FROM finish_skill_sets WHERE id = ?",[Z]),he=Pt(re)[0];if(he){const ve=Pt(a.exec("SELECT * FROM finish_skills WHERE finish_skill_set_id = ? ORDER BY id",[Z])).map(ie=>QR(ie,Z));if(f.finishSkillSets.push({id:Z,name:le(he.name,""),effect_description:le(he.effect_description,""),condition_description:le(he.condition_description,""),dialog_order:le(he.dialog_order,0),dialog_images:he.dialog_images?String(he.dialog_images):null,exec_timing_type:le(he.exec_timing_type,0),exec_limit:le(he.exec_limit,0),causality_conditions:he.causality_conditions?String(he.causality_conditions):null,finish_special_id:he.finish_special_id?String(he.finish_special_id):null,special_view_id:he.special_view_id?Number(he.special_view_id):null,costume_special_view_id:le(he.costume_special_view_id,0),bgm_id:he.bgm_id?Number(he.bgm_id):null,is_dialog_view_visible:le(he.is_dialog_view_visible,1),skills:ve}),he.finish_special_id&&String(he.finish_special_id).trim()!==""&&!f.finishSpecials.find(ie=>ie.id===String(he.finish_special_id))){const ie=a.exec("SELECT * FROM finish_specials WHERE id = ?",[he.finish_special_id]),H=Pt(ie)[0];H&&f.finishSpecials.push({id:String(H.id),increase_rate:le(H.increase_rate,0),aim_target:le(H.aim_target,0)})}}}}}}}if(u.rarity===5&&r.optimal_awakening_grow_type){const S=a.exec("SELECT * FROM optimal_awakening_growths WHERE optimal_awakening_grow_type = ?",[r.optimal_awakening_grow_type]),A=Pt(S)[0];A&&(f.optimalAwakeningGrowth={id:String(A.id),optimal_awakening_grow_type:String(A.optimal_awakening_grow_type),step:le(A.step,0),lv_max:le(A.lv_max,0),skill_lv_max:le(A.skill_lv_max,0),passive_skill_set_id:String(A.passive_skill_set_id),leader_skill_set_id:String(A.leader_skill_set_id)},f.isEZA=!0,f.baseCardIdForEZA=e)}return f},WR=async(a,e)=>{var k,O,x,M,q,P,Ke,_t,ae,Te,Re,tt,B,me,Se;const n=new Set,r=new Set,l=parseInt(e.slice(0,-1));isNaN(l)?n.add(e):(n.add(String(l)+"0"),n.add(String(l)+"1"));const u=[],f=new Map,g=new Map,v=new Map,p=new Map,S=new Map,A=new Map,N=new Map,L=new Map,X=new Map,Y=new Map,Z=new Map,re=new Map,he=[],ve=new Map,ie=new Map;let H={isEZA:!1};const ue=Array.from(n);for(;ue.length>0;){const de=ue.shift();if(!de||r.has(de))continue;r.add(de);const Ee=await ZR(a,de);Ee&&((k=Ee.cardForms)==null||k.forEach(G=>{u.find(ge=>ge.id===G.id)||u.push(G)}),(O=Ee.cardUniqueInfos)==null||O.forEach(G=>{f.has(G.id)||f.set(G.id,G)}),(x=Ee.passiveSkillSets)==null||x.forEach(G=>{g.has(G.id)||g.set(G.id,G),G.skills.forEach(ge=>{if((ge.efficacy_type===103||ge.efficacy_type===131)&&ge.eff_value1&&String(ge.eff_value1).trim()!==""){const Ce=String(ge.eff_value1);!r.has(Ce)&&!ue.includes(Ce)&&ue.push(Ce)}})}),(M=Ee.leaderSkillSets)==null||M.forEach(G=>{v.has(G.id)||v.set(G.id,G)}),(q=Ee.specialSets)==null||q.forEach(G=>{p.has(G.id)||p.set(G.id,G)}),(P=Ee.activeSkillSets)==null||P.forEach(G=>{S.has(G.id)||S.set(G.id,G)}),(Ke=Ee.cardSpecials)==null||Ke.forEach(G=>{A.has(G.id)||A.set(G.id,G)}),(_t=Ee.cardActiveSkills)==null||_t.forEach(G=>{N.has(G.id)||N.set(G.id,G)}),(ae=Ee.cardStandbySkills)==null||ae.forEach(G=>{re.has(G.id)||re.set(G.id,G)}),(Te=Ee.standbySkillSets)==null||Te.forEach(G=>{L.has(G.id)||L.set(G.id,G)}),(Re=Ee.finishSkillSets)==null||Re.forEach(G=>{X.has(G.id)||X.set(G.id,G)}),(tt=Ee.standbySkillSetFinishSkillSetRelations)==null||tt.forEach(G=>{Y.has(G.id)||Y.set(G.id,G)}),(B=Ee.finishSpecials)==null||B.forEach(G=>{Z.has(G.id)||Z.set(G.id,G)}),(me=Ee.passiveSkillEffects)==null||me.forEach(G=>{ve.has(G.id)||ve.set(G.id,G)}),(Se=Ee.effectPacks)==null||Se.forEach(G=>{ie.has(G.id)||ie.set(G.id,G)}),Ee.isEZA&&Ee.optimalAwakeningGrowth&&(!H.isEZA||H.baseCardIdForEZA===de)&&(H={isEZA:!0,baseCardIdForEZA:Ee.baseCardIdForEZA||de,optimalAwakeningGrowth:Ee.optimalAwakeningGrowth}))}if(u.length===0)return null;const C=parseInt(e.slice(0,-1))+"0";return u.sort((de,Ee)=>de.id===C?-1:Ee.id===C?1:de.id<Ee.id?-1:de.id>Ee.id?1:0),{cardForms:u,cardUniqueInfos:Array.from(f.values()),passiveSkillSets:Array.from(g.values()),leaderSkillSets:Array.from(v.values()),specialSets:Array.from(p.values()),activeSkillSets:Array.from(S.values()),cardSpecials:Array.from(A.values()),cardActiveSkills:Array.from(N.values()),cardStandbySkills:Array.from(re.values()),standbySkillSets:Array.from(L.values()),finishSkillSets:Array.from(X.values()),standbySkillSetFinishSkillSetRelations:Array.from(Y.values()),finishSpecials:Array.from(Z.values()),battleParams:he,passiveSkillEffects:Array.from(ve.values()),effectPacks:Array.from(ie.values()),...H}},JR=[{label:"All Cards",value:"all"},{label:"Base Cards (ID starts with 1)",value:"base"},{label:"Other/Transformed (ID not 1..)",value:"transformed"}],ek=({isOpen:a,onClose:e,dbInstance:n,onCharacterSelected:r,elementTypes:l,rarityTypes:u})=>{const[f,g]=Pe.useState(""),[v,p]=Pe.useState([]),[S,A]=Pe.useState(!1),[N,L]=Pe.useState(!1),[X,Y]=Pe.useState(null),[Z,re]=Pe.useState(""),[he,ve]=Pe.useState(""),[ie,H]=Pe.useState("all"),ue=Pe.useCallback(async()=>{if(n){if(!f.trim()){p([]),Y(null);return}A(!0),Y(null);try{const x=Z?parseInt(Z):null,M=he?parseInt(he):null,q=await qR(n,f,x,M,ie);p(q),q.length===0&&Y("No characters found matching your search criteria.")}catch(x){console.error("Search error:",x),Y(x instanceof Error?x.message:"Failed to search characters."),p([])}finally{A(!1)}}},[n,f,Z,he,ie]);Pe.useEffect(()=>{const x=setTimeout(()=>{f.length>0?ue():f.length===0&&(p([]),Y(null))},300);return()=>clearTimeout(x)},[f,Z,he,ie,ue]);const C=async x=>{L(!0),Y(null);try{const M=await WR(n,x);M?(r(M),e()):Y(`Could not load details for character ID: ${x}.`)}catch(M){console.error("Load details error:",M),Y(M instanceof Error?M.message:`Failed to load details for character ID: ${x}.`)}finally{L(!1)}};if(!a)return null;const k=[{label:"All Elements",value:""},...zE],O=[{label:"All Rarities",value:""},...FE];return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50 backdrop-blur-sm font-rajdhani",children:E.jsxs("div",{className:"bg-indigo-900 p-6 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col border-2 border-orange-500",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("h3",{className:"text-2xl font-bold text-orange-400",children:"Load Character from Database"}),E.jsx("button",{onClick:e,className:"text-indigo-300 hover:text-orange-400 text-2xl",children:E.jsx("i",{className:"fas fa-times"})})]}),E.jsx(_e,{label:"Search Character Name or ID",value:f,onChange:g,placeholder:"e.g., Goku, Vegeta, 1000010...",className:"mb-4"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[E.jsx(rn,{label:"Element",value:Z,onChange:x=>re(x),options:k}),E.jsx(rn,{label:"Rarity",value:he,onChange:x=>ve(x),options:O}),E.jsx(rn,{label:"Card Type Filter",value:ie,onChange:x=>H(x),options:JR})]}),S&&E.jsxs("p",{className:"text-center text-indigo-300 my-4",children:[E.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Searching..."]}),N&&E.jsxs("p",{className:"text-center text-indigo-300 my-4",children:[E.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Loading character details..."]}),X&&E.jsx("p",{className:"text-red-400 text-sm text-center my-4 p-2 bg-red-900 bg-opacity-50 rounded",children:X}),E.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:[v.map(x=>{const M=x.element%10,q=M===0?"bg-blue-500":M===1?"bg-green-500":M===2?"bg-purple-500":M===3?"bg-red-500":M===4?"bg-orange-500":"bg-gray-500";return E.jsxs("div",{className:"p-3 bg-indigo-800 hover:bg-indigo-700 rounded-lg shadow-md cursor-pointer transition-all flex justify-between items-center border border-indigo-700 hover:border-orange-500",onClick:()=>!N&&C(x.id),role:"button",tabIndex:0,onKeyPress:P=>P.key==="Enter"&&!N&&C(x.id),"aria-label":`Load character ${x.name||x.title||x.id}`,children:[E.jsxs("div",{children:[E.jsxs("p",{className:"font-semibold text-orange-300 text-lg",children:[x.name," ",E.jsx("span",{className:"text-sm text-indigo-300 font-normal",children:x.title?`(${x.title})`:""})]}),E.jsxs("p",{className:"text-xs text-indigo-400 font-roboto-mono",children:["ID: ",x.id]})]}),E.jsxs("div",{className:"text-right",children:[E.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold text-white ${q}`,children:l[x.element]||"???"}),E.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-semibold bg-gray-600 text-white",children:u[x.rarity]||"???"})]})]},x.id)}),v.length===0&&!S&&f&&!X&&E.jsx("p",{className:"text-center text-indigo-300 italic",children:"No results. Try adjusting your search or filters."})]}),E.jsx("div",{className:"mt-6 pt-4 border-t border-indigo-700 flex justify-end",children:E.jsx("button",{onClick:e,className:"py-2 px-5 bg-indigo-600 hover:bg-indigo-500 text-indigo-100 rounded-md transition-colors font-semibold shadow-md hover:shadow-lg",disabled:N,children:"Cancel"})})]})})},tk=({isOpen:a,onClose:e,currentUser:n,lastLoadedSlot:r,onSaveToSlot:l,onLoadFromSlot:u,isSavingSlot1:f,isSavingSlot2:g,isGlobalLoading:v})=>{const[p,S]=Pe.useState({updatedAt:null,exists:!1,isLoading:!1}),[A,N]=Pe.useState({updatedAt:null,exists:!1,isLoading:!1}),[L,X]=Pe.useState(!1),[Y,Z]=Pe.useState(null),re=Pe.useCallback(async()=>{if(n){X(!0),Z(null);try{const[H,ue]=await Promise.all([f0(n.uid,"slot1"),f0(n.uid,"slot2")]);S(C=>({...C,updatedAt:H.updatedAt?H.updatedAt.toDate():null,exists:H.exists})),N(C=>({...C,updatedAt:ue.updatedAt?ue.updatedAt.toDate():null,exists:ue.exists}))}catch(H){console.error("Error fetching slot metadata:",H),Z(H instanceof Error?H.message:"Failed to fetch slot information.")}finally{X(!1)}}},[n]);Pe.useEffect(()=>{a&&n&&re()},[a,n,re]);const he=async H=>{const ue=H==="slot1"?S:N;ue(k=>({...k,isLoading:!0})),Z(null),await l(H)&&re(),ue(k=>({...k,isLoading:!1}))},ve=async H=>{const ue=H==="slot1"?S:N;ue(C=>({...C,isLoading:!0})),Z(null),await u(H),ue(C=>({...C,isLoading:!1}))};if(!a)return null;const ie=(H,ue,C)=>{const k=H.replace("s","S"),O=r===H;return E.jsxs("div",{className:`p-4 rounded-lg shadow-md ${O?"bg-green-700 bg-opacity-30 border-2 border-green-500":"bg-indigo-700 bg-opacity-50 border border-indigo-600"}`,children:[E.jsxs("h4",{className:`text-xl font-semibold mb-2 ${O?"text-green-300":"text-orange-300"} font-rajdhani`,children:[k," ",O&&E.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-500 text-white rounded-md ml-2",children:"ACTIVE"})]}),L?E.jsxs("p",{className:"text-sm text-indigo-300 italic",children:[E.jsx("i",{className:"fas fa-spinner fa-spin mr-1"}),"Loading info..."]}):E.jsxs(E.Fragment,{children:[E.jsxs("p",{className:"text-xs text-indigo-300 mb-1",children:["Last Saved: ",ue.updatedAt?ue.updatedAt.toLocaleString():ue.exists?"Unknown":"Empty"]}),!ue.exists&&!ue.updatedAt&&E.jsx("p",{className:"text-xs text-yellow-400 italic mb-3",children:"This slot is empty."})]}),E.jsxs("div",{className:"flex space-x-3 mt-3",children:[E.jsx("button",{onClick:()=>he(H),disabled:C||v||L||ue.isLoading,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center",children:C||ue.isLoading?E.jsxs(E.Fragment,{children:[E.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Saving..."]}):E.jsxs(E.Fragment,{children:[E.jsx("i",{className:"fas fa-save mr-2"}),"Save to Slot"]})}),E.jsx("button",{onClick:()=>ve(H),disabled:!ue.exists||v||L||ue.isLoading,className:"flex-1 bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-3 rounded-md text-sm shadow-sm hover:shadow-md transition-all disabled:opacity-60 disabled:cursor-not-allowed flex items-center justify-center",children:ue.isLoading&&!C?E.jsxs(E.Fragment,{children:[E.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Loading..."]}):E.jsxs(E.Fragment,{children:[E.jsx("i",{className:"fas fa-cloud-download-alt mr-2"}),"Load from Slot"]})})]})]})};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50 backdrop-blur-sm font-rajdhani",children:E.jsxs("div",{className:"bg-indigo-900 p-6 rounded-xl shadow-2xl w-full max-w-xl max-h-[90vh] flex flex-col border-2 border-orange-500",children:[E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("h3",{className:"text-2xl font-bold text-orange-400",children:"Cloud Save Slots"}),E.jsx("button",{onClick:e,disabled:p.isLoading||A.isLoading||f||g||v||L,className:"text-indigo-300 hover:text-orange-400 text-2xl disabled:opacity-50",children:E.jsx("i",{className:"fas fa-times"})})]}),Y&&E.jsx("p",{className:"text-red-400 text-sm mb-4 bg-red-900 bg-opacity-50 p-2 rounded-md",children:Y}),E.jsxs("div",{className:"space-y-6 flex-grow overflow-y-auto pr-1 custom-scrollbar",children:[ie("slot1",p,f),ie("slot2",A,g)]}),E.jsx("div",{className:"mt-6 pt-4 border-t border-indigo-700 flex justify-end",children:E.jsx("button",{onClick:e,disabled:p.isLoading||A.isLoading||f||g||v||L,className:"py-2 px-5 bg-indigo-600 hover:bg-indigo-500 text-indigo-100 rounded-md transition-colors font-semibold shadow-md hover:shadow-lg disabled:opacity-50",children:"Close"})})]})})},nk=()=>{const[a,e]=Pe.useState(""),[n,r]=Pe.useState(""),[l,u]=Pe.useState(null),[f,g]=Pe.useState(!1),[v,p]=Pe.useState(!1),S=async N=>{N.preventDefault(),g(!0),u(null);try{v?(await PC(a,n),alert("Sign up successful! Please sign in."),p(!1)):await MC(a,n)}catch(L){u(L.message||"Failed to authenticate."),console.error("Email/Pass Auth Error:",L)}finally{g(!1)}},A=async()=>{g(!0),u(null);try{await VC()}catch(N){u(N.message||"Failed to sign in with Google."),console.error("Google Sign In Error:",N)}finally{g(!1)}};return E.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-indigo-900 text-indigo-100 font-rajdhani",children:[E.jsxs("div",{className:"bg-indigo-800 bg-opacity-70 p-8 sm:p-10 md:p-14 rounded-xl shadow-2xl w-full max-w-md text-center border-2 border-orange-500 border-opacity-50",children:[E.jsx("div",{className:"mb-6 text-center",children:E.jsx("i",{className:"fas fa-dragon text-6xl text-orange-400 p-3 bg-orange-500 bg-opacity-20 rounded-full shadow-lg",style:{textShadow:"0 0 10px rgba(251, 146, 60, 0.7)"}})}),E.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-orange-400 tracking-wider title-animated mb-3",children:"Dokkan Patch Maker"}),E.jsx("p",{className:"text-indigo-200 text-md sm:text-lg mb-8",children:v?"Create an account":"Sign in to continue"}),!1,E.jsxs("form",{onSubmit:S,className:"space-y-5",children:[E.jsx(_e,{label:"Email",type:"email",value:a,onChange:e,placeholder:"your@email.com",disabled:f||!1}),E.jsx(_e,{label:"Password",type:"password",value:n,onChange:r,placeholder:"",disabled:f||!1}),l&&E.jsx("p",{className:"text-red-400 text-sm bg-red-900 bg-opacity-40 p-2 rounded-md",children:l}),E.jsxs("button",{type:"submit",disabled:f||!a||!n||!1,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-orange-400 font-rajdhani text-lg",children:[f&&E.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),v?"Sign Up":"Sign In"]})]}),E.jsxs("div",{className:"my-6 flex items-center",children:[E.jsx("hr",{className:"flex-grow border-t border-indigo-600"}),E.jsx("span",{className:"px-3 text-indigo-400 text-sm",children:"OR"}),E.jsx("hr",{className:"flex-grow border-t border-indigo-600"})]}),E.jsxs("button",{onClick:A,disabled:f||!1,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-blue-400 font-rajdhani text-lg",children:[f&&v&&E.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),E.jsx("i",{className:"fab fa-google mr-2"})," Sign In with Google"]})]}),E.jsxs("footer",{className:"absolute bottom-4 text-center w-full text-xs text-indigo-400 opacity-80",children:[E.jsxs("p",{children:[" ",new Date().getFullYear()," Dokkan Patch Maker by @RapiddRobbiee. For personal and educational use only."]}),E.jsx("p",{className:"text-xs opacity-50",children:"Powered by Google Firebase & Gemini"})]})]})},g0=!0,tu=()=>({cardForms:[vp()],cardUniqueInfos:[],passiveSkillSets:[],leaderSkillSets:[],specialSets:[],activeSkillSets:[],cardSpecials:[],cardActiveSkills:[],cardStandbySkills:[],passiveSkillEffects:[],effectPacks:[],standbySkillSets:[],finishSkillSets:[],standbySkillSetFinishSkillSetRelations:[],finishSpecials:[],battleParams:[],isEZA:!1}),ik=()=>{const[a,e]=Pe.useState(null),[n,r]=Pe.useState(g0),[l,u]=Pe.useState(tu()),[f,g]=Pe.useState(""),[v,p]=Pe.useState(!1),[S,A]=Pe.useState(!1),[N,L]=Pe.useState(null),[X,Y]=Pe.useState(null),[Z,re]=Pe.useState(!1),[he,ve]=Pe.useState("cardForms"),[ie,H]=Pe.useState(null),[ue,C]=Pe.useState(!1),[k,O]=Pe.useState(null),[x,M]=Pe.useState(!1),q=Pe.useRef(null);Pe.useEffect(()=>{{cb();const G=OC(async ge=>{if(e(ge),ge){A(!0),Y(null);let Ce=null,Me=null;try{const Qe=await Kh(ge.uid,"slot1");if(Qe&&Qe.patchData)Ce=Qe.patchData,Me="slot1";else{const Lt=await Kh(ge.uid,"slot2");Lt&&Lt.patchData&&(Ce=Lt.patchData,Me="slot2")}Ce&&Me?(u(Ce),g(""),ve("cardForms"),Y(Me)):(u(tu()),Y(null))}catch(Qe){console.error("Error auto-loading patch state from Firestore:",Qe),alert(`Failed to auto-load your saved patch: ${Qe instanceof Error?Qe.message:"Unknown error"}. Starting fresh.`),u(tu()),Y(null)}finally{A(!1)}}else u(tu()),g(""),Y(null);r(!1)});return()=>G()}},[]);const P=async()=>{try{await LC(),alert("Signed out successfully.")}catch(G){console.error("Sign out error:",G),alert(`Failed to sign out: ${G instanceof Error?G.message:"Unknown error"}`)}},Ke=async G=>{var Ce;const ge=(Ce=G.target.files)==null?void 0:Ce[0];if(ge){C(!0),O(null),H(null);try{const Me=await BR(ge);H(Me),alert("Database loaded successfully!")}catch(Me){console.error("Error loading database:",Me),O(Me instanceof Error?Me.message:"Unknown error loading database."),alert(`Error loading database: ${Me instanceof Error?Me.message:"Unknown error"}`)}finally{C(!1),q.current&&(q.current.value="")}}},_t=G=>{var ge;u(G),g(""),ve("cardForms"),M(!1),Y(null),alert(`Character "${((ge=G.cardForms[0])==null?void 0:ge.name)||"Unknown"}" loaded successfully! Remember to save to a cloud slot if needed.`)},ae=Pe.useCallback((G,ge)=>{u(Ce=>{const Me=Ce.cardForms[G];let Qe={...Ce};const Lt=Ce.cardForms.map((We,wt)=>wt===G?ge:We);if(Qe.cardForms=Lt,Me.id!==ge.id&&na(Me.id)){const We=Me.id,wt=ge.id,ke=Mt.CARD_UNIQUE_INFO+We;if(na(ke)){const qe=Mt.CARD_UNIQUE_INFO+wt;Qe.cardUniqueInfos=Ce.cardUniqueInfos.map(ct=>ct.id===ke?{...ct,id:qe}:ct),ge.card_unique_info_id===ke&&(ge.card_unique_info_id=qe)}[{key:"passiveSkillSets",idField:"passive_skill_set_id",prefix:Mt.PASSIVE_SKILL_SET},{key:"leaderSkillSets",idField:"leader_skill_set_id",prefix:Mt.LEADER_SKILL_SET},{key:"activeSkillSets",idField:"active_skill_set_id_ref",prefix:Mt.ACTIVE_SKILL_SET},{key:"standbySkillSets",idField:"standby_skill_set_id_ref",prefix:Mt.STANDBY_SKILL_SET}].forEach(qe=>{const ct=qe.prefix+We;if(na(ct)&&Me[qe.idField]===ct){const bt=qe.prefix+wt;Qe[qe.key]=Ce[qe.key].map(Ii=>Ii.id===ct?{...Ii,id:bt}:Ii),qe.idField!=="id"&&(ge[qe.idField]=bt)}});const $n=Mt.SPECIAL_SET+We;if(na($n)){const qe=Mt.SPECIAL_SET+wt;Qe.specialSets=Ce.specialSets.map(ct=>ct.id===$n?{...ct,id:qe}:ct),Qe.cardSpecials=Qe.cardSpecials.map(ct=>ct.card_id===We&&ct.special_set_id===$n?{...ct,card_id:wt,special_set_id:qe}:ct.card_id===We?{...ct,card_id:wt}:ct)}else Qe.cardSpecials=Qe.cardSpecials.map(qe=>qe.card_id===We?{...qe,card_id:wt}:qe);const fn=Me.active_skill_set_id_ref,zt=ge.active_skill_set_id_ref;fn&&zt&&(Qe.cardActiveSkills=Qe.cardActiveSkills.map(qe=>qe.card_id===We&&qe.active_skill_set_id===fn?{...qe,card_id:wt,active_skill_set_id:zt,id:`${wt}${zt}`}:qe));const Fi=Me.standby_skill_set_id_ref,mt=ge.standby_skill_set_id_ref;if(Fi&&mt&&(Qe.cardStandbySkills=Qe.cardStandbySkills.map(qe=>qe.card_id===We&&qe.standby_skill_set_id===Fi?{...qe,card_id:wt,standby_skill_set_id:mt,id:`${wt}${mt}`}:qe)),Ce.isEZA&&Ce.optimalAwakeningGrowth&&Ce.baseCardIdForEZA===We){let qe={...Ce.optimalAwakeningGrowth};const ct=Mt.OPTIMAL_AWAKENING_GROWTH_ID+wt,bt=Mt.OPTIMAL_AWAKENING_GROWTH_TYPE_ID+wt;na(qe.id)&&qe.id.endsWith(We)&&(qe.id=ct),na(qe.optimal_awakening_grow_type)&&qe.optimal_awakening_grow_type.endsWith(We)&&(qe.optimal_awakening_grow_type=bt),Qe.optimalAwakeningGrowth=qe,Qe.baseCardIdForEZA=wt}Qe.cardForms=Ce.cardForms.map((qe,ct)=>ct===G?ge:qe)}return Qe}),Y(null)},[]),Te=Pe.useCallback(()=>{const G=ni(),ge=Mt.CARD_UNIQUE_INFO+G,Ce=Mt.PASSIVE_SKILL_SET+G,Me=Mt.LEADER_SKILL_SET+G,Qe=Mt.ACTIVE_SKILL_SET+G,Lt=Mt.STANDBY_SKILL_SET+G,We=Mt.SPECIAL_SET+G,wt={...vp(),id:G,name:`New Card ${G}`,card_unique_info_id:ge,passive_skill_set_id:Ce,leader_skill_set_id:Me,active_skill_set_id_ref:Qe,standby_skill_set_id_ref:Lt},ke={id:ge,name:`Character Name for ${G}`},ut={id:Ce,name:`Passive for ${G}`,description:"",skills:[]},$n={id:Me,name:`Leader for ${G}`,description:"",skills:[]},fn={id:Qe,name:`Active for ${G}`,effect_description:"",condition_description:"",turn:1,exec_limit:1,skills:[],costume_special_view_id:0},zt={id:Lt,name:`Standby for ${G}`,ingame_icon_path:"",effect_description:"",condition_description:"",exec_limit:1,skills:[],costume_special_view_id:0},Fi={id:We,name:`Special for ${G}`,description:"",skills:[],aim_target:0,increase_rate:180,lv_bonus:25,is_inactive:0},mt=Ed(G,We),qe={id:`${G}${Qe}`,card_id:G,active_skill_set_id:Qe},ct={id:`${G}${Lt}`,card_id:G,standby_skill_set_id:Lt};u(bt=>({...bt,cardForms:[...bt.cardForms,wt],cardUniqueInfos:[...bt.cardUniqueInfos,ke],passiveSkillSets:[...bt.passiveSkillSets,ut],leaderSkillSets:[...bt.leaderSkillSets,$n],activeSkillSets:[...bt.activeSkillSets,fn],standbySkillSets:[...bt.standbySkillSets,zt],specialSets:[...bt.specialSets,Fi],cardSpecials:[...bt.cardSpecials,mt],cardActiveSkills:[...bt.cardActiveSkills,qe],cardStandbySkills:[...bt.cardStandbySkills,ct]})),Y(null)},[]),Re=Pe.useCallback((G,ge)=>{u(Ce=>{const Me=We=>na(We),Qe=We=>We.replace(new RegExp(`^(${Object.values(Mt).join("|")})`),"");let Lt;return Me(Ce.cardForms[G].card_unique_info_id)&&Qe(Ce.cardForms[G].card_unique_info_id)===ge&&(Lt=Ce.cardForms[G].card_unique_info_id),{...Ce,cardForms:Ce.cardForms.filter((We,wt)=>wt!==G),cardUniqueInfos:Lt?Ce.cardUniqueInfos.filter(We=>We.id!==Lt):Ce.cardUniqueInfos,cardSpecials:Ce.cardSpecials.filter(We=>We.card_id!==ge),cardActiveSkills:Ce.cardActiveSkills.filter(We=>We.card_id!==ge),cardStandbySkills:Ce.cardStandbySkills.filter(We=>We.card_id!==ge),isEZA:Ce.baseCardIdForEZA===ge?!1:Ce.isEZA,baseCardIdForEZA:Ce.baseCardIdForEZA===ge?void 0:Ce.baseCardIdForEZA,optimalAwakeningGrowth:Ce.baseCardIdForEZA===ge?void 0:Ce.optimalAwakeningGrowth}}),Y(null)},[]),tt=Pe.useCallback(()=>{p(!0);try{const G=RR(l);g(G)}catch(G){console.error("Error generating SQL:",G),g(`-- Error generating SQL: ${G instanceof Error?G.message:String(G)}`)}finally{p(!1)}},[l]),B=async G=>{if(!a)return alert("Login system is disabled or you are not signed in. Cannot save to cloud."),!1;L(G);try{return await iR(a.uid,G,l),Y(G),alert(`Patch saved successfully to ${G.replace("s","S")}!`),!0}catch(ge){return console.error(`Error saving patch to ${G}:`,ge),alert(`Failed to save patch to ${G.replace("s","S")}: ${ge instanceof Error?ge.message:"Unknown error"}`),!1}finally{L(null)}},me=async G=>{if(!a)return alert("Login system is disabled or you are not signed in. Cannot load from cloud."),!1;if(window.confirm(`Loading from ${G.replace("s","S")} will overwrite your current unsaved changes. Are you sure?`)){A(!0);try{const ge=await Kh(a.uid,G);return ge&&ge.patchData?(u(ge.patchData),g(""),ve("cardForms"),Y(G),alert(`Successfully loaded patch from ${G.replace("s","S")}.`),re(!1),!0):(alert(`No data found in ${G.replace("s","S")} or failed to load. Your current work remains unchanged.`),!1)}catch(ge){return console.error(`Error loading patch from ${G}:`,ge),alert(`Failed to load patch from ${G.replace("s","S")}: ${ge instanceof Error?ge.message:"Unknown error"}`),!1}finally{A(!1)}}return!1},Se=()=>{window.confirm("Are you sure you want to reset the form? This will clear all current unsaved data and start fresh.")&&(u(tu()),g(""),ve("cardForms"),Y(null),alert("Form has been reset."))},de=!!N||S||v||ue||n,Ee=[{name:"Card Forms",id:"cardForms",icon:"fa-id-card"},{name:"Shared Skill Sets",id:"skillSets",icon:"fa-sitemap"},{name:"Standby & Finish",id:"standbyFinish",icon:"fa-hourglass-half"},{name:"EZA Details",id:"ezaDetails",icon:"fa-bolt"},{name:"Misc Tables",id:"miscTables",icon:"fa-table-list"},{name:"Generated SQL",id:"sqlOutput",icon:"fa-code"}];return n?E.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-indigo-900 text-orange-400 font-rajdhani",children:[E.jsx("i",{className:"fas fa-spinner fa-spin text-5xl"}),E.jsx("p",{className:"ml-4 text-2xl",children:"Loading Application..."})]}):a?E.jsxs("div",{className:"min-h-screen p-4 flex flex-col bg-indigo-900 text-indigo-100",children:[E.jsx("header",{className:"mb-6",children:E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("i",{className:"fas fa-dragon text-6xl text-orange-400 p-3 bg-orange-500 bg-opacity-20 rounded-full shadow-lg",style:{textShadow:"0 0 10px rgba(251, 146, 60, 0.7)"}}),E.jsx("h1",{className:"text-5xl font-bold text-orange-400 tracking-wider font-rajdhani title-animated",children:"Dokkan Patch Maker"})]}),E.jsxs("div",{className:"flex items-center space-x-4",children:[a&&E.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[X&&E.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-600 text-white rounded-md font-semibold",children:["Active: ",X.replace("s","S")]}),!X&&E.jsx("span",{className:"text-xs px-2 py-1 bg-gray-600 text-white rounded-md font-semibold",children:"Active: Unsaved"}),a.photoURL&&E.jsx("img",{src:a.photoURL,alt:"User",className:"w-8 h-8 rounded-full"}),E.jsx("span",{className:"text-indigo-200 hidden md:inline",children:a.displayName||a.email}),E.jsxs("button",{onClick:P,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-1.5 px-3 rounded-lg transition-all duration-150 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-red-400 font-rajdhani text-xs",title:"Sign Out",disabled:de,children:[E.jsx("i",{className:"fas fa-sign-out-alt"}),E.jsx("span",{className:"ml-1 hidden lg:inline",children:"Sign Out"})]})]}),!1,E.jsxs("div",{className:"flex flex-col items-end",children:[E.jsxs("label",{htmlFor:"db-upload",className:`bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-3 rounded-lg transition-all duration-150 ease-in-out flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-purple-400 font-rajdhani text-sm h-[38px] ${ue?"cursor-not-allowed opacity-70":"cursor-pointer"}`,children:[E.jsx("i",{className:"fas fa-database mr-2"}),ue?"Loading DB...":ie?"DB Loaded":"Select .db File"]}),E.jsx("input",{type:"file",id:"db-upload",ref:q,className:"hidden",accept:".db, .sqlite, .sqlite3",onChange:Ke,disabled:de}),k&&E.jsx("p",{className:"text-xs text-red-400 mt-1 self-center",children:k})]})]})]})}),E.jsxs("div",{className:"flex-grow flex",children:[E.jsxs("aside",{className:"w-1/5 pr-4",children:[E.jsx("nav",{className:"space-y-2",children:Ee.map(G=>E.jsxs("button",{onClick:()=>ve(G.id),className:`w-full text-left px-4 py-3 rounded-lg transition-all duration-200 ease-in-out focus:outline-none font-rajdhani font-semibold text-lg shadow-md hover:shadow-lg
                  ${he===G.id?"bg-orange-500 text-white transform scale-105 ring-2 ring-orange-300":"bg-indigo-700 hover:bg-indigo-600 hover:text-orange-300"}`,disabled:de&&he!=="sqlOutput",children:[E.jsx("i",{className:`fas ${G.icon} mr-3 w-5 text-center`}),G.name]},G.id))}),E.jsxs("div",{className:"mt-8 space-y-3",children:[E.jsxs("button",{onClick:()=>a?re(!0):alert("Login system is currently disabled or you are not signed in."),disabled:!a||de,className:"w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-2.5 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-sky-400 font-rajdhani text-md",title:a?"Manage Cloud Saves":"Login to enable cloud saves",children:[E.jsx("i",{className:"fas fa-cloud-upload-alt mr-2"}),"Cloud Saves"]}),E.jsx("hr",{className:"border-indigo-600 my-3"}),E.jsxs("button",{onClick:()=>ie?M(!0):alert("Please load a database file first."),disabled:!ie||de,className:"w-full bg-teal-500 hover:bg-teal-600 text-white font-bold py-2.5 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-teal-400 font-rajdhani text-md",children:[E.jsx("i",{className:"fas fa-user-plus mr-2"})," Load from DB"]}),E.jsx("button",{onClick:tt,disabled:v||de,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2.5 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-green-400 font-rajdhani text-md",children:v?E.jsxs(E.Fragment,{children:[E.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Generating..."]}):E.jsxs(E.Fragment,{children:[E.jsx("i",{className:"fas fa-cogs mr-2"}),"Generate SQL Patch"]})}),E.jsxs("button",{onClick:Se,disabled:de,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2.5 px-4 rounded-lg transition-all duration-150 ease-in-out disabled:opacity-60 flex items-center justify-center shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-red-400 font-rajdhani text-md",children:[E.jsx("i",{className:"fas fa-undo mr-2"})," Reset Form"]})]})]}),E.jsx("main",{className:"w-4/5 pl-4",children:S&&he!=="sqlOutput"&&g0?E.jsxs("div",{className:"flex-grow flex items-center justify-center bg-indigo-800 bg-opacity-50 rounded-lg shadow-lg",children:[E.jsx("i",{className:"fas fa-spinner fa-spin text-4xl text-orange-400"}),E.jsx("p",{className:"ml-3 text-xl text-orange-300",children:"Loading Patch Data..."})]}):E.jsxs("div",{className:"content-animated-fade-in",children:[he==="cardForms"&&E.jsxs(E.Fragment,{children:[l.cardForms.map((G,ge)=>E.jsx(CR,{formIndex:ge,cardForm:G,updateCardForm:ae,removeCardForm:()=>Re(ge,G.id),patchState:l,setPatchState:u},G.id||`form-${ge}`)),E.jsxs("button",{onClick:Te,disabled:de,className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-150 ease-in-out flex items-center justify-center text-md font-rajdhani disabled:opacity-60",children:[E.jsx("i",{className:"fas fa-plus mr-2"})," Add New Card Form"]})]}),he==="skillSets"&&E.jsx(kR,{patchState:l,setPatchState:u}),he==="standbyFinish"&&E.jsx(NR,{patchState:l,setPatchState:u}),he==="ezaDetails"&&E.jsx(DR,{patchState:l,setPatchState:u}),he==="miscTables"&&E.jsx(OR,{patchState:l,setPatchState:u}),he==="sqlOutput"&&E.jsx(xR,{sql:f})]})})]}),x&&ie&&E.jsx(ek,{isOpen:x,onClose:()=>M(!1),dbInstance:ie,onCharacterSelected:_t,elementTypes:qE,rarityTypes:HE}),Z&&a&&E.jsx(tk,{isOpen:Z,onClose:()=>re(!1),currentUser:a,lastLoadedSlot:X,onSaveToSlot:B,onLoadFromSlot:me,isSavingSlot1:N==="slot1",isSavingSlot2:N==="slot2",isGlobalLoading:S}),E.jsxs("footer",{className:"mt-8 text-center text-xs text-indigo-400 opacity-70",children:["Dokkan Patch Maker v0.9.3 by @RapiddRobbiee",a&&"dokkanpatchmakerauth"&&E.jsx("span",{className:"mx-1",children:"|"}),a&&"dokkanpatchmakerauth"&&E.jsxs("span",{className:"opacity-80",children:["Cloud Sync Enabled (","dokkanpatchmakerauth",")"]}),!1,!1]})]}):E.jsx(nk,{})},QE=document.getElementById("root");if(!QE)throw new Error("Could not find root element to mount to");const ak=NT.createRoot(QE);ak.render(E.jsx(TT.StrictMode,{children:E.jsx(ik,{})}));
